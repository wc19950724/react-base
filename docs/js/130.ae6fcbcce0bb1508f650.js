/*! For license information please see 130.ae6fcbcce0bb1508f650.js.LICENSE.txt */
(self.webpackChunkreact_base=self.webpackChunkreact_base||[]).push([[130],{7754:(t,e)=>{var r;!function(){"use strict";var n={}.hasOwnProperty;function i(){for(var t=[],e=0;e<arguments.length;e++){var r=arguments[e];if(r){var o=typeof r;if("string"===o||"number"===o)t.push(r);else if(Array.isArray(r)&&r.length){var s=i.apply(null,r);s&&t.push(s)}else if("object"===o)for(var a in r)n.call(r,a)&&r[a]&&t.push(a)}}return t.join(" ")}t.exports?(i.default=i,t.exports=i):void 0===(r=function(){return i}.apply(e,[]))||(t.exports=r)}()},2646:t=>{var e=/^\s+|\s+$/g,r=/^[-+]0x[0-9a-f]+$/i,n=/^0b[01]+$/i,i=/^0o[0-7]+$/i,o=parseInt,s=Object.prototype.toString;function a(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function c(t){if("number"==typeof t)return t;if(function(t){return"symbol"==typeof t||function(t){return!!t&&"object"==typeof t}(t)&&"[object Symbol]"==s.call(t)}(t))return NaN;if(a(t)){var c="function"==typeof t.valueOf?t.valueOf():t;t=a(c)?c+"":c}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(e,"");var l=n.test(t);return l||i.test(t)?o(t.slice(2),l?2:8):r.test(t)?NaN:+t}t.exports=function(t,e,r){return void 0===r&&(r=e,e=void 0),void 0!==r&&(r=(r=c(r))==r?r:0),void 0!==e&&(e=(e=c(e))==e?e:0),function(t,e,r){return t==t&&(void 0!==r&&(t=t<=r?t:r),void 0!==e&&(t=t>=e?t:e)),t}(c(t),e,r)}},2323:(t,e,r)=>{t=r.nmd(t);var n="__lodash_hash_undefined__",i=9007199254740991,o="[object Arguments]",s="[object Boolean]",a="[object Date]",c="[object Function]",l="[object GeneratorFunction]",u="[object Map]",h="[object Number]",f="[object Object]",d="[object Promise]",p="[object RegExp]",g="[object Set]",v="[object String]",_="[object Symbol]",y="[object WeakMap]",m="[object ArrayBuffer]",b="[object DataView]",x="[object Float32Array]",w="[object Float64Array]",S="[object Int8Array]",C="[object Int16Array]",O="[object Int32Array]",T="[object Uint8Array]",j="[object Uint8ClampedArray]",k="[object Uint16Array]",A="[object Uint32Array]",E=/\w*$/,M=/^\[object .+?Constructor\]$/,P=/^(?:0|[1-9]\d*)$/,D={};D[o]=D["[object Array]"]=D[m]=D[b]=D[s]=D[a]=D[x]=D[w]=D[S]=D[C]=D[O]=D[u]=D[h]=D[f]=D[p]=D[g]=D[v]=D[_]=D[T]=D[j]=D[k]=D[A]=!0,D["[object Error]"]=D[c]=D[y]=!1;var R="object"==typeof r.g&&r.g&&r.g.Object===Object&&r.g,L="object"==typeof self&&self&&self.Object===Object&&self,F=R||L||Function("return this")(),B=e&&!e.nodeType&&e,I=B&&t&&!t.nodeType&&t,N=I&&I.exports===B;function V(t,e){return t.set(e[0],e[1]),t}function W(t,e){return t.add(e),t}function U(t,e,r,n){var i=-1,o=t?t.length:0;for(n&&o&&(r=t[++i]);++i<o;)r=e(r,t[i],i,t);return r}function z(t){var e=!1;if(null!=t&&"function"!=typeof t.toString)try{e=!!(t+"")}catch(t){}return e}function X(t){var e=-1,r=Array(t.size);return t.forEach((function(t,n){r[++e]=[n,t]})),r}function Y(t,e){return function(r){return t(e(r))}}function H(t){var e=-1,r=Array(t.size);return t.forEach((function(t){r[++e]=t})),r}var G,q=Array.prototype,K=Function.prototype,$=Object.prototype,J=F["__core-js_shared__"],Z=(G=/[^.]+$/.exec(J&&J.keys&&J.keys.IE_PROTO||""))?"Symbol(src)_1."+G:"",Q=K.toString,tt=$.hasOwnProperty,et=$.toString,rt=RegExp("^"+Q.call(tt).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),nt=N?F.Buffer:void 0,it=F.Symbol,ot=F.Uint8Array,st=Y(Object.getPrototypeOf,Object),at=Object.create,ct=$.propertyIsEnumerable,lt=q.splice,ut=Object.getOwnPropertySymbols,ht=nt?nt.isBuffer:void 0,ft=Y(Object.keys,Object),dt=Ft(F,"DataView"),pt=Ft(F,"Map"),gt=Ft(F,"Promise"),vt=Ft(F,"Set"),_t=Ft(F,"WeakMap"),yt=Ft(Object,"create"),mt=Wt(dt),bt=Wt(pt),xt=Wt(gt),wt=Wt(vt),St=Wt(_t),Ct=it?it.prototype:void 0,Ot=Ct?Ct.valueOf:void 0;function Tt(t){var e=-1,r=t?t.length:0;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function jt(t){var e=-1,r=t?t.length:0;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function kt(t){var e=-1,r=t?t.length:0;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function At(t){this.__data__=new jt(t)}function Et(t,e,r){var n=t[e];tt.call(t,e)&&Ut(n,r)&&(void 0!==r||e in t)||(t[e]=r)}function Mt(t,e){for(var r=t.length;r--;)if(Ut(t[r][0],e))return r;return-1}function Pt(t,e,r,n,i,d,y){var M;if(n&&(M=d?n(t,i,d,y):n(t)),void 0!==M)return M;if(!Gt(t))return t;var P=zt(t);if(P){if(M=function(t){var e=t.length,r=t.constructor(e);return e&&"string"==typeof t[0]&&tt.call(t,"index")&&(r.index=t.index,r.input=t.input),r}(t),!e)return function(t,e){var r=-1,n=t.length;for(e||(e=Array(n));++r<n;)e[r]=t[r];return e}(t,M)}else{var R=It(t),L=R==c||R==l;if(Yt(t))return function(t,e){if(e)return t.slice();var r=new t.constructor(t.length);return t.copy(r),r}(t,e);if(R==f||R==o||L&&!d){if(z(t))return d?t:{};if(M=function(t){return"function"!=typeof t.constructor||Vt(t)?{}:Gt(e=st(t))?at(e):{};var e}(L?{}:t),!e)return function(t,e){return Rt(t,Bt(t),e)}(t,function(t,e){return t&&Rt(e,qt(e),t)}(M,t))}else{if(!D[R])return d?t:{};M=function(t,e,r,n){var i,o=t.constructor;switch(e){case m:return Dt(t);case s:case a:return new o(+t);case b:return function(t,e){var r=e?Dt(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.byteLength)}(t,n);case x:case w:case S:case C:case O:case T:case j:case k:case A:return function(t,e){var r=e?Dt(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.length)}(t,n);case u:return function(t,e,r){return U(e?r(X(t),!0):X(t),V,new t.constructor)}(t,n,r);case h:case v:return new o(t);case p:return function(t){var e=new t.constructor(t.source,E.exec(t));return e.lastIndex=t.lastIndex,e}(t);case g:return function(t,e,r){return U(e?r(H(t),!0):H(t),W,new t.constructor)}(t,n,r);case _:return i=t,Ot?Object(Ot.call(i)):{}}}(t,R,Pt,e)}}y||(y=new At);var F=y.get(t);if(F)return F;if(y.set(t,M),!P)var B=r?function(t){return function(t,e,r){var n=e(t);return zt(t)?n:function(t,e){for(var r=-1,n=e.length,i=t.length;++r<n;)t[i+r]=e[r];return t}(n,r(t))}(t,qt,Bt)}(t):qt(t);return function(t,e){for(var r=-1,n=t?t.length:0;++r<n&&!1!==e(t[r],r););}(B||t,(function(i,o){B&&(i=t[o=i]),Et(M,o,Pt(i,e,r,n,o,t,y))})),M}function Dt(t){var e=new t.constructor(t.byteLength);return new ot(e).set(new ot(t)),e}function Rt(t,e,r,n){r||(r={});for(var i=-1,o=e.length;++i<o;){var s=e[i],a=n?n(r[s],t[s],s,r,t):void 0;Et(r,s,void 0===a?t[s]:a)}return r}function Lt(t,e){var r,n,i=t.__data__;return("string"==(n=typeof(r=e))||"number"==n||"symbol"==n||"boolean"==n?"__proto__"!==r:null===r)?i["string"==typeof e?"string":"hash"]:i.map}function Ft(t,e){var r=function(t,e){return null==t?void 0:t[e]}(t,e);return function(t){return!(!Gt(t)||(e=t,Z&&Z in e))&&(Ht(t)||z(t)?rt:M).test(Wt(t));var e}(r)?r:void 0}Tt.prototype.clear=function(){this.__data__=yt?yt(null):{}},Tt.prototype.delete=function(t){return this.has(t)&&delete this.__data__[t]},Tt.prototype.get=function(t){var e=this.__data__;if(yt){var r=e[t];return r===n?void 0:r}return tt.call(e,t)?e[t]:void 0},Tt.prototype.has=function(t){var e=this.__data__;return yt?void 0!==e[t]:tt.call(e,t)},Tt.prototype.set=function(t,e){return this.__data__[t]=yt&&void 0===e?n:e,this},jt.prototype.clear=function(){this.__data__=[]},jt.prototype.delete=function(t){var e=this.__data__,r=Mt(e,t);return!(r<0||(r==e.length-1?e.pop():lt.call(e,r,1),0))},jt.prototype.get=function(t){var e=this.__data__,r=Mt(e,t);return r<0?void 0:e[r][1]},jt.prototype.has=function(t){return Mt(this.__data__,t)>-1},jt.prototype.set=function(t,e){var r=this.__data__,n=Mt(r,t);return n<0?r.push([t,e]):r[n][1]=e,this},kt.prototype.clear=function(){this.__data__={hash:new Tt,map:new(pt||jt),string:new Tt}},kt.prototype.delete=function(t){return Lt(this,t).delete(t)},kt.prototype.get=function(t){return Lt(this,t).get(t)},kt.prototype.has=function(t){return Lt(this,t).has(t)},kt.prototype.set=function(t,e){return Lt(this,t).set(t,e),this},At.prototype.clear=function(){this.__data__=new jt},At.prototype.delete=function(t){return this.__data__.delete(t)},At.prototype.get=function(t){return this.__data__.get(t)},At.prototype.has=function(t){return this.__data__.has(t)},At.prototype.set=function(t,e){var r=this.__data__;if(r instanceof jt){var n=r.__data__;if(!pt||n.length<199)return n.push([t,e]),this;r=this.__data__=new kt(n)}return r.set(t,e),this};var Bt=ut?Y(ut,Object):function(){return[]},It=function(t){return et.call(t)};function Nt(t,e){return!!(e=null==e?i:e)&&("number"==typeof t||P.test(t))&&t>-1&&t%1==0&&t<e}function Vt(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||$)}function Wt(t){if(null!=t){try{return Q.call(t)}catch(t){}try{return t+""}catch(t){}}return""}function Ut(t,e){return t===e||t!=t&&e!=e}(dt&&It(new dt(new ArrayBuffer(1)))!=b||pt&&It(new pt)!=u||gt&&It(gt.resolve())!=d||vt&&It(new vt)!=g||_t&&It(new _t)!=y)&&(It=function(t){var e=et.call(t),r=e==f?t.constructor:void 0,n=r?Wt(r):void 0;if(n)switch(n){case mt:return b;case bt:return u;case xt:return d;case wt:return g;case St:return y}return e});var zt=Array.isArray;function Xt(t){return null!=t&&function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=i}(t.length)&&!Ht(t)}var Yt=ht||function(){return!1};function Ht(t){var e=Gt(t)?et.call(t):"";return e==c||e==l}function Gt(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function qt(t){return Xt(t)?function(t,e){var r=zt(t)||function(t){return function(t){return function(t){return!!t&&"object"==typeof t}(t)&&Xt(t)}(t)&&tt.call(t,"callee")&&(!ct.call(t,"callee")||et.call(t)==o)}(t)?function(t,e){for(var r=-1,n=Array(t);++r<t;)n[r]=e(r);return n}(t.length,String):[],n=r.length,i=!!n;for(var s in t)!e&&!tt.call(t,s)||i&&("length"==s||Nt(s,n))||r.push(s);return r}(t):function(t){if(!Vt(t))return ft(t);var e=[];for(var r in Object(t))tt.call(t,r)&&"constructor"!=r&&e.push(r);return e}(t)}t.exports=function(t){return Pt(t,!0,!0)}},5614:(t,e,r)=>{var n="object"==typeof r.g&&r.g&&r.g.Object===Object&&r.g,i="object"==typeof self&&self&&self.Object===Object&&self,o=(n||i||Function("return this")()).isFinite;t.exports=function(t){return"number"==typeof t&&o(t)}},1330:t=>{var e=Object.prototype.toString,r=Array.isArray;t.exports=function(t){return"string"==typeof t||!r(t)&&function(t){return!!t&&"object"==typeof t}(t)&&"[object String]"==e.call(t)}},5853:t=>{t.exports=function(t){return void 0===t}},1970:(t,e,r)=>{var n,i="__lodash_hash_undefined__",o="[object Function]",s="[object GeneratorFunction]",a="[object Symbol]",c=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,l=/^\w*$/,u=/^\./,h=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,f=/\\(\\)?/g,d=/^\[object .+?Constructor\]$/,p="object"==typeof r.g&&r.g&&r.g.Object===Object&&r.g,g="object"==typeof self&&self&&self.Object===Object&&self,v=p||g||Function("return this")(),_=Array.prototype,y=Function.prototype,m=Object.prototype,b=v["__core-js_shared__"],x=(n=/[^.]+$/.exec(b&&b.keys&&b.keys.IE_PROTO||""))?"Symbol(src)_1."+n:"",w=y.toString,S=m.hasOwnProperty,C=m.toString,O=RegExp("^"+w.call(S).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),T=v.Symbol,j=_.splice,k=B(v,"Map"),A=B(Object,"create"),E=T?T.prototype:void 0,M=E?E.toString:void 0;function P(t){var e=-1,r=t?t.length:0;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function D(t){var e=-1,r=t?t.length:0;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function R(t){var e=-1,r=t?t.length:0;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function L(t,e){for(var r,n,i=t.length;i--;)if((r=t[i][0])===(n=e)||r!=r&&n!=n)return i;return-1}function F(t,e){var r,n,i=t.__data__;return("string"==(n=typeof(r=e))||"number"==n||"symbol"==n||"boolean"==n?"__proto__"!==r:null===r)?i["string"==typeof e?"string":"hash"]:i.map}function B(t,e){var r=function(t,e){return null==t?void 0:t[e]}(t,e);return function(t){if(!z(t)||x&&x in t)return!1;var e=U(t)||function(t){var e=!1;if(null!=t&&"function"!=typeof t.toString)try{e=!!(t+"")}catch(t){}return e}(t)?O:d;return e.test(function(t){if(null!=t){try{return w.call(t)}catch(t){}try{return t+""}catch(t){}}return""}(t))}(r)?r:void 0}P.prototype.clear=function(){this.__data__=A?A(null):{}},P.prototype.delete=function(t){return this.has(t)&&delete this.__data__[t]},P.prototype.get=function(t){var e=this.__data__;if(A){var r=e[t];return r===i?void 0:r}return S.call(e,t)?e[t]:void 0},P.prototype.has=function(t){var e=this.__data__;return A?void 0!==e[t]:S.call(e,t)},P.prototype.set=function(t,e){return this.__data__[t]=A&&void 0===e?i:e,this},D.prototype.clear=function(){this.__data__=[]},D.prototype.delete=function(t){var e=this.__data__,r=L(e,t);return!(r<0||(r==e.length-1?e.pop():j.call(e,r,1),0))},D.prototype.get=function(t){var e=this.__data__,r=L(e,t);return r<0?void 0:e[r][1]},D.prototype.has=function(t){return L(this.__data__,t)>-1},D.prototype.set=function(t,e){var r=this.__data__,n=L(r,t);return n<0?r.push([t,e]):r[n][1]=e,this},R.prototype.clear=function(){this.__data__={hash:new P,map:new(k||D),string:new P}},R.prototype.delete=function(t){return F(this,t).delete(t)},R.prototype.get=function(t){return F(this,t).get(t)},R.prototype.has=function(t){return F(this,t).has(t)},R.prototype.set=function(t,e){return F(this,t).set(t,e),this};var I=V((function(t){var e;t=null==(e=t)?"":function(t){if("string"==typeof t)return t;if(X(t))return M?M.call(t):"";var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}(e);var r=[];return u.test(t)&&r.push(""),t.replace(h,(function(t,e,n,i){r.push(n?i.replace(f,"$1"):e||t)})),r}));function N(t){if("string"==typeof t||X(t))return t;var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}function V(t,e){if("function"!=typeof t||e&&"function"!=typeof e)throw new TypeError("Expected a function");var r=function(){var n=arguments,i=e?e.apply(this,n):n[0],o=r.cache;if(o.has(i))return o.get(i);var s=t.apply(this,n);return r.cache=o.set(i,s),s};return r.cache=new(V.Cache||R),r}V.Cache=R;var W=Array.isArray;function U(t){var e=z(t)?C.call(t):"";return e==o||e==s}function z(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function X(t){return"symbol"==typeof t||function(t){return!!t&&"object"==typeof t}(t)&&C.call(t)==a}t.exports=function(t,e,r){e=function(t,e){if(W(t))return!1;var r=typeof t;return!("number"!=r&&"symbol"!=r&&"boolean"!=r&&null!=t&&!X(t))||l.test(t)||!c.test(t)||null!=e&&t in Object(e)}(e,t)?[e]:function(t){return W(t)?t:I(t)}(e);var n=-1,i=e.length;for(i||(t=void 0,i=1);++n<i;){var o=null==t?void 0:t[N(e[n])];void 0===o&&(n=i,o=r),t=U(o)?o.call(t):o}return t}},8848:(t,e,r)=>{var n,i="__lodash_hash_undefined__",o=1/0,s=9007199254740991,a="[object Function]",c="[object GeneratorFunction]",l="[object Symbol]",u=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,h=/^\w*$/,f=/^\./,d=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,p=/\\(\\)?/g,g=/^\[object .+?Constructor\]$/,v=/^(?:0|[1-9]\d*)$/,_="object"==typeof r.g&&r.g&&r.g.Object===Object&&r.g,y="object"==typeof self&&self&&self.Object===Object&&self,m=_||y||Function("return this")(),b=Array.prototype,x=Function.prototype,w=Object.prototype,S=m["__core-js_shared__"],C=(n=/[^.]+$/.exec(S&&S.keys&&S.keys.IE_PROTO||""))?"Symbol(src)_1."+n:"",O=x.toString,T=w.hasOwnProperty,j=w.toString,k=RegExp("^"+O.call(T).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),A=m.Symbol,E=b.splice,M=W(m,"Map"),P=W(Object,"create"),D=A?A.prototype:void 0,R=D?D.toString:void 0;function L(t){var e=-1,r=t?t.length:0;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function F(t){var e=-1,r=t?t.length:0;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function B(t){var e=-1,r=t?t.length:0;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function I(t,e,r){var n=t[e];T.call(t,e)&&H(n,r)&&(void 0!==r||e in t)||(t[e]=r)}function N(t,e){for(var r=t.length;r--;)if(H(t[r][0],e))return r;return-1}function V(t,e){var r,n,i=t.__data__;return("string"==(n=typeof(r=e))||"number"==n||"symbol"==n||"boolean"==n?"__proto__"!==r:null===r)?i["string"==typeof e?"string":"hash"]:i.map}function W(t,e){var r=function(t,e){return null==t?void 0:t[e]}(t,e);return function(t){if(!q(t)||C&&C in t)return!1;var e=function(t){var e=q(t)?j.call(t):"";return e==a||e==c}(t)||function(t){var e=!1;if(null!=t&&"function"!=typeof t.toString)try{e=!!(t+"")}catch(t){}return e}(t)?k:g;return e.test(function(t){if(null!=t){try{return O.call(t)}catch(t){}try{return t+""}catch(t){}}return""}(t))}(r)?r:void 0}function U(t,e){return!!(e=null==e?s:e)&&("number"==typeof t||v.test(t))&&t>-1&&t%1==0&&t<e}L.prototype.clear=function(){this.__data__=P?P(null):{}},L.prototype.delete=function(t){return this.has(t)&&delete this.__data__[t]},L.prototype.get=function(t){var e=this.__data__;if(P){var r=e[t];return r===i?void 0:r}return T.call(e,t)?e[t]:void 0},L.prototype.has=function(t){var e=this.__data__;return P?void 0!==e[t]:T.call(e,t)},L.prototype.set=function(t,e){return this.__data__[t]=P&&void 0===e?i:e,this},F.prototype.clear=function(){this.__data__=[]},F.prototype.delete=function(t){var e=this.__data__,r=N(e,t);return!(r<0||(r==e.length-1?e.pop():E.call(e,r,1),0))},F.prototype.get=function(t){var e=this.__data__,r=N(e,t);return r<0?void 0:e[r][1]},F.prototype.has=function(t){return N(this.__data__,t)>-1},F.prototype.set=function(t,e){var r=this.__data__,n=N(r,t);return n<0?r.push([t,e]):r[n][1]=e,this},B.prototype.clear=function(){this.__data__={hash:new L,map:new(M||F),string:new L}},B.prototype.delete=function(t){return V(this,t).delete(t)},B.prototype.get=function(t){return V(this,t).get(t)},B.prototype.has=function(t){return V(this,t).has(t)},B.prototype.set=function(t,e){return V(this,t).set(t,e),this};var z=Y((function(t){var e;t=null==(e=t)?"":function(t){if("string"==typeof t)return t;if(K(t))return R?R.call(t):"";var e=t+"";return"0"==e&&1/t==-o?"-0":e}(e);var r=[];return f.test(t)&&r.push(""),t.replace(d,(function(t,e,n,i){r.push(n?i.replace(p,"$1"):e||t)})),r}));function X(t){if("string"==typeof t||K(t))return t;var e=t+"";return"0"==e&&1/t==-o?"-0":e}function Y(t,e){if("function"!=typeof t||e&&"function"!=typeof e)throw new TypeError("Expected a function");var r=function(){var n=arguments,i=e?e.apply(this,n):n[0],o=r.cache;if(o.has(i))return o.get(i);var s=t.apply(this,n);return r.cache=o.set(i,s),s};return r.cache=new(Y.Cache||B),r}function H(t,e){return t===e||t!=t&&e!=e}Y.Cache=B;var G=Array.isArray;function q(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function K(t){return"symbol"==typeof t||function(t){return!!t&&"object"==typeof t}(t)&&j.call(t)==l}t.exports=function(t,e,r){return null==t?t:function(t,e,r,n){if(!q(t))return t;e=function(t,e){if(G(t))return!1;var r=typeof t;return!("number"!=r&&"symbol"!=r&&"boolean"!=r&&null!=t&&!K(t))||h.test(t)||!u.test(t)||null!=e&&t in Object(e)}(e,t)?[e]:function(t){return G(t)?t:z(t)}(e);for(var i=-1,o=e.length,s=o-1,a=t;null!=a&&++i<o;){var c=X(e[i]),l=r;if(i!=s){var f=a[c];void 0===(l=n?n(f,c,a):void 0)&&(l=q(f)?f:U(e[i+1])?[]:{})}I(a,c,l),a=a[c]}return t}(t,e,r)}},7269:(t,e,r)=>{var n=r(7758)(r(9165),"DataView");t.exports=n},8987:(t,e,r)=>{var n=r(1519),i=r(2999),o=r(6111),s=r(506),a=r(845);function c(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}c.prototype.clear=n,c.prototype.delete=i,c.prototype.get=o,c.prototype.has=s,c.prototype.set=a,t.exports=c},175:(t,e,r)=>{var n=r(2173),i=r(3752),o=r(548),s=r(3410),a=r(3564);function c(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}c.prototype.clear=n,c.prototype.delete=i,c.prototype.get=o,c.prototype.has=s,c.prototype.set=a,t.exports=c},5922:(t,e,r)=>{var n=r(7758)(r(9165),"Map");t.exports=n},9440:(t,e,r)=>{var n=r(7140),i=r(6504),o=r(8833),s=r(953),a=r(724);function c(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}c.prototype.clear=n,c.prototype.delete=i,c.prototype.get=o,c.prototype.has=s,c.prototype.set=a,t.exports=c},6795:(t,e,r)=>{var n=r(7758)(r(9165),"Promise");t.exports=n},1956:(t,e,r)=>{var n=r(7758)(r(9165),"Set");t.exports=n},8188:(t,e,r)=>{var n=r(9440),i=r(6659),o=r(7230);function s(t){var e=-1,r=null==t?0:t.length;for(this.__data__=new n;++e<r;)this.add(t[e])}s.prototype.add=s.prototype.push=i,s.prototype.has=o,t.exports=s},5929:(t,e,r)=>{var n=r(175),i=r(551),o=r(4090),s=r(7694),a=r(6220),c=r(8958);function l(t){var e=this.__data__=new n(t);this.size=e.size}l.prototype.clear=i,l.prototype.delete=o,l.prototype.get=s,l.prototype.has=a,l.prototype.set=c,t.exports=l},4396:(t,e,r)=>{var n=r(9165).Symbol;t.exports=n},300:(t,e,r)=>{var n=r(9165).Uint8Array;t.exports=n},9477:(t,e,r)=>{var n=r(7758)(r(9165),"WeakMap");t.exports=n},3501:t=>{t.exports=function(t,e,r){switch(r.length){case 0:return t.call(e);case 1:return t.call(e,r[0]);case 2:return t.call(e,r[0],r[1]);case 3:return t.call(e,r[0],r[1],r[2])}return t.apply(e,r)}},1662:t=>{t.exports=function(t,e){for(var r=-1,n=null==t?0:t.length;++r<n&&!1!==e(t[r],r,t););return t}},8969:t=>{t.exports=function(t,e){for(var r=-1,n=null==t?0:t.length,i=0,o=[];++r<n;){var s=t[r];e(s,r,t)&&(o[i++]=s)}return o}},9809:(t,e,r)=>{var n=r(9739),i=r(353),o=r(4669),s=r(1563),a=r(1010),c=r(3806),l=Object.prototype.hasOwnProperty;t.exports=function(t,e){var r=o(t),u=!r&&i(t),h=!r&&!u&&s(t),f=!r&&!u&&!h&&c(t),d=r||u||h||f,p=d?n(t.length,String):[],g=p.length;for(var v in t)!e&&!l.call(t,v)||d&&("length"==v||h&&("offset"==v||"parent"==v)||f&&("buffer"==v||"byteLength"==v||"byteOffset"==v)||a(v,g))||p.push(v);return p}},5697:t=>{t.exports=function(t,e){for(var r=-1,n=null==t?0:t.length,i=Array(n);++r<n;)i[r]=e(t[r],r,t);return i}},8486:t=>{t.exports=function(t,e){for(var r=-1,n=e.length,i=t.length;++r<n;)t[i+r]=e[r];return t}},4330:t=>{t.exports=function(t,e){for(var r=-1,n=null==t?0:t.length;++r<n;)if(e(t[r],r,t))return!0;return!1}},2340:(t,e,r)=>{var n=r(404),i=r(2448);t.exports=function(t,e,r){(void 0!==r&&!i(t[e],r)||void 0===r&&!(e in t))&&n(t,e,r)}},3719:(t,e,r)=>{var n=r(404),i=r(2448),o=Object.prototype.hasOwnProperty;t.exports=function(t,e,r){var s=t[e];o.call(t,e)&&i(s,r)&&(void 0!==r||e in t)||n(t,e,r)}},2718:(t,e,r)=>{var n=r(2448);t.exports=function(t,e){for(var r=t.length;r--;)if(n(t[r][0],e))return r;return-1}},3472:(t,e,r)=>{var n=r(2434),i=r(579);t.exports=function(t,e){return t&&n(e,i(e),t)}},7254:(t,e,r)=>{var n=r(2434),i=r(7390);t.exports=function(t,e){return t&&n(e,i(e),t)}},404:(t,e,r)=>{var n=r(4082);t.exports=function(t,e,r){"__proto__"==e&&n?n(t,e,{configurable:!0,enumerable:!0,value:r,writable:!0}):t[e]=r}},7410:(t,e,r)=>{var n=r(5929),i=r(1662),o=r(3719),s=r(3472),a=r(7254),c=r(9767),l=r(7165),u=r(8782),h=r(2667),f=r(9698),d=r(1699),p=r(1887),g=r(2195),v=r(6740),_=r(6404),y=r(4669),m=r(1563),b=r(2924),x=r(6838),w=r(5380),S=r(579),C=r(7390),O="[object Arguments]",T="[object Function]",j="[object Object]",k={};k[O]=k["[object Array]"]=k["[object ArrayBuffer]"]=k["[object DataView]"]=k["[object Boolean]"]=k["[object Date]"]=k["[object Float32Array]"]=k["[object Float64Array]"]=k["[object Int8Array]"]=k["[object Int16Array]"]=k["[object Int32Array]"]=k["[object Map]"]=k["[object Number]"]=k[j]=k["[object RegExp]"]=k["[object Set]"]=k["[object String]"]=k["[object Symbol]"]=k["[object Uint8Array]"]=k["[object Uint8ClampedArray]"]=k["[object Uint16Array]"]=k["[object Uint32Array]"]=!0,k["[object Error]"]=k[T]=k["[object WeakMap]"]=!1,t.exports=function t(e,r,A,E,M,P){var D,R=1&r,L=2&r,F=4&r;if(A&&(D=M?A(e,E,M,P):A(e)),void 0!==D)return D;if(!x(e))return e;var B=y(e);if(B){if(D=g(e),!R)return l(e,D)}else{var I=p(e),N=I==T||"[object GeneratorFunction]"==I;if(m(e))return c(e,R);if(I==j||I==O||N&&!M){if(D=L||N?{}:_(e),!R)return L?h(e,a(D,e)):u(e,s(D,e))}else{if(!k[I])return M?e:{};D=v(e,I,R)}}P||(P=new n);var V=P.get(e);if(V)return V;P.set(e,D),w(e)?e.forEach((function(n){D.add(t(n,r,A,n,e,P))})):b(e)&&e.forEach((function(n,i){D.set(i,t(n,r,A,i,e,P))}));var W=B?void 0:(F?L?d:f:L?C:S)(e);return i(W||e,(function(n,i){W&&(n=e[i=n]),o(D,i,t(n,r,A,i,e,P))})),D}},1348:(t,e,r)=>{var n=r(6838),i=Object.create,o=function(){function t(){}return function(e){if(!n(e))return{};if(i)return i(e);t.prototype=e;var r=new t;return t.prototype=void 0,r}}();t.exports=o},438:(t,e,r)=>{var n=r(1343),i=r(8202)(n);t.exports=i},1030:(t,e,r)=>{var n=r(29)();t.exports=n},1343:(t,e,r)=>{var n=r(1030),i=r(579);t.exports=function(t,e){return t&&n(t,e,i)}},7499:(t,e,r)=>{var n=r(399),i=r(7817);t.exports=function(t,e){for(var r=0,o=(e=n(e,t)).length;null!=t&&r<o;)t=t[i(e[r++])];return r&&r==o?t:void 0}},8084:(t,e,r)=>{var n=r(8486),i=r(4669);t.exports=function(t,e,r){var o=e(t);return i(t)?o:n(o,r(t))}},732:(t,e,r)=>{var n=r(4396),i=r(1239),o=r(7058),s=n?n.toStringTag:void 0;t.exports=function(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":s&&s in Object(t)?i(t):o(t)}},1664:t=>{t.exports=function(t,e){return null!=t&&e in Object(t)}},4742:(t,e,r)=>{var n=r(732),i=r(5073);t.exports=function(t){return i(t)&&"[object Arguments]"==n(t)}},6620:(t,e,r)=>{var n=r(3977),i=r(5073);t.exports=function t(e,r,o,s,a){return e===r||(null==e||null==r||!i(e)&&!i(r)?e!=e&&r!=r:n(e,r,o,s,t,a))}},3977:(t,e,r)=>{var n=r(5929),i=r(2684),o=r(7456),s=r(8120),a=r(1887),c=r(4669),l=r(1563),u=r(3806),h="[object Arguments]",f="[object Array]",d="[object Object]",p=Object.prototype.hasOwnProperty;t.exports=function(t,e,r,g,v,_){var y=c(t),m=c(e),b=y?f:a(t),x=m?f:a(e),w=(b=b==h?d:b)==d,S=(x=x==h?d:x)==d,C=b==x;if(C&&l(t)){if(!l(e))return!1;y=!0,w=!1}if(C&&!w)return _||(_=new n),y||u(t)?i(t,e,r,g,v,_):o(t,e,b,r,g,v,_);if(!(1&r)){var O=w&&p.call(t,"__wrapped__"),T=S&&p.call(e,"__wrapped__");if(O||T){var j=O?t.value():t,k=T?e.value():e;return _||(_=new n),v(j,k,r,g,_)}}return!!C&&(_||(_=new n),s(t,e,r,g,v,_))}},4033:(t,e,r)=>{var n=r(1887),i=r(5073);t.exports=function(t){return i(t)&&"[object Map]"==n(t)}},7122:(t,e,r)=>{var n=r(5929),i=r(6620);t.exports=function(t,e,r,o){var s=r.length,a=s,c=!o;if(null==t)return!a;for(t=Object(t);s--;){var l=r[s];if(c&&l[2]?l[1]!==t[l[0]]:!(l[0]in t))return!1}for(;++s<a;){var u=(l=r[s])[0],h=t[u],f=l[1];if(c&&l[2]){if(void 0===h&&!(u in t))return!1}else{var d=new n;if(o)var p=o(h,f,u,t,e,d);if(!(void 0===p?i(f,h,3,o,d):p))return!1}}return!0}},8939:(t,e,r)=>{var n=r(2042),i=r(654),o=r(6838),s=r(1059),a=/^\[object .+?Constructor\]$/,c=Function.prototype,l=Object.prototype,u=c.toString,h=l.hasOwnProperty,f=RegExp("^"+u.call(h).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");t.exports=function(t){return!(!o(t)||i(t))&&(n(t)?f:a).test(s(t))}},8264:(t,e,r)=>{var n=r(1887),i=r(5073);t.exports=function(t){return i(t)&&"[object Set]"==n(t)}},2882:(t,e,r)=>{var n=r(732),i=r(7216),o=r(5073),s={};s["[object Float32Array]"]=s["[object Float64Array]"]=s["[object Int8Array]"]=s["[object Int16Array]"]=s["[object Int32Array]"]=s["[object Uint8Array]"]=s["[object Uint8ClampedArray]"]=s["[object Uint16Array]"]=s["[object Uint32Array]"]=!0,s["[object Arguments]"]=s["[object Array]"]=s["[object ArrayBuffer]"]=s["[object Boolean]"]=s["[object DataView]"]=s["[object Date]"]=s["[object Error]"]=s["[object Function]"]=s["[object Map]"]=s["[object Number]"]=s["[object Object]"]=s["[object RegExp]"]=s["[object Set]"]=s["[object String]"]=s["[object WeakMap]"]=!1,t.exports=function(t){return o(t)&&i(t.length)&&!!s[n(t)]}},5673:(t,e,r)=>{var n=r(3772),i=r(493),o=r(8148),s=r(4669),a=r(1798);t.exports=function(t){return"function"==typeof t?t:null==t?o:"object"==typeof t?s(t)?i(t[0],t[1]):n(t):a(t)}},7473:(t,e,r)=>{var n=r(2963),i=r(4457),o=Object.prototype.hasOwnProperty;t.exports=function(t){if(!n(t))return i(t);var e=[];for(var r in Object(t))o.call(t,r)&&"constructor"!=r&&e.push(r);return e}},2506:(t,e,r)=>{var n=r(6838),i=r(2963),o=r(814),s=Object.prototype.hasOwnProperty;t.exports=function(t){if(!n(t))return o(t);var e=i(t),r=[];for(var a in t)("constructor"!=a||!e&&s.call(t,a))&&r.push(a);return r}},6494:(t,e,r)=>{var n=r(438),i=r(7428);t.exports=function(t,e){var r=-1,o=i(t)?Array(t.length):[];return n(t,(function(t,n,i){o[++r]=e(t,n,i)})),o}},3772:(t,e,r)=>{var n=r(7122),i=r(7487),o=r(8857);t.exports=function(t){var e=i(t);return 1==e.length&&e[0][2]?o(e[0][0],e[0][1]):function(r){return r===t||n(r,t,e)}}},493:(t,e,r)=>{var n=r(6620),i=r(5439),o=r(8281),s=r(2610),a=r(2769),c=r(8857),l=r(7817);t.exports=function(t,e){return s(t)&&a(e)?c(l(t),e):function(r){var s=i(r,t);return void 0===s&&s===e?o(r,t):n(e,s,3)}}},8354:(t,e,r)=>{var n=r(5929),i=r(2340),o=r(1030),s=r(715),a=r(6838),c=r(7390),l=r(2014);t.exports=function t(e,r,u,h,f){e!==r&&o(r,(function(o,c){if(f||(f=new n),a(o))s(e,r,c,u,t,h,f);else{var d=h?h(l(e,c),o,c+"",e,r,f):void 0;void 0===d&&(d=o),i(e,c,d)}}),c)}},715:(t,e,r)=>{var n=r(2340),i=r(9767),o=r(7136),s=r(7165),a=r(6404),c=r(353),l=r(4669),u=r(7348),h=r(1563),f=r(2042),d=r(6838),p=r(9143),g=r(3806),v=r(2014),_=r(5111);t.exports=function(t,e,r,y,m,b,x){var w=v(t,r),S=v(e,r),C=x.get(S);if(C)n(t,r,C);else{var O=b?b(w,S,r+"",t,e,x):void 0,T=void 0===O;if(T){var j=l(S),k=!j&&h(S),A=!j&&!k&&g(S);O=S,j||k||A?l(w)?O=w:u(w)?O=s(w):k?(T=!1,O=i(S,!0)):A?(T=!1,O=o(S,!0)):O=[]:p(S)||c(S)?(O=w,c(w)?O=_(w):d(w)&&!f(w)||(O=a(S))):T=!1}T&&(x.set(S,O),m(O,S,y,b,x),x.delete(S)),n(t,r,O)}}},7498:t=>{t.exports=function(t){return function(e){return null==e?void 0:e[t]}}},1e3:(t,e,r)=>{var n=r(7499);t.exports=function(t){return function(e){return n(e,t)}}},5125:(t,e,r)=>{var n=r(8148),i=r(323),o=r(1564);t.exports=function(t,e){return o(i(t,e,n),t+"")}},6447:(t,e,r)=>{var n=r(4806),i=r(4082),o=r(8148),s=i?function(t,e){return i(t,"toString",{configurable:!0,enumerable:!1,value:n(e),writable:!0})}:o;t.exports=s},9739:t=>{t.exports=function(t,e){for(var r=-1,n=Array(t);++r<t;)n[r]=e(r);return n}},3150:(t,e,r)=>{var n=r(4396),i=r(5697),o=r(4669),s=r(6764),a=n?n.prototype:void 0,c=a?a.toString:void 0;t.exports=function t(e){if("string"==typeof e)return e;if(o(e))return i(e,t)+"";if(s(e))return c?c.call(e):"";var r=e+"";return"0"==r&&1/e==-1/0?"-0":r}},3124:(t,e,r)=>{var n=r(2996),i=/^\s+/;t.exports=function(t){return t?t.slice(0,n(t)+1).replace(i,""):t}},8792:t=>{t.exports=function(t){return function(e){return t(e)}}},9880:t=>{t.exports=function(t,e){return t.has(e)}},7008:(t,e,r)=>{var n=r(8148);t.exports=function(t){return"function"==typeof t?t:n}},399:(t,e,r)=>{var n=r(4669),i=r(2610),o=r(7057),s=r(8389);t.exports=function(t,e){return n(t)?t:i(t,e)?[t]:o(s(t))}},8925:(t,e,r)=>{var n=r(300);t.exports=function(t){var e=new t.constructor(t.byteLength);return new n(e).set(new n(t)),e}},9767:(t,e,r)=>{t=r.nmd(t);var n=r(9165),i=e&&!e.nodeType&&e,o=i&&t&&!t.nodeType&&t,s=o&&o.exports===i?n.Buffer:void 0,a=s?s.allocUnsafe:void 0;t.exports=function(t,e){if(e)return t.slice();var r=t.length,n=a?a(r):new t.constructor(r);return t.copy(n),n}},6157:(t,e,r)=>{var n=r(8925);t.exports=function(t,e){var r=e?n(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.byteLength)}},101:t=>{var e=/\w*$/;t.exports=function(t){var r=new t.constructor(t.source,e.exec(t));return r.lastIndex=t.lastIndex,r}},4920:(t,e,r)=>{var n=r(4396),i=n?n.prototype:void 0,o=i?i.valueOf:void 0;t.exports=function(t){return o?Object(o.call(t)):{}}},7136:(t,e,r)=>{var n=r(8925);t.exports=function(t,e){var r=e?n(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.length)}},7165:t=>{t.exports=function(t,e){var r=-1,n=t.length;for(e||(e=Array(n));++r<n;)e[r]=t[r];return e}},2434:(t,e,r)=>{var n=r(3719),i=r(404);t.exports=function(t,e,r,o){var s=!r;r||(r={});for(var a=-1,c=e.length;++a<c;){var l=e[a],u=o?o(r[l],t[l],l,r,t):void 0;void 0===u&&(u=t[l]),s?i(r,l,u):n(r,l,u)}return r}},8782:(t,e,r)=>{var n=r(2434),i=r(7482);t.exports=function(t,e){return n(t,i(t),e)}},2667:(t,e,r)=>{var n=r(2434),i=r(1288);t.exports=function(t,e){return n(t,i(t),e)}},6633:(t,e,r)=>{var n=r(9165)["__core-js_shared__"];t.exports=n},7991:(t,e,r)=>{var n=r(5125),i=r(7616);t.exports=function(t){return n((function(e,r){var n=-1,o=r.length,s=o>1?r[o-1]:void 0,a=o>2?r[2]:void 0;for(s=t.length>3&&"function"==typeof s?(o--,s):void 0,a&&i(r[0],r[1],a)&&(s=o<3?void 0:s,o=1),e=Object(e);++n<o;){var c=r[n];c&&t(e,c,n,s)}return e}))}},8202:(t,e,r)=>{var n=r(7428);t.exports=function(t,e){return function(r,i){if(null==r)return r;if(!n(r))return t(r,i);for(var o=r.length,s=e?o:-1,a=Object(r);(e?s--:++s<o)&&!1!==i(a[s],s,a););return r}}},29:t=>{t.exports=function(t){return function(e,r,n){for(var i=-1,o=Object(e),s=n(e),a=s.length;a--;){var c=s[t?a:++i];if(!1===r(o[c],c,o))break}return e}}},4082:(t,e,r)=>{var n=r(7758),i=function(){try{var t=n(Object,"defineProperty");return t({},"",{}),t}catch(t){}}();t.exports=i},2684:(t,e,r)=>{var n=r(8188),i=r(4330),o=r(9880);t.exports=function(t,e,r,s,a,c){var l=1&r,u=t.length,h=e.length;if(u!=h&&!(l&&h>u))return!1;var f=c.get(t),d=c.get(e);if(f&&d)return f==e&&d==t;var p=-1,g=!0,v=2&r?new n:void 0;for(c.set(t,e),c.set(e,t);++p<u;){var _=t[p],y=e[p];if(s)var m=l?s(y,_,p,e,t,c):s(_,y,p,t,e,c);if(void 0!==m){if(m)continue;g=!1;break}if(v){if(!i(e,(function(t,e){if(!o(v,e)&&(_===t||a(_,t,r,s,c)))return v.push(e)}))){g=!1;break}}else if(_!==y&&!a(_,y,r,s,c)){g=!1;break}}return c.delete(t),c.delete(e),g}},7456:(t,e,r)=>{var n=r(4396),i=r(300),o=r(2448),s=r(2684),a=r(7523),c=r(9967),l=n?n.prototype:void 0,u=l?l.valueOf:void 0;t.exports=function(t,e,r,n,l,h,f){switch(r){case"[object DataView]":if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case"[object ArrayBuffer]":return!(t.byteLength!=e.byteLength||!h(new i(t),new i(e)));case"[object Boolean]":case"[object Date]":case"[object Number]":return o(+t,+e);case"[object Error]":return t.name==e.name&&t.message==e.message;case"[object RegExp]":case"[object String]":return t==e+"";case"[object Map]":var d=a;case"[object Set]":var p=1&n;if(d||(d=c),t.size!=e.size&&!p)return!1;var g=f.get(t);if(g)return g==e;n|=2,f.set(t,e);var v=s(d(t),d(e),n,l,h,f);return f.delete(t),v;case"[object Symbol]":if(u)return u.call(t)==u.call(e)}return!1}},8120:(t,e,r)=>{var n=r(9698),i=Object.prototype.hasOwnProperty;t.exports=function(t,e,r,o,s,a){var c=1&r,l=n(t),u=l.length;if(u!=n(e).length&&!c)return!1;for(var h=u;h--;){var f=l[h];if(!(c?f in e:i.call(e,f)))return!1}var d=a.get(t),p=a.get(e);if(d&&p)return d==e&&p==t;var g=!0;a.set(t,e),a.set(e,t);for(var v=c;++h<u;){var _=t[f=l[h]],y=e[f];if(o)var m=c?o(y,_,f,e,t,a):o(_,y,f,t,e,a);if(!(void 0===m?_===y||s(_,y,r,o,a):m)){g=!1;break}v||(v="constructor"==f)}if(g&&!v){var b=t.constructor,x=e.constructor;b==x||!("constructor"in t)||!("constructor"in e)||"function"==typeof b&&b instanceof b&&"function"==typeof x&&x instanceof x||(g=!1)}return a.delete(t),a.delete(e),g}},6476:(t,e,r)=>{var n="object"==typeof r.g&&r.g&&r.g.Object===Object&&r.g;t.exports=n},9698:(t,e,r)=>{var n=r(8084),i=r(7482),o=r(579);t.exports=function(t){return n(t,o,i)}},1699:(t,e,r)=>{var n=r(8084),i=r(1288),o=r(7390);t.exports=function(t){return n(t,o,i)}},7707:(t,e,r)=>{var n=r(3880);t.exports=function(t,e){var r=t.__data__;return n(e)?r["string"==typeof e?"string":"hash"]:r.map}},7487:(t,e,r)=>{var n=r(2769),i=r(579);t.exports=function(t){for(var e=i(t),r=e.length;r--;){var o=e[r],s=t[o];e[r]=[o,s,n(s)]}return e}},7758:(t,e,r)=>{var n=r(8939),i=r(9149);t.exports=function(t,e){var r=i(t,e);return n(r)?r:void 0}},1389:(t,e,r)=>{var n=r(5542)(Object.getPrototypeOf,Object);t.exports=n},1239:(t,e,r)=>{var n=r(4396),i=Object.prototype,o=i.hasOwnProperty,s=i.toString,a=n?n.toStringTag:void 0;t.exports=function(t){var e=o.call(t,a),r=t[a];try{t[a]=void 0;var n=!0}catch(t){}var i=s.call(t);return n&&(e?t[a]=r:delete t[a]),i}},7482:(t,e,r)=>{var n=r(8969),i=r(8036),o=Object.prototype.propertyIsEnumerable,s=Object.getOwnPropertySymbols,a=s?function(t){return null==t?[]:(t=Object(t),n(s(t),(function(e){return o.call(t,e)})))}:i;t.exports=a},1288:(t,e,r)=>{var n=r(8486),i=r(1389),o=r(7482),s=r(8036),a=Object.getOwnPropertySymbols?function(t){for(var e=[];t;)n(e,o(t)),t=i(t);return e}:s;t.exports=a},1887:(t,e,r)=>{var n=r(7269),i=r(5922),o=r(6795),s=r(1956),a=r(9477),c=r(732),l=r(1059),u="[object Map]",h="[object Promise]",f="[object Set]",d="[object WeakMap]",p="[object DataView]",g=l(n),v=l(i),_=l(o),y=l(s),m=l(a),b=c;(n&&b(new n(new ArrayBuffer(1)))!=p||i&&b(new i)!=u||o&&b(o.resolve())!=h||s&&b(new s)!=f||a&&b(new a)!=d)&&(b=function(t){var e=c(t),r="[object Object]"==e?t.constructor:void 0,n=r?l(r):"";if(n)switch(n){case g:return p;case v:return u;case _:return h;case y:return f;case m:return d}return e}),t.exports=b},9149:t=>{t.exports=function(t,e){return null==t?void 0:t[e]}},8554:(t,e,r)=>{var n=r(399),i=r(353),o=r(4669),s=r(1010),a=r(7216),c=r(7817);t.exports=function(t,e,r){for(var l=-1,u=(e=n(e,t)).length,h=!1;++l<u;){var f=c(e[l]);if(!(h=null!=t&&r(t,f)))break;t=t[f]}return h||++l!=u?h:!!(u=null==t?0:t.length)&&a(u)&&s(f,u)&&(o(t)||i(t))}},1519:(t,e,r)=>{var n=r(7722);t.exports=function(){this.__data__=n?n(null):{},this.size=0}},2999:t=>{t.exports=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}},6111:(t,e,r)=>{var n=r(7722),i=Object.prototype.hasOwnProperty;t.exports=function(t){var e=this.__data__;if(n){var r=e[t];return"__lodash_hash_undefined__"===r?void 0:r}return i.call(e,t)?e[t]:void 0}},506:(t,e,r)=>{var n=r(7722),i=Object.prototype.hasOwnProperty;t.exports=function(t){var e=this.__data__;return n?void 0!==e[t]:i.call(e,t)}},845:(t,e,r)=>{var n=r(7722);t.exports=function(t,e){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=n&&void 0===e?"__lodash_hash_undefined__":e,this}},2195:t=>{var e=Object.prototype.hasOwnProperty;t.exports=function(t){var r=t.length,n=new t.constructor(r);return r&&"string"==typeof t[0]&&e.call(t,"index")&&(n.index=t.index,n.input=t.input),n}},6740:(t,e,r)=>{var n=r(8925),i=r(6157),o=r(101),s=r(4920),a=r(7136);t.exports=function(t,e,r){var c=t.constructor;switch(e){case"[object ArrayBuffer]":return n(t);case"[object Boolean]":case"[object Date]":return new c(+t);case"[object DataView]":return i(t,r);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return a(t,r);case"[object Map]":case"[object Set]":return new c;case"[object Number]":case"[object String]":return new c(t);case"[object RegExp]":return o(t);case"[object Symbol]":return s(t)}}},6404:(t,e,r)=>{var n=r(1348),i=r(1389),o=r(2963);t.exports=function(t){return"function"!=typeof t.constructor||o(t)?{}:n(i(t))}},1010:t=>{var e=/^(?:0|[1-9]\d*)$/;t.exports=function(t,r){var n=typeof t;return!!(r=null==r?9007199254740991:r)&&("number"==n||"symbol"!=n&&e.test(t))&&t>-1&&t%1==0&&t<r}},7616:(t,e,r)=>{var n=r(2448),i=r(7428),o=r(1010),s=r(6838);t.exports=function(t,e,r){if(!s(r))return!1;var a=typeof e;return!!("number"==a?i(r)&&o(e,r.length):"string"==a&&e in r)&&n(r[e],t)}},2610:(t,e,r)=>{var n=r(4669),i=r(6764),o=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,s=/^\w*$/;t.exports=function(t,e){if(n(t))return!1;var r=typeof t;return!("number"!=r&&"symbol"!=r&&"boolean"!=r&&null!=t&&!i(t))||s.test(t)||!o.test(t)||null!=e&&t in Object(e)}},3880:t=>{t.exports=function(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}},654:(t,e,r)=>{var n,i=r(6633),o=(n=/[^.]+$/.exec(i&&i.keys&&i.keys.IE_PROTO||""))?"Symbol(src)_1."+n:"";t.exports=function(t){return!!o&&o in t}},2963:t=>{var e=Object.prototype;t.exports=function(t){var r=t&&t.constructor;return t===("function"==typeof r&&r.prototype||e)}},2769:(t,e,r)=>{var n=r(6838);t.exports=function(t){return t==t&&!n(t)}},2173:t=>{t.exports=function(){this.__data__=[],this.size=0}},3752:(t,e,r)=>{var n=r(2718),i=Array.prototype.splice;t.exports=function(t){var e=this.__data__,r=n(e,t);return!(r<0||(r==e.length-1?e.pop():i.call(e,r,1),--this.size,0))}},548:(t,e,r)=>{var n=r(2718);t.exports=function(t){var e=this.__data__,r=n(e,t);return r<0?void 0:e[r][1]}},3410:(t,e,r)=>{var n=r(2718);t.exports=function(t){return n(this.__data__,t)>-1}},3564:(t,e,r)=>{var n=r(2718);t.exports=function(t,e){var r=this.__data__,i=n(r,t);return i<0?(++this.size,r.push([t,e])):r[i][1]=e,this}},7140:(t,e,r)=>{var n=r(8987),i=r(175),o=r(5922);t.exports=function(){this.size=0,this.__data__={hash:new n,map:new(o||i),string:new n}}},6504:(t,e,r)=>{var n=r(7707);t.exports=function(t){var e=n(this,t).delete(t);return this.size-=e?1:0,e}},8833:(t,e,r)=>{var n=r(7707);t.exports=function(t){return n(this,t).get(t)}},953:(t,e,r)=>{var n=r(7707);t.exports=function(t){return n(this,t).has(t)}},724:(t,e,r)=>{var n=r(7707);t.exports=function(t,e){var r=n(this,t),i=r.size;return r.set(t,e),this.size+=r.size==i?0:1,this}},7523:t=>{t.exports=function(t){var e=-1,r=Array(t.size);return t.forEach((function(t,n){r[++e]=[n,t]})),r}},8857:t=>{t.exports=function(t,e){return function(r){return null!=r&&r[t]===e&&(void 0!==e||t in Object(r))}}},5171:(t,e,r)=>{var n=r(4736);t.exports=function(t){var e=n(t,(function(t){return 500===r.size&&r.clear(),t})),r=e.cache;return e}},7722:(t,e,r)=>{var n=r(7758)(Object,"create");t.exports=n},4457:(t,e,r)=>{var n=r(5542)(Object.keys,Object);t.exports=n},814:t=>{t.exports=function(t){var e=[];if(null!=t)for(var r in Object(t))e.push(r);return e}},2245:(t,e,r)=>{t=r.nmd(t);var n=r(6476),i=e&&!e.nodeType&&e,o=i&&t&&!t.nodeType&&t,s=o&&o.exports===i&&n.process,a=function(){try{return o&&o.require&&o.require("util").types||s&&s.binding&&s.binding("util")}catch(t){}}();t.exports=a},7058:t=>{var e=Object.prototype.toString;t.exports=function(t){return e.call(t)}},5542:t=>{t.exports=function(t,e){return function(r){return t(e(r))}}},323:(t,e,r)=>{var n=r(3501),i=Math.max;t.exports=function(t,e,r){return e=i(void 0===e?t.length-1:e,0),function(){for(var o=arguments,s=-1,a=i(o.length-e,0),c=Array(a);++s<a;)c[s]=o[e+s];s=-1;for(var l=Array(e+1);++s<e;)l[s]=o[s];return l[e]=r(c),n(t,this,l)}}},9165:(t,e,r)=>{var n=r(6476),i="object"==typeof self&&self&&self.Object===Object&&self,o=n||i||Function("return this")();t.exports=o},2014:t=>{t.exports=function(t,e){if(("constructor"!==e||"function"!=typeof t[e])&&"__proto__"!=e)return t[e]}},6659:t=>{t.exports=function(t){return this.__data__.set(t,"__lodash_hash_undefined__"),this}},7230:t=>{t.exports=function(t){return this.__data__.has(t)}},9967:t=>{t.exports=function(t){var e=-1,r=Array(t.size);return t.forEach((function(t){r[++e]=t})),r}},1564:(t,e,r)=>{var n=r(6447),i=r(5509)(n);t.exports=i},5509:t=>{var e=Date.now;t.exports=function(t){var r=0,n=0;return function(){var i=e(),o=16-(i-n);if(n=i,o>0){if(++r>=800)return arguments[0]}else r=0;return t.apply(void 0,arguments)}}},551:(t,e,r)=>{var n=r(175);t.exports=function(){this.__data__=new n,this.size=0}},4090:t=>{t.exports=function(t){var e=this.__data__,r=e.delete(t);return this.size=e.size,r}},7694:t=>{t.exports=function(t){return this.__data__.get(t)}},6220:t=>{t.exports=function(t){return this.__data__.has(t)}},8958:(t,e,r)=>{var n=r(175),i=r(5922),o=r(9440);t.exports=function(t,e){var r=this.__data__;if(r instanceof n){var s=r.__data__;if(!i||s.length<199)return s.push([t,e]),this.size=++r.size,this;r=this.__data__=new o(s)}return r.set(t,e),this.size=r.size,this}},7057:(t,e,r)=>{var n=r(5171),i=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,o=/\\(\\)?/g,s=n((function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(i,(function(t,r,n,i){e.push(n?i.replace(o,"$1"):r||t)})),e}));t.exports=s},7817:(t,e,r)=>{var n=r(6764);t.exports=function(t){if("string"==typeof t||n(t))return t;var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}},1059:t=>{var e=Function.prototype.toString;t.exports=function(t){if(null!=t){try{return e.call(t)}catch(t){}try{return t+""}catch(t){}}return""}},2996:t=>{var e=/\s/;t.exports=function(t){for(var r=t.length;r--&&e.test(t.charAt(r)););return r}},2222:(t,e,r)=>{var n=r(7410);t.exports=function(t){return n(t,5)}},4806:t=>{t.exports=function(t){return function(){return t}}},6292:(t,e,r)=>{var n=r(6838),i=r(6668),o=r(2931),s=Math.max,a=Math.min;t.exports=function(t,e,r){var c,l,u,h,f,d,p=0,g=!1,v=!1,_=!0;if("function"!=typeof t)throw new TypeError("Expected a function");function y(e){var r=c,n=l;return c=l=void 0,p=e,h=t.apply(n,r)}function m(t){var r=t-d;return void 0===d||r>=e||r<0||v&&t-p>=u}function b(){var t=i();if(m(t))return x(t);f=setTimeout(b,function(t){var r=e-(t-d);return v?a(r,u-(t-p)):r}(t))}function x(t){return f=void 0,_&&c?y(t):(c=l=void 0,h)}function w(){var t=i(),r=m(t);if(c=arguments,l=this,d=t,r){if(void 0===f)return function(t){return p=t,f=setTimeout(b,e),g?y(t):h}(d);if(v)return clearTimeout(f),f=setTimeout(b,e),y(d)}return void 0===f&&(f=setTimeout(b,e)),h}return e=o(e)||0,n(r)&&(g=!!r.leading,u=(v="maxWait"in r)?s(o(r.maxWait)||0,e):u,_="trailing"in r?!!r.trailing:_),w.cancel=function(){void 0!==f&&clearTimeout(f),p=0,c=d=l=f=void 0},w.flush=function(){return void 0===f?h:x(i())},w}},5828:(t,e,r)=>{t.exports=r(7489)},2448:t=>{t.exports=function(t,e){return t===e||t!=t&&e!=e}},7489:(t,e,r)=>{var n=r(1662),i=r(438),o=r(7008),s=r(4669);t.exports=function(t,e){return(s(t)?n:i)(t,o(e))}},4287:(t,e,r)=>{var n=r(1343),i=r(7008);t.exports=function(t,e){return t&&n(t,i(e))}},5439:(t,e,r)=>{var n=r(7499);t.exports=function(t,e,r){var i=null==t?void 0:n(t,e);return void 0===i?r:i}},8281:(t,e,r)=>{var n=r(1664),i=r(8554);t.exports=function(t,e){return null!=t&&i(t,e,n)}},8148:t=>{t.exports=function(t){return t}},353:(t,e,r)=>{var n=r(4742),i=r(5073),o=Object.prototype,s=o.hasOwnProperty,a=o.propertyIsEnumerable,c=n(function(){return arguments}())?n:function(t){return i(t)&&s.call(t,"callee")&&!a.call(t,"callee")};t.exports=c},4669:t=>{var e=Array.isArray;t.exports=e},7428:(t,e,r)=>{var n=r(2042),i=r(7216);t.exports=function(t){return null!=t&&i(t.length)&&!n(t)}},7348:(t,e,r)=>{var n=r(7428),i=r(5073);t.exports=function(t){return i(t)&&n(t)}},1563:(t,e,r)=>{t=r.nmd(t);var n=r(9165),i=r(4193),o=e&&!e.nodeType&&e,s=o&&t&&!t.nodeType&&t,a=s&&s.exports===o?n.Buffer:void 0,c=(a?a.isBuffer:void 0)||i;t.exports=c},2042:(t,e,r)=>{var n=r(732),i=r(6838);t.exports=function(t){if(!i(t))return!1;var e=n(t);return"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e}},7216:t=>{t.exports=function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991}},2924:(t,e,r)=>{var n=r(4033),i=r(8792),o=r(2245),s=o&&o.isMap,a=s?i(s):n;t.exports=a},6838:t=>{t.exports=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}},5073:t=>{t.exports=function(t){return null!=t&&"object"==typeof t}},9143:(t,e,r)=>{var n=r(732),i=r(1389),o=r(5073),s=Function.prototype,a=Object.prototype,c=s.toString,l=a.hasOwnProperty,u=c.call(Object);t.exports=function(t){if(!o(t)||"[object Object]"!=n(t))return!1;var e=i(t);if(null===e)return!0;var r=l.call(e,"constructor")&&e.constructor;return"function"==typeof r&&r instanceof r&&c.call(r)==u}},5380:(t,e,r)=>{var n=r(8264),i=r(8792),o=r(2245),s=o&&o.isSet,a=s?i(s):n;t.exports=a},6549:(t,e,r)=>{var n=r(732),i=r(4669),o=r(5073);t.exports=function(t){return"string"==typeof t||!i(t)&&o(t)&&"[object String]"==n(t)}},6764:(t,e,r)=>{var n=r(732),i=r(5073);t.exports=function(t){return"symbol"==typeof t||i(t)&&"[object Symbol]"==n(t)}},3806:(t,e,r)=>{var n=r(2882),i=r(8792),o=r(2245),s=o&&o.isTypedArray,a=s?i(s):n;t.exports=a},579:(t,e,r)=>{var n=r(9809),i=r(7473),o=r(7428);t.exports=function(t){return o(t)?n(t):i(t)}},7390:(t,e,r)=>{var n=r(9809),i=r(2506),o=r(7428);t.exports=function(t){return o(t)?n(t,!0):i(t)}},2699:function(t,e,r){var n;t=r.nmd(t),function(){var i,o="Expected a function",s="__lodash_hash_undefined__",a="__lodash_placeholder__",c=32,l=128,u=1/0,h=9007199254740991,f=NaN,d=4294967295,p=[["ary",l],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",c],["partialRight",64],["rearg",256]],g="[object Arguments]",v="[object Array]",_="[object Boolean]",y="[object Date]",m="[object Error]",b="[object Function]",x="[object GeneratorFunction]",w="[object Map]",S="[object Number]",C="[object Object]",O="[object Promise]",T="[object RegExp]",j="[object Set]",k="[object String]",A="[object Symbol]",E="[object WeakMap]",M="[object ArrayBuffer]",P="[object DataView]",D="[object Float32Array]",R="[object Float64Array]",L="[object Int8Array]",F="[object Int16Array]",B="[object Int32Array]",I="[object Uint8Array]",N="[object Uint8ClampedArray]",V="[object Uint16Array]",W="[object Uint32Array]",U=/\b__p \+= '';/g,z=/\b(__p \+=) '' \+/g,X=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Y=/&(?:amp|lt|gt|quot|#39);/g,H=/[&<>"']/g,G=RegExp(Y.source),q=RegExp(H.source),K=/<%-([\s\S]+?)%>/g,$=/<%([\s\S]+?)%>/g,J=/<%=([\s\S]+?)%>/g,Z=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Q=/^\w*$/,tt=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,et=/[\\^$.*+?()[\]{}|]/g,rt=RegExp(et.source),nt=/^\s+/,it=/\s/,ot=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,st=/\{\n\/\* \[wrapped with (.+)\] \*/,at=/,? & /,ct=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,lt=/[()=,{}\[\]\/\s]/,ut=/\\(\\)?/g,ht=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,ft=/\w*$/,dt=/^[-+]0x[0-9a-f]+$/i,pt=/^0b[01]+$/i,gt=/^\[object .+?Constructor\]$/,vt=/^0o[0-7]+$/i,_t=/^(?:0|[1-9]\d*)$/,yt=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,mt=/($^)/,bt=/['\n\r\u2028\u2029\\]/g,xt="\\ud800-\\udfff",wt="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",St="\\u2700-\\u27bf",Ct="a-z\\xdf-\\xf6\\xf8-\\xff",Ot="A-Z\\xc0-\\xd6\\xd8-\\xde",Tt="\\ufe0e\\ufe0f",jt="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",kt="["+xt+"]",At="["+jt+"]",Et="["+wt+"]",Mt="\\d+",Pt="["+St+"]",Dt="["+Ct+"]",Rt="[^"+xt+jt+Mt+St+Ct+Ot+"]",Lt="\\ud83c[\\udffb-\\udfff]",Ft="[^"+xt+"]",Bt="(?:\\ud83c[\\udde6-\\uddff]){2}",It="[\\ud800-\\udbff][\\udc00-\\udfff]",Nt="["+Ot+"]",Vt="\\u200d",Wt="(?:"+Dt+"|"+Rt+")",Ut="(?:"+Nt+"|"+Rt+")",zt="(?:['](?:d|ll|m|re|s|t|ve))?",Xt="(?:['](?:D|LL|M|RE|S|T|VE))?",Yt="(?:"+Et+"|"+Lt+")?",Ht="["+Tt+"]?",Gt=Ht+Yt+"(?:"+Vt+"(?:"+[Ft,Bt,It].join("|")+")"+Ht+Yt+")*",qt="(?:"+[Pt,Bt,It].join("|")+")"+Gt,Kt="(?:"+[Ft+Et+"?",Et,Bt,It,kt].join("|")+")",$t=RegExp("[']","g"),Jt=RegExp(Et,"g"),Zt=RegExp(Lt+"(?="+Lt+")|"+Kt+Gt,"g"),Qt=RegExp([Nt+"?"+Dt+"+"+zt+"(?="+[At,Nt,"$"].join("|")+")",Ut+"+"+Xt+"(?="+[At,Nt+Wt,"$"].join("|")+")",Nt+"?"+Wt+"+"+zt,Nt+"+"+Xt,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Mt,qt].join("|"),"g"),te=RegExp("["+Vt+xt+wt+Tt+"]"),ee=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,re=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],ne=-1,ie={};ie[D]=ie[R]=ie[L]=ie[F]=ie[B]=ie[I]=ie[N]=ie[V]=ie[W]=!0,ie[g]=ie[v]=ie[M]=ie[_]=ie[P]=ie[y]=ie[m]=ie[b]=ie[w]=ie[S]=ie[C]=ie[T]=ie[j]=ie[k]=ie[E]=!1;var oe={};oe[g]=oe[v]=oe[M]=oe[P]=oe[_]=oe[y]=oe[D]=oe[R]=oe[L]=oe[F]=oe[B]=oe[w]=oe[S]=oe[C]=oe[T]=oe[j]=oe[k]=oe[A]=oe[I]=oe[N]=oe[V]=oe[W]=!0,oe[m]=oe[b]=oe[E]=!1;var se={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},ae=parseFloat,ce=parseInt,le="object"==typeof r.g&&r.g&&r.g.Object===Object&&r.g,ue="object"==typeof self&&self&&self.Object===Object&&self,he=le||ue||Function("return this")(),fe=e&&!e.nodeType&&e,de=fe&&t&&!t.nodeType&&t,pe=de&&de.exports===fe,ge=pe&&le.process,ve=function(){try{return de&&de.require&&de.require("util").types||ge&&ge.binding&&ge.binding("util")}catch(t){}}(),_e=ve&&ve.isArrayBuffer,ye=ve&&ve.isDate,me=ve&&ve.isMap,be=ve&&ve.isRegExp,xe=ve&&ve.isSet,we=ve&&ve.isTypedArray;function Se(t,e,r){switch(r.length){case 0:return t.call(e);case 1:return t.call(e,r[0]);case 2:return t.call(e,r[0],r[1]);case 3:return t.call(e,r[0],r[1],r[2])}return t.apply(e,r)}function Ce(t,e,r,n){for(var i=-1,o=null==t?0:t.length;++i<o;){var s=t[i];e(n,s,r(s),t)}return n}function Oe(t,e){for(var r=-1,n=null==t?0:t.length;++r<n&&!1!==e(t[r],r,t););return t}function Te(t,e){for(var r=null==t?0:t.length;r--&&!1!==e(t[r],r,t););return t}function je(t,e){for(var r=-1,n=null==t?0:t.length;++r<n;)if(!e(t[r],r,t))return!1;return!0}function ke(t,e){for(var r=-1,n=null==t?0:t.length,i=0,o=[];++r<n;){var s=t[r];e(s,r,t)&&(o[i++]=s)}return o}function Ae(t,e){return!(null==t||!t.length)&&Ne(t,e,0)>-1}function Ee(t,e,r){for(var n=-1,i=null==t?0:t.length;++n<i;)if(r(e,t[n]))return!0;return!1}function Me(t,e){for(var r=-1,n=null==t?0:t.length,i=Array(n);++r<n;)i[r]=e(t[r],r,t);return i}function Pe(t,e){for(var r=-1,n=e.length,i=t.length;++r<n;)t[i+r]=e[r];return t}function De(t,e,r,n){var i=-1,o=null==t?0:t.length;for(n&&o&&(r=t[++i]);++i<o;)r=e(r,t[i],i,t);return r}function Re(t,e,r,n){var i=null==t?0:t.length;for(n&&i&&(r=t[--i]);i--;)r=e(r,t[i],i,t);return r}function Le(t,e){for(var r=-1,n=null==t?0:t.length;++r<n;)if(e(t[r],r,t))return!0;return!1}var Fe=ze("length");function Be(t,e,r){var n;return r(t,(function(t,r,i){if(e(t,r,i))return n=r,!1})),n}function Ie(t,e,r,n){for(var i=t.length,o=r+(n?1:-1);n?o--:++o<i;)if(e(t[o],o,t))return o;return-1}function Ne(t,e,r){return e==e?function(t,e,r){for(var n=r-1,i=t.length;++n<i;)if(t[n]===e)return n;return-1}(t,e,r):Ie(t,We,r)}function Ve(t,e,r,n){for(var i=r-1,o=t.length;++i<o;)if(n(t[i],e))return i;return-1}function We(t){return t!=t}function Ue(t,e){var r=null==t?0:t.length;return r?He(t,e)/r:f}function ze(t){return function(e){return null==e?i:e[t]}}function Xe(t){return function(e){return null==t?i:t[e]}}function Ye(t,e,r,n,i){return i(t,(function(t,i,o){r=n?(n=!1,t):e(r,t,i,o)})),r}function He(t,e){for(var r,n=-1,o=t.length;++n<o;){var s=e(t[n]);s!==i&&(r=r===i?s:r+s)}return r}function Ge(t,e){for(var r=-1,n=Array(t);++r<t;)n[r]=e(r);return n}function qe(t){return t?t.slice(0,hr(t)+1).replace(nt,""):t}function Ke(t){return function(e){return t(e)}}function $e(t,e){return Me(e,(function(e){return t[e]}))}function Je(t,e){return t.has(e)}function Ze(t,e){for(var r=-1,n=t.length;++r<n&&Ne(e,t[r],0)>-1;);return r}function Qe(t,e){for(var r=t.length;r--&&Ne(e,t[r],0)>-1;);return r}var tr=Xe({:"A",:"A",:"A",:"A",:"A",:"A",:"a",:"a",:"a",:"a",:"a",:"a",:"C",:"c",:"D",:"d",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"N",:"n",:"O",:"O",:"O",:"O",:"O",:"O",:"o",:"o",:"o",:"o",:"o",:"o",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"Y",:"y",:"y",:"Ae",:"ae",:"Th",:"th",:"ss",:"A",:"A",:"A",:"a",:"a",:"a",:"C",:"C",:"C",:"C",:"c",:"c",:"c",:"c",:"D",:"D",:"d",:"d",:"E",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"e",:"G",:"G",:"G",:"G",:"g",:"g",:"g",:"g",:"H",:"H",:"h",:"h",:"I",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"i",:"J",:"j",:"K",:"k",:"k",:"L",:"L",:"L",:"L",:"L",:"l",:"l",:"l",:"l",:"l",:"N",:"N",:"N",:"N",:"n",:"n",:"n",:"n",:"O",:"O",:"O",:"o",:"o",:"o",:"R",:"R",:"R",:"r",:"r",:"r",:"S",:"S",:"S",:"S",:"s",:"s",:"s",:"s",:"T",:"T",:"T",:"t",:"t",:"t",:"U",:"U",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"u",:"u",:"W",:"w",:"Y",:"y",:"Y",:"Z",:"Z",:"Z",:"z",:"z",:"z",:"IJ",:"ij",:"Oe",:"oe",:"'n",:"s"}),er=Xe({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function rr(t){return"\\"+se[t]}function nr(t){return te.test(t)}function ir(t){var e=-1,r=Array(t.size);return t.forEach((function(t,n){r[++e]=[n,t]})),r}function or(t,e){return function(r){return t(e(r))}}function sr(t,e){for(var r=-1,n=t.length,i=0,o=[];++r<n;){var s=t[r];s!==e&&s!==a||(t[r]=a,o[i++]=r)}return o}function ar(t){var e=-1,r=Array(t.size);return t.forEach((function(t){r[++e]=t})),r}function cr(t){var e=-1,r=Array(t.size);return t.forEach((function(t){r[++e]=[t,t]})),r}function lr(t){return nr(t)?function(t){for(var e=Zt.lastIndex=0;Zt.test(t);)++e;return e}(t):Fe(t)}function ur(t){return nr(t)?function(t){return t.match(Zt)||[]}(t):function(t){return t.split("")}(t)}function hr(t){for(var e=t.length;e--&&it.test(t.charAt(e)););return e}var fr=Xe({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),dr=function t(e){var r,n=(e=null==e?he:dr.defaults(he.Object(),e,dr.pick(he,re))).Array,it=e.Date,xt=e.Error,wt=e.Function,St=e.Math,Ct=e.Object,Ot=e.RegExp,Tt=e.String,jt=e.TypeError,kt=n.prototype,At=wt.prototype,Et=Ct.prototype,Mt=e["__core-js_shared__"],Pt=At.toString,Dt=Et.hasOwnProperty,Rt=0,Lt=(r=/[^.]+$/.exec(Mt&&Mt.keys&&Mt.keys.IE_PROTO||""))?"Symbol(src)_1."+r:"",Ft=Et.toString,Bt=Pt.call(Ct),It=he._,Nt=Ot("^"+Pt.call(Dt).replace(et,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Vt=pe?e.Buffer:i,Wt=e.Symbol,Ut=e.Uint8Array,zt=Vt?Vt.allocUnsafe:i,Xt=or(Ct.getPrototypeOf,Ct),Yt=Ct.create,Ht=Et.propertyIsEnumerable,Gt=kt.splice,qt=Wt?Wt.isConcatSpreadable:i,Kt=Wt?Wt.iterator:i,Zt=Wt?Wt.toStringTag:i,te=function(){try{var t=co(Ct,"defineProperty");return t({},"",{}),t}catch(t){}}(),se=e.clearTimeout!==he.clearTimeout&&e.clearTimeout,le=it&&it.now!==he.Date.now&&it.now,ue=e.setTimeout!==he.setTimeout&&e.setTimeout,fe=St.ceil,de=St.floor,ge=Ct.getOwnPropertySymbols,ve=Vt?Vt.isBuffer:i,Fe=e.isFinite,Xe=kt.join,pr=or(Ct.keys,Ct),gr=St.max,vr=St.min,_r=it.now,yr=e.parseInt,mr=St.random,br=kt.reverse,xr=co(e,"DataView"),wr=co(e,"Map"),Sr=co(e,"Promise"),Cr=co(e,"Set"),Or=co(e,"WeakMap"),Tr=co(Ct,"create"),jr=Or&&new Or,kr={},Ar=Bo(xr),Er=Bo(wr),Mr=Bo(Sr),Pr=Bo(Cr),Dr=Bo(Or),Rr=Wt?Wt.prototype:i,Lr=Rr?Rr.valueOf:i,Fr=Rr?Rr.toString:i;function Br(t){if(ta(t)&&!zs(t)&&!(t instanceof Wr)){if(t instanceof Vr)return t;if(Dt.call(t,"__wrapped__"))return Io(t)}return new Vr(t)}var Ir=function(){function t(){}return function(e){if(!Qs(e))return{};if(Yt)return Yt(e);t.prototype=e;var r=new t;return t.prototype=i,r}}();function Nr(){}function Vr(t,e){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!e,this.__index__=0,this.__values__=i}function Wr(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=d,this.__views__=[]}function Ur(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function zr(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function Xr(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function Yr(t){var e=-1,r=null==t?0:t.length;for(this.__data__=new Xr;++e<r;)this.add(t[e])}function Hr(t){var e=this.__data__=new zr(t);this.size=e.size}function Gr(t,e){var r=zs(t),n=!r&&Us(t),i=!r&&!n&&Gs(t),o=!r&&!n&&!i&&ca(t),s=r||n||i||o,a=s?Ge(t.length,Tt):[],c=a.length;for(var l in t)!e&&!Dt.call(t,l)||s&&("length"==l||i&&("offset"==l||"parent"==l)||o&&("buffer"==l||"byteLength"==l||"byteOffset"==l)||vo(l,c))||a.push(l);return a}function qr(t){var e=t.length;return e?t[Yn(0,e-1)]:i}function Kr(t,e){return Po(Ti(t),on(e,0,t.length))}function $r(t){return Po(Ti(t))}function Jr(t,e,r){(r!==i&&!Ns(t[e],r)||r===i&&!(e in t))&&rn(t,e,r)}function Zr(t,e,r){var n=t[e];Dt.call(t,e)&&Ns(n,r)&&(r!==i||e in t)||rn(t,e,r)}function Qr(t,e){for(var r=t.length;r--;)if(Ns(t[r][0],e))return r;return-1}function tn(t,e,r,n){return un(t,(function(t,i,o){e(n,t,r(t),o)})),n}function en(t,e){return t&&ji(e,Ea(e),t)}function rn(t,e,r){"__proto__"==e&&te?te(t,e,{configurable:!0,enumerable:!0,value:r,writable:!0}):t[e]=r}function nn(t,e){for(var r=-1,o=e.length,s=n(o),a=null==t;++r<o;)s[r]=a?i:Oa(t,e[r]);return s}function on(t,e,r){return t==t&&(r!==i&&(t=t<=r?t:r),e!==i&&(t=t>=e?t:e)),t}function sn(t,e,r,n,o,s){var a,c=1&e,l=2&e,u=4&e;if(r&&(a=o?r(t,n,o,s):r(t)),a!==i)return a;if(!Qs(t))return t;var h=zs(t);if(h){if(a=function(t){var e=t.length,r=new t.constructor(e);return e&&"string"==typeof t[0]&&Dt.call(t,"index")&&(r.index=t.index,r.input=t.input),r}(t),!c)return Ti(t,a)}else{var f=ho(t),d=f==b||f==x;if(Gs(t))return bi(t,c);if(f==C||f==g||d&&!o){if(a=l||d?{}:po(t),!c)return l?function(t,e){return ji(t,uo(t),e)}(t,function(t,e){return t&&ji(e,Ma(e),t)}(a,t)):function(t,e){return ji(t,lo(t),e)}(t,en(a,t))}else{if(!oe[f])return o?t:{};a=function(t,e,r){var n,i=t.constructor;switch(e){case M:return xi(t);case _:case y:return new i(+t);case P:return function(t,e){var r=e?xi(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.byteLength)}(t,r);case D:case R:case L:case F:case B:case I:case N:case V:case W:return wi(t,r);case w:return new i;case S:case k:return new i(t);case T:return function(t){var e=new t.constructor(t.source,ft.exec(t));return e.lastIndex=t.lastIndex,e}(t);case j:return new i;case A:return n=t,Lr?Ct(Lr.call(n)):{}}}(t,f,c)}}s||(s=new Hr);var p=s.get(t);if(p)return p;s.set(t,a),oa(t)?t.forEach((function(n){a.add(sn(n,e,r,n,t,s))})):ea(t)&&t.forEach((function(n,i){a.set(i,sn(n,e,r,i,t,s))}));var v=h?i:(u?l?eo:to:l?Ma:Ea)(t);return Oe(v||t,(function(n,i){v&&(n=t[i=n]),Zr(a,i,sn(n,e,r,i,t,s))})),a}function an(t,e,r){var n=r.length;if(null==t)return!n;for(t=Ct(t);n--;){var o=r[n],s=e[o],a=t[o];if(a===i&&!(o in t)||!s(a))return!1}return!0}function cn(t,e,r){if("function"!=typeof t)throw new jt(o);return ko((function(){t.apply(i,r)}),e)}function ln(t,e,r,n){var i=-1,o=Ae,s=!0,a=t.length,c=[],l=e.length;if(!a)return c;r&&(e=Me(e,Ke(r))),n?(o=Ee,s=!1):e.length>=200&&(o=Je,s=!1,e=new Yr(e));t:for(;++i<a;){var u=t[i],h=null==r?u:r(u);if(u=n||0!==u?u:0,s&&h==h){for(var f=l;f--;)if(e[f]===h)continue t;c.push(u)}else o(e,h,n)||c.push(u)}return c}Br.templateSettings={escape:K,evaluate:$,interpolate:J,variable:"",imports:{_:Br}},Br.prototype=Nr.prototype,Br.prototype.constructor=Br,Vr.prototype=Ir(Nr.prototype),Vr.prototype.constructor=Vr,Wr.prototype=Ir(Nr.prototype),Wr.prototype.constructor=Wr,Ur.prototype.clear=function(){this.__data__=Tr?Tr(null):{},this.size=0},Ur.prototype.delete=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},Ur.prototype.get=function(t){var e=this.__data__;if(Tr){var r=e[t];return r===s?i:r}return Dt.call(e,t)?e[t]:i},Ur.prototype.has=function(t){var e=this.__data__;return Tr?e[t]!==i:Dt.call(e,t)},Ur.prototype.set=function(t,e){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=Tr&&e===i?s:e,this},zr.prototype.clear=function(){this.__data__=[],this.size=0},zr.prototype.delete=function(t){var e=this.__data__,r=Qr(e,t);return!(r<0||(r==e.length-1?e.pop():Gt.call(e,r,1),--this.size,0))},zr.prototype.get=function(t){var e=this.__data__,r=Qr(e,t);return r<0?i:e[r][1]},zr.prototype.has=function(t){return Qr(this.__data__,t)>-1},zr.prototype.set=function(t,e){var r=this.__data__,n=Qr(r,t);return n<0?(++this.size,r.push([t,e])):r[n][1]=e,this},Xr.prototype.clear=function(){this.size=0,this.__data__={hash:new Ur,map:new(wr||zr),string:new Ur}},Xr.prototype.delete=function(t){var e=so(this,t).delete(t);return this.size-=e?1:0,e},Xr.prototype.get=function(t){return so(this,t).get(t)},Xr.prototype.has=function(t){return so(this,t).has(t)},Xr.prototype.set=function(t,e){var r=so(this,t),n=r.size;return r.set(t,e),this.size+=r.size==n?0:1,this},Yr.prototype.add=Yr.prototype.push=function(t){return this.__data__.set(t,s),this},Yr.prototype.has=function(t){return this.__data__.has(t)},Hr.prototype.clear=function(){this.__data__=new zr,this.size=0},Hr.prototype.delete=function(t){var e=this.__data__,r=e.delete(t);return this.size=e.size,r},Hr.prototype.get=function(t){return this.__data__.get(t)},Hr.prototype.has=function(t){return this.__data__.has(t)},Hr.prototype.set=function(t,e){var r=this.__data__;if(r instanceof zr){var n=r.__data__;if(!wr||n.length<199)return n.push([t,e]),this.size=++r.size,this;r=this.__data__=new Xr(n)}return r.set(t,e),this.size=r.size,this};var un=Ei(yn),hn=Ei(mn,!0);function fn(t,e){var r=!0;return un(t,(function(t,n,i){return r=!!e(t,n,i)})),r}function dn(t,e,r){for(var n=-1,o=t.length;++n<o;){var s=t[n],a=e(s);if(null!=a&&(c===i?a==a&&!aa(a):r(a,c)))var c=a,l=s}return l}function pn(t,e){var r=[];return un(t,(function(t,n,i){e(t,n,i)&&r.push(t)})),r}function gn(t,e,r,n,i){var o=-1,s=t.length;for(r||(r=go),i||(i=[]);++o<s;){var a=t[o];e>0&&r(a)?e>1?gn(a,e-1,r,n,i):Pe(i,a):n||(i[i.length]=a)}return i}var vn=Mi(),_n=Mi(!0);function yn(t,e){return t&&vn(t,e,Ea)}function mn(t,e){return t&&_n(t,e,Ea)}function bn(t,e){return ke(e,(function(e){return $s(t[e])}))}function xn(t,e){for(var r=0,n=(e=vi(e,t)).length;null!=t&&r<n;)t=t[Fo(e[r++])];return r&&r==n?t:i}function wn(t,e,r){var n=e(t);return zs(t)?n:Pe(n,r(t))}function Sn(t){return null==t?t===i?"[object Undefined]":"[object Null]":Zt&&Zt in Ct(t)?function(t){var e=Dt.call(t,Zt),r=t[Zt];try{t[Zt]=i;var n=!0}catch(t){}var o=Ft.call(t);return n&&(e?t[Zt]=r:delete t[Zt]),o}(t):function(t){return Ft.call(t)}(t)}function Cn(t,e){return t>e}function On(t,e){return null!=t&&Dt.call(t,e)}function Tn(t,e){return null!=t&&e in Ct(t)}function jn(t,e,r){for(var o=r?Ee:Ae,s=t[0].length,a=t.length,c=a,l=n(a),u=1/0,h=[];c--;){var f=t[c];c&&e&&(f=Me(f,Ke(e))),u=vr(f.length,u),l[c]=!r&&(e||s>=120&&f.length>=120)?new Yr(c&&f):i}f=t[0];var d=-1,p=l[0];t:for(;++d<s&&h.length<u;){var g=f[d],v=e?e(g):g;if(g=r||0!==g?g:0,!(p?Je(p,v):o(h,v,r))){for(c=a;--c;){var _=l[c];if(!(_?Je(_,v):o(t[c],v,r)))continue t}p&&p.push(v),h.push(g)}}return h}function kn(t,e,r){var n=null==(t=Oo(t,e=vi(e,t)))?t:t[Fo(Ko(e))];return null==n?i:Se(n,t,r)}function An(t){return ta(t)&&Sn(t)==g}function En(t,e,r,n,o){return t===e||(null==t||null==e||!ta(t)&&!ta(e)?t!=t&&e!=e:function(t,e,r,n,o,s){var a=zs(t),c=zs(e),l=a?v:ho(t),u=c?v:ho(e),h=(l=l==g?C:l)==C,f=(u=u==g?C:u)==C,d=l==u;if(d&&Gs(t)){if(!Gs(e))return!1;a=!0,h=!1}if(d&&!h)return s||(s=new Hr),a||ca(t)?Zi(t,e,r,n,o,s):function(t,e,r,n,i,o,s){switch(r){case P:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case M:return!(t.byteLength!=e.byteLength||!o(new Ut(t),new Ut(e)));case _:case y:case S:return Ns(+t,+e);case m:return t.name==e.name&&t.message==e.message;case T:case k:return t==e+"";case w:var a=ir;case j:var c=1&n;if(a||(a=ar),t.size!=e.size&&!c)return!1;var l=s.get(t);if(l)return l==e;n|=2,s.set(t,e);var u=Zi(a(t),a(e),n,i,o,s);return s.delete(t),u;case A:if(Lr)return Lr.call(t)==Lr.call(e)}return!1}(t,e,l,r,n,o,s);if(!(1&r)){var p=h&&Dt.call(t,"__wrapped__"),b=f&&Dt.call(e,"__wrapped__");if(p||b){var x=p?t.value():t,O=b?e.value():e;return s||(s=new Hr),o(x,O,r,n,s)}}return!!d&&(s||(s=new Hr),function(t,e,r,n,o,s){var a=1&r,c=to(t),l=c.length;if(l!=to(e).length&&!a)return!1;for(var u=l;u--;){var h=c[u];if(!(a?h in e:Dt.call(e,h)))return!1}var f=s.get(t),d=s.get(e);if(f&&d)return f==e&&d==t;var p=!0;s.set(t,e),s.set(e,t);for(var g=a;++u<l;){var v=t[h=c[u]],_=e[h];if(n)var y=a?n(_,v,h,e,t,s):n(v,_,h,t,e,s);if(!(y===i?v===_||o(v,_,r,n,s):y)){p=!1;break}g||(g="constructor"==h)}if(p&&!g){var m=t.constructor,b=e.constructor;m==b||!("constructor"in t)||!("constructor"in e)||"function"==typeof m&&m instanceof m&&"function"==typeof b&&b instanceof b||(p=!1)}return s.delete(t),s.delete(e),p}(t,e,r,n,o,s))}(t,e,r,n,En,o))}function Mn(t,e,r,n){var o=r.length,s=o,a=!n;if(null==t)return!s;for(t=Ct(t);o--;){var c=r[o];if(a&&c[2]?c[1]!==t[c[0]]:!(c[0]in t))return!1}for(;++o<s;){var l=(c=r[o])[0],u=t[l],h=c[1];if(a&&c[2]){if(u===i&&!(l in t))return!1}else{var f=new Hr;if(n)var d=n(u,h,l,t,e,f);if(!(d===i?En(h,u,3,n,f):d))return!1}}return!0}function Pn(t){return!(!Qs(t)||(e=t,Lt&&Lt in e))&&($s(t)?Nt:gt).test(Bo(t));var e}function Dn(t){return"function"==typeof t?t:null==t?rc:"object"==typeof t?zs(t)?In(t[0],t[1]):Bn(t):hc(t)}function Rn(t){if(!xo(t))return pr(t);var e=[];for(var r in Ct(t))Dt.call(t,r)&&"constructor"!=r&&e.push(r);return e}function Ln(t,e){return t<e}function Fn(t,e){var r=-1,i=Ys(t)?n(t.length):[];return un(t,(function(t,n,o){i[++r]=e(t,n,o)})),i}function Bn(t){var e=ao(t);return 1==e.length&&e[0][2]?So(e[0][0],e[0][1]):function(r){return r===t||Mn(r,t,e)}}function In(t,e){return yo(t)&&wo(e)?So(Fo(t),e):function(r){var n=Oa(r,t);return n===i&&n===e?Ta(r,t):En(e,n,3)}}function Nn(t,e,r,n,o){t!==e&&vn(e,(function(s,a){if(o||(o=new Hr),Qs(s))!function(t,e,r,n,o,s,a){var c=To(t,r),l=To(e,r),u=a.get(l);if(u)Jr(t,r,u);else{var h=s?s(c,l,r+"",t,e,a):i,f=h===i;if(f){var d=zs(l),p=!d&&Gs(l),g=!d&&!p&&ca(l);h=l,d||p||g?zs(c)?h=c:Hs(c)?h=Ti(c):p?(f=!1,h=bi(l,!0)):g?(f=!1,h=wi(l,!0)):h=[]:na(l)||Us(l)?(h=c,Us(c)?h=va(c):Qs(c)&&!$s(c)||(h=po(l))):f=!1}f&&(a.set(l,h),o(h,l,n,s,a),a.delete(l)),Jr(t,r,h)}}(t,e,a,r,Nn,n,o);else{var c=n?n(To(t,a),s,a+"",t,e,o):i;c===i&&(c=s),Jr(t,a,c)}}),Ma)}function Vn(t,e){var r=t.length;if(r)return vo(e+=e<0?r:0,r)?t[e]:i}function Wn(t,e,r){e=e.length?Me(e,(function(t){return zs(t)?function(e){return xn(e,1===t.length?t[0]:t)}:t})):[rc];var n=-1;e=Me(e,Ke(oo()));var i=Fn(t,(function(t,r,i){var o=Me(e,(function(e){return e(t)}));return{criteria:o,index:++n,value:t}}));return function(t,e){var n=t.length;for(t.sort((function(t,e){return function(t,e,r){for(var n=-1,i=t.criteria,o=e.criteria,s=i.length,a=r.length;++n<s;){var c=Si(i[n],o[n]);if(c)return n>=a?c:c*("desc"==r[n]?-1:1)}return t.index-e.index}(t,e,r)}));n--;)t[n]=t[n].value;return t}(i)}function Un(t,e,r){for(var n=-1,i=e.length,o={};++n<i;){var s=e[n],a=xn(t,s);r(a,s)&&$n(o,vi(s,t),a)}return o}function zn(t,e,r,n){var i=n?Ve:Ne,o=-1,s=e.length,a=t;for(t===e&&(e=Ti(e)),r&&(a=Me(t,Ke(r)));++o<s;)for(var c=0,l=e[o],u=r?r(l):l;(c=i(a,u,c,n))>-1;)a!==t&&Gt.call(a,c,1),Gt.call(t,c,1);return t}function Xn(t,e){for(var r=t?e.length:0,n=r-1;r--;){var i=e[r];if(r==n||i!==o){var o=i;vo(i)?Gt.call(t,i,1):ci(t,i)}}return t}function Yn(t,e){return t+de(mr()*(e-t+1))}function Hn(t,e){var r="";if(!t||e<1||e>h)return r;do{e%2&&(r+=t),(e=de(e/2))&&(t+=t)}while(e);return r}function Gn(t,e){return Ao(Co(t,e,rc),t+"")}function qn(t){return qr(Na(t))}function Kn(t,e){var r=Na(t);return Po(r,on(e,0,r.length))}function $n(t,e,r,n){if(!Qs(t))return t;for(var o=-1,s=(e=vi(e,t)).length,a=s-1,c=t;null!=c&&++o<s;){var l=Fo(e[o]),u=r;if("__proto__"===l||"constructor"===l||"prototype"===l)return t;if(o!=a){var h=c[l];(u=n?n(h,l,c):i)===i&&(u=Qs(h)?h:vo(e[o+1])?[]:{})}Zr(c,l,u),c=c[l]}return t}var Jn=jr?function(t,e){return jr.set(t,e),t}:rc,Zn=te?function(t,e){return te(t,"toString",{configurable:!0,enumerable:!1,value:Qa(e),writable:!0})}:rc;function Qn(t){return Po(Na(t))}function ti(t,e,r){var i=-1,o=t.length;e<0&&(e=-e>o?0:o+e),(r=r>o?o:r)<0&&(r+=o),o=e>r?0:r-e>>>0,e>>>=0;for(var s=n(o);++i<o;)s[i]=t[i+e];return s}function ei(t,e){var r;return un(t,(function(t,n,i){return!(r=e(t,n,i))})),!!r}function ri(t,e,r){var n=0,i=null==t?n:t.length;if("number"==typeof e&&e==e&&i<=2147483647){for(;n<i;){var o=n+i>>>1,s=t[o];null!==s&&!aa(s)&&(r?s<=e:s<e)?n=o+1:i=o}return i}return ni(t,e,rc,r)}function ni(t,e,r,n){var o=0,s=null==t?0:t.length;if(0===s)return 0;for(var a=(e=r(e))!=e,c=null===e,l=aa(e),u=e===i;o<s;){var h=de((o+s)/2),f=r(t[h]),d=f!==i,p=null===f,g=f==f,v=aa(f);if(a)var _=n||g;else _=u?g&&(n||d):c?g&&d&&(n||!p):l?g&&d&&!p&&(n||!v):!p&&!v&&(n?f<=e:f<e);_?o=h+1:s=h}return vr(s,4294967294)}function ii(t,e){for(var r=-1,n=t.length,i=0,o=[];++r<n;){var s=t[r],a=e?e(s):s;if(!r||!Ns(a,c)){var c=a;o[i++]=0===s?0:s}}return o}function oi(t){return"number"==typeof t?t:aa(t)?f:+t}function si(t){if("string"==typeof t)return t;if(zs(t))return Me(t,si)+"";if(aa(t))return Fr?Fr.call(t):"";var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}function ai(t,e,r){var n=-1,i=Ae,o=t.length,s=!0,a=[],c=a;if(r)s=!1,i=Ee;else if(o>=200){var l=e?null:Hi(t);if(l)return ar(l);s=!1,i=Je,c=new Yr}else c=e?[]:a;t:for(;++n<o;){var u=t[n],h=e?e(u):u;if(u=r||0!==u?u:0,s&&h==h){for(var f=c.length;f--;)if(c[f]===h)continue t;e&&c.push(h),a.push(u)}else i(c,h,r)||(c!==a&&c.push(h),a.push(u))}return a}function ci(t,e){return null==(t=Oo(t,e=vi(e,t)))||delete t[Fo(Ko(e))]}function li(t,e,r,n){return $n(t,e,r(xn(t,e)),n)}function ui(t,e,r,n){for(var i=t.length,o=n?i:-1;(n?o--:++o<i)&&e(t[o],o,t););return r?ti(t,n?0:o,n?o+1:i):ti(t,n?o+1:0,n?i:o)}function hi(t,e){var r=t;return r instanceof Wr&&(r=r.value()),De(e,(function(t,e){return e.func.apply(e.thisArg,Pe([t],e.args))}),r)}function fi(t,e,r){var i=t.length;if(i<2)return i?ai(t[0]):[];for(var o=-1,s=n(i);++o<i;)for(var a=t[o],c=-1;++c<i;)c!=o&&(s[o]=ln(s[o]||a,t[c],e,r));return ai(gn(s,1),e,r)}function di(t,e,r){for(var n=-1,o=t.length,s=e.length,a={};++n<o;){var c=n<s?e[n]:i;r(a,t[n],c)}return a}function pi(t){return Hs(t)?t:[]}function gi(t){return"function"==typeof t?t:rc}function vi(t,e){return zs(t)?t:yo(t,e)?[t]:Lo(_a(t))}var _i=Gn;function yi(t,e,r){var n=t.length;return r=r===i?n:r,!e&&r>=n?t:ti(t,e,r)}var mi=se||function(t){return he.clearTimeout(t)};function bi(t,e){if(e)return t.slice();var r=t.length,n=zt?zt(r):new t.constructor(r);return t.copy(n),n}function xi(t){var e=new t.constructor(t.byteLength);return new Ut(e).set(new Ut(t)),e}function wi(t,e){var r=e?xi(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.length)}function Si(t,e){if(t!==e){var r=t!==i,n=null===t,o=t==t,s=aa(t),a=e!==i,c=null===e,l=e==e,u=aa(e);if(!c&&!u&&!s&&t>e||s&&a&&l&&!c&&!u||n&&a&&l||!r&&l||!o)return 1;if(!n&&!s&&!u&&t<e||u&&r&&o&&!n&&!s||c&&r&&o||!a&&o||!l)return-1}return 0}function Ci(t,e,r,i){for(var o=-1,s=t.length,a=r.length,c=-1,l=e.length,u=gr(s-a,0),h=n(l+u),f=!i;++c<l;)h[c]=e[c];for(;++o<a;)(f||o<s)&&(h[r[o]]=t[o]);for(;u--;)h[c++]=t[o++];return h}function Oi(t,e,r,i){for(var o=-1,s=t.length,a=-1,c=r.length,l=-1,u=e.length,h=gr(s-c,0),f=n(h+u),d=!i;++o<h;)f[o]=t[o];for(var p=o;++l<u;)f[p+l]=e[l];for(;++a<c;)(d||o<s)&&(f[p+r[a]]=t[o++]);return f}function Ti(t,e){var r=-1,i=t.length;for(e||(e=n(i));++r<i;)e[r]=t[r];return e}function ji(t,e,r,n){var o=!r;r||(r={});for(var s=-1,a=e.length;++s<a;){var c=e[s],l=n?n(r[c],t[c],c,r,t):i;l===i&&(l=t[c]),o?rn(r,c,l):Zr(r,c,l)}return r}function ki(t,e){return function(r,n){var i=zs(r)?Ce:tn,o=e?e():{};return i(r,t,oo(n,2),o)}}function Ai(t){return Gn((function(e,r){var n=-1,o=r.length,s=o>1?r[o-1]:i,a=o>2?r[2]:i;for(s=t.length>3&&"function"==typeof s?(o--,s):i,a&&_o(r[0],r[1],a)&&(s=o<3?i:s,o=1),e=Ct(e);++n<o;){var c=r[n];c&&t(e,c,n,s)}return e}))}function Ei(t,e){return function(r,n){if(null==r)return r;if(!Ys(r))return t(r,n);for(var i=r.length,o=e?i:-1,s=Ct(r);(e?o--:++o<i)&&!1!==n(s[o],o,s););return r}}function Mi(t){return function(e,r,n){for(var i=-1,o=Ct(e),s=n(e),a=s.length;a--;){var c=s[t?a:++i];if(!1===r(o[c],c,o))break}return e}}function Pi(t){return function(e){var r=nr(e=_a(e))?ur(e):i,n=r?r[0]:e.charAt(0),o=r?yi(r,1).join(""):e.slice(1);return n[t]()+o}}function Di(t){return function(e){return De($a(Ua(e).replace($t,"")),t,"")}}function Ri(t){return function(){var e=arguments;switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3]);case 5:return new t(e[0],e[1],e[2],e[3],e[4]);case 6:return new t(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6])}var r=Ir(t.prototype),n=t.apply(r,e);return Qs(n)?n:r}}function Li(t){return function(e,r,n){var o=Ct(e);if(!Ys(e)){var s=oo(r,3);e=Ea(e),r=function(t){return s(o[t],t,o)}}var a=t(e,r,n);return a>-1?o[s?e[a]:a]:i}}function Fi(t){return Qi((function(e){var r=e.length,n=r,s=Vr.prototype.thru;for(t&&e.reverse();n--;){var a=e[n];if("function"!=typeof a)throw new jt(o);if(s&&!c&&"wrapper"==no(a))var c=new Vr([],!0)}for(n=c?n:r;++n<r;){var l=no(a=e[n]),u="wrapper"==l?ro(a):i;c=u&&mo(u[0])&&424==u[1]&&!u[4].length&&1==u[9]?c[no(u[0])].apply(c,u[3]):1==a.length&&mo(a)?c[l]():c.thru(a)}return function(){var t=arguments,n=t[0];if(c&&1==t.length&&zs(n))return c.plant(n).value();for(var i=0,o=r?e[i].apply(this,t):n;++i<r;)o=e[i].call(this,o);return o}}))}function Bi(t,e,r,o,s,a,c,u,h,f){var d=e&l,p=1&e,g=2&e,v=24&e,_=512&e,y=g?i:Ri(t);return function l(){for(var m=arguments.length,b=n(m),x=m;x--;)b[x]=arguments[x];if(v)var w=io(l),S=function(t,e){for(var r=t.length,n=0;r--;)t[r]===e&&++n;return n}(b,w);if(o&&(b=Ci(b,o,s,v)),a&&(b=Oi(b,a,c,v)),m-=S,v&&m<f){var C=sr(b,w);return Xi(t,e,Bi,l.placeholder,r,b,C,u,h,f-m)}var O=p?r:this,T=g?O[t]:t;return m=b.length,u?b=function(t,e){for(var r=t.length,n=vr(e.length,r),o=Ti(t);n--;){var s=e[n];t[n]=vo(s,r)?o[s]:i}return t}(b,u):_&&m>1&&b.reverse(),d&&h<m&&(b.length=h),this&&this!==he&&this instanceof l&&(T=y||Ri(T)),T.apply(O,b)}}function Ii(t,e){return function(r,n){return function(t,e,r,n){return yn(t,(function(t,i,o){e(n,r(t),i,o)})),n}(r,t,e(n),{})}}function Ni(t,e){return function(r,n){var o;if(r===i&&n===i)return e;if(r!==i&&(o=r),n!==i){if(o===i)return n;"string"==typeof r||"string"==typeof n?(r=si(r),n=si(n)):(r=oi(r),n=oi(n)),o=t(r,n)}return o}}function Vi(t){return Qi((function(e){return e=Me(e,Ke(oo())),Gn((function(r){var n=this;return t(e,(function(t){return Se(t,n,r)}))}))}))}function Wi(t,e){var r=(e=e===i?" ":si(e)).length;if(r<2)return r?Hn(e,t):e;var n=Hn(e,fe(t/lr(e)));return nr(e)?yi(ur(n),0,t).join(""):n.slice(0,t)}function Ui(t){return function(e,r,o){return o&&"number"!=typeof o&&_o(e,r,o)&&(r=o=i),e=fa(e),r===i?(r=e,e=0):r=fa(r),function(t,e,r,i){for(var o=-1,s=gr(fe((e-t)/(r||1)),0),a=n(s);s--;)a[i?s:++o]=t,t+=r;return a}(e,r,o=o===i?e<r?1:-1:fa(o),t)}}function zi(t){return function(e,r){return"string"==typeof e&&"string"==typeof r||(e=ga(e),r=ga(r)),t(e,r)}}function Xi(t,e,r,n,o,s,a,l,u,h){var f=8&e;e|=f?c:64,4&(e&=~(f?64:c))||(e&=-4);var d=[t,e,o,f?s:i,f?a:i,f?i:s,f?i:a,l,u,h],p=r.apply(i,d);return mo(t)&&jo(p,d),p.placeholder=n,Eo(p,t,e)}function Yi(t){var e=St[t];return function(t,r){if(t=ga(t),(r=null==r?0:vr(da(r),292))&&Fe(t)){var n=(_a(t)+"e").split("e");return+((n=(_a(e(n[0]+"e"+(+n[1]+r)))+"e").split("e"))[0]+"e"+(+n[1]-r))}return e(t)}}var Hi=Cr&&1/ar(new Cr([,-0]))[1]==u?function(t){return new Cr(t)}:ac;function Gi(t){return function(e){var r=ho(e);return r==w?ir(e):r==j?cr(e):function(t,e){return Me(e,(function(e){return[e,t[e]]}))}(e,t(e))}}function qi(t,e,r,s,u,h,f,d){var p=2&e;if(!p&&"function"!=typeof t)throw new jt(o);var g=s?s.length:0;if(g||(e&=-97,s=u=i),f=f===i?f:gr(da(f),0),d=d===i?d:da(d),g-=u?u.length:0,64&e){var v=s,_=u;s=u=i}var y=p?i:ro(t),m=[t,e,r,s,u,v,_,h,f,d];if(y&&function(t,e){var r=t[1],n=e[1],i=r|n,o=i<131,s=n==l&&8==r||n==l&&256==r&&t[7].length<=e[8]||384==n&&e[7].length<=e[8]&&8==r;if(!o&&!s)return t;1&n&&(t[2]=e[2],i|=1&r?0:4);var c=e[3];if(c){var u=t[3];t[3]=u?Ci(u,c,e[4]):c,t[4]=u?sr(t[3],a):e[4]}(c=e[5])&&(u=t[5],t[5]=u?Oi(u,c,e[6]):c,t[6]=u?sr(t[5],a):e[6]),(c=e[7])&&(t[7]=c),n&l&&(t[8]=null==t[8]?e[8]:vr(t[8],e[8])),null==t[9]&&(t[9]=e[9]),t[0]=e[0],t[1]=i}(m,y),t=m[0],e=m[1],r=m[2],s=m[3],u=m[4],!(d=m[9]=m[9]===i?p?0:t.length:gr(m[9]-g,0))&&24&e&&(e&=-25),e&&1!=e)b=8==e||16==e?function(t,e,r){var o=Ri(t);return function s(){for(var a=arguments.length,c=n(a),l=a,u=io(s);l--;)c[l]=arguments[l];var h=a<3&&c[0]!==u&&c[a-1]!==u?[]:sr(c,u);return(a-=h.length)<r?Xi(t,e,Bi,s.placeholder,i,c,h,i,i,r-a):Se(this&&this!==he&&this instanceof s?o:t,this,c)}}(t,e,d):e!=c&&33!=e||u.length?Bi.apply(i,m):function(t,e,r,i){var o=1&e,s=Ri(t);return function e(){for(var a=-1,c=arguments.length,l=-1,u=i.length,h=n(u+c),f=this&&this!==he&&this instanceof e?s:t;++l<u;)h[l]=i[l];for(;c--;)h[l++]=arguments[++a];return Se(f,o?r:this,h)}}(t,e,r,s);else var b=function(t,e,r){var n=1&e,i=Ri(t);return function e(){return(this&&this!==he&&this instanceof e?i:t).apply(n?r:this,arguments)}}(t,e,r);return Eo((y?Jn:jo)(b,m),t,e)}function Ki(t,e,r,n){return t===i||Ns(t,Et[r])&&!Dt.call(n,r)?e:t}function $i(t,e,r,n,o,s){return Qs(t)&&Qs(e)&&(s.set(e,t),Nn(t,e,i,$i,s),s.delete(e)),t}function Ji(t){return na(t)?i:t}function Zi(t,e,r,n,o,s){var a=1&r,c=t.length,l=e.length;if(c!=l&&!(a&&l>c))return!1;var u=s.get(t),h=s.get(e);if(u&&h)return u==e&&h==t;var f=-1,d=!0,p=2&r?new Yr:i;for(s.set(t,e),s.set(e,t);++f<c;){var g=t[f],v=e[f];if(n)var _=a?n(v,g,f,e,t,s):n(g,v,f,t,e,s);if(_!==i){if(_)continue;d=!1;break}if(p){if(!Le(e,(function(t,e){if(!Je(p,e)&&(g===t||o(g,t,r,n,s)))return p.push(e)}))){d=!1;break}}else if(g!==v&&!o(g,v,r,n,s)){d=!1;break}}return s.delete(t),s.delete(e),d}function Qi(t){return Ao(Co(t,i,Xo),t+"")}function to(t){return wn(t,Ea,lo)}function eo(t){return wn(t,Ma,uo)}var ro=jr?function(t){return jr.get(t)}:ac;function no(t){for(var e=t.name+"",r=kr[e],n=Dt.call(kr,e)?r.length:0;n--;){var i=r[n],o=i.func;if(null==o||o==t)return i.name}return e}function io(t){return(Dt.call(Br,"placeholder")?Br:t).placeholder}function oo(){var t=Br.iteratee||nc;return t=t===nc?Dn:t,arguments.length?t(arguments[0],arguments[1]):t}function so(t,e){var r,n,i=t.__data__;return("string"==(n=typeof(r=e))||"number"==n||"symbol"==n||"boolean"==n?"__proto__"!==r:null===r)?i["string"==typeof e?"string":"hash"]:i.map}function ao(t){for(var e=Ea(t),r=e.length;r--;){var n=e[r],i=t[n];e[r]=[n,i,wo(i)]}return e}function co(t,e){var r=function(t,e){return null==t?i:t[e]}(t,e);return Pn(r)?r:i}var lo=ge?function(t){return null==t?[]:(t=Ct(t),ke(ge(t),(function(e){return Ht.call(t,e)})))}:pc,uo=ge?function(t){for(var e=[];t;)Pe(e,lo(t)),t=Xt(t);return e}:pc,ho=Sn;function fo(t,e,r){for(var n=-1,i=(e=vi(e,t)).length,o=!1;++n<i;){var s=Fo(e[n]);if(!(o=null!=t&&r(t,s)))break;t=t[s]}return o||++n!=i?o:!!(i=null==t?0:t.length)&&Zs(i)&&vo(s,i)&&(zs(t)||Us(t))}function po(t){return"function"!=typeof t.constructor||xo(t)?{}:Ir(Xt(t))}function go(t){return zs(t)||Us(t)||!!(qt&&t&&t[qt])}function vo(t,e){var r=typeof t;return!!(e=null==e?h:e)&&("number"==r||"symbol"!=r&&_t.test(t))&&t>-1&&t%1==0&&t<e}function _o(t,e,r){if(!Qs(r))return!1;var n=typeof e;return!!("number"==n?Ys(r)&&vo(e,r.length):"string"==n&&e in r)&&Ns(r[e],t)}function yo(t,e){if(zs(t))return!1;var r=typeof t;return!("number"!=r&&"symbol"!=r&&"boolean"!=r&&null!=t&&!aa(t))||Q.test(t)||!Z.test(t)||null!=e&&t in Ct(e)}function mo(t){var e=no(t),r=Br[e];if("function"!=typeof r||!(e in Wr.prototype))return!1;if(t===r)return!0;var n=ro(r);return!!n&&t===n[0]}(xr&&ho(new xr(new ArrayBuffer(1)))!=P||wr&&ho(new wr)!=w||Sr&&ho(Sr.resolve())!=O||Cr&&ho(new Cr)!=j||Or&&ho(new Or)!=E)&&(ho=function(t){var e=Sn(t),r=e==C?t.constructor:i,n=r?Bo(r):"";if(n)switch(n){case Ar:return P;case Er:return w;case Mr:return O;case Pr:return j;case Dr:return E}return e});var bo=Mt?$s:gc;function xo(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||Et)}function wo(t){return t==t&&!Qs(t)}function So(t,e){return function(r){return null!=r&&r[t]===e&&(e!==i||t in Ct(r))}}function Co(t,e,r){return e=gr(e===i?t.length-1:e,0),function(){for(var i=arguments,o=-1,s=gr(i.length-e,0),a=n(s);++o<s;)a[o]=i[e+o];o=-1;for(var c=n(e+1);++o<e;)c[o]=i[o];return c[e]=r(a),Se(t,this,c)}}function Oo(t,e){return e.length<2?t:xn(t,ti(e,0,-1))}function To(t,e){if(("constructor"!==e||"function"!=typeof t[e])&&"__proto__"!=e)return t[e]}var jo=Mo(Jn),ko=ue||function(t,e){return he.setTimeout(t,e)},Ao=Mo(Zn);function Eo(t,e,r){var n=e+"";return Ao(t,function(t,e){var r=e.length;if(!r)return t;var n=r-1;return e[n]=(r>1?"& ":"")+e[n],e=e.join(r>2?", ":" "),t.replace(ot,"{\n/* [wrapped with "+e+"] */\n")}(n,function(t,e){return Oe(p,(function(r){var n="_."+r[0];e&r[1]&&!Ae(t,n)&&t.push(n)})),t.sort()}(function(t){var e=t.match(st);return e?e[1].split(at):[]}(n),r)))}function Mo(t){var e=0,r=0;return function(){var n=_r(),o=16-(n-r);if(r=n,o>0){if(++e>=800)return arguments[0]}else e=0;return t.apply(i,arguments)}}function Po(t,e){var r=-1,n=t.length,o=n-1;for(e=e===i?n:e;++r<e;){var s=Yn(r,o),a=t[s];t[s]=t[r],t[r]=a}return t.length=e,t}var Do,Ro,Lo=(Do=Ds((function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(tt,(function(t,r,n,i){e.push(n?i.replace(ut,"$1"):r||t)})),e}),(function(t){return 500===Ro.size&&Ro.clear(),t})),Ro=Do.cache,Do);function Fo(t){if("string"==typeof t||aa(t))return t;var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}function Bo(t){if(null!=t){try{return Pt.call(t)}catch(t){}try{return t+""}catch(t){}}return""}function Io(t){if(t instanceof Wr)return t.clone();var e=new Vr(t.__wrapped__,t.__chain__);return e.__actions__=Ti(t.__actions__),e.__index__=t.__index__,e.__values__=t.__values__,e}var No=Gn((function(t,e){return Hs(t)?ln(t,gn(e,1,Hs,!0)):[]})),Vo=Gn((function(t,e){var r=Ko(e);return Hs(r)&&(r=i),Hs(t)?ln(t,gn(e,1,Hs,!0),oo(r,2)):[]})),Wo=Gn((function(t,e){var r=Ko(e);return Hs(r)&&(r=i),Hs(t)?ln(t,gn(e,1,Hs,!0),i,r):[]}));function Uo(t,e,r){var n=null==t?0:t.length;if(!n)return-1;var i=null==r?0:da(r);return i<0&&(i=gr(n+i,0)),Ie(t,oo(e,3),i)}function zo(t,e,r){var n=null==t?0:t.length;if(!n)return-1;var o=n-1;return r!==i&&(o=da(r),o=r<0?gr(n+o,0):vr(o,n-1)),Ie(t,oo(e,3),o,!0)}function Xo(t){return null!=t&&t.length?gn(t,1):[]}function Yo(t){return t&&t.length?t[0]:i}var Ho=Gn((function(t){var e=Me(t,pi);return e.length&&e[0]===t[0]?jn(e):[]})),Go=Gn((function(t){var e=Ko(t),r=Me(t,pi);return e===Ko(r)?e=i:r.pop(),r.length&&r[0]===t[0]?jn(r,oo(e,2)):[]})),qo=Gn((function(t){var e=Ko(t),r=Me(t,pi);return(e="function"==typeof e?e:i)&&r.pop(),r.length&&r[0]===t[0]?jn(r,i,e):[]}));function Ko(t){var e=null==t?0:t.length;return e?t[e-1]:i}var $o=Gn(Jo);function Jo(t,e){return t&&t.length&&e&&e.length?zn(t,e):t}var Zo=Qi((function(t,e){var r=null==t?0:t.length,n=nn(t,e);return Xn(t,Me(e,(function(t){return vo(t,r)?+t:t})).sort(Si)),n}));function Qo(t){return null==t?t:br.call(t)}var ts=Gn((function(t){return ai(gn(t,1,Hs,!0))})),es=Gn((function(t){var e=Ko(t);return Hs(e)&&(e=i),ai(gn(t,1,Hs,!0),oo(e,2))})),rs=Gn((function(t){var e=Ko(t);return e="function"==typeof e?e:i,ai(gn(t,1,Hs,!0),i,e)}));function ns(t){if(!t||!t.length)return[];var e=0;return t=ke(t,(function(t){if(Hs(t))return e=gr(t.length,e),!0})),Ge(e,(function(e){return Me(t,ze(e))}))}function is(t,e){if(!t||!t.length)return[];var r=ns(t);return null==e?r:Me(r,(function(t){return Se(e,i,t)}))}var os=Gn((function(t,e){return Hs(t)?ln(t,e):[]})),ss=Gn((function(t){return fi(ke(t,Hs))})),as=Gn((function(t){var e=Ko(t);return Hs(e)&&(e=i),fi(ke(t,Hs),oo(e,2))})),cs=Gn((function(t){var e=Ko(t);return e="function"==typeof e?e:i,fi(ke(t,Hs),i,e)})),ls=Gn(ns),us=Gn((function(t){var e=t.length,r=e>1?t[e-1]:i;return r="function"==typeof r?(t.pop(),r):i,is(t,r)}));function hs(t){var e=Br(t);return e.__chain__=!0,e}function fs(t,e){return e(t)}var ds=Qi((function(t){var e=t.length,r=e?t[0]:0,n=this.__wrapped__,o=function(e){return nn(e,t)};return!(e>1||this.__actions__.length)&&n instanceof Wr&&vo(r)?((n=n.slice(r,+r+(e?1:0))).__actions__.push({func:fs,args:[o],thisArg:i}),new Vr(n,this.__chain__).thru((function(t){return e&&!t.length&&t.push(i),t}))):this.thru(o)})),ps=ki((function(t,e,r){Dt.call(t,r)?++t[r]:rn(t,r,1)})),gs=Li(Uo),vs=Li(zo);function _s(t,e){return(zs(t)?Oe:un)(t,oo(e,3))}function ys(t,e){return(zs(t)?Te:hn)(t,oo(e,3))}var ms=ki((function(t,e,r){Dt.call(t,r)?t[r].push(e):rn(t,r,[e])})),bs=Gn((function(t,e,r){var i=-1,o="function"==typeof e,s=Ys(t)?n(t.length):[];return un(t,(function(t){s[++i]=o?Se(e,t,r):kn(t,e,r)})),s})),xs=ki((function(t,e,r){rn(t,r,e)}));function ws(t,e){return(zs(t)?Me:Fn)(t,oo(e,3))}var Ss=ki((function(t,e,r){t[r?0:1].push(e)}),(function(){return[[],[]]})),Cs=Gn((function(t,e){if(null==t)return[];var r=e.length;return r>1&&_o(t,e[0],e[1])?e=[]:r>2&&_o(e[0],e[1],e[2])&&(e=[e[0]]),Wn(t,gn(e,1),[])})),Os=le||function(){return he.Date.now()};function Ts(t,e,r){return e=r?i:e,e=t&&null==e?t.length:e,qi(t,l,i,i,i,i,e)}function js(t,e){var r;if("function"!=typeof e)throw new jt(o);return t=da(t),function(){return--t>0&&(r=e.apply(this,arguments)),t<=1&&(e=i),r}}var ks=Gn((function(t,e,r){var n=1;if(r.length){var i=sr(r,io(ks));n|=c}return qi(t,n,e,r,i)})),As=Gn((function(t,e,r){var n=3;if(r.length){var i=sr(r,io(As));n|=c}return qi(e,n,t,r,i)}));function Es(t,e,r){var n,s,a,c,l,u,h=0,f=!1,d=!1,p=!0;if("function"!=typeof t)throw new jt(o);function g(e){var r=n,o=s;return n=s=i,h=e,c=t.apply(o,r)}function v(t){var r=t-u;return u===i||r>=e||r<0||d&&t-h>=a}function _(){var t=Os();if(v(t))return y(t);l=ko(_,function(t){var r=e-(t-u);return d?vr(r,a-(t-h)):r}(t))}function y(t){return l=i,p&&n?g(t):(n=s=i,c)}function m(){var t=Os(),r=v(t);if(n=arguments,s=this,u=t,r){if(l===i)return function(t){return h=t,l=ko(_,e),f?g(t):c}(u);if(d)return mi(l),l=ko(_,e),g(u)}return l===i&&(l=ko(_,e)),c}return e=ga(e)||0,Qs(r)&&(f=!!r.leading,a=(d="maxWait"in r)?gr(ga(r.maxWait)||0,e):a,p="trailing"in r?!!r.trailing:p),m.cancel=function(){l!==i&&mi(l),h=0,n=u=s=l=i},m.flush=function(){return l===i?c:y(Os())},m}var Ms=Gn((function(t,e){return cn(t,1,e)})),Ps=Gn((function(t,e,r){return cn(t,ga(e)||0,r)}));function Ds(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new jt(o);var r=function(){var n=arguments,i=e?e.apply(this,n):n[0],o=r.cache;if(o.has(i))return o.get(i);var s=t.apply(this,n);return r.cache=o.set(i,s)||o,s};return r.cache=new(Ds.Cache||Xr),r}function Rs(t){if("function"!=typeof t)throw new jt(o);return function(){var e=arguments;switch(e.length){case 0:return!t.call(this);case 1:return!t.call(this,e[0]);case 2:return!t.call(this,e[0],e[1]);case 3:return!t.call(this,e[0],e[1],e[2])}return!t.apply(this,e)}}Ds.Cache=Xr;var Ls=_i((function(t,e){var r=(e=1==e.length&&zs(e[0])?Me(e[0],Ke(oo())):Me(gn(e,1),Ke(oo()))).length;return Gn((function(n){for(var i=-1,o=vr(n.length,r);++i<o;)n[i]=e[i].call(this,n[i]);return Se(t,this,n)}))})),Fs=Gn((function(t,e){var r=sr(e,io(Fs));return qi(t,c,i,e,r)})),Bs=Gn((function(t,e){var r=sr(e,io(Bs));return qi(t,64,i,e,r)})),Is=Qi((function(t,e){return qi(t,256,i,i,i,e)}));function Ns(t,e){return t===e||t!=t&&e!=e}var Vs=zi(Cn),Ws=zi((function(t,e){return t>=e})),Us=An(function(){return arguments}())?An:function(t){return ta(t)&&Dt.call(t,"callee")&&!Ht.call(t,"callee")},zs=n.isArray,Xs=_e?Ke(_e):function(t){return ta(t)&&Sn(t)==M};function Ys(t){return null!=t&&Zs(t.length)&&!$s(t)}function Hs(t){return ta(t)&&Ys(t)}var Gs=ve||gc,qs=ye?Ke(ye):function(t){return ta(t)&&Sn(t)==y};function Ks(t){if(!ta(t))return!1;var e=Sn(t);return e==m||"[object DOMException]"==e||"string"==typeof t.message&&"string"==typeof t.name&&!na(t)}function $s(t){if(!Qs(t))return!1;var e=Sn(t);return e==b||e==x||"[object AsyncFunction]"==e||"[object Proxy]"==e}function Js(t){return"number"==typeof t&&t==da(t)}function Zs(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=h}function Qs(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}function ta(t){return null!=t&&"object"==typeof t}var ea=me?Ke(me):function(t){return ta(t)&&ho(t)==w};function ra(t){return"number"==typeof t||ta(t)&&Sn(t)==S}function na(t){if(!ta(t)||Sn(t)!=C)return!1;var e=Xt(t);if(null===e)return!0;var r=Dt.call(e,"constructor")&&e.constructor;return"function"==typeof r&&r instanceof r&&Pt.call(r)==Bt}var ia=be?Ke(be):function(t){return ta(t)&&Sn(t)==T},oa=xe?Ke(xe):function(t){return ta(t)&&ho(t)==j};function sa(t){return"string"==typeof t||!zs(t)&&ta(t)&&Sn(t)==k}function aa(t){return"symbol"==typeof t||ta(t)&&Sn(t)==A}var ca=we?Ke(we):function(t){return ta(t)&&Zs(t.length)&&!!ie[Sn(t)]},la=zi(Ln),ua=zi((function(t,e){return t<=e}));function ha(t){if(!t)return[];if(Ys(t))return sa(t)?ur(t):Ti(t);if(Kt&&t[Kt])return function(t){for(var e,r=[];!(e=t.next()).done;)r.push(e.value);return r}(t[Kt]());var e=ho(t);return(e==w?ir:e==j?ar:Na)(t)}function fa(t){return t?(t=ga(t))===u||t===-1/0?17976931348623157e292*(t<0?-1:1):t==t?t:0:0===t?t:0}function da(t){var e=fa(t),r=e%1;return e==e?r?e-r:e:0}function pa(t){return t?on(da(t),0,d):0}function ga(t){if("number"==typeof t)return t;if(aa(t))return f;if(Qs(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=Qs(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=qe(t);var r=pt.test(t);return r||vt.test(t)?ce(t.slice(2),r?2:8):dt.test(t)?f:+t}function va(t){return ji(t,Ma(t))}function _a(t){return null==t?"":si(t)}var ya=Ai((function(t,e){if(xo(e)||Ys(e))ji(e,Ea(e),t);else for(var r in e)Dt.call(e,r)&&Zr(t,r,e[r])})),ma=Ai((function(t,e){ji(e,Ma(e),t)})),ba=Ai((function(t,e,r,n){ji(e,Ma(e),t,n)})),xa=Ai((function(t,e,r,n){ji(e,Ea(e),t,n)})),wa=Qi(nn),Sa=Gn((function(t,e){t=Ct(t);var r=-1,n=e.length,o=n>2?e[2]:i;for(o&&_o(e[0],e[1],o)&&(n=1);++r<n;)for(var s=e[r],a=Ma(s),c=-1,l=a.length;++c<l;){var u=a[c],h=t[u];(h===i||Ns(h,Et[u])&&!Dt.call(t,u))&&(t[u]=s[u])}return t})),Ca=Gn((function(t){return t.push(i,$i),Se(Da,i,t)}));function Oa(t,e,r){var n=null==t?i:xn(t,e);return n===i?r:n}function Ta(t,e){return null!=t&&fo(t,e,Tn)}var ja=Ii((function(t,e,r){null!=e&&"function"!=typeof e.toString&&(e=Ft.call(e)),t[e]=r}),Qa(rc)),ka=Ii((function(t,e,r){null!=e&&"function"!=typeof e.toString&&(e=Ft.call(e)),Dt.call(t,e)?t[e].push(r):t[e]=[r]}),oo),Aa=Gn(kn);function Ea(t){return Ys(t)?Gr(t):Rn(t)}function Ma(t){return Ys(t)?Gr(t,!0):function(t){if(!Qs(t))return function(t){var e=[];if(null!=t)for(var r in Ct(t))e.push(r);return e}(t);var e=xo(t),r=[];for(var n in t)("constructor"!=n||!e&&Dt.call(t,n))&&r.push(n);return r}(t)}var Pa=Ai((function(t,e,r){Nn(t,e,r)})),Da=Ai((function(t,e,r,n){Nn(t,e,r,n)})),Ra=Qi((function(t,e){var r={};if(null==t)return r;var n=!1;e=Me(e,(function(e){return e=vi(e,t),n||(n=e.length>1),e})),ji(t,eo(t),r),n&&(r=sn(r,7,Ji));for(var i=e.length;i--;)ci(r,e[i]);return r})),La=Qi((function(t,e){return null==t?{}:function(t,e){return Un(t,e,(function(e,r){return Ta(t,r)}))}(t,e)}));function Fa(t,e){if(null==t)return{};var r=Me(eo(t),(function(t){return[t]}));return e=oo(e),Un(t,r,(function(t,r){return e(t,r[0])}))}var Ba=Gi(Ea),Ia=Gi(Ma);function Na(t){return null==t?[]:$e(t,Ea(t))}var Va=Di((function(t,e,r){return e=e.toLowerCase(),t+(r?Wa(e):e)}));function Wa(t){return Ka(_a(t).toLowerCase())}function Ua(t){return(t=_a(t))&&t.replace(yt,tr).replace(Jt,"")}var za=Di((function(t,e,r){return t+(r?"-":"")+e.toLowerCase()})),Xa=Di((function(t,e,r){return t+(r?" ":"")+e.toLowerCase()})),Ya=Pi("toLowerCase"),Ha=Di((function(t,e,r){return t+(r?"_":"")+e.toLowerCase()})),Ga=Di((function(t,e,r){return t+(r?" ":"")+Ka(e)})),qa=Di((function(t,e,r){return t+(r?" ":"")+e.toUpperCase()})),Ka=Pi("toUpperCase");function $a(t,e,r){return t=_a(t),(e=r?i:e)===i?function(t){return ee.test(t)}(t)?function(t){return t.match(Qt)||[]}(t):function(t){return t.match(ct)||[]}(t):t.match(e)||[]}var Ja=Gn((function(t,e){try{return Se(t,i,e)}catch(t){return Ks(t)?t:new xt(t)}})),Za=Qi((function(t,e){return Oe(e,(function(e){e=Fo(e),rn(t,e,ks(t[e],t))})),t}));function Qa(t){return function(){return t}}var tc=Fi(),ec=Fi(!0);function rc(t){return t}function nc(t){return Dn("function"==typeof t?t:sn(t,1))}var ic=Gn((function(t,e){return function(r){return kn(r,t,e)}})),oc=Gn((function(t,e){return function(r){return kn(t,r,e)}}));function sc(t,e,r){var n=Ea(e),i=bn(e,n);null!=r||Qs(e)&&(i.length||!n.length)||(r=e,e=t,t=this,i=bn(e,Ea(e)));var o=!(Qs(r)&&"chain"in r&&!r.chain),s=$s(t);return Oe(i,(function(r){var n=e[r];t[r]=n,s&&(t.prototype[r]=function(){var e=this.__chain__;if(o||e){var r=t(this.__wrapped__);return(r.__actions__=Ti(this.__actions__)).push({func:n,args:arguments,thisArg:t}),r.__chain__=e,r}return n.apply(t,Pe([this.value()],arguments))})})),t}function ac(){}var cc=Vi(Me),lc=Vi(je),uc=Vi(Le);function hc(t){return yo(t)?ze(Fo(t)):function(t){return function(e){return xn(e,t)}}(t)}var fc=Ui(),dc=Ui(!0);function pc(){return[]}function gc(){return!1}var vc,_c=Ni((function(t,e){return t+e}),0),yc=Yi("ceil"),mc=Ni((function(t,e){return t/e}),1),bc=Yi("floor"),xc=Ni((function(t,e){return t*e}),1),wc=Yi("round"),Sc=Ni((function(t,e){return t-e}),0);return Br.after=function(t,e){if("function"!=typeof e)throw new jt(o);return t=da(t),function(){if(--t<1)return e.apply(this,arguments)}},Br.ary=Ts,Br.assign=ya,Br.assignIn=ma,Br.assignInWith=ba,Br.assignWith=xa,Br.at=wa,Br.before=js,Br.bind=ks,Br.bindAll=Za,Br.bindKey=As,Br.castArray=function(){if(!arguments.length)return[];var t=arguments[0];return zs(t)?t:[t]},Br.chain=hs,Br.chunk=function(t,e,r){e=(r?_o(t,e,r):e===i)?1:gr(da(e),0);var o=null==t?0:t.length;if(!o||e<1)return[];for(var s=0,a=0,c=n(fe(o/e));s<o;)c[a++]=ti(t,s,s+=e);return c},Br.compact=function(t){for(var e=-1,r=null==t?0:t.length,n=0,i=[];++e<r;){var o=t[e];o&&(i[n++]=o)}return i},Br.concat=function(){var t=arguments.length;if(!t)return[];for(var e=n(t-1),r=arguments[0],i=t;i--;)e[i-1]=arguments[i];return Pe(zs(r)?Ti(r):[r],gn(e,1))},Br.cond=function(t){var e=null==t?0:t.length,r=oo();return t=e?Me(t,(function(t){if("function"!=typeof t[1])throw new jt(o);return[r(t[0]),t[1]]})):[],Gn((function(r){for(var n=-1;++n<e;){var i=t[n];if(Se(i[0],this,r))return Se(i[1],this,r)}}))},Br.conforms=function(t){return function(t){var e=Ea(t);return function(r){return an(r,t,e)}}(sn(t,1))},Br.constant=Qa,Br.countBy=ps,Br.create=function(t,e){var r=Ir(t);return null==e?r:en(r,e)},Br.curry=function t(e,r,n){var o=qi(e,8,i,i,i,i,i,r=n?i:r);return o.placeholder=t.placeholder,o},Br.curryRight=function t(e,r,n){var o=qi(e,16,i,i,i,i,i,r=n?i:r);return o.placeholder=t.placeholder,o},Br.debounce=Es,Br.defaults=Sa,Br.defaultsDeep=Ca,Br.defer=Ms,Br.delay=Ps,Br.difference=No,Br.differenceBy=Vo,Br.differenceWith=Wo,Br.drop=function(t,e,r){var n=null==t?0:t.length;return n?ti(t,(e=r||e===i?1:da(e))<0?0:e,n):[]},Br.dropRight=function(t,e,r){var n=null==t?0:t.length;return n?ti(t,0,(e=n-(e=r||e===i?1:da(e)))<0?0:e):[]},Br.dropRightWhile=function(t,e){return t&&t.length?ui(t,oo(e,3),!0,!0):[]},Br.dropWhile=function(t,e){return t&&t.length?ui(t,oo(e,3),!0):[]},Br.fill=function(t,e,r,n){var o=null==t?0:t.length;return o?(r&&"number"!=typeof r&&_o(t,e,r)&&(r=0,n=o),function(t,e,r,n){var o=t.length;for((r=da(r))<0&&(r=-r>o?0:o+r),(n=n===i||n>o?o:da(n))<0&&(n+=o),n=r>n?0:pa(n);r<n;)t[r++]=e;return t}(t,e,r,n)):[]},Br.filter=function(t,e){return(zs(t)?ke:pn)(t,oo(e,3))},Br.flatMap=function(t,e){return gn(ws(t,e),1)},Br.flatMapDeep=function(t,e){return gn(ws(t,e),u)},Br.flatMapDepth=function(t,e,r){return r=r===i?1:da(r),gn(ws(t,e),r)},Br.flatten=Xo,Br.flattenDeep=function(t){return null!=t&&t.length?gn(t,u):[]},Br.flattenDepth=function(t,e){return null!=t&&t.length?gn(t,e=e===i?1:da(e)):[]},Br.flip=function(t){return qi(t,512)},Br.flow=tc,Br.flowRight=ec,Br.fromPairs=function(t){for(var e=-1,r=null==t?0:t.length,n={};++e<r;){var i=t[e];n[i[0]]=i[1]}return n},Br.functions=function(t){return null==t?[]:bn(t,Ea(t))},Br.functionsIn=function(t){return null==t?[]:bn(t,Ma(t))},Br.groupBy=ms,Br.initial=function(t){return null!=t&&t.length?ti(t,0,-1):[]},Br.intersection=Ho,Br.intersectionBy=Go,Br.intersectionWith=qo,Br.invert=ja,Br.invertBy=ka,Br.invokeMap=bs,Br.iteratee=nc,Br.keyBy=xs,Br.keys=Ea,Br.keysIn=Ma,Br.map=ws,Br.mapKeys=function(t,e){var r={};return e=oo(e,3),yn(t,(function(t,n,i){rn(r,e(t,n,i),t)})),r},Br.mapValues=function(t,e){var r={};return e=oo(e,3),yn(t,(function(t,n,i){rn(r,n,e(t,n,i))})),r},Br.matches=function(t){return Bn(sn(t,1))},Br.matchesProperty=function(t,e){return In(t,sn(e,1))},Br.memoize=Ds,Br.merge=Pa,Br.mergeWith=Da,Br.method=ic,Br.methodOf=oc,Br.mixin=sc,Br.negate=Rs,Br.nthArg=function(t){return t=da(t),Gn((function(e){return Vn(e,t)}))},Br.omit=Ra,Br.omitBy=function(t,e){return Fa(t,Rs(oo(e)))},Br.once=function(t){return js(2,t)},Br.orderBy=function(t,e,r,n){return null==t?[]:(zs(e)||(e=null==e?[]:[e]),zs(r=n?i:r)||(r=null==r?[]:[r]),Wn(t,e,r))},Br.over=cc,Br.overArgs=Ls,Br.overEvery=lc,Br.overSome=uc,Br.partial=Fs,Br.partialRight=Bs,Br.partition=Ss,Br.pick=La,Br.pickBy=Fa,Br.property=hc,Br.propertyOf=function(t){return function(e){return null==t?i:xn(t,e)}},Br.pull=$o,Br.pullAll=Jo,Br.pullAllBy=function(t,e,r){return t&&t.length&&e&&e.length?zn(t,e,oo(r,2)):t},Br.pullAllWith=function(t,e,r){return t&&t.length&&e&&e.length?zn(t,e,i,r):t},Br.pullAt=Zo,Br.range=fc,Br.rangeRight=dc,Br.rearg=Is,Br.reject=function(t,e){return(zs(t)?ke:pn)(t,Rs(oo(e,3)))},Br.remove=function(t,e){var r=[];if(!t||!t.length)return r;var n=-1,i=[],o=t.length;for(e=oo(e,3);++n<o;){var s=t[n];e(s,n,t)&&(r.push(s),i.push(n))}return Xn(t,i),r},Br.rest=function(t,e){if("function"!=typeof t)throw new jt(o);return Gn(t,e=e===i?e:da(e))},Br.reverse=Qo,Br.sampleSize=function(t,e,r){return e=(r?_o(t,e,r):e===i)?1:da(e),(zs(t)?Kr:Kn)(t,e)},Br.set=function(t,e,r){return null==t?t:$n(t,e,r)},Br.setWith=function(t,e,r,n){return n="function"==typeof n?n:i,null==t?t:$n(t,e,r,n)},Br.shuffle=function(t){return(zs(t)?$r:Qn)(t)},Br.slice=function(t,e,r){var n=null==t?0:t.length;return n?(r&&"number"!=typeof r&&_o(t,e,r)?(e=0,r=n):(e=null==e?0:da(e),r=r===i?n:da(r)),ti(t,e,r)):[]},Br.sortBy=Cs,Br.sortedUniq=function(t){return t&&t.length?ii(t):[]},Br.sortedUniqBy=function(t,e){return t&&t.length?ii(t,oo(e,2)):[]},Br.split=function(t,e,r){return r&&"number"!=typeof r&&_o(t,e,r)&&(e=r=i),(r=r===i?d:r>>>0)?(t=_a(t))&&("string"==typeof e||null!=e&&!ia(e))&&!(e=si(e))&&nr(t)?yi(ur(t),0,r):t.split(e,r):[]},Br.spread=function(t,e){if("function"!=typeof t)throw new jt(o);return e=null==e?0:gr(da(e),0),Gn((function(r){var n=r[e],i=yi(r,0,e);return n&&Pe(i,n),Se(t,this,i)}))},Br.tail=function(t){var e=null==t?0:t.length;return e?ti(t,1,e):[]},Br.take=function(t,e,r){return t&&t.length?ti(t,0,(e=r||e===i?1:da(e))<0?0:e):[]},Br.takeRight=function(t,e,r){var n=null==t?0:t.length;return n?ti(t,(e=n-(e=r||e===i?1:da(e)))<0?0:e,n):[]},Br.takeRightWhile=function(t,e){return t&&t.length?ui(t,oo(e,3),!1,!0):[]},Br.takeWhile=function(t,e){return t&&t.length?ui(t,oo(e,3)):[]},Br.tap=function(t,e){return e(t),t},Br.throttle=function(t,e,r){var n=!0,i=!0;if("function"!=typeof t)throw new jt(o);return Qs(r)&&(n="leading"in r?!!r.leading:n,i="trailing"in r?!!r.trailing:i),Es(t,e,{leading:n,maxWait:e,trailing:i})},Br.thru=fs,Br.toArray=ha,Br.toPairs=Ba,Br.toPairsIn=Ia,Br.toPath=function(t){return zs(t)?Me(t,Fo):aa(t)?[t]:Ti(Lo(_a(t)))},Br.toPlainObject=va,Br.transform=function(t,e,r){var n=zs(t),i=n||Gs(t)||ca(t);if(e=oo(e,4),null==r){var o=t&&t.constructor;r=i?n?new o:[]:Qs(t)&&$s(o)?Ir(Xt(t)):{}}return(i?Oe:yn)(t,(function(t,n,i){return e(r,t,n,i)})),r},Br.unary=function(t){return Ts(t,1)},Br.union=ts,Br.unionBy=es,Br.unionWith=rs,Br.uniq=function(t){return t&&t.length?ai(t):[]},Br.uniqBy=function(t,e){return t&&t.length?ai(t,oo(e,2)):[]},Br.uniqWith=function(t,e){return e="function"==typeof e?e:i,t&&t.length?ai(t,i,e):[]},Br.unset=function(t,e){return null==t||ci(t,e)},Br.unzip=ns,Br.unzipWith=is,Br.update=function(t,e,r){return null==t?t:li(t,e,gi(r))},Br.updateWith=function(t,e,r,n){return n="function"==typeof n?n:i,null==t?t:li(t,e,gi(r),n)},Br.values=Na,Br.valuesIn=function(t){return null==t?[]:$e(t,Ma(t))},Br.without=os,Br.words=$a,Br.wrap=function(t,e){return Fs(gi(e),t)},Br.xor=ss,Br.xorBy=as,Br.xorWith=cs,Br.zip=ls,Br.zipObject=function(t,e){return di(t||[],e||[],Zr)},Br.zipObjectDeep=function(t,e){return di(t||[],e||[],$n)},Br.zipWith=us,Br.entries=Ba,Br.entriesIn=Ia,Br.extend=ma,Br.extendWith=ba,sc(Br,Br),Br.add=_c,Br.attempt=Ja,Br.camelCase=Va,Br.capitalize=Wa,Br.ceil=yc,Br.clamp=function(t,e,r){return r===i&&(r=e,e=i),r!==i&&(r=(r=ga(r))==r?r:0),e!==i&&(e=(e=ga(e))==e?e:0),on(ga(t),e,r)},Br.clone=function(t){return sn(t,4)},Br.cloneDeep=function(t){return sn(t,5)},Br.cloneDeepWith=function(t,e){return sn(t,5,e="function"==typeof e?e:i)},Br.cloneWith=function(t,e){return sn(t,4,e="function"==typeof e?e:i)},Br.conformsTo=function(t,e){return null==e||an(t,e,Ea(e))},Br.deburr=Ua,Br.defaultTo=function(t,e){return null==t||t!=t?e:t},Br.divide=mc,Br.endsWith=function(t,e,r){t=_a(t),e=si(e);var n=t.length,o=r=r===i?n:on(da(r),0,n);return(r-=e.length)>=0&&t.slice(r,o)==e},Br.eq=Ns,Br.escape=function(t){return(t=_a(t))&&q.test(t)?t.replace(H,er):t},Br.escapeRegExp=function(t){return(t=_a(t))&&rt.test(t)?t.replace(et,"\\$&"):t},Br.every=function(t,e,r){var n=zs(t)?je:fn;return r&&_o(t,e,r)&&(e=i),n(t,oo(e,3))},Br.find=gs,Br.findIndex=Uo,Br.findKey=function(t,e){return Be(t,oo(e,3),yn)},Br.findLast=vs,Br.findLastIndex=zo,Br.findLastKey=function(t,e){return Be(t,oo(e,3),mn)},Br.floor=bc,Br.forEach=_s,Br.forEachRight=ys,Br.forIn=function(t,e){return null==t?t:vn(t,oo(e,3),Ma)},Br.forInRight=function(t,e){return null==t?t:_n(t,oo(e,3),Ma)},Br.forOwn=function(t,e){return t&&yn(t,oo(e,3))},Br.forOwnRight=function(t,e){return t&&mn(t,oo(e,3))},Br.get=Oa,Br.gt=Vs,Br.gte=Ws,Br.has=function(t,e){return null!=t&&fo(t,e,On)},Br.hasIn=Ta,Br.head=Yo,Br.identity=rc,Br.includes=function(t,e,r,n){t=Ys(t)?t:Na(t),r=r&&!n?da(r):0;var i=t.length;return r<0&&(r=gr(i+r,0)),sa(t)?r<=i&&t.indexOf(e,r)>-1:!!i&&Ne(t,e,r)>-1},Br.indexOf=function(t,e,r){var n=null==t?0:t.length;if(!n)return-1;var i=null==r?0:da(r);return i<0&&(i=gr(n+i,0)),Ne(t,e,i)},Br.inRange=function(t,e,r){return e=fa(e),r===i?(r=e,e=0):r=fa(r),function(t,e,r){return t>=vr(e,r)&&t<gr(e,r)}(t=ga(t),e,r)},Br.invoke=Aa,Br.isArguments=Us,Br.isArray=zs,Br.isArrayBuffer=Xs,Br.isArrayLike=Ys,Br.isArrayLikeObject=Hs,Br.isBoolean=function(t){return!0===t||!1===t||ta(t)&&Sn(t)==_},Br.isBuffer=Gs,Br.isDate=qs,Br.isElement=function(t){return ta(t)&&1===t.nodeType&&!na(t)},Br.isEmpty=function(t){if(null==t)return!0;if(Ys(t)&&(zs(t)||"string"==typeof t||"function"==typeof t.splice||Gs(t)||ca(t)||Us(t)))return!t.length;var e=ho(t);if(e==w||e==j)return!t.size;if(xo(t))return!Rn(t).length;for(var r in t)if(Dt.call(t,r))return!1;return!0},Br.isEqual=function(t,e){return En(t,e)},Br.isEqualWith=function(t,e,r){var n=(r="function"==typeof r?r:i)?r(t,e):i;return n===i?En(t,e,i,r):!!n},Br.isError=Ks,Br.isFinite=function(t){return"number"==typeof t&&Fe(t)},Br.isFunction=$s,Br.isInteger=Js,Br.isLength=Zs,Br.isMap=ea,Br.isMatch=function(t,e){return t===e||Mn(t,e,ao(e))},Br.isMatchWith=function(t,e,r){return r="function"==typeof r?r:i,Mn(t,e,ao(e),r)},Br.isNaN=function(t){return ra(t)&&t!=+t},Br.isNative=function(t){if(bo(t))throw new xt("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return Pn(t)},Br.isNil=function(t){return null==t},Br.isNull=function(t){return null===t},Br.isNumber=ra,Br.isObject=Qs,Br.isObjectLike=ta,Br.isPlainObject=na,Br.isRegExp=ia,Br.isSafeInteger=function(t){return Js(t)&&t>=-9007199254740991&&t<=h},Br.isSet=oa,Br.isString=sa,Br.isSymbol=aa,Br.isTypedArray=ca,Br.isUndefined=function(t){return t===i},Br.isWeakMap=function(t){return ta(t)&&ho(t)==E},Br.isWeakSet=function(t){return ta(t)&&"[object WeakSet]"==Sn(t)},Br.join=function(t,e){return null==t?"":Xe.call(t,e)},Br.kebabCase=za,Br.last=Ko,Br.lastIndexOf=function(t,e,r){var n=null==t?0:t.length;if(!n)return-1;var o=n;return r!==i&&(o=(o=da(r))<0?gr(n+o,0):vr(o,n-1)),e==e?function(t,e,r){for(var n=r+1;n--;)if(t[n]===e)return n;return n}(t,e,o):Ie(t,We,o,!0)},Br.lowerCase=Xa,Br.lowerFirst=Ya,Br.lt=la,Br.lte=ua,Br.max=function(t){return t&&t.length?dn(t,rc,Cn):i},Br.maxBy=function(t,e){return t&&t.length?dn(t,oo(e,2),Cn):i},Br.mean=function(t){return Ue(t,rc)},Br.meanBy=function(t,e){return Ue(t,oo(e,2))},Br.min=function(t){return t&&t.length?dn(t,rc,Ln):i},Br.minBy=function(t,e){return t&&t.length?dn(t,oo(e,2),Ln):i},Br.stubArray=pc,Br.stubFalse=gc,Br.stubObject=function(){return{}},Br.stubString=function(){return""},Br.stubTrue=function(){return!0},Br.multiply=xc,Br.nth=function(t,e){return t&&t.length?Vn(t,da(e)):i},Br.noConflict=function(){return he._===this&&(he._=It),this},Br.noop=ac,Br.now=Os,Br.pad=function(t,e,r){t=_a(t);var n=(e=da(e))?lr(t):0;if(!e||n>=e)return t;var i=(e-n)/2;return Wi(de(i),r)+t+Wi(fe(i),r)},Br.padEnd=function(t,e,r){t=_a(t);var n=(e=da(e))?lr(t):0;return e&&n<e?t+Wi(e-n,r):t},Br.padStart=function(t,e,r){t=_a(t);var n=(e=da(e))?lr(t):0;return e&&n<e?Wi(e-n,r)+t:t},Br.parseInt=function(t,e,r){return r||null==e?e=0:e&&(e=+e),yr(_a(t).replace(nt,""),e||0)},Br.random=function(t,e,r){if(r&&"boolean"!=typeof r&&_o(t,e,r)&&(e=r=i),r===i&&("boolean"==typeof e?(r=e,e=i):"boolean"==typeof t&&(r=t,t=i)),t===i&&e===i?(t=0,e=1):(t=fa(t),e===i?(e=t,t=0):e=fa(e)),t>e){var n=t;t=e,e=n}if(r||t%1||e%1){var o=mr();return vr(t+o*(e-t+ae("1e-"+((o+"").length-1))),e)}return Yn(t,e)},Br.reduce=function(t,e,r){var n=zs(t)?De:Ye,i=arguments.length<3;return n(t,oo(e,4),r,i,un)},Br.reduceRight=function(t,e,r){var n=zs(t)?Re:Ye,i=arguments.length<3;return n(t,oo(e,4),r,i,hn)},Br.repeat=function(t,e,r){return e=(r?_o(t,e,r):e===i)?1:da(e),Hn(_a(t),e)},Br.replace=function(){var t=arguments,e=_a(t[0]);return t.length<3?e:e.replace(t[1],t[2])},Br.result=function(t,e,r){var n=-1,o=(e=vi(e,t)).length;for(o||(o=1,t=i);++n<o;){var s=null==t?i:t[Fo(e[n])];s===i&&(n=o,s=r),t=$s(s)?s.call(t):s}return t},Br.round=wc,Br.runInContext=t,Br.sample=function(t){return(zs(t)?qr:qn)(t)},Br.size=function(t){if(null==t)return 0;if(Ys(t))return sa(t)?lr(t):t.length;var e=ho(t);return e==w||e==j?t.size:Rn(t).length},Br.snakeCase=Ha,Br.some=function(t,e,r){var n=zs(t)?Le:ei;return r&&_o(t,e,r)&&(e=i),n(t,oo(e,3))},Br.sortedIndex=function(t,e){return ri(t,e)},Br.sortedIndexBy=function(t,e,r){return ni(t,e,oo(r,2))},Br.sortedIndexOf=function(t,e){var r=null==t?0:t.length;if(r){var n=ri(t,e);if(n<r&&Ns(t[n],e))return n}return-1},Br.sortedLastIndex=function(t,e){return ri(t,e,!0)},Br.sortedLastIndexBy=function(t,e,r){return ni(t,e,oo(r,2),!0)},Br.sortedLastIndexOf=function(t,e){if(null!=t&&t.length){var r=ri(t,e,!0)-1;if(Ns(t[r],e))return r}return-1},Br.startCase=Ga,Br.startsWith=function(t,e,r){return t=_a(t),r=null==r?0:on(da(r),0,t.length),e=si(e),t.slice(r,r+e.length)==e},Br.subtract=Sc,Br.sum=function(t){return t&&t.length?He(t,rc):0},Br.sumBy=function(t,e){return t&&t.length?He(t,oo(e,2)):0},Br.template=function(t,e,r){var n=Br.templateSettings;r&&_o(t,e,r)&&(e=i),t=_a(t),e=ba({},e,n,Ki);var o,s,a=ba({},e.imports,n.imports,Ki),c=Ea(a),l=$e(a,c),u=0,h=e.interpolate||mt,f="__p += '",d=Ot((e.escape||mt).source+"|"+h.source+"|"+(h===J?ht:mt).source+"|"+(e.evaluate||mt).source+"|$","g"),p="//# sourceURL="+(Dt.call(e,"sourceURL")?(e.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++ne+"]")+"\n";t.replace(d,(function(e,r,n,i,a,c){return n||(n=i),f+=t.slice(u,c).replace(bt,rr),r&&(o=!0,f+="' +\n__e("+r+") +\n'"),a&&(s=!0,f+="';\n"+a+";\n__p += '"),n&&(f+="' +\n((__t = ("+n+")) == null ? '' : __t) +\n'"),u=c+e.length,e})),f+="';\n";var g=Dt.call(e,"variable")&&e.variable;if(g){if(lt.test(g))throw new xt("Invalid `variable` option passed into `_.template`")}else f="with (obj) {\n"+f+"\n}\n";f=(s?f.replace(U,""):f).replace(z,"$1").replace(X,"$1;"),f="function("+(g||"obj")+") {\n"+(g?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(o?", __e = _.escape":"")+(s?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+f+"return __p\n}";var v=Ja((function(){return wt(c,p+"return "+f).apply(i,l)}));if(v.source=f,Ks(v))throw v;return v},Br.times=function(t,e){if((t=da(t))<1||t>h)return[];var r=d,n=vr(t,d);e=oo(e),t-=d;for(var i=Ge(n,e);++r<t;)e(r);return i},Br.toFinite=fa,Br.toInteger=da,Br.toLength=pa,Br.toLower=function(t){return _a(t).toLowerCase()},Br.toNumber=ga,Br.toSafeInteger=function(t){return t?on(da(t),-9007199254740991,h):0===t?t:0},Br.toString=_a,Br.toUpper=function(t){return _a(t).toUpperCase()},Br.trim=function(t,e,r){if((t=_a(t))&&(r||e===i))return qe(t);if(!t||!(e=si(e)))return t;var n=ur(t),o=ur(e);return yi(n,Ze(n,o),Qe(n,o)+1).join("")},Br.trimEnd=function(t,e,r){if((t=_a(t))&&(r||e===i))return t.slice(0,hr(t)+1);if(!t||!(e=si(e)))return t;var n=ur(t);return yi(n,0,Qe(n,ur(e))+1).join("")},Br.trimStart=function(t,e,r){if((t=_a(t))&&(r||e===i))return t.replace(nt,"");if(!t||!(e=si(e)))return t;var n=ur(t);return yi(n,Ze(n,ur(e))).join("")},Br.truncate=function(t,e){var r=30,n="...";if(Qs(e)){var o="separator"in e?e.separator:o;r="length"in e?da(e.length):r,n="omission"in e?si(e.omission):n}var s=(t=_a(t)).length;if(nr(t)){var a=ur(t);s=a.length}if(r>=s)return t;var c=r-lr(n);if(c<1)return n;var l=a?yi(a,0,c).join(""):t.slice(0,c);if(o===i)return l+n;if(a&&(c+=l.length-c),ia(o)){if(t.slice(c).search(o)){var u,h=l;for(o.global||(o=Ot(o.source,_a(ft.exec(o))+"g")),o.lastIndex=0;u=o.exec(h);)var f=u.index;l=l.slice(0,f===i?c:f)}}else if(t.indexOf(si(o),c)!=c){var d=l.lastIndexOf(o);d>-1&&(l=l.slice(0,d))}return l+n},Br.unescape=function(t){return(t=_a(t))&&G.test(t)?t.replace(Y,fr):t},Br.uniqueId=function(t){var e=++Rt;return _a(t)+e},Br.upperCase=qa,Br.upperFirst=Ka,Br.each=_s,Br.eachRight=ys,Br.first=Yo,sc(Br,(vc={},yn(Br,(function(t,e){Dt.call(Br.prototype,e)||(vc[e]=t)})),vc),{chain:!1}),Br.VERSION="4.17.21",Oe(["bind","bindKey","curry","curryRight","partial","partialRight"],(function(t){Br[t].placeholder=Br})),Oe(["drop","take"],(function(t,e){Wr.prototype[t]=function(r){r=r===i?1:gr(da(r),0);var n=this.__filtered__&&!e?new Wr(this):this.clone();return n.__filtered__?n.__takeCount__=vr(r,n.__takeCount__):n.__views__.push({size:vr(r,d),type:t+(n.__dir__<0?"Right":"")}),n},Wr.prototype[t+"Right"]=function(e){return this.reverse()[t](e).reverse()}})),Oe(["filter","map","takeWhile"],(function(t,e){var r=e+1,n=1==r||3==r;Wr.prototype[t]=function(t){var e=this.clone();return e.__iteratees__.push({iteratee:oo(t,3),type:r}),e.__filtered__=e.__filtered__||n,e}})),Oe(["head","last"],(function(t,e){var r="take"+(e?"Right":"");Wr.prototype[t]=function(){return this[r](1).value()[0]}})),Oe(["initial","tail"],(function(t,e){var r="drop"+(e?"":"Right");Wr.prototype[t]=function(){return this.__filtered__?new Wr(this):this[r](1)}})),Wr.prototype.compact=function(){return this.filter(rc)},Wr.prototype.find=function(t){return this.filter(t).head()},Wr.prototype.findLast=function(t){return this.reverse().find(t)},Wr.prototype.invokeMap=Gn((function(t,e){return"function"==typeof t?new Wr(this):this.map((function(r){return kn(r,t,e)}))})),Wr.prototype.reject=function(t){return this.filter(Rs(oo(t)))},Wr.prototype.slice=function(t,e){t=da(t);var r=this;return r.__filtered__&&(t>0||e<0)?new Wr(r):(t<0?r=r.takeRight(-t):t&&(r=r.drop(t)),e!==i&&(r=(e=da(e))<0?r.dropRight(-e):r.take(e-t)),r)},Wr.prototype.takeRightWhile=function(t){return this.reverse().takeWhile(t).reverse()},Wr.prototype.toArray=function(){return this.take(d)},yn(Wr.prototype,(function(t,e){var r=/^(?:filter|find|map|reject)|While$/.test(e),n=/^(?:head|last)$/.test(e),o=Br[n?"take"+("last"==e?"Right":""):e],s=n||/^find/.test(e);o&&(Br.prototype[e]=function(){var e=this.__wrapped__,a=n?[1]:arguments,c=e instanceof Wr,l=a[0],u=c||zs(e),h=function(t){var e=o.apply(Br,Pe([t],a));return n&&f?e[0]:e};u&&r&&"function"==typeof l&&1!=l.length&&(c=u=!1);var f=this.__chain__,d=!!this.__actions__.length,p=s&&!f,g=c&&!d;if(!s&&u){e=g?e:new Wr(this);var v=t.apply(e,a);return v.__actions__.push({func:fs,args:[h],thisArg:i}),new Vr(v,f)}return p&&g?t.apply(this,a):(v=this.thru(h),p?n?v.value()[0]:v.value():v)})})),Oe(["pop","push","shift","sort","splice","unshift"],(function(t){var e=kt[t],r=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",n=/^(?:pop|shift)$/.test(t);Br.prototype[t]=function(){var t=arguments;if(n&&!this.__chain__){var i=this.value();return e.apply(zs(i)?i:[],t)}return this[r]((function(r){return e.apply(zs(r)?r:[],t)}))}})),yn(Wr.prototype,(function(t,e){var r=Br[e];if(r){var n=r.name+"";Dt.call(kr,n)||(kr[n]=[]),kr[n].push({name:e,func:r})}})),kr[Bi(i,2).name]=[{name:"wrapper",func:i}],Wr.prototype.clone=function(){var t=new Wr(this.__wrapped__);return t.__actions__=Ti(this.__actions__),t.__dir__=this.__dir__,t.__filtered__=this.__filtered__,t.__iteratees__=Ti(this.__iteratees__),t.__takeCount__=this.__takeCount__,t.__views__=Ti(this.__views__),t},Wr.prototype.reverse=function(){if(this.__filtered__){var t=new Wr(this);t.__dir__=-1,t.__filtered__=!0}else(t=this.clone()).__dir__*=-1;return t},Wr.prototype.value=function(){var t=this.__wrapped__.value(),e=this.__dir__,r=zs(t),n=e<0,i=r?t.length:0,o=function(t,e,r){for(var n=-1,i=r.length;++n<i;){var o=r[n],s=o.size;switch(o.type){case"drop":t+=s;break;case"dropRight":e-=s;break;case"take":e=vr(e,t+s);break;case"takeRight":t=gr(t,e-s)}}return{start:t,end:e}}(0,i,this.__views__),s=o.start,a=o.end,c=a-s,l=n?a:s-1,u=this.__iteratees__,h=u.length,f=0,d=vr(c,this.__takeCount__);if(!r||!n&&i==c&&d==c)return hi(t,this.__actions__);var p=[];t:for(;c--&&f<d;){for(var g=-1,v=t[l+=e];++g<h;){var _=u[g],y=_.iteratee,m=_.type,b=y(v);if(2==m)v=b;else if(!b){if(1==m)continue t;break t}}p[f++]=v}return p},Br.prototype.at=ds,Br.prototype.chain=function(){return hs(this)},Br.prototype.commit=function(){return new Vr(this.value(),this.__chain__)},Br.prototype.next=function(){this.__values__===i&&(this.__values__=ha(this.value()));var t=this.__index__>=this.__values__.length;return{done:t,value:t?i:this.__values__[this.__index__++]}},Br.prototype.plant=function(t){for(var e,r=this;r instanceof Nr;){var n=Io(r);n.__index__=0,n.__values__=i,e?o.__wrapped__=n:e=n;var o=n;r=r.__wrapped__}return o.__wrapped__=t,e},Br.prototype.reverse=function(){var t=this.__wrapped__;if(t instanceof Wr){var e=t;return this.__actions__.length&&(e=new Wr(this)),(e=e.reverse()).__actions__.push({func:fs,args:[Qo],thisArg:i}),new Vr(e,this.__chain__)}return this.thru(Qo)},Br.prototype.toJSON=Br.prototype.valueOf=Br.prototype.value=function(){return hi(this.__wrapped__,this.__actions__)},Br.prototype.first=Br.prototype.head,Kt&&(Br.prototype[Kt]=function(){return this}),Br}();he._=dr,(n=function(){return dr}.call(e,r,e,t))===i||(t.exports=n)}.call(this)},5512:(t,e,r)=>{var n=r(5697),i=r(5673),o=r(6494),s=r(4669);t.exports=function(t,e){return(s(t)?n:o)(t,i(e,3))}},4736:(t,e,r)=>{var n=r(9440);function i(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new TypeError("Expected a function");var r=function(){var n=arguments,i=e?e.apply(this,n):n[0],o=r.cache;if(o.has(i))return o.get(i);var s=t.apply(this,n);return r.cache=o.set(i,s)||o,s};return r.cache=new(i.Cache||n),r}i.Cache=n,t.exports=i},7929:(t,e,r)=>{var n=r(8354),i=r(7991)((function(t,e,r){n(t,e,r)}));t.exports=i},6668:(t,e,r)=>{var n=r(9165);t.exports=function(){return n.Date.now()}},1798:(t,e,r)=>{var n=r(7498),i=r(1e3),o=r(2610),s=r(7817);t.exports=function(t){return o(t)?n(s(t)):i(t)}},8036:t=>{t.exports=function(){return[]}},4193:t=>{t.exports=function(){return!1}},8209:(t,e,r)=>{var n=r(6292),i=r(6838);t.exports=function(t,e,r){var o=!0,s=!0;if("function"!=typeof t)throw new TypeError("Expected a function");return i(r)&&(o="leading"in r?!!r.leading:o,s="trailing"in r?!!r.trailing:s),n(t,e,{leading:o,maxWait:e,trailing:s})}},2931:(t,e,r)=>{var n=r(3124),i=r(6838),o=r(6764),s=/^[-+]0x[0-9a-f]+$/i,a=/^0b[01]+$/i,c=/^0o[0-7]+$/i,l=parseInt;t.exports=function(t){if("number"==typeof t)return t;if(o(t))return NaN;if(i(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=i(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=n(t);var r=a.test(t);return r||c.test(t)?l(t.slice(2),r?2:8):s.test(t)?NaN:+t}},5111:(t,e,r)=>{var n=r(2434),i=r(7390);t.exports=function(t){return n(t,i(t))}},8389:(t,e,r)=>{var n=r(3150);t.exports=function(t){return null==t?"":n(t)}},4727:(t,e,r)=>{"use strict";r.d(e,{Pi:()=>m});var n=r(2625),i=r(959);if(!i.useState)throw new Error("mobx-react-lite requires React with Hooks support");if(!n.rC)throw new Error("mobx-react-lite@3 requires mobx at least version 6 to be available");var o=r(422);function s(t){return(0,n.Gf)(t)}var a=!1;function c(){return a}var l=function(){function t(t){var e=this;Object.defineProperty(this,"finalize",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"registrations",{enumerable:!0,configurable:!0,writable:!0,value:new Map}),Object.defineProperty(this,"sweepTimeout",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"sweep",{enumerable:!0,configurable:!0,writable:!0,value:function(t){void 0===t&&(t=1e4),clearTimeout(e.sweepTimeout),e.sweepTimeout=void 0;var r=Date.now();e.registrations.forEach((function(n,i){r-n.registeredAt>=t&&(e.finalize(n.value),e.registrations.delete(i))})),e.registrations.size>0&&e.scheduleSweep()}}),Object.defineProperty(this,"finalizeAllImmediately",{enumerable:!0,configurable:!0,writable:!0,value:function(){e.sweep(0)}})}return Object.defineProperty(t.prototype,"register",{enumerable:!1,configurable:!0,writable:!0,value:function(t,e,r){this.registrations.set(r,{value:e,registeredAt:Date.now()}),this.scheduleSweep()}}),Object.defineProperty(t.prototype,"unregister",{enumerable:!1,configurable:!0,writable:!0,value:function(t){this.registrations.delete(t)}}),Object.defineProperty(t.prototype,"scheduleSweep",{enumerable:!1,configurable:!0,writable:!0,value:function(){void 0===this.sweepTimeout&&(this.sweepTimeout=setTimeout(this.sweep,1e4))}}),t}(),u=new("undefined"!=typeof FinalizationRegistry?FinalizationRegistry:l)((function(t){var e;null===(e=t.reaction)||void 0===e||e.dispose(),t.reaction=null})),h=r(4322),f=function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,i,o=r.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(n=o.next()).done;)s.push(n.value)}catch(t){i={error:t}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return s},d=function(){},p=void 0!==(0,n.pu)().stateVersion;function g(t){t.reaction=new n.le("observer".concat(t.name),(function(){var e;p||(t.stateVersion=Symbol()),null===(e=t.onStoreChange)||void 0===e||e.call(t)}))}var v="function"==typeof Symbol&&Symbol.for,_=v?Symbol.for("react.forward_ref"):"function"==typeof i.forwardRef&&(0,i.forwardRef)((function(t){return null})).$$typeof,y=v?Symbol.for("react.memo"):"function"==typeof i.memo&&(0,i.memo)((function(t){return null})).$$typeof;function m(t,e){var r;if(y&&t.$$typeof===y)throw new Error("[mobx-react-lite] You are trying to use `observer` on a function component wrapped in either another `observer` or `React.memo`. The observer already applies 'React.memo' for you.");if(c())return t;var o=null!==(r=null==e?void 0:e.forwardRef)&&void 0!==r&&r,a=t,l=t.displayName||t.name;if(_&&t.$$typeof===_&&(o=!0,"function"!=typeof(a=t.render)))throw new Error("[mobx-react-lite] `render` property of ForwardRef was not a function");var v,m,b=function(t,e){return function(t,e){if(void 0===e&&(e="observed"),c())return t();var r=i.useRef(null),o=f(i.useState(),2)[1];if(!r.current){var a={reaction:null,onStoreChange:null,stateVersion:Symbol(),name:e,subscribe:function(t){return u.unregister(a),a.onStoreChange=t,a.reaction||(g(a),o(Symbol())),function(){var t;a.onStoreChange=null,null===(t=a.reaction)||void 0===t||t.dispose(),a.reaction=null}},getSnapshot:function(){return p?(0,n.pu)().stateVersion:a.stateVersion}};r.current=a}var l,v,_=r.current;if(_.reaction||(g(_),u.register(r,_,_)),i.useDebugValue(_.reaction,s),(0,h.useSyncExternalStore)(_.subscribe,_.getSnapshot,d),_.reaction.track((function(){try{l=t()}catch(t){v=t}})),v)throw v;return l}((function(){return a(t,e)}),l)};return b.displayName=t.displayName,Object.defineProperty(b,"name",{value:t.name,writable:!0,configurable:!0}),t.contextTypes&&(b.contextTypes=t.contextTypes),o&&(b=(0,i.forwardRef)(b)),b=(0,i.memo)(b),v=t,m=b,Object.keys(v).forEach((function(t){x[t]||Object.defineProperty(m,t,Object.getOwnPropertyDescriptor(v,t))})),b}var b,x={$$typeof:!0,render:!0,compare:!0,type:!0,displayName:!0};(b=o.unstable_batchedUpdates)||(b=function(t){t()}),(0,n.jQ)({reactionScheduler:b}),u.finalizeAllImmediately},2625:(t,e,r)=>{"use strict";function n(t){for(var e=arguments.length,r=new Array(e>1?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];throw new Error("number"==typeof t?"[MobX] minified error nr: "+t+(r.length?" "+r.map(String).join(","):"")+". Find the full error at: https://github.com/mobxjs/mobx/blob/main/packages/mobx/src/errors.ts":"[MobX] "+t)}r.d(e,{Gf:()=>We,jQ:()=>Ne,ky:()=>cr,le:()=>ge,pu:()=>ae,rC:()=>sr});var i={};function o(){return"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==r.g?r.g:"undefined"!=typeof self?self:i}var s=Object.assign,a=Object.getOwnPropertyDescriptor,c=Object.defineProperty,l=Object.prototype,u=[];Object.freeze(u);var h={};Object.freeze(h);var f="undefined"!=typeof Proxy,d=Object.toString();function p(){f||n("Proxy not available")}function g(t){var e=!1;return function(){if(!e)return e=!0,t.apply(this,arguments)}}var v=function(){};function _(t){return"function"==typeof t}function y(t){switch(typeof t){case"string":case"symbol":case"number":return!0}return!1}function m(t){return null!==t&&"object"==typeof t}function b(t){if(!m(t))return!1;var e=Object.getPrototypeOf(t);if(null==e)return!0;var r=Object.hasOwnProperty.call(e,"constructor")&&e.constructor;return"function"==typeof r&&r.toString()===d}function x(t){var e=null==t?void 0:t.constructor;return!!e&&("GeneratorFunction"===e.name||"GeneratorFunction"===e.displayName)}function w(t,e,r){c(t,e,{enumerable:!1,writable:!0,configurable:!0,value:r})}function S(t,e,r){c(t,e,{enumerable:!1,writable:!1,configurable:!0,value:r})}function C(t,e){var r="isMobX"+t;return e.prototype[r]=!0,function(t){return m(t)&&!0===t[r]}}function O(t){return t instanceof Map}function T(t){return t instanceof Set}var j=void 0!==Object.getOwnPropertySymbols,k="undefined"!=typeof Reflect&&Reflect.ownKeys?Reflect.ownKeys:j?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:Object.getOwnPropertyNames;function A(t){return null===t?null:"object"==typeof t?""+t:t}function E(t,e){return l.hasOwnProperty.call(t,e)}var M=Object.getOwnPropertyDescriptors||function(t){var e={};return k(t).forEach((function(r){e[r]=a(t,r)})),e};function P(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(void 0,"symbol"==typeof(i=function(t,e){if("object"!=typeof t||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(n.key))?i:String(i)),n)}var i}function D(t,e,r){return e&&P(t.prototype,e),r&&P(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function R(){return R=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},R.apply(this,arguments)}function L(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,F(t,e)}function F(t,e){return F=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},F(t,e)}function B(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function I(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function N(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(r)return(r=r.call(t)).next.bind(r);if(Array.isArray(t)||(r=function(t,e){if(t){if("string"==typeof t)return I(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?I(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0;return function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var V=Symbol("mobx-stored-annotations");function W(t){return Object.assign((function(e,r){U(e,r,t)}),t)}function U(t,e,r){E(t,V)||w(t,V,R({},t[V])),function(t){return t.annotationType_===$}(r)||(t[V][e]=r)}var z=Symbol("mobx administration"),X=function(){function t(t){void 0===t&&(t="Atom"),this.name_=void 0,this.isPendingUnobservation_=!1,this.isBeingObserved_=!1,this.observers_=new Set,this.diffValue_=0,this.lastAccessedBy_=0,this.lowestObserverState_=Ut.NOT_TRACKING_,this.onBOL=void 0,this.onBUOL=void 0,this.name_=t}var e=t.prototype;return e.onBO=function(){this.onBOL&&this.onBOL.forEach((function(t){return t()}))},e.onBUO=function(){this.onBUOL&&this.onBUOL.forEach((function(t){return t()}))},e.reportObserved=function(){return de(this)},e.reportChanged=function(){he(),pe(this),se.stateVersion=se.stateVersion<Number.MAX_SAFE_INTEGER?se.stateVersion+1:Number.MIN_SAFE_INTEGER,fe()},e.toString=function(){return this.name_},t}(),Y=C("Atom",X);function H(t,e,r){void 0===e&&(e=v),void 0===r&&(r=v);var n=new X(t);return e!==v&&Le(Pe,n,e,undefined),r!==v&&Re(n,r),n}var G={identity:function(t,e){return t===e},structural:function(t,e){return en(t,e)},default:function(t,e){return Object.is?Object.is(t,e):t===e?0!==t||1/t==1/e:t!=t&&e!=e},shallow:function(t,e){return en(t,e,1)}};function q(t,e,r){return $e(t)?t:Array.isArray(t)?jt.array(t,{name:r}):b(t)?jt.object(t,void 0,{name:r}):O(t)?jt.map(t,{name:r}):T(t)?jt.set(t,{name:r}):"function"!=typeof t||Ee(t)||Ke(t)?t:x(t)?Ge(t):Ae(r,t)}function K(t){return t}var $="override";function J(t,e){return{annotationType_:t,options_:e,make_:Z,extend_:Q}}function Z(t,e,r,n){var i;if(null!=(i=this.options_)&&i.bound)return null===this.extend_(t,e,r,!1)?0:1;if(n===t.target_)return null===this.extend_(t,e,r,!1)?0:2;if(Ee(r.value))return 1;var o=tt(t,this,e,r,!1);return c(n,e,o),2}function Q(t,e,r,n){var i=tt(t,this,e,r);return t.defineProperty_(e,i,n)}function tt(t,e,r,n,i){var o,s,a,c,l,u,h,f;void 0===i&&(i=se.safeDescriptors),f=n,e.annotationType_,f.value;var d,p=n.value;return null!=(o=e.options_)&&o.bound&&(p=p.bind(null!=(d=t.proxy_)?d:t.target_)),{value:Bt(null!=(s=null==(a=e.options_)?void 0:a.name)?s:r.toString(),p,null!=(c=null==(l=e.options_)?void 0:l.autoAction)&&c,null!=(u=e.options_)&&u.bound?null!=(h=t.proxy_)?h:t.target_:void 0),configurable:!i||t.isPlainObject_,enumerable:!1,writable:!i}}function et(t,e){return{annotationType_:t,options_:e,make_:rt,extend_:nt}}function rt(t,e,r,n){var i;if(n===t.target_)return null===this.extend_(t,e,r,!1)?0:2;if(null!=(i=this.options_)&&i.bound&&(!E(t.target_,e)||!Ke(t.target_[e]))&&null===this.extend_(t,e,r,!1))return 0;if(Ke(r.value))return 1;var o=it(t,this,0,r,!1,!1);return c(n,e,o),2}function nt(t,e,r,n){var i,o=it(t,this,0,r,null==(i=this.options_)?void 0:i.bound);return t.defineProperty_(e,o,n)}function it(t,e,r,n,i,o){var s;void 0===o&&(o=se.safeDescriptors),s=n,e.annotationType_,s.value;var a,c=n.value;return Ke(c)||(c=Ge(c)),i&&((c=c.bind(null!=(a=t.proxy_)?a:t.target_)).isMobXFlow=!0),{value:c,configurable:!o||t.isPlainObject_,enumerable:!1,writable:!o}}function ot(t,e){return{annotationType_:t,options_:e,make_:st,extend_:at}}function st(t,e,r){return null===this.extend_(t,e,r,!1)?0:1}function at(t,e,r,n){return i=r,this.annotationType_,i.get,t.defineComputedProperty_(e,R({},this.options_,{get:r.get,set:r.set}),n);var i}function ct(t,e){return{annotationType_:t,options_:e,make_:lt,extend_:ut}}function lt(t,e,r){return null===this.extend_(t,e,r,!1)?0:1}function ut(t,e,r,n){var i,o;return this.annotationType_,t.defineObservableProperty_(e,r.value,null!=(i=null==(o=this.options_)?void 0:o.enhancer)?i:q,n)}var ht="true",ft=dt();function dt(t){return{annotationType_:ht,options_:t,make_:pt,extend_:gt}}function pt(t,e,r,n){var i,o,s,a;if(r.get)return Mt.make_(t,e,r,n);if(r.set){var l=Bt(e.toString(),r.set);return n===t.target_?null===t.defineProperty_(e,{configurable:!se.safeDescriptors||t.isPlainObject_,set:l})?0:2:(c(n,e,{configurable:!0,set:l}),2)}if(n!==t.target_&&"function"==typeof r.value)return x(r.value)?(null!=(a=this.options_)&&a.autoBind?Ge.bound:Ge).make_(t,e,r,n):(null!=(s=this.options_)&&s.autoBind?Ae.bound:Ae).make_(t,e,r,n);var u,h=!1===(null==(i=this.options_)?void 0:i.deep)?jt.ref:jt;return"function"==typeof r.value&&null!=(o=this.options_)&&o.autoBind&&(r.value=r.value.bind(null!=(u=t.proxy_)?u:t.target_)),h.make_(t,e,r,n)}function gt(t,e,r,n){var i,o,s;return r.get?Mt.extend_(t,e,r,n):r.set?t.defineProperty_(e,{configurable:!se.safeDescriptors||t.isPlainObject_,set:Bt(e.toString(),r.set)},n):("function"==typeof r.value&&null!=(i=this.options_)&&i.autoBind&&(r.value=r.value.bind(null!=(s=t.proxy_)?s:t.target_)),(!1===(null==(o=this.options_)?void 0:o.deep)?jt.ref:jt).extend_(t,e,r,n))}var vt={deep:!0,name:void 0,defaultDecorator:void 0,proxy:!0};function _t(t){return t||vt}Object.freeze(vt);var yt=ct("observable"),mt=ct("observable.ref",{enhancer:K}),bt=ct("observable.shallow",{enhancer:function(t,e,r){return null==t||Nr(t)||wr(t)||Ar(t)||Pr(t)?t:Array.isArray(t)?jt.array(t,{name:r,deep:!1}):b(t)?jt.object(t,void 0,{name:r,deep:!1}):O(t)?jt.map(t,{name:r,deep:!1}):T(t)?jt.set(t,{name:r,deep:!1}):void 0}}),xt=ct("observable.struct",{enhancer:function(t,e){return en(t,e)?e:t}}),wt=W(yt);function St(t){return!0===t.deep?q:!1===t.deep?K:(e=t.defaultDecorator)&&null!=(r=null==(n=e.options_)?void 0:n.enhancer)?r:q;var e,r,n}function Ct(t,e,r){if(!y(e))return $e(t)?t:b(t)?jt.object(t,e,r):Array.isArray(t)?jt.array(t,e):O(t)?jt.map(t,e):T(t)?jt.set(t,e):"object"==typeof t&&null!==t?t:jt.box(t,e);U(t,e,yt)}s(Ct,wt);var Ot,Tt,jt=s(Ct,{box:function(t,e){var r=_t(e);return new Wt(t,St(r),r.name,!0,r.equals)},array:function(t,e){var r=_t(e);return(!1===se.useProxies||!1===r.proxy?$r:dr)(t,St(r),r.name)},map:function(t,e){var r=_t(e);return new kr(t,St(r),r.name)},set:function(t,e){var r=_t(e);return new Mr(t,St(r),r.name)},object:function(t,e,r){return Ve(!1===se.useProxies||!1===(null==r?void 0:r.proxy)?Fr({},r):function(t,e){var r,n;return p(),null!=(n=(r=(t=Fr(t,e))[z]).proxy_)?n:r.proxy_=new Proxy(t,Qe)}({},r),t,e)},ref:W(mt),shallow:W(bt),deep:wt,struct:W(xt)}),kt="computed",At=ot(kt),Et=ot("computed.struct",{equals:G.structural}),Mt=function(t,e){if(y(e))return U(t,e,At);if(b(t))return W(ot(kt,t));var r=b(e)?e:{};return r.get=t,r.name||(r.name=t.name||""),new Xt(r)};Object.assign(Mt,At),Mt.struct=W(Et);var Pt,Dt=0,Rt=1,Lt=null!=(Ot=null==(Tt=a((function(){}),"name"))?void 0:Tt.configurable)&&Ot,Ft={value:"action",configurable:!0,writable:!1,enumerable:!1};function Bt(t,e,r,i){function o(){return function(t,e,r,i,o){var s=function(t,e,r,n){var i=!1,o=0,s=se.trackingDerivation,a=!e||!s;he();var c=se.allowStateChanges;a&&(Zt(),c=It(!0));var l={runAsAction_:a,prevDerivation_:s,prevAllowStateChanges_:c,prevAllowStateReads_:te(!0),notifySpy_:i,startTime_:o,actionId_:Rt++,parentActionId_:Dt};return Dt=l.actionId_,l}(0,e);try{return r.apply(i,o)}catch(t){throw s.error_=t,t}finally{!function(t){Dt!==t.actionId_&&n(30),Dt=t.parentActionId_,void 0!==t.error_&&(se.suppressReactionErrors=!0),Nt(t.prevAllowStateChanges_),ee(t.prevAllowStateReads_),fe(),t.runAsAction_&&Qt(t.prevDerivation_),se.suppressReactionErrors=!1}(s)}}(0,r,e,i||this,arguments)}return void 0===r&&(r=!1),o.isMobxAction=!0,Lt&&(Ft.value=t,c(o,"name",Ft)),o}function It(t){var e=se.allowStateChanges;return se.allowStateChanges=t,e}function Nt(t){se.allowStateChanges=t}Pt=Symbol.toPrimitive;var Vt,Wt=function(t){function e(e,r,n,i,o){var s;return void 0===n&&(n="ObservableValue"),void 0===i&&(i=!0),void 0===o&&(o=G.default),(s=t.call(this,n)||this).enhancer=void 0,s.name_=void 0,s.equals=void 0,s.hasUnreportedChange_=!1,s.interceptors_=void 0,s.changeListeners_=void 0,s.value_=void 0,s.dehancer=void 0,s.enhancer=r,s.name_=n,s.equals=o,s.value_=r(e,void 0,n),s}L(e,t);var r=e.prototype;return r.dehanceValue=function(t){return void 0!==this.dehancer?this.dehancer(t):t},r.set=function(t){this.value_,(t=this.prepareNewValue_(t))!==se.UNCHANGED&&this.setNewValue_(t)},r.prepareNewValue_=function(t){if(tr(this)){var e=rr(this,{object:this,type:ur,newValue:t});if(!e)return se.UNCHANGED;t=e.newValue}return t=this.enhancer(t,this.value_,this.name_),this.equals(this.value_,t)?se.UNCHANGED:t},r.setNewValue_=function(t){var e=this.value_;this.value_=t,this.reportChanged(),nr(this)&&or(this,{type:ur,object:this,newValue:t,oldValue:e})},r.get=function(){return this.reportObserved(),this.dehanceValue(this.value_)},r.intercept_=function(t){return er(this,t)},r.observe_=function(t,e){return e&&t({observableKind:"value",debugObjectName:this.name_,object:this,type:ur,newValue:this.value_,oldValue:void 0}),ir(this,t)},r.raw=function(){return this.value_},r.toJSON=function(){return this.get()},r.toString=function(){return this.name_+"["+this.value_+"]"},r.valueOf=function(){return A(this.get())},r[Pt]=function(){return this.valueOf()},e}(X);Vt=Symbol.toPrimitive;var Ut,zt,Xt=function(){function t(t){this.dependenciesState_=Ut.NOT_TRACKING_,this.observing_=[],this.newObserving_=null,this.isBeingObserved_=!1,this.isPendingUnobservation_=!1,this.observers_=new Set,this.diffValue_=0,this.runId_=0,this.lastAccessedBy_=0,this.lowestObserverState_=Ut.UP_TO_DATE_,this.unboundDepsCount_=0,this.value_=new Ht(null),this.name_=void 0,this.triggeredBy_=void 0,this.isComputing_=!1,this.isRunningSetter_=!1,this.derivation=void 0,this.setter_=void 0,this.isTracing_=zt.NONE,this.scope_=void 0,this.equals_=void 0,this.requiresReaction_=void 0,this.keepAlive_=void 0,this.onBOL=void 0,this.onBUOL=void 0,t.get||n(31),this.derivation=t.get,this.name_=t.name||"ComputedValue",t.set&&(this.setter_=Bt("ComputedValue-setter",t.set)),this.equals_=t.equals||(t.compareStructural||t.struct?G.structural:G.default),this.scope_=t.context,this.requiresReaction_=t.requiresReaction,this.keepAlive_=!!t.keepAlive}var e=t.prototype;return e.onBecomeStale_=function(){!function(t){t.lowestObserverState_===Ut.UP_TO_DATE_&&(t.lowestObserverState_=Ut.POSSIBLY_STALE_,t.observers_.forEach((function(t){t.dependenciesState_===Ut.UP_TO_DATE_&&(t.dependenciesState_=Ut.POSSIBLY_STALE_,t.onBecomeStale_())})))}(this)},e.onBO=function(){this.onBOL&&this.onBOL.forEach((function(t){return t()}))},e.onBUO=function(){this.onBUOL&&this.onBUOL.forEach((function(t){return t()}))},e.get=function(){if(this.isComputing_&&n(32,this.name_,this.derivation),0!==se.inBatch||0!==this.observers_.size||this.keepAlive_){if(de(this),qt(this)){var t=se.trackingContext;this.keepAlive_&&!t&&(se.trackingContext=this),this.trackAndCompute()&&function(t){t.lowestObserverState_!==Ut.STALE_&&(t.lowestObserverState_=Ut.STALE_,t.observers_.forEach((function(e){e.dependenciesState_===Ut.POSSIBLY_STALE_?e.dependenciesState_=Ut.STALE_:e.dependenciesState_===Ut.UP_TO_DATE_&&(t.lowestObserverState_=Ut.UP_TO_DATE_)})))}(this),se.trackingContext=t}}else qt(this)&&(this.warnAboutUntrackedRead_(),he(),this.value_=this.computeValue_(!1),fe());var e=this.value_;if(Gt(e))throw e.cause;return e},e.set=function(t){if(this.setter_){this.isRunningSetter_&&n(33,this.name_),this.isRunningSetter_=!0;try{this.setter_.call(this.scope_,t)}finally{this.isRunningSetter_=!1}}else n(34,this.name_)},e.trackAndCompute=function(){var t=this.value_,e=this.dependenciesState_===Ut.NOT_TRACKING_,r=this.computeValue_(!0),n=e||Gt(t)||Gt(r)||!this.equals_(t,r);return n&&(this.value_=r),n},e.computeValue_=function(t){this.isComputing_=!0;var e,r=It(!1);if(t)e=Kt(this,this.derivation,this.scope_);else if(!0===se.disableErrorBoundaries)e=this.derivation.call(this.scope_);else try{e=this.derivation.call(this.scope_)}catch(t){e=new Ht(t)}return Nt(r),this.isComputing_=!1,e},e.suspend_=function(){this.keepAlive_||($t(this),this.value_=void 0)},e.observe_=function(t,e){var r=this,n=!0,i=void 0;return function(t,e){var r,n,i,o,s;void 0===e&&(e=h);var a,c=null!=(r=null==(n=e)?void 0:n.name)?r:"Autorun";if(e.scheduler||e.delay){var l=function(t){return t.scheduler?t.scheduler:t.delay?function(e){return setTimeout(e,t.delay)}:Me}(e),u=!1;a=new ge(c,(function(){u||(u=!0,l((function(){u=!1,a.isDisposed_||a.track(f)})))}),e.onError,e.requiresObservable)}else a=new ge(c,(function(){this.track(f)}),e.onError,e.requiresObservable);function f(){t(a)}return null!=(i=e)&&null!=(o=i.signal)&&o.aborted||a.schedule_(),a.getDisposer_(null==(s=e)?void 0:s.signal)}((function(){var o=r.get();if(!n||e){var s=Zt();t({observableKind:"computed",debugObjectName:r.name_,type:ur,object:r,newValue:o,oldValue:i}),Qt(s)}n=!1,i=o}))},e.warnAboutUntrackedRead_=function(){},e.toString=function(){return this.name_+"["+this.derivation.toString()+"]"},e.valueOf=function(){return A(this.get())},e[Vt]=function(){return this.valueOf()},t}(),Yt=C("ComputedValue",Xt);!function(t){t[t.NOT_TRACKING_=-1]="NOT_TRACKING_",t[t.UP_TO_DATE_=0]="UP_TO_DATE_",t[t.POSSIBLY_STALE_=1]="POSSIBLY_STALE_",t[t.STALE_=2]="STALE_"}(Ut||(Ut={})),function(t){t[t.NONE=0]="NONE",t[t.LOG=1]="LOG",t[t.BREAK=2]="BREAK"}(zt||(zt={}));var Ht=function(t){this.cause=void 0,this.cause=t};function Gt(t){return t instanceof Ht}function qt(t){switch(t.dependenciesState_){case Ut.UP_TO_DATE_:return!1;case Ut.NOT_TRACKING_:case Ut.STALE_:return!0;case Ut.POSSIBLY_STALE_:for(var e=te(!0),r=Zt(),n=t.observing_,i=n.length,o=0;o<i;o++){var s=n[o];if(Yt(s)){if(se.disableErrorBoundaries)s.get();else try{s.get()}catch(t){return Qt(r),ee(e),!0}if(t.dependenciesState_===Ut.STALE_)return Qt(r),ee(e),!0}}return re(t),Qt(r),ee(e),!1}}function Kt(t,e,r){var n=te(!0);re(t),t.newObserving_=new Array(t.observing_.length+100),t.unboundDepsCount_=0,t.runId_=++se.runId;var i,o=se.trackingDerivation;if(se.trackingDerivation=t,se.inBatch++,!0===se.disableErrorBoundaries)i=e.call(r);else try{i=e.call(r)}catch(t){i=new Ht(t)}return se.inBatch--,se.trackingDerivation=o,function(t){for(var e=t.observing_,r=t.observing_=t.newObserving_,n=Ut.UP_TO_DATE_,i=0,o=t.unboundDepsCount_,s=0;s<o;s++){var a=r[s];0===a.diffValue_&&(a.diffValue_=1,i!==s&&(r[i]=a),i++),a.dependenciesState_>n&&(n=a.dependenciesState_)}for(r.length=i,t.newObserving_=null,o=e.length;o--;){var c=e[o];0===c.diffValue_&&le(c,t),c.diffValue_=0}for(;i--;){var l=r[i];1===l.diffValue_&&(l.diffValue_=0,ce(l,t))}n!==Ut.UP_TO_DATE_&&(t.dependenciesState_=n,t.onBecomeStale_())}(t),ee(n),i}function $t(t){var e=t.observing_;t.observing_=[];for(var r=e.length;r--;)le(e[r],t);t.dependenciesState_=Ut.NOT_TRACKING_}function Jt(t){var e=Zt();try{return t()}finally{Qt(e)}}function Zt(){var t=se.trackingDerivation;return se.trackingDerivation=null,t}function Qt(t){se.trackingDerivation=t}function te(t){var e=se.allowStateReads;return se.allowStateReads=t,e}function ee(t){se.allowStateReads=t}function re(t){if(t.dependenciesState_!==Ut.UP_TO_DATE_){t.dependenciesState_=Ut.UP_TO_DATE_;for(var e=t.observing_,r=e.length;r--;)e[r].lowestObserverState_=Ut.UP_TO_DATE_}}var ne=function(){this.version=6,this.UNCHANGED={},this.trackingDerivation=null,this.trackingContext=null,this.runId=0,this.mobxGuid=0,this.inBatch=0,this.pendingUnobservations=[],this.pendingReactions=[],this.isRunningReactions=!1,this.allowStateChanges=!1,this.allowStateReads=!0,this.enforceActions=!0,this.spyListeners=[],this.globalReactionErrorHandlers=[],this.computedRequiresReaction=!1,this.reactionRequiresObservable=!1,this.observableRequiresReaction=!1,this.disableErrorBoundaries=!1,this.suppressReactionErrors=!1,this.useProxies=!0,this.verifyProxies=!1,this.safeDescriptors=!0,this.stateVersion=Number.MIN_SAFE_INTEGER},ie=!0,oe=!1,se=function(){var t=o();return t.__mobxInstanceCount>0&&!t.__mobxGlobals&&(ie=!1),t.__mobxGlobals&&t.__mobxGlobals.version!==(new ne).version&&(ie=!1),ie?t.__mobxGlobals?(t.__mobxInstanceCount+=1,t.__mobxGlobals.UNCHANGED||(t.__mobxGlobals.UNCHANGED={}),t.__mobxGlobals):(t.__mobxInstanceCount=1,t.__mobxGlobals=new ne):(setTimeout((function(){oe||n(35)}),1),new ne)}();function ae(){return se}function ce(t,e){t.observers_.add(e),t.lowestObserverState_>e.dependenciesState_&&(t.lowestObserverState_=e.dependenciesState_)}function le(t,e){t.observers_.delete(e),0===t.observers_.size&&ue(t)}function ue(t){!1===t.isPendingUnobservation_&&(t.isPendingUnobservation_=!0,se.pendingUnobservations.push(t))}function he(){se.inBatch++}function fe(){if(0==--se.inBatch){ye();for(var t=se.pendingUnobservations,e=0;e<t.length;e++){var r=t[e];r.isPendingUnobservation_=!1,0===r.observers_.size&&(r.isBeingObserved_&&(r.isBeingObserved_=!1,r.onBUO()),r instanceof Xt&&r.suspend_())}se.pendingUnobservations=[]}}function de(t){var e=se.trackingDerivation;return null!==e?(e.runId_!==t.lastAccessedBy_&&(t.lastAccessedBy_=e.runId_,e.newObserving_[e.unboundDepsCount_++]=t,!t.isBeingObserved_&&se.trackingContext&&(t.isBeingObserved_=!0,t.onBO())),t.isBeingObserved_):(0===t.observers_.size&&se.inBatch>0&&ue(t),!1)}function pe(t){t.lowestObserverState_!==Ut.STALE_&&(t.lowestObserverState_=Ut.STALE_,t.observers_.forEach((function(t){t.dependenciesState_===Ut.UP_TO_DATE_&&t.onBecomeStale_(),t.dependenciesState_=Ut.STALE_})))}var ge=function(){function t(t,e,r,n){void 0===t&&(t="Reaction"),this.name_=void 0,this.onInvalidate_=void 0,this.errorHandler_=void 0,this.requiresObservable_=void 0,this.observing_=[],this.newObserving_=[],this.dependenciesState_=Ut.NOT_TRACKING_,this.diffValue_=0,this.runId_=0,this.unboundDepsCount_=0,this.isDisposed_=!1,this.isScheduled_=!1,this.isTrackPending_=!1,this.isRunning_=!1,this.isTracing_=zt.NONE,this.name_=t,this.onInvalidate_=e,this.errorHandler_=r,this.requiresObservable_=n}var e=t.prototype;return e.onBecomeStale_=function(){this.schedule_()},e.schedule_=function(){this.isScheduled_||(this.isScheduled_=!0,se.pendingReactions.push(this),ye())},e.isScheduled=function(){return this.isScheduled_},e.runReaction_=function(){if(!this.isDisposed_){he(),this.isScheduled_=!1;var t=se.trackingContext;if(se.trackingContext=this,qt(this)){this.isTrackPending_=!0;try{this.onInvalidate_()}catch(t){this.reportExceptionInDerivation_(t)}}se.trackingContext=t,fe()}},e.track=function(t){if(!this.isDisposed_){he(),this.isRunning_=!0;var e=se.trackingContext;se.trackingContext=this;var r=Kt(this,t,void 0);se.trackingContext=e,this.isRunning_=!1,this.isTrackPending_=!1,this.isDisposed_&&$t(this),Gt(r)&&this.reportExceptionInDerivation_(r.cause),fe()}},e.reportExceptionInDerivation_=function(t){var e=this;if(this.errorHandler_)this.errorHandler_(t,this);else{if(se.disableErrorBoundaries)throw t;var r="[mobx] uncaught error in '"+this+"'";se.suppressReactionErrors||console.error(r,t),se.globalReactionErrorHandlers.forEach((function(r){return r(t,e)}))}},e.dispose=function(){this.isDisposed_||(this.isDisposed_=!0,this.isRunning_||(he(),$t(this),fe()))},e.getDisposer_=function(t){var e=this,r=function r(){e.dispose(),null==t||null==t.removeEventListener||t.removeEventListener("abort",r)};return null==t||null==t.addEventListener||t.addEventListener("abort",r),r[z]=this,r},e.toString=function(){return"Reaction["+this.name_+"]"},e.trace=function(t){void 0===t&&(t=!1)},t}(),ve=100,_e=function(t){return t()};function ye(){se.inBatch>0||se.isRunningReactions||_e(me)}function me(){se.isRunningReactions=!0;for(var t=se.pendingReactions,e=0;t.length>0;){++e===ve&&(console.error("[mobx] cycle in reaction: "+t[0]),t.splice(0));for(var r=t.splice(0),n=0,i=r.length;n<i;n++)r[n].runReaction_()}se.isRunningReactions=!1}var be=C("Reaction",ge),xe="action",we="autoAction",Se=J(xe),Ce=J("action.bound",{bound:!0}),Oe=J(we,{autoAction:!0}),Te=J("autoAction.bound",{autoAction:!0,bound:!0});function je(t){return function(e,r){return _(e)?Bt(e.name||"<unnamed action>",e,t):_(r)?Bt(e,r,t):y(r)?U(e,r,t?Oe:Se):y(e)?W(J(t?we:xe,{name:e,autoAction:t})):void 0}}var ke=je(!1);Object.assign(ke,Se);var Ae=je(!0);function Ee(t){return _(t)&&!0===t.isMobxAction}Object.assign(Ae,Oe),ke.bound=W(Ce),Ae.bound=W(Te);var Me=function(t){return t()};var Pe="onBO",De="onBUO";function Re(t,e,r){return Le(De,t,e,r)}function Le(t,e,r,n){var i="function"==typeof n?Jr(e,r):Jr(e),o=_(n)?n:r,s=t+"L";return i[s]?i[s].add(o):i[s]=new Set([o]),function(){var t=i[s];t&&(t.delete(o),0===t.size&&delete i[s])}}var Fe="never",Be="always",Ie="observed";function Ne(t){!0===t.isolateGlobalState&&function(){if((se.pendingReactions.length||se.inBatch||se.isRunningReactions)&&n(36),oe=!0,ie){var t=o();0==--t.__mobxInstanceCount&&(t.__mobxGlobals=void 0),se=new ne}}();var e,r,i=t.useProxies,s=t.enforceActions;if(void 0!==i&&(se.useProxies=i===Be||i!==Fe&&"undefined"!=typeof Proxy),"ifavailable"===i&&(se.verifyProxies=!0),void 0!==s){var a=s===Be?Be:s===Ie;se.enforceActions=a,se.allowStateChanges=!0!==a&&a!==Be}["computedRequiresReaction","reactionRequiresObservable","observableRequiresReaction","disableErrorBoundaries","safeDescriptors"].forEach((function(e){e in t&&(se[e]=!!t[e])})),se.allowStateReads=!se.observableRequiresReaction,t.reactionScheduler&&(e=t.reactionScheduler,r=_e,_e=function(t){return e((function(){return r(t)}))})}function Ve(t,e,r,n){var i=M(e),o=Fr(t,n)[z];he();try{k(i).forEach((function(t){o.extend_(t,i[t],!r||!(t in r)||r[t])}))}finally{fe()}return t}function We(t,e){return Ue(Jr(t,e))}function Ue(t){var e,r={name:t.name_};return t.observing_&&t.observing_.length>0&&(r.dependencies=(e=t.observing_,Array.from(new Set(e))).map(Ue)),r}var ze=0;function Xe(){this.message="FLOW_CANCELLED"}Xe.prototype=Object.create(Error.prototype);var Ye=et("flow"),He=et("flow.bound",{bound:!0}),Ge=Object.assign((function(t,e){if(y(e))return U(t,e,Ye);var r=t,n=r.name||"<unnamed flow>",i=function(){var t,e=arguments,i=++ze,o=ke(n+" - runid: "+i+" - init",r).apply(this,e),s=void 0,a=new Promise((function(e,r){var a=0;function c(t){var e;s=void 0;try{e=ke(n+" - runid: "+i+" - yield "+a++,o.next).call(o,t)}catch(t){return r(t)}u(e)}function l(t){var e;s=void 0;try{e=ke(n+" - runid: "+i+" - yield "+a++,o.throw).call(o,t)}catch(t){return r(t)}u(e)}function u(t){if(!_(null==t?void 0:t.then))return t.done?e(t.value):(s=Promise.resolve(t.value)).then(c,l);t.then(u,r)}t=r,c(void 0)}));return a.cancel=ke(n+" - runid: "+i+" - cancel",(function(){try{s&&qe(s);var e=o.return(void 0),r=Promise.resolve(e.value);r.then(v,v),qe(r),t(new Xe)}catch(e){t(e)}})),a};return i.isMobXFlow=!0,i}),Ye);function qe(t){_(t.cancel)&&t.cancel()}function Ke(t){return!0===(null==t?void 0:t.isMobXFlow)}function $e(t){return function(t,e){return!!t&&(void 0!==e?!!Nr(t)&&t[z].values_.has(e):Nr(t)||!!t[z]||Y(t)||be(t)||Yt(t))}(t)}function Je(t,e){void 0===e&&(e=void 0),he();try{return t.apply(e)}finally{fe()}}function Ze(t){return t[z]}Ge.bound=W(He);var Qe={has:function(t,e){return Ze(t).has_(e)},get:function(t,e){return Ze(t).get_(e)},set:function(t,e,r){var n;return!!y(e)&&(null==(n=Ze(t).set_(e,r,!0))||n)},deleteProperty:function(t,e){var r;return!!y(e)&&(null==(r=Ze(t).delete_(e,!0))||r)},defineProperty:function(t,e,r){var n;return null==(n=Ze(t).defineProperty_(e,r))||n},ownKeys:function(t){return Ze(t).ownKeys_()},preventExtensions:function(t){n(13)}};function tr(t){return void 0!==t.interceptors_&&t.interceptors_.length>0}function er(t,e){var r=t.interceptors_||(t.interceptors_=[]);return r.push(e),g((function(){var t=r.indexOf(e);-1!==t&&r.splice(t,1)}))}function rr(t,e){var r=Zt();try{for(var i=[].concat(t.interceptors_||[]),o=0,s=i.length;o<s&&((e=i[o](e))&&!e.type&&n(14),e);o++);return e}finally{Qt(r)}}function nr(t){return void 0!==t.changeListeners_&&t.changeListeners_.length>0}function ir(t,e){var r=t.changeListeners_||(t.changeListeners_=[]);return r.push(e),g((function(){var t=r.indexOf(e);-1!==t&&r.splice(t,1)}))}function or(t,e){var r=Zt(),n=t.changeListeners_;if(n){for(var i=0,o=(n=n.slice()).length;i<o;i++)n[i](e);Qt(r)}}function sr(t,e,r){var n=Fr(t,r)[z];he();try{null!=e||(e=function(t){return E(t,V)||w(t,V,R({},t[V])),t[V]}(t)),k(e).forEach((function(t){return n.make_(t,e[t])}))}finally{fe()}return t}var ar=Symbol("mobx-keys");function cr(t,e,r){if(b(t))return Ve(t,t,e,r);var n=Fr(t,r)[z];if(!t[ar]){var i=Object.getPrototypeOf(t),o=new Set([].concat(k(t),k(i)));o.delete("constructor"),o.delete(z),w(i,ar,o)}he();try{t[ar].forEach((function(t){return n.make_(t,!e||!(t in e)||e[t])}))}finally{fe()}return t}var lr="splice",ur="update",hr={get:function(t,e){var r=t[z];return e===z?r:"length"===e?r.getArrayLength_():"string"!=typeof e||isNaN(e)?E(pr,e)?pr[e]:t[e]:r.get_(parseInt(e))},set:function(t,e,r){var n=t[z];return"length"===e&&n.setArrayLength_(r),"symbol"==typeof e||isNaN(e)?t[e]=r:n.set_(parseInt(e),r),!0},preventExtensions:function(){n(15)}},fr=function(){function t(t,e,r,n){void 0===t&&(t="ObservableArray"),this.owned_=void 0,this.legacyMode_=void 0,this.atom_=void 0,this.values_=[],this.interceptors_=void 0,this.changeListeners_=void 0,this.enhancer_=void 0,this.dehancer=void 0,this.proxy_=void 0,this.lastKnownLength_=0,this.owned_=r,this.legacyMode_=n,this.atom_=new X(t),this.enhancer_=function(t,r){return e(t,r,"ObservableArray[..]")}}var e=t.prototype;return e.dehanceValue_=function(t){return void 0!==this.dehancer?this.dehancer(t):t},e.dehanceValues_=function(t){return void 0!==this.dehancer&&t.length>0?t.map(this.dehancer):t},e.intercept_=function(t){return er(this,t)},e.observe_=function(t,e){return void 0===e&&(e=!1),e&&t({observableKind:"array",object:this.proxy_,debugObjectName:this.atom_.name_,type:"splice",index:0,added:this.values_.slice(),addedCount:this.values_.length,removed:[],removedCount:0}),ir(this,t)},e.getArrayLength_=function(){return this.atom_.reportObserved(),this.values_.length},e.setArrayLength_=function(t){("number"!=typeof t||isNaN(t)||t<0)&&n("Out of range: "+t);var e=this.values_.length;if(t!==e)if(t>e){for(var r=new Array(t-e),i=0;i<t-e;i++)r[i]=void 0;this.spliceWithArray_(e,0,r)}else this.spliceWithArray_(t,e-t)},e.updateArrayLength_=function(t,e){t!==this.lastKnownLength_&&n(16),this.lastKnownLength_+=e,this.legacyMode_&&e>0&&Kr(t+e+1)},e.spliceWithArray_=function(t,e,r){var n=this;this.atom_;var i=this.values_.length;if(void 0===t?t=0:t>i?t=i:t<0&&(t=Math.max(0,i+t)),e=1===arguments.length?i-t:null==e?0:Math.max(0,Math.min(e,i-t)),void 0===r&&(r=u),tr(this)){var o=rr(this,{object:this.proxy_,type:lr,index:t,removedCount:e,added:r});if(!o)return u;e=o.removedCount,r=o.added}if(r=0===r.length?r:r.map((function(t){return n.enhancer_(t,void 0)})),this.legacyMode_){var s=r.length-e;this.updateArrayLength_(i,s)}var a=this.spliceItemsIntoValues_(t,e,r);return 0===e&&0===r.length||this.notifyArraySplice_(t,r,a),this.dehanceValues_(a)},e.spliceItemsIntoValues_=function(t,e,r){var n;if(r.length<1e4)return(n=this.values_).splice.apply(n,[t,e].concat(r));var i=this.values_.slice(t,t+e),o=this.values_.slice(t+e);this.values_.length+=r.length-e;for(var s=0;s<r.length;s++)this.values_[t+s]=r[s];for(var a=0;a<o.length;a++)this.values_[t+r.length+a]=o[a];return i},e.notifyArrayChildUpdate_=function(t,e,r){var n=!this.owned_&&!1,i=nr(this),o=i||n?{observableKind:"array",object:this.proxy_,type:ur,debugObjectName:this.atom_.name_,index:t,newValue:e,oldValue:r}:null;this.atom_.reportChanged(),i&&or(this,o)},e.notifyArraySplice_=function(t,e,r){var n=!this.owned_&&!1,i=nr(this),o=i||n?{observableKind:"array",object:this.proxy_,debugObjectName:this.atom_.name_,type:lr,index:t,removed:r,added:e,removedCount:r.length,addedCount:e.length}:null;this.atom_.reportChanged(),i&&or(this,o)},e.get_=function(t){if(!(this.legacyMode_&&t>=this.values_.length))return this.atom_.reportObserved(),this.dehanceValue_(this.values_[t]);console.warn("[mobx] Out of bounds read: "+t)},e.set_=function(t,e){var r=this.values_;if(this.legacyMode_&&t>r.length&&n(17,t,r.length),t<r.length){this.atom_;var i=r[t];if(tr(this)){var o=rr(this,{type:ur,object:this.proxy_,index:t,newValue:e});if(!o)return;e=o.newValue}(e=this.enhancer_(e,i))!==i&&(r[t]=e,this.notifyArrayChildUpdate_(t,e,i))}else{for(var s=new Array(t+1-r.length),a=0;a<s.length-1;a++)s[a]=void 0;s[s.length-1]=e,this.spliceWithArray_(r.length,0,s)}},t}();function dr(t,e,r,n){void 0===r&&(r="ObservableArray"),void 0===n&&(n=!1),p();var i=new fr(r,e,n,!1);S(i.values_,z,i);var o=new Proxy(i.values_,hr);if(i.proxy_=o,t&&t.length){var s=It(!0);i.spliceWithArray_(0,0,t),Nt(s)}return o}var pr={clear:function(){return this.splice(0)},replace:function(t){var e=this[z];return e.spliceWithArray_(0,e.values_.length,t)},toJSON:function(){return this.slice()},splice:function(t,e){for(var r=arguments.length,n=new Array(r>2?r-2:0),i=2;i<r;i++)n[i-2]=arguments[i];var o=this[z];switch(arguments.length){case 0:return[];case 1:return o.spliceWithArray_(t);case 2:return o.spliceWithArray_(t,e)}return o.spliceWithArray_(t,e,n)},spliceWithArray:function(t,e,r){return this[z].spliceWithArray_(t,e,r)},push:function(){for(var t=this[z],e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return t.spliceWithArray_(t.values_.length,0,r),t.values_.length},pop:function(){return this.splice(Math.max(this[z].values_.length-1,0),1)[0]},shift:function(){return this.splice(0,1)[0]},unshift:function(){for(var t=this[z],e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return t.spliceWithArray_(0,0,r),t.values_.length},reverse:function(){return se.trackingDerivation&&n(37,"reverse"),this.replace(this.slice().reverse()),this},sort:function(){se.trackingDerivation&&n(37,"sort");var t=this.slice();return t.sort.apply(t,arguments),this.replace(t),this},remove:function(t){var e=this[z],r=e.dehanceValues_(e.values_).indexOf(t);return r>-1&&(this.splice(r,1),!0)}};function gr(t,e){"function"==typeof Array.prototype[t]&&(pr[t]=e(t))}function vr(t){return function(){var e=this[z];e.atom_.reportObserved();var r=e.dehanceValues_(e.values_);return r[t].apply(r,arguments)}}function _r(t){return function(e,r){var n=this,i=this[z];return i.atom_.reportObserved(),i.dehanceValues_(i.values_)[t]((function(t,i){return e.call(r,t,i,n)}))}}function yr(t){return function(){var e=this,r=this[z];r.atom_.reportObserved();var n=r.dehanceValues_(r.values_),i=arguments[0];return arguments[0]=function(t,r,n){return i(t,r,n,e)},n[t].apply(n,arguments)}}gr("concat",vr),gr("flat",vr),gr("includes",vr),gr("indexOf",vr),gr("join",vr),gr("lastIndexOf",vr),gr("slice",vr),gr("toString",vr),gr("toLocaleString",vr),gr("every",_r),gr("filter",_r),gr("find",_r),gr("findIndex",_r),gr("flatMap",_r),gr("forEach",_r),gr("map",_r),gr("some",_r),gr("reduce",yr),gr("reduceRight",yr);var mr,br,xr=C("ObservableArrayAdministration",fr);function wr(t){return m(t)&&xr(t[z])}var Sr={},Cr="add",Or="delete";mr=Symbol.iterator,br=Symbol.toStringTag;var Tr,jr,kr=function(){function t(t,e,r){var i=this;void 0===e&&(e=q),void 0===r&&(r="ObservableMap"),this.enhancer_=void 0,this.name_=void 0,this[z]=Sr,this.data_=void 0,this.hasMap_=void 0,this.keysAtom_=void 0,this.interceptors_=void 0,this.changeListeners_=void 0,this.dehancer=void 0,this.enhancer_=e,this.name_=r,_(Map)||n(18),this.keysAtom_=H("ObservableMap.keys()"),this.data_=new Map,this.hasMap_=new Map,function(t,e){var r=It(t);try{return e()}finally{Nt(r)}}(!0,(function(){i.merge(t)}))}var e=t.prototype;return e.has_=function(t){return this.data_.has(t)},e.has=function(t){var e=this;if(!se.trackingDerivation)return this.has_(t);var r=this.hasMap_.get(t);if(!r){var n=r=new Wt(this.has_(t),K,"ObservableMap.key?",!1);this.hasMap_.set(t,n),Re(n,(function(){return e.hasMap_.delete(t)}))}return r.get()},e.set=function(t,e){var r=this.has_(t);if(tr(this)){var n=rr(this,{type:r?ur:Cr,object:this,newValue:e,name:t});if(!n)return this;e=n.newValue}return r?this.updateValue_(t,e):this.addValue_(t,e),this},e.delete=function(t){var e=this;if(this.keysAtom_,tr(this)&&!rr(this,{type:Or,object:this,name:t}))return!1;if(this.has_(t)){var r=nr(this),n=r?{observableKind:"map",debugObjectName:this.name_,type:Or,object:this,oldValue:this.data_.get(t).value_,name:t}:null;return Je((function(){var r;e.keysAtom_.reportChanged(),null==(r=e.hasMap_.get(t))||r.setNewValue_(!1),e.data_.get(t).setNewValue_(void 0),e.data_.delete(t)})),r&&or(this,n),!0}return!1},e.updateValue_=function(t,e){var r=this.data_.get(t);if((e=r.prepareNewValue_(e))!==se.UNCHANGED){var n=nr(this),i=n?{observableKind:"map",debugObjectName:this.name_,type:ur,object:this,oldValue:r.value_,name:t,newValue:e}:null;r.setNewValue_(e),n&&or(this,i)}},e.addValue_=function(t,e){var r=this;this.keysAtom_,Je((function(){var n,i=new Wt(e,r.enhancer_,"ObservableMap.key",!1);r.data_.set(t,i),e=i.value_,null==(n=r.hasMap_.get(t))||n.setNewValue_(!0),r.keysAtom_.reportChanged()}));var n=nr(this),i=n?{observableKind:"map",debugObjectName:this.name_,type:Cr,object:this,name:t,newValue:e}:null;n&&or(this,i)},e.get=function(t){return this.has(t)?this.dehanceValue_(this.data_.get(t).get()):this.dehanceValue_(void 0)},e.dehanceValue_=function(t){return void 0!==this.dehancer?this.dehancer(t):t},e.keys=function(){return this.keysAtom_.reportObserved(),this.data_.keys()},e.values=function(){var t=this,e=this.keys();return on({next:function(){var r=e.next(),n=r.done,i=r.value;return{done:n,value:n?void 0:t.get(i)}}})},e.entries=function(){var t=this,e=this.keys();return on({next:function(){var r=e.next(),n=r.done,i=r.value;return{done:n,value:n?void 0:[i,t.get(i)]}}})},e[mr]=function(){return this.entries()},e.forEach=function(t,e){for(var r,n=N(this);!(r=n()).done;){var i=r.value,o=i[0],s=i[1];t.call(e,s,o,this)}},e.merge=function(t){var e=this;return Ar(t)&&(t=new Map(t)),Je((function(){b(t)?function(t){var e=Object.keys(t);if(!j)return e;var r=Object.getOwnPropertySymbols(t);return r.length?[].concat(e,r.filter((function(e){return l.propertyIsEnumerable.call(t,e)}))):e}(t).forEach((function(r){return e.set(r,t[r])})):Array.isArray(t)?t.forEach((function(t){var r=t[0],n=t[1];return e.set(r,n)})):O(t)?(t.constructor!==Map&&n(19,t),t.forEach((function(t,r){return e.set(r,t)}))):null!=t&&n(20,t)})),this},e.clear=function(){var t=this;Je((function(){Jt((function(){for(var e,r=N(t.keys());!(e=r()).done;){var n=e.value;t.delete(n)}}))}))},e.replace=function(t){var e=this;return Je((function(){for(var r,i=function(t){if(O(t)||Ar(t))return t;if(Array.isArray(t))return new Map(t);if(b(t)){var e=new Map;for(var r in t)e.set(r,t[r]);return e}return n(21,t)}(t),o=new Map,s=!1,a=N(e.data_.keys());!(r=a()).done;){var c=r.value;if(!i.has(c))if(e.delete(c))s=!0;else{var l=e.data_.get(c);o.set(c,l)}}for(var u,h=N(i.entries());!(u=h()).done;){var f=u.value,d=f[0],p=f[1],g=e.data_.has(d);if(e.set(d,p),e.data_.has(d)){var v=e.data_.get(d);o.set(d,v),g||(s=!0)}}if(!s)if(e.data_.size!==o.size)e.keysAtom_.reportChanged();else for(var _=e.data_.keys(),y=o.keys(),m=_.next(),x=y.next();!m.done;){if(m.value!==x.value){e.keysAtom_.reportChanged();break}m=_.next(),x=y.next()}e.data_=o})),this},e.toString=function(){return"[object ObservableMap]"},e.toJSON=function(){return Array.from(this)},e.observe_=function(t,e){return ir(this,t)},e.intercept_=function(t){return er(this,t)},D(t,[{key:"size",get:function(){return this.keysAtom_.reportObserved(),this.data_.size}},{key:br,get:function(){return"Map"}}]),t}(),Ar=C("ObservableMap",kr),Er={};Tr=Symbol.iterator,jr=Symbol.toStringTag;var Mr=function(){function t(t,e,r){void 0===e&&(e=q),void 0===r&&(r="ObservableSet"),this.name_=void 0,this[z]=Er,this.data_=new Set,this.atom_=void 0,this.changeListeners_=void 0,this.interceptors_=void 0,this.dehancer=void 0,this.enhancer_=void 0,this.name_=r,_(Set)||n(22),this.atom_=H(this.name_),this.enhancer_=function(t,n){return e(t,n,r)},t&&this.replace(t)}var e=t.prototype;return e.dehanceValue_=function(t){return void 0!==this.dehancer?this.dehancer(t):t},e.clear=function(){var t=this;Je((function(){Jt((function(){for(var e,r=N(t.data_.values());!(e=r()).done;){var n=e.value;t.delete(n)}}))}))},e.forEach=function(t,e){for(var r,n=N(this);!(r=n()).done;){var i=r.value;t.call(e,i,i,this)}},e.add=function(t){var e=this;if(this.atom_,tr(this)&&!rr(this,{type:Cr,object:this,newValue:t}))return this;if(!this.has(t)){Je((function(){e.data_.add(e.enhancer_(t,void 0)),e.atom_.reportChanged()}));var r=nr(this),n=r?{observableKind:"set",debugObjectName:this.name_,type:Cr,object:this,newValue:t}:null;r&&or(this,n)}return this},e.delete=function(t){var e=this;if(tr(this)&&!rr(this,{type:Or,object:this,oldValue:t}))return!1;if(this.has(t)){var r=nr(this),n=r?{observableKind:"set",debugObjectName:this.name_,type:Or,object:this,oldValue:t}:null;return Je((function(){e.atom_.reportChanged(),e.data_.delete(t)})),r&&or(this,n),!0}return!1},e.has=function(t){return this.atom_.reportObserved(),this.data_.has(this.dehanceValue_(t))},e.entries=function(){var t=0,e=Array.from(this.keys()),r=Array.from(this.values());return on({next:function(){var n=t;return t+=1,n<r.length?{value:[e[n],r[n]],done:!1}:{done:!0}}})},e.keys=function(){return this.values()},e.values=function(){this.atom_.reportObserved();var t=this,e=0,r=Array.from(this.data_.values());return on({next:function(){return e<r.length?{value:t.dehanceValue_(r[e++]),done:!1}:{done:!0}}})},e.replace=function(t){var e=this;return Pr(t)&&(t=new Set(t)),Je((function(){Array.isArray(t)||T(t)?(e.clear(),t.forEach((function(t){return e.add(t)}))):null!=t&&n("Cannot initialize set from "+t)})),this},e.observe_=function(t,e){return ir(this,t)},e.intercept_=function(t){return er(this,t)},e.toJSON=function(){return Array.from(this)},e.toString=function(){return"[object ObservableSet]"},e[Tr]=function(){return this.values()},D(t,[{key:"size",get:function(){return this.atom_.reportObserved(),this.data_.size}},{key:jr,get:function(){return"Set"}}]),t}(),Pr=C("ObservableSet",Mr),Dr=Object.create(null),Rr="remove",Lr=function(){function t(t,e,r,n){void 0===e&&(e=new Map),void 0===n&&(n=ft),this.target_=void 0,this.values_=void 0,this.name_=void 0,this.defaultAnnotation_=void 0,this.keysAtom_=void 0,this.changeListeners_=void 0,this.interceptors_=void 0,this.proxy_=void 0,this.isPlainObject_=void 0,this.appliedAnnotations_=void 0,this.pendingKeys_=void 0,this.target_=t,this.values_=e,this.name_=r,this.defaultAnnotation_=n,this.keysAtom_=new X("ObservableObject.keys"),this.isPlainObject_=b(this.target_)}var e=t.prototype;return e.getObservablePropValue_=function(t){return this.values_.get(t).get()},e.setObservablePropValue_=function(t,e){var r=this.values_.get(t);if(r instanceof Xt)return r.set(e),!0;if(tr(this)){var n=rr(this,{type:ur,object:this.proxy_||this.target_,name:t,newValue:e});if(!n)return null;e=n.newValue}if((e=r.prepareNewValue_(e))!==se.UNCHANGED){var i=nr(this),o=i?{type:ur,observableKind:"object",debugObjectName:this.name_,object:this.proxy_||this.target_,oldValue:r.value_,name:t,newValue:e}:null;r.setNewValue_(e),i&&or(this,o)}return!0},e.get_=function(t){return se.trackingDerivation&&!E(this.target_,t)&&this.has_(t),this.target_[t]},e.set_=function(t,e,r){return void 0===r&&(r=!1),E(this.target_,t)?this.values_.has(t)?this.setObservablePropValue_(t,e):r?Reflect.set(this.target_,t,e):(this.target_[t]=e,!0):this.extend_(t,{value:e,enumerable:!0,writable:!0,configurable:!0},this.defaultAnnotation_,r)},e.has_=function(t){if(!se.trackingDerivation)return t in this.target_;this.pendingKeys_||(this.pendingKeys_=new Map);var e=this.pendingKeys_.get(t);return e||(e=new Wt(t in this.target_,K,"ObservableObject.key?",!1),this.pendingKeys_.set(t,e)),e.get()},e.make_=function(t,e){if(!0===e&&(e=this.defaultAnnotation_),!1!==e){if(!(t in this.target_)){var r;if(null!=(r=this.target_[V])&&r[t])return;n(1,e.annotationType_,this.name_+"."+t.toString())}for(var i=this.target_;i&&i!==l;){var o=a(i,t);if(o){var s=e.make_(this,t,o,i);if(0===s)return;if(1===s)break}i=Object.getPrototypeOf(i)}Vr(this,0,t)}},e.extend_=function(t,e,r,n){if(void 0===n&&(n=!1),!0===r&&(r=this.defaultAnnotation_),!1===r)return this.defineProperty_(t,e,n);var i=r.extend_(this,t,e,n);return i&&Vr(this,0,t),i},e.defineProperty_=function(t,e,r){void 0===r&&(r=!1);try{he();var n=this.delete_(t);if(!n)return n;if(tr(this)){var i=rr(this,{object:this.proxy_||this.target_,name:t,type:Cr,newValue:e.value});if(!i)return null;var o=i.newValue;e.value!==o&&(e=R({},e,{value:o}))}if(r){if(!Reflect.defineProperty(this.target_,t,e))return!1}else c(this.target_,t,e);this.notifyPropertyAddition_(t,e.value)}finally{fe()}return!0},e.defineObservableProperty_=function(t,e,r,n){void 0===n&&(n=!1);try{he();var i=this.delete_(t);if(!i)return i;if(tr(this)){var o=rr(this,{object:this.proxy_||this.target_,name:t,type:Cr,newValue:e});if(!o)return null;e=o.newValue}var s=Ir(t),a={configurable:!se.safeDescriptors||this.isPlainObject_,enumerable:!0,get:s.get,set:s.set};if(n){if(!Reflect.defineProperty(this.target_,t,a))return!1}else c(this.target_,t,a);var l=new Wt(e,r,"ObservableObject.key",!1);this.values_.set(t,l),this.notifyPropertyAddition_(t,l.value_)}finally{fe()}return!0},e.defineComputedProperty_=function(t,e,r){void 0===r&&(r=!1);try{he();var n=this.delete_(t);if(!n)return n;if(tr(this)&&!rr(this,{object:this.proxy_||this.target_,name:t,type:Cr,newValue:void 0}))return null;e.name||(e.name="ObservableObject.key"),e.context=this.proxy_||this.target_;var i=Ir(t),o={configurable:!se.safeDescriptors||this.isPlainObject_,enumerable:!1,get:i.get,set:i.set};if(r){if(!Reflect.defineProperty(this.target_,t,o))return!1}else c(this.target_,t,o);this.values_.set(t,new Xt(e)),this.notifyPropertyAddition_(t,void 0)}finally{fe()}return!0},e.delete_=function(t,e){if(void 0===e&&(e=!1),!E(this.target_,t))return!0;if(tr(this)&&!rr(this,{object:this.proxy_||this.target_,name:t,type:Rr}))return null;try{var r,n;he();var i,o=nr(this),s=this.values_.get(t),c=void 0;if(!s&&o&&(c=null==(i=a(this.target_,t))?void 0:i.value),e){if(!Reflect.deleteProperty(this.target_,t))return!1}else delete this.target_[t];if(s&&(this.values_.delete(t),s instanceof Wt&&(c=s.value_),pe(s)),this.keysAtom_.reportChanged(),null==(r=this.pendingKeys_)||null==(n=r.get(t))||n.set(t in this.target_),o){var l={type:Rr,observableKind:"object",object:this.proxy_||this.target_,debugObjectName:this.name_,oldValue:c,name:t};o&&or(this,l)}}finally{fe()}return!0},e.observe_=function(t,e){return ir(this,t)},e.intercept_=function(t){return er(this,t)},e.notifyPropertyAddition_=function(t,e){var r,n,i=nr(this);if(i){var o=i?{type:Cr,observableKind:"object",debugObjectName:this.name_,object:this.proxy_||this.target_,name:t,newValue:e}:null;i&&or(this,o)}null==(r=this.pendingKeys_)||null==(n=r.get(t))||n.set(!0),this.keysAtom_.reportChanged()},e.ownKeys_=function(){return this.keysAtom_.reportObserved(),k(this.target_)},e.keys_=function(){return this.keysAtom_.reportObserved(),Object.keys(this.target_)},t}();function Fr(t,e){var r;if(E(t,z))return t;var n=null!=(r=null==e?void 0:e.name)?r:"ObservableObject",i=new Lr(t,new Map,String(n),function(t){var e;return t?null!=(e=t.defaultDecorator)?e:dt(t):void 0}(e));return w(t,z,i),t}var Br=C("ObservableObjectAdministration",Lr);function Ir(t){return Dr[t]||(Dr[t]={get:function(){return this[z].getObservablePropValue_(t)},set:function(e){return this[z].setObservablePropValue_(t,e)}})}function Nr(t){return!!m(t)&&Br(t[z])}function Vr(t,e,r){var n;null==(n=t.target_[V])||delete n[r]}var Wr,Ur,zr=Gr(0),Xr=0,Yr=function(){};Wr=Yr,Ur=Array.prototype,Object.setPrototypeOf?Object.setPrototypeOf(Wr.prototype,Ur):void 0!==Wr.prototype.__proto__?Wr.prototype.__proto__=Ur:Wr.prototype=Ur;var Hr=function(t,e,r){function n(e,r,n,i){var o;void 0===n&&(n="ObservableArray"),void 0===i&&(i=!1),o=t.call(this)||this;var s=new fr(n,r,i,!0);if(s.proxy_=B(o),S(B(o),z,s),e&&e.length){var a=It(!0);o.spliceWithArray(0,0,e),Nt(a)}return Object.defineProperty(B(o),"0",zr),o}L(n,t);var i=n.prototype;return i.concat=function(){this[z].atom_.reportObserved();for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return Array.prototype.concat.apply(this.slice(),e.map((function(t){return wr(t)?t.slice():t})))},i[r]=function(){var t=this,e=0;return on({next:function(){return e<t.length?{value:t[e++],done:!1}:{done:!0,value:void 0}}})},D(n,[{key:"length",get:function(){return this[z].getArrayLength_()},set:function(t){this[z].setArrayLength_(t)}},{key:e,get:function(){return"Array"}}]),n}(Yr,Symbol.toStringTag,Symbol.iterator);function Gr(t){return{enumerable:!1,configurable:!0,get:function(){return this[z].get_(t)},set:function(e){this[z].set_(t,e)}}}function qr(t){c(Hr.prototype,""+t,Gr(t))}function Kr(t){if(t>Xr){for(var e=Xr;e<t+100;e++)qr(e);Xr=t}}function $r(t,e,r){return new Hr(t,e,r)}function Jr(t,e){if("object"==typeof t&&null!==t){if(wr(t))return void 0!==e&&n(23),t[z].atom_;if(Pr(t))return t.atom_;if(Ar(t)){if(void 0===e)return t.keysAtom_;var r=t.data_.get(e)||t.hasMap_.get(e);return r||n(25,e,Qr(t)),r}if(Nr(t)){if(!e)return n(26);var i=t[z].values_.get(e);return i||n(27,e,Qr(t)),i}if(Y(t)||Yt(t)||be(t))return t}else if(_(t)&&be(t[z]))return t[z];n(28)}function Zr(t,e){return t||n(29),void 0!==e?Zr(Jr(t,e)):Y(t)||Yt(t)||be(t)||Ar(t)||Pr(t)?t:t[z]?t[z]:void n(24,t)}function Qr(t,e){var r;if(void 0!==e)r=Jr(t,e);else{if(Ee(t))return t.name;r=Nr(t)||Ar(t)||Pr(t)?Zr(t):Jr(t)}return r.name_}Object.entries(pr).forEach((function(t){var e=t[0],r=t[1];"concat"!==e&&w(Hr.prototype,e,r)})),Kr(1e3);var tn=l.toString;function en(t,e,r){return void 0===r&&(r=-1),rn(t,e,r)}function rn(t,e,r,n,i){if(t===e)return 0!==t||1/t==1/e;if(null==t||null==e)return!1;if(t!=t)return e!=e;var o=typeof t;if("function"!==o&&"object"!==o&&"object"!=typeof e)return!1;var s=tn.call(t);if(s!==tn.call(e))return!1;switch(s){case"[object RegExp]":case"[object String]":return""+t==""+e;case"[object Number]":return+t!=+t?+e!=+e:0==+t?1/+t==1/e:+t==+e;case"[object Date]":case"[object Boolean]":return+t==+e;case"[object Symbol]":return"undefined"!=typeof Symbol&&Symbol.valueOf.call(t)===Symbol.valueOf.call(e);case"[object Map]":case"[object Set]":r>=0&&r++}t=nn(t),e=nn(e);var a="[object Array]"===s;if(!a){if("object"!=typeof t||"object"!=typeof e)return!1;var c=t.constructor,l=e.constructor;if(c!==l&&!(_(c)&&c instanceof c&&_(l)&&l instanceof l)&&"constructor"in t&&"constructor"in e)return!1}if(0===r)return!1;r<0&&(r=-1),i=i||[];for(var u=(n=n||[]).length;u--;)if(n[u]===t)return i[u]===e;if(n.push(t),i.push(e),a){if((u=t.length)!==e.length)return!1;for(;u--;)if(!rn(t[u],e[u],r-1,n,i))return!1}else{var h,f=Object.keys(t);if(u=f.length,Object.keys(e).length!==u)return!1;for(;u--;)if(!E(e,h=f[u])||!rn(t[h],e[h],r-1,n,i))return!1}return n.pop(),i.pop(),!0}function nn(t){return wr(t)?t.slice():O(t)||Ar(t)||T(t)||Pr(t)?Array.from(t.entries()):t}function on(t){return t[Symbol.iterator]=sn,t}function sn(){return this}["Symbol","Map","Set"].forEach((function(t){void 0===o()[t]&&n("MobX requires global '"+t+"' to be available or polyfilled")})),"object"==typeof __MOBX_DEVTOOLS_GLOBAL_HOOK__&&__MOBX_DEVTOOLS_GLOBAL_HOOK__.injectMobx({spy:function(t){return console.warn("[mobx.spy] Is a no-op in production builds"),function(){}},extras:{getDebugName:Qr},$mobx:z})},4049:(t,e,r)=>{"use strict";var n=r(6257);function i(){}function o(){}o.resetWarningCache=i,t.exports=function(){function t(t,e,r,i,o,s){if(s!==n){var a=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw a.name="Invariant Violation",a}}function e(){return t}t.isRequired=t;var r={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:o,resetWarningCache:i};return r.PropTypes=r,r}},507:(t,e,r)=>{t.exports=r(4049)()},6257:t=>{"use strict";t.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},6082:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Alpha=void 0;var n=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},i=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),o=r(959),s=u(o),a=u(r(14)),c=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}(r(197)),l=u(r(4405));function u(t){return t&&t.__esModule?t:{default:t}}function h(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}var f=e.Alpha=function(t){function e(){var t,r,n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);for(var i=arguments.length,o=Array(i),s=0;s<i;s++)o[s]=arguments[s];return r=n=h(this,(t=e.__proto__||Object.getPrototypeOf(e)).call.apply(t,[this].concat(o))),n.handleChange=function(t){var e=c.calculateChange(t,n.props.hsl,n.props.direction,n.props.a,n.container);e&&"function"==typeof n.props.onChange&&n.props.onChange(e,t)},n.handleMouseDown=function(t){n.handleChange(t),window.addEventListener("mousemove",n.handleChange),window.addEventListener("mouseup",n.handleMouseUp)},n.handleMouseUp=function(){n.unbindEventListeners()},n.unbindEventListeners=function(){window.removeEventListener("mousemove",n.handleChange),window.removeEventListener("mouseup",n.handleMouseUp)},h(n,r)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),i(e,[{key:"componentWillUnmount",value:function(){this.unbindEventListeners()}},{key:"render",value:function(){var t=this,e=this.props.rgb,r=(0,a.default)({default:{alpha:{absolute:"0px 0px 0px 0px",borderRadius:this.props.radius},checkboard:{absolute:"0px 0px 0px 0px",overflow:"hidden",borderRadius:this.props.radius},gradient:{absolute:"0px 0px 0px 0px",background:"linear-gradient(to right, rgba("+e.r+","+e.g+","+e.b+", 0) 0%,\n           rgba("+e.r+","+e.g+","+e.b+", 1) 100%)",boxShadow:this.props.shadow,borderRadius:this.props.radius},container:{position:"relative",height:"100%",margin:"0 3px"},pointer:{position:"absolute",left:100*e.a+"%"},slider:{width:"4px",borderRadius:"1px",height:"8px",boxShadow:"0 0 2px rgba(0, 0, 0, .6)",background:"#fff",marginTop:"1px",transform:"translateX(-2px)"}},vertical:{gradient:{background:"linear-gradient(to bottom, rgba("+e.r+","+e.g+","+e.b+", 0) 0%,\n           rgba("+e.r+","+e.g+","+e.b+", 1) 100%)"},pointer:{left:0,top:100*e.a+"%"}},overwrite:n({},this.props.style)},{vertical:"vertical"===this.props.direction,overwrite:!0});return s.default.createElement("div",{style:r.alpha},s.default.createElement("div",{style:r.checkboard},s.default.createElement(l.default,{renderers:this.props.renderers})),s.default.createElement("div",{style:r.gradient}),s.default.createElement("div",{style:r.container,ref:function(e){return t.container=e},onMouseDown:this.handleMouseDown,onTouchMove:this.handleChange,onTouchStart:this.handleChange},s.default.createElement("div",{style:r.pointer},this.props.pointer?s.default.createElement(this.props.pointer,this.props):s.default.createElement("div",{style:r.slider}))))}}]),e}(o.PureComponent||o.Component);e.default=f},4405:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Checkboard=void 0;var n=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},i=r(959),o=c(i),s=c(r(14)),a=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}(r(4489));function c(t){return t&&t.__esModule?t:{default:t}}var l=e.Checkboard=function(t){var e=t.white,r=t.grey,c=t.size,l=t.renderers,u=t.borderRadius,h=t.boxShadow,f=t.children,d=(0,s.default)({default:{grid:{borderRadius:u,boxShadow:h,absolute:"0px 0px 0px 0px",background:"url("+a.get(e,r,c,l.canvas)+") center left"}}});return(0,i.isValidElement)(f)?o.default.cloneElement(f,n({},f.props,{style:n({},f.props.style,d.grid)})):o.default.createElement("div",{style:d.grid})};l.defaultProps={size:8,white:"transparent",grey:"rgba(0,0,0,.08)",renderers:{}},e.default=l},2898:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ColorWrap=void 0;var n=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},i=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),o=r(959),s=l(o),a=l(r(6292)),c=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}(r(7323));function l(t){return t&&t.__esModule?t:{default:t}}var u=e.ColorWrap=function(t){var e=function(e){function r(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r);var e=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(r.__proto__||Object.getPrototypeOf(r)).call(this));return e.handleChange=function(t,r){if(c.simpleCheckForValidColor(t)){var n=c.toState(t,t.h||e.state.oldHue);e.setState(n),e.props.onChangeComplete&&e.debounce(e.props.onChangeComplete,n,r),e.props.onChange&&e.props.onChange(n,r)}},e.handleSwatchHover=function(t,r){if(c.simpleCheckForValidColor(t)){var n=c.toState(t,t.h||e.state.oldHue);e.props.onSwatchHover&&e.props.onSwatchHover(n,r)}},e.state=n({},c.toState(t.color,0)),e.debounce=(0,a.default)((function(t,e,r){t(e,r)}),100),e}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(r,e),i(r,[{key:"render",value:function(){var e={};return this.props.onSwatchHover&&(e.onSwatchHover=this.handleSwatchHover),s.default.createElement(t,n({},this.props,this.state,{onChange:this.handleChange},e))}}],[{key:"getDerivedStateFromProps",value:function(t,e){return n({},c.toState(t.color,e.oldHue))}}]),r}(o.PureComponent||o.Component);return e.propTypes=n({},t.propTypes),e.defaultProps=n({},t.defaultProps,{color:{h:250,s:.5,l:.2,a:1}}),e};e.default=u},6690:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.EditableInput=void 0;var n=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),i=r(959),o=a(i),s=a(r(14));function a(t){return t&&t.__esModule?t:{default:t}}var c=[38,40],l=1,u=e.EditableInput=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return r.handleBlur=function(){r.state.blurValue&&r.setState({value:r.state.blurValue,blurValue:null})},r.handleChange=function(t){r.setUpdatedValue(t.target.value,t)},r.handleKeyDown=function(t){var e,n=function(t){return Number(String(t).replace(/%/g,""))}(t.target.value);if(!isNaN(n)&&(e=t.keyCode,c.indexOf(e)>-1)){var i=r.getArrowOffset(),o=38===t.keyCode?n+i:n-i;r.setUpdatedValue(o,t)}},r.handleDrag=function(t){if(r.props.dragLabel){var e=Math.round(r.props.value+t.movementX);e>=0&&e<=r.props.dragMax&&r.props.onChange&&r.props.onChange(r.getValueObjectWithLabel(e),t)}},r.handleMouseDown=function(t){r.props.dragLabel&&(t.preventDefault(),r.handleDrag(t),window.addEventListener("mousemove",r.handleDrag),window.addEventListener("mouseup",r.handleMouseUp))},r.handleMouseUp=function(){r.unbindEventListeners()},r.unbindEventListeners=function(){window.removeEventListener("mousemove",r.handleDrag),window.removeEventListener("mouseup",r.handleMouseUp)},r.state={value:String(t.value).toUpperCase(),blurValue:String(t.value).toUpperCase()},r.inputId="rc-editable-input-"+l++,r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),n(e,[{key:"componentDidUpdate",value:function(t,e){this.props.value===this.state.value||t.value===this.props.value&&e.value===this.state.value||(this.input===document.activeElement?this.setState({blurValue:String(this.props.value).toUpperCase()}):this.setState({value:String(this.props.value).toUpperCase(),blurValue:!this.state.blurValue&&String(this.props.value).toUpperCase()}))}},{key:"componentWillUnmount",value:function(){this.unbindEventListeners()}},{key:"getValueObjectWithLabel",value:function(t){return function(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}({},this.props.label,t)}},{key:"getArrowOffset",value:function(){return this.props.arrowOffset||1}},{key:"setUpdatedValue",value:function(t,e){var r=this.props.label?this.getValueObjectWithLabel(t):t;this.props.onChange&&this.props.onChange(r,e),this.setState({value:t})}},{key:"render",value:function(){var t=this,e=(0,s.default)({default:{wrap:{position:"relative"}},"user-override":{wrap:this.props.style&&this.props.style.wrap?this.props.style.wrap:{},input:this.props.style&&this.props.style.input?this.props.style.input:{},label:this.props.style&&this.props.style.label?this.props.style.label:{}},"dragLabel-true":{label:{cursor:"ew-resize"}}},{"user-override":!0},this.props);return o.default.createElement("div",{style:e.wrap},o.default.createElement("input",{id:this.inputId,style:e.input,ref:function(e){return t.input=e},value:this.state.value,onKeyDown:this.handleKeyDown,onChange:this.handleChange,onBlur:this.handleBlur,placeholder:this.props.placeholder,spellCheck:"false"}),this.props.label&&!this.props.hideLabel?o.default.createElement("label",{htmlFor:this.inputId,style:e.label,onMouseDown:this.handleMouseDown},this.props.label):null)}}]),e}(i.PureComponent||i.Component);e.default=u},9413:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Hue=void 0;var n=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),i=r(959),o=c(i),s=c(r(14)),a=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}(r(2134));function c(t){return t&&t.__esModule?t:{default:t}}function l(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}var u=e.Hue=function(t){function e(){var t,r,n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);for(var i=arguments.length,o=Array(i),s=0;s<i;s++)o[s]=arguments[s];return r=n=l(this,(t=e.__proto__||Object.getPrototypeOf(e)).call.apply(t,[this].concat(o))),n.handleChange=function(t){var e=a.calculateChange(t,n.props.direction,n.props.hsl,n.container);e&&"function"==typeof n.props.onChange&&n.props.onChange(e,t)},n.handleMouseDown=function(t){n.handleChange(t),window.addEventListener("mousemove",n.handleChange),window.addEventListener("mouseup",n.handleMouseUp)},n.handleMouseUp=function(){n.unbindEventListeners()},l(n,r)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),n(e,[{key:"componentWillUnmount",value:function(){this.unbindEventListeners()}},{key:"unbindEventListeners",value:function(){window.removeEventListener("mousemove",this.handleChange),window.removeEventListener("mouseup",this.handleMouseUp)}},{key:"render",value:function(){var t=this,e=this.props.direction,r=void 0===e?"horizontal":e,n=(0,s.default)({default:{hue:{absolute:"0px 0px 0px 0px",borderRadius:this.props.radius,boxShadow:this.props.shadow},container:{padding:"0 2px",position:"relative",height:"100%",borderRadius:this.props.radius},pointer:{position:"absolute",left:100*this.props.hsl.h/360+"%"},slider:{marginTop:"1px",width:"4px",borderRadius:"1px",height:"8px",boxShadow:"0 0 2px rgba(0, 0, 0, .6)",background:"#fff",transform:"translateX(-2px)"}},vertical:{pointer:{left:"0px",top:-100*this.props.hsl.h/360+100+"%"}}},{vertical:"vertical"===r});return o.default.createElement("div",{style:n.hue},o.default.createElement("div",{className:"hue-"+r,style:n.container,ref:function(e){return t.container=e},onMouseDown:this.handleMouseDown,onTouchMove:this.handleChange,onTouchStart:this.handleChange},o.default.createElement("style",null,"\n            .hue-horizontal {\n              background: linear-gradient(to right, #f00 0%, #ff0 17%, #0f0\n                33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);\n              background: -webkit-linear-gradient(to right, #f00 0%, #ff0\n                17%, #0f0 33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);\n            }\n\n            .hue-vertical {\n              background: linear-gradient(to top, #f00 0%, #ff0 17%, #0f0 33%,\n                #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);\n              background: -webkit-linear-gradient(to top, #f00 0%, #ff0 17%,\n                #0f0 33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);\n            }\n          "),o.default.createElement("div",{style:n.pointer},this.props.pointer?o.default.createElement(this.props.pointer,this.props):o.default.createElement("div",{style:n.slider}))))}}]),e}(i.PureComponent||i.Component);e.default=u},6901:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Raised=void 0;var n=a(r(959)),i=a(r(507)),o=a(r(14)),s=a(r(7929));function a(t){return t&&t.__esModule?t:{default:t}}var c=e.Raised=function(t){var e=t.zDepth,r=t.radius,i=t.background,a=t.children,c=t.styles,l=void 0===c?{}:c,u=(0,o.default)((0,s.default)({default:{wrap:{position:"relative",display:"inline-block"},content:{position:"relative"},bg:{absolute:"0px 0px 0px 0px",boxShadow:"0 "+e+"px "+4*e+"px rgba(0,0,0,.24)",borderRadius:r,background:i}},"zDepth-0":{bg:{boxShadow:"none"}},"zDepth-1":{bg:{boxShadow:"0 2px 10px rgba(0,0,0,.12), 0 2px 5px rgba(0,0,0,.16)"}},"zDepth-2":{bg:{boxShadow:"0 6px 20px rgba(0,0,0,.19), 0 8px 17px rgba(0,0,0,.2)"}},"zDepth-3":{bg:{boxShadow:"0 17px 50px rgba(0,0,0,.19), 0 12px 15px rgba(0,0,0,.24)"}},"zDepth-4":{bg:{boxShadow:"0 25px 55px rgba(0,0,0,.21), 0 16px 28px rgba(0,0,0,.22)"}},"zDepth-5":{bg:{boxShadow:"0 40px 77px rgba(0,0,0,.22), 0 27px 24px rgba(0,0,0,.2)"}},square:{bg:{borderRadius:"0"}},circle:{bg:{borderRadius:"50%"}}},l),{"zDepth-1":1===e});return n.default.createElement("div",{style:u.wrap},n.default.createElement("div",{style:u.bg}),n.default.createElement("div",{style:u.content},a))};c.propTypes={background:i.default.string,zDepth:i.default.oneOf([0,1,2,3,4,5]),radius:i.default.number,styles:i.default.object},c.defaultProps={background:"#fff",zDepth:1,radius:2,styles:{}},e.default=c},1311:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Saturation=void 0;var n=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),i=r(959),o=l(i),s=l(r(14)),a=l(r(8209)),c=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}(r(2914));function l(t){return t&&t.__esModule?t:{default:t}}var u=e.Saturation=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return r.handleChange=function(t){"function"==typeof r.props.onChange&&r.throttle(r.props.onChange,c.calculateChange(t,r.props.hsl,r.container),t)},r.handleMouseDown=function(t){r.handleChange(t);var e=r.getContainerRenderWindow();e.addEventListener("mousemove",r.handleChange),e.addEventListener("mouseup",r.handleMouseUp)},r.handleMouseUp=function(){r.unbindEventListeners()},r.throttle=(0,a.default)((function(t,e,r){t(e,r)}),50),r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),n(e,[{key:"componentWillUnmount",value:function(){this.throttle.cancel(),this.unbindEventListeners()}},{key:"getContainerRenderWindow",value:function(){for(var t=this.container,e=window;!e.document.contains(t)&&e.parent!==e;)e=e.parent;return e}},{key:"unbindEventListeners",value:function(){var t=this.getContainerRenderWindow();t.removeEventListener("mousemove",this.handleChange),t.removeEventListener("mouseup",this.handleMouseUp)}},{key:"render",value:function(){var t=this,e=this.props.style||{},r=e.color,n=e.white,i=e.black,a=e.pointer,c=e.circle,l=(0,s.default)({default:{color:{absolute:"0px 0px 0px 0px",background:"hsl("+this.props.hsl.h+",100%, 50%)",borderRadius:this.props.radius},white:{absolute:"0px 0px 0px 0px",borderRadius:this.props.radius},black:{absolute:"0px 0px 0px 0px",boxShadow:this.props.shadow,borderRadius:this.props.radius},pointer:{position:"absolute",top:-100*this.props.hsv.v+100+"%",left:100*this.props.hsv.s+"%",cursor:"default"},circle:{width:"4px",height:"4px",boxShadow:"0 0 0 1.5px #fff, inset 0 0 1px 1px rgba(0,0,0,.3),\n            0 0 1px 2px rgba(0,0,0,.4)",borderRadius:"50%",cursor:"hand",transform:"translate(-2px, -2px)"}},custom:{color:r,white:n,black:i,pointer:a,circle:c}},{custom:!!this.props.style});return o.default.createElement("div",{style:l.color,ref:function(e){return t.container=e},onMouseDown:this.handleMouseDown,onTouchMove:this.handleChange,onTouchStart:this.handleChange},o.default.createElement("style",null,"\n          .saturation-white {\n            background: -webkit-linear-gradient(to right, #fff, rgba(255,255,255,0));\n            background: linear-gradient(to right, #fff, rgba(255,255,255,0));\n          }\n          .saturation-black {\n            background: -webkit-linear-gradient(to top, #000, rgba(0,0,0,0));\n            background: linear-gradient(to top, #000, rgba(0,0,0,0));\n          }\n        "),o.default.createElement("div",{style:l.white,className:"saturation-white"},o.default.createElement("div",{style:l.black,className:"saturation-black"}),o.default.createElement("div",{style:l.pointer},this.props.pointer?o.default.createElement(this.props.pointer,this.props):o.default.createElement("div",{style:l.circle}))))}}]),e}(i.PureComponent||i.Component);e.default=u},1805:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Swatch=void 0;var n=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},i=c(r(959)),o=c(r(14)),s=r(6263),a=c(r(4405));function c(t){return t&&t.__esModule?t:{default:t}}var l=e.Swatch=function(t){var e=t.color,r=t.style,s=t.onClick,c=void 0===s?function(){}:s,l=t.onHover,u=t.title,h=void 0===u?e:u,f=t.children,d=t.focus,p=t.focusStyle,g=void 0===p?{}:p,v="transparent"===e,_=(0,o.default)({default:{swatch:n({background:e,height:"100%",width:"100%",cursor:"pointer",position:"relative",outline:"none"},r,d?g:{})}}),y={};return l&&(y.onMouseOver=function(t){return l(e,t)}),i.default.createElement("div",n({style:_.swatch,onClick:function(t){return c(e,t)},title:h,tabIndex:0,onKeyDown:function(t){return 13===t.keyCode&&c(e,t)}},y),f,v&&i.default.createElement(a.default,{borderRadius:_.swatch.borderRadius,boxShadow:"inset 0 0 0 1px rgba(0,0,0,0.1)"}))};e.default=(0,s.handleFocus)(l)},9448:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(6082);Object.defineProperty(e,"Alpha",{enumerable:!0,get:function(){return h(n).default}});var i=r(4405);Object.defineProperty(e,"Checkboard",{enumerable:!0,get:function(){return h(i).default}});var o=r(6690);Object.defineProperty(e,"EditableInput",{enumerable:!0,get:function(){return h(o).default}});var s=r(9413);Object.defineProperty(e,"Hue",{enumerable:!0,get:function(){return h(s).default}});var a=r(6901);Object.defineProperty(e,"Raised",{enumerable:!0,get:function(){return h(a).default}});var c=r(1311);Object.defineProperty(e,"Saturation",{enumerable:!0,get:function(){return h(c).default}});var l=r(2898);Object.defineProperty(e,"ColorWrap",{enumerable:!0,get:function(){return h(l).default}});var u=r(1805);function h(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"Swatch",{enumerable:!0,get:function(){return h(u).default}})},197:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.calculateChange=function(t,e,r,n,i){var o=i.clientWidth,s=i.clientHeight,a="number"==typeof t.pageX?t.pageX:t.touches[0].pageX,c="number"==typeof t.pageY?t.pageY:t.touches[0].pageY,l=a-(i.getBoundingClientRect().left+window.pageXOffset),u=c-(i.getBoundingClientRect().top+window.pageYOffset);if("vertical"===r){var h;if(h=u<0?0:u>s?1:Math.round(100*u/s)/100,e.a!==h)return{h:e.h,s:e.s,l:e.l,a:h,source:"rgb"}}else{var f;if(n!==(f=l<0?0:l>o?1:Math.round(100*l/o)/100))return{h:e.h,s:e.s,l:e.l,a:f,source:"rgb"}}return null}},4489:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r={},n=e.render=function(t,e,r,n){if("undefined"==typeof document&&!n)return null;var i=n?new n:document.createElement("canvas");i.width=2*r,i.height=2*r;var o=i.getContext("2d");return o?(o.fillStyle=t,o.fillRect(0,0,i.width,i.height),o.fillStyle=e,o.fillRect(0,0,r,r),o.translate(r,r),o.fillRect(0,0,r,r),i.toDataURL()):null};e.get=function(t,e,i,o){var s=t+"-"+e+"-"+i+(o?"-server":"");if(r[s])return r[s];var a=n(t,e,i,o);return r[s]=a,a}},7323:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.isvalidColorString=e.red=e.getContrastingColor=e.isValidHex=e.toState=e.simpleCheckForValidColor=void 0;var n=o(r(5828)),i=o(r(8948));function o(t){return t&&t.__esModule?t:{default:t}}e.simpleCheckForValidColor=function(t){var e=0,r=0;return(0,n.default)(["r","g","b","a","h","s","l","v"],(function(n){t[n]&&(e+=1,isNaN(t[n])||(r+=1),"s"===n||"l"===n)&&/^\d+%$/.test(t[n])&&(r+=1)})),e===r&&t};var s=e.toState=function(t,e){var r=t.hex?(0,i.default)(t.hex):(0,i.default)(t),n=r.toHsl(),o=r.toHsv(),s=r.toRgb(),a=r.toHex();return 0===n.s&&(n.h=e||0,o.h=e||0),{hsl:n,hex:"000000"===a&&0===s.a?"transparent":"#"+a,rgb:s,hsv:o,oldHue:t.h||e||n.h,source:t.source}};e.isValidHex=function(t){if("transparent"===t)return!0;var e="#"===String(t).charAt(0)?1:0;return t.length!==4+e&&t.length<7+e&&(0,i.default)(t).isValid()},e.getContrastingColor=function(t){if(!t)return"#fff";var e=s(t);return"transparent"===e.hex?"rgba(0,0,0,0.4)":(299*e.rgb.r+587*e.rgb.g+114*e.rgb.b)/1e3>=128?"#000":"#fff"},e.red={hsl:{a:1,h:0,l:.5,s:1},hex:"#ff0000",rgb:{r:255,g:0,b:0,a:1},hsv:{h:0,s:1,v:1,a:1}},e.isvalidColorString=function(t,e){var r=t.replace("","");return(0,i.default)(e+" ("+r+")")._ok}},2134:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.calculateChange=function(t,e,r,n){var i=n.clientWidth,o=n.clientHeight,s="number"==typeof t.pageX?t.pageX:t.touches[0].pageX,a="number"==typeof t.pageY?t.pageY:t.touches[0].pageY,c=s-(n.getBoundingClientRect().left+window.pageXOffset),l=a-(n.getBoundingClientRect().top+window.pageYOffset);if("vertical"===e){var u=void 0;if(u=l<0?359:l>o?0:360*(-100*l/o+100)/100,r.h!==u)return{h:u,s:r.s,l:r.l,a:r.a,source:"hsl"}}else{var h=void 0;if(h=c<0?0:c>i?359:100*c/i*360/100,r.h!==h)return{h,s:r.s,l:r.l,a:r.a,source:"hsl"}}return null}},6263:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.handleFocus=void 0;var n,i=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},o=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),s=(n=r(959))&&n.__esModule?n:{default:n};function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}e.handleFocus=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"span";return function(r){function n(){var t,e,r;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n);for(var i=arguments.length,o=Array(i),s=0;s<i;s++)o[s]=arguments[s];return e=r=a(this,(t=n.__proto__||Object.getPrototypeOf(n)).call.apply(t,[this].concat(o))),r.state={focus:!1},r.handleFocus=function(){return r.setState({focus:!0})},r.handleBlur=function(){return r.setState({focus:!1})},a(r,e)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(n,r),o(n,[{key:"render",value:function(){return s.default.createElement(e,{onFocus:this.handleFocus,onBlur:this.handleBlur},s.default.createElement(t,i({},this.props,this.state)))}}]),n}(s.default.Component)}},2914:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.calculateChange=function(t,e,r){var n=r.getBoundingClientRect(),i=n.width,o=n.height,s="number"==typeof t.pageX?t.pageX:t.touches[0].pageX,a="number"==typeof t.pageY?t.pageY:t.touches[0].pageY,c=s-(r.getBoundingClientRect().left+window.pageXOffset),l=a-(r.getBoundingClientRect().top+window.pageYOffset);c<0?c=0:c>i&&(c=i),l<0?l=0:l>o&&(l=o);var u=c/i,h=1-l/o;return{h:e.h,s:u,v:h,a:e.a,source:"hsv"}}},4222:(t,e,r)=>{"use strict";var n=r(770),i=r(8348),o=r(4665),s=r(9732),a=r(8236),c=r(6642),l=r(3427),u=r(959),h=r(2323),f=r(7754),d=r(5853),p=r(8848),g=r(1330),v=r(1970),_=r(5614),y=r(2646),m=r(6313),b=r(9448),x=r(7323),w=r(6584);function S(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var C=S(n),O=S(i),T=S(o),j=S(s),k=S(a),A=S(c),E=S(l),M=S(u),P=S(h),D=S(f),R=S(d),L=S(p),F=S(g),B=S(v),I=S(_),N=S(y),V=S(m),W=S(x),U=S(w);var z=function(t){j.default(i,t);var e,r,n=(e=i,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,n=A.default(e);if(r){var i=A.default(this).constructor;t=Reflect.construct(n,arguments,i)}else t=n.apply(this,arguments);return k.default(this,t)});function i(){var t;return C.default(this,i),t=n.call(this),E.default(T.default(t),"handleChange",(function(e){var r=e.target.value;t.props.liveUpdate&&t.update(r)})),E.default(T.default(t),"handleFocus",(function(){document.addEventListener("keydown",t.handleKeyDown)})),E.default(T.default(t),"handleBlur",(function(){document.removeEventListener("keydown",t.handleKeyDown),window.getSelection().removeAllRanges(),t.props.liveUpdate||t.update()})),E.default(T.default(t),"handleKeyDown",(function(e){var r=e.keyCode||e.which,n=t.props.liveUpdate;13!==r||n||t.update()})),t.state={value:null},t}return O.default(i,[{key:"update",value:function(t){var e=this.props,r=e._onUpdateValue,n=e.onUpdate;r(e.path,t),n(t)}},{key:"render",value:function(){var t=this.props,e=t.path,r=t.label,n=t.labelWidth,i=t.className,o=t.style,s=F.default(r)?r:e;return M.default.createElement("li",{className:D.default("cr","string",i),style:o},M.default.createElement("label",null,M.default.createElement("span",{className:"label-text",style:{width:n}},s),M.default.createElement("input",{style:{width:"calc(100% - ".concat(n,")")},type:"text",value:this.state.value,onChange:this.handleChange,onFocus:this.handleFocus,onBlur:this.handleBlur})))}}],[{key:"getDerivedStateFromProps",value:function(t,e){var r=B.default(t.data,t.path);return e.value===r?null:{value:r}}}]),i}(u.Component);function X(t){var e=parseFloat(t);return isNaN(e)?0:e}E.default(z,"defaultProps",{className:null,style:null,path:null,label:null,onUpdate:function(){return null}});var Y=Number.isInteger||function(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t};function H(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}var G=function(t){j.default(i,t);var e,r,n=(e=i,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,n=A.default(e);if(r){var i=A.default(this).constructor;t=Reflect.construct(n,arguments,i)}else t=n.apply(this,arguments);return k.default(this,t)});function i(){var t;return C.default(this,i),t=n.call(this),E.default(T.default(t),"handleMouseDown",(function(e){t.update(e.pageX),window.addEventListener("mousemove",t.handleMouseMove),window.addEventListener("mouseup",t.handleMouseUp)})),E.default(T.default(t),"handleMouseMove",(function(e){t.update(e.pageX),e.preventDefault()})),E.default(T.default(t),"handleMouseUp",(function(e){t.update(e.pageX,!1),window.removeEventListener("mousemove",t.handleMouseMove),window.removeEventListener("mouseup",t.handleMouseUp)})),E.default(T.default(t),"handleClick",(function(t){t.preventDefault()})),t.state={value:null},t.sliderRef=M.default.createRef(),t}return O.default(i,[{key:"update",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=this.props,n=r.min,i=r.max,o=r.onUpdate,s=this.sliderRef.current.getBoundingClientRect(),a=t-s.left,c=s.right-s.left,l=n+N.default(a/c,0,1)*(i-n);this.setState({value:l},(function(){o(l,e)}))}},{key:"render",value:function(){var t=this.props,e=t.min,r=t.max,n=t.width,i=t.className,o=t.style,s=this.state.value,a=N.default(100*(s-e)/(r-e),0,100),c=function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?H(Object(r),!0).forEach((function(e){E.default(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):H(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}({width:"".concat(n,"%"),backgroundSize:"".concat(a,"% 100%")},o);return M.default.createElement("span",{ref:this.sliderRef,className:D.default("slider",i),style:c,onClick:this.handleClick,onMouseDown:this.handleMouseDown,role:"slider",tabIndex:0,"aria-valuenow":s,"aria-valuemin":e,"aria-valuemax":r})}}],[{key:"getDerivedStateFromProps",value:function(t,e){var r=X(t.value);return e.value===r?null:{value:r}}}]),i}(u.Component);E.default(G,"defaultProps",{className:null,style:null,value:null,min:null,max:null,width:null});var q=function(t){var e=t.value,r=t.min,n=t.max,i=t.step,o=[I.default(r),I.default(n),I.default(i)],s=o[0],a=o[1],c=o[2],l=c&&!Y(i)?i.toString().split(".")[1].length:0,u=!1,h=!1;return e=X(e),s&&e<=r&&(e=r,u=!0),a&&e>=n&&(e=n,h=!0),u||h||c&&0!==i&&(e=Math.round(e/i)*i),e.toFixed(l)},K=function(t){j.default(i,t);var e,r,n=(e=i,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,n=A.default(e);if(r){var i=A.default(this).constructor;t=Reflect.construct(n,arguments,i)}else t=n.apply(this,arguments);return k.default(this,t)});function i(){var t;return C.default(this,i),t=n.call(this),E.default(T.default(t),"handleChange",(function(e){var r=e.target.value;t.update(r)})),E.default(T.default(t),"handleSliderUpdate",(function(e){var r=t.props,n=r.min,i=r.max,o=r.step;t.update(q({value:e,min:n,max:i,step:o}))})),E.default(T.default(t),"update",(function(e){var r=t.props;(0,r._onUpdateValue)(r.path,X(e))})),t.state={value:null},t}return O.default(i,[{key:"renderSlider",value:function(t){var e=this.props,r=e.min,n=e.max,i=this.state.value;return M.default.createElement(G,{value:i,min:r,max:n,width:t,onUpdate:this.handleSliderUpdate})}},{key:"render",value:function(){var t=this.props,e=t.min,r=t.max,n=t.path,i=t.label,o=t.labelWidth,s=t.step,a=t.disableSlider,c=t.className,l=t.style,u=F.default(i)?i:n,h=I.default(e)&&I.default(r),f=h&&!0!==a?Math.round(100/3):100,d=100-f;return M.default.createElement("li",{className:D.default("cr","number",c),style:l},M.default.createElement("label",null,M.default.createElement("span",{className:"label-text",style:{width:o}},u),M.default.createElement("span",{style:{display:"inherit",width:"calc(100% - ".concat(o,")")}},h&&!0!==a?this.renderSlider(d):null,M.default.createElement("input",{type:"number",step:s,min:e,max:r,inputMode:"numeric",value:this.state.value,style:{width:"".concat(f,"%")},onChange:this.handleChange}))))}}],[{key:"getDerivedStateFromProps",value:function(t){var e=t.min,r=t.max,n=t.step;return{value:q({value:B.default(t.data,t.path),min:e,max:r,step:n})}}}]),i}(u.Component);E.default(K,"defaultProps",{className:null,style:null,min:null,max:null,step:null,path:null,label:null,disableSlider:null});var $=function(t){j.default(i,t);var e,r,n=(e=i,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,n=A.default(e);if(r){var i=A.default(this).constructor;t=Reflect.construct(n,arguments,i)}else t=n.apply(this,arguments);return k.default(this,t)});function i(t){var e;return C.default(this,i),e=n.call(this,t),E.default(T.default(e),"handleChange",(function(t){var r=t.target.checked,n=e.props;(0,n._onUpdateValue)(n.path,r)})),e.state={value:null},e}return O.default(i,[{key:"render",value:function(){var t=this.props,e=t.path,r=t.label,n=t.labelWidth,i=t.className,o=t.style,s=F.default(r)?r:e;return M.default.createElement("li",{className:D.default("cr","boolean",i),style:o},M.default.createElement("label",null,M.default.createElement("span",{className:"label-text",style:{width:n}},s),M.default.createElement("span",{className:"checkbox-container",style:{width:"calc(100% - ".concat(n,")")}},M.default.createElement("input",{type:"checkbox",checked:this.state.value,onChange:this.handleChange}))))}}],[{key:"getDerivedStateFromProps",value:function(t,e){var r=B.default(t.data,t.path);return e.value===r?null:{value:r}}}]),i}(u.Component);E.default($,"defaultProps",{className:null,style:null,path:null,label:null});function J(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}var Z=function(t){j.default(i,t);var e,r,n=(e=i,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,n=A.default(e);if(r){var i=A.default(this).constructor;t=Reflect.construct(n,arguments,i)}else t=n.apply(this,arguments);return k.default(this,t)});function i(t){var e;return C.default(this,i),e=n.call(this,t),E.default(T.default(e),"handleClick",(function(){return e.setState((function(t){return{closed:!t.closed}}))})),e.state={closed:t.closed},e}return O.default(i,[{key:"renderChildren",value:function(){var t=this.props,e=t.children;t.title;var r=V.default(t,["children","title"]);return M.default.Children.map(e,(function(t){return u.cloneElement(t,function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?J(Object(r),!0).forEach((function(e){E.default(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):J(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}({},r))}))}},{key:"render",value:function(){var t=this.state.closed,e=this.props,r=e.title,n=e.className,i=e.style;return M.default.createElement("li",{className:D.default("folder",{closed:t},n),style:i},M.default.createElement("div",{className:"dg"},M.default.createElement("div",{className:"title",onClick:this.handleClick,onKeyPress:this.handleClick,role:"button",tabIndex:0},r),M.default.createElement("ul",null,this.renderChildren())))}}]),i}(u.Component);E.default(Z,"defaultProps",{className:null,style:null,title:"Folder",closed:!0});var Q=function(t){j.default(i,t);var e,r,n=(e=i,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,n=A.default(e);if(r){var i=A.default(this).constructor;t=Reflect.construct(n,arguments,i)}else t=n.apply(this,arguments);return k.default(this,t)});function i(){var t;return C.default(this,i),t=n.call(this),E.default(T.default(t),"handleChange",(function(e){var r=e.target.value,n=t.props,i=n.liveUpdate,o=n._onUpdateValue,s=n.onUpdate;o(n.path,r),i&&s(r)})),t.state={value:null,options:null},t}return O.default(i,[{key:"render",value:function(){var t=this.props,e=t.path,r=t.label,n=t.labelWidth,i=t.optionLabels,o=t.className,s=t.style,a=this.state,c=a.value,l=a.options,u=F.default(r)?r:e;return M.default.createElement("li",{className:D.default("cr","select",o),style:s},M.default.createElement("label",null,M.default.createElement("span",{className:"label-text",style:{width:n}},u),M.default.createElement("select",{value:c,onChange:this.handleChange,style:{width:"calc(100% - ".concat(n,")")}},l.map((function(t,e){return M.default.createElement("option",{key:e,value:t},i?i[e]:t)})))))}}],[{key:"getDerivedStateFromProps",value:function(t){return{value:B.default(t.data,t.path),options:t.options}}}]),i}(u.Component);E.default(Q,"defaultProps",{className:null,style:null,path:null,label:null,optionLabels:null,onUpdate:function(){return null}});var tt=function(t){j.default(i,t);var e,r,n=(e=i,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,n=A.default(e);if(r){var i=A.default(this).constructor;t=Reflect.construct(n,arguments,i)}else t=n.apply(this,arguments);return k.default(this,t)});function i(){var t;C.default(this,i);for(var e=arguments.length,r=new Array(e),o=0;o<e;o++)r[o]=arguments[o];return t=n.call.apply(n,[this].concat(r)),E.default(T.default(t),"handleChange",(function(e,r){var n=t.props.onChange;W.default.isValidHex(e)&&n({hex:e,source:"hex"},r)})),t}return O.default(i,[{key:"render",value:function(){var t=this.props.hex;return M.default.createElement("div",{className:"flexbox-fix fields-wrap"},M.default.createElement("div",{className:"flexbox-fix fields"},M.default.createElement("div",{className:"field"},M.default.createElement(b.EditableInput,{value:t,onChange:this.handleChange}))))}}]),i}(u.Component),et=function(){return M.default.createElement("div",{className:"pointer"})},rt=function(){return M.default.createElement("div",{className:"pointer-circle"})},nt=function(t){var e=t.onChange,r=t.hsl,n=t.hsv,i=t.hex,o=t.className,s=void 0===o?"":o;return M.default.createElement("div",{className:"picker ".concat(s)},M.default.createElement("div",{className:"saturation-wrap"},M.default.createElement(b.Saturation,{className:"saturation",hsl:r,hsv:n,pointer:rt,onChange:e})),M.default.createElement("div",{className:"body"},M.default.createElement("div",{className:"controls"},M.default.createElement("div",{className:"toggles"},M.default.createElement("div",{className:"hue-wrap"},M.default.createElement(b.Hue,{className:"hue",hsl:r,pointer:et,onChange:e})))),M.default.createElement(tt,{hex:i,onChange:e})))};nt.defaultProps={hsl:null,hsv:null,hex:null,className:null,disableAlpha:!1};var it=b.ColorWrap(nt);function ot(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function st(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?ot(Object(r),!0).forEach((function(e){E.default(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ot(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var at=function(t){j.default(i,t);var e,r,n=(e=i,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,n=A.default(e);if(r){var i=A.default(this).constructor;t=Reflect.construct(n,arguments,i)}else t=n.apply(this,arguments);return k.default(this,t)});function i(){var t;return C.default(this,i),t=n.call(this),E.default(T.default(t),"handleClickColorPicker",(function(){return t.setState((function(t){return st(st({},t),{},{displayColorPicker:!t.displayColorPicker})}))})),E.default(T.default(t),"handleCloseColorPicker",(function(){return t.setState({displayColorPicker:!1})})),E.default(T.default(t),"handleChangeColor",(function(e){var r=F.default(e)?e:e.hex,n=t.props;(0,n._onUpdateValue)(n.path,r)})),t.state={value:null,displayColorPicker:!1},t}return O.default(i,[{key:"renderPicker",value:function(){var t=this.state,e=t.value;return t.displayColorPicker?M.default.createElement("div",{className:"popover"},M.default.createElement("div",{className:"cover",onClick:this.handleCloseColorPicker,onKeyPress:this.handleCloseColorPicker,role:"button",tabIndex:0}),M.default.createElement(it,{color:e,onChange:this.handleChangeColor})):null}},{key:"render",value:function(){var t=this.props,e=t.path,r=t.label,n=t.labelWidth,i=t.className,o=t.style,s=this.state.value,a=F.default(r)?r:e;return M.default.createElement("li",{className:D.default("cr","color",i),style:st({borderLeftColor:"".concat(s)},o)},M.default.createElement("label",null,M.default.createElement("span",{className:"label-text",style:{width:n}},a),M.default.createElement("div",{style:{backgroundColor:s,width:"calc(100% - ".concat(n,")")}},M.default.createElement("div",{className:"swatch",onClick:this.handleClickColorPicker,onKeyPress:this.handleClickColorPicker,role:"button",tabIndex:0},s),this.renderPicker())))}}],[{key:"getDerivedStateFromProps",value:function(t,e){var r=B.default(t.data,t.path);return st(st({},e),{},{value:r})}}]),i}(u.Component);E.default(at,"defaultProps",{className:null,style:null,path:null,label:null});var ct="Default",lt=function(t){j.default(i,t);var e,r,n=(e=i,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,n=A.default(e);if(r){var i=A.default(this).constructor;t=Reflect.construct(n,arguments,i)}else t=n.apply(this,arguments);return k.default(this,t)});function i(){var t;return C.default(this,i),t=n.call(this),E.default(T.default(t),"handleChange",(function(e){var r=JSON.parse(e.target.value),n=t.props,i=n.liveUpdate,o=n.onUpdate;i&&o(r)})),t.state={defaultPreset:null,options:null},t}return O.default(i,[{key:"render",value:function(){var t=this.props,e=t.path,r=t.label,n=t.labelWidth,i=t.className,o=t.style,s=this.state.options,a=F.default(r)?r:e;return M.default.createElement("li",{className:D.default("cr","presets",i),style:o},M.default.createElement("label",null,M.default.createElement("span",{className:"label-text",style:{width:n}},a),M.default.createElement("select",{onChange:this.handleChange,style:{width:"calc(100% - ".concat(n,")")}},s.map((function(t){return Object.keys(t).map((function(e){return M.default.createElement("option",{key:e,value:JSON.stringify(t[e])},e)}))})))))}}],[{key:"getDerivedStateFromProps",value:function(t,e){var r=P.default(t.data),n=e.defaultPreset?e.defaultPreset:r;return{defaultPreset:n,options:[E.default({},ct,n)].concat(U.default(t.options.filter((function(t){return Object.keys(t)[0]!==ct}))))}}}]),i}(u.Component);E.default(lt,"defaultProps",{className:null,style:null,path:null});var ut=function(t){j.default(i,t);var e,r,n=(e=i,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,n=A.default(e);if(r){var i=A.default(this).constructor;t=Reflect.construct(n,arguments,i)}else t=n.apply(this,arguments);return k.default(this,t)});function i(){var t;C.default(this,i);for(var e=arguments.length,r=new Array(e),o=0;o<e;o++)r[o]=arguments[o];return t=n.call.apply(n,[this].concat(r)),E.default(T.default(t),"handleUpdateValue",(function(e,r){var n=t.props,i=n.data;(0,n.onUpdate)(L.default(P.default(i),e,r))})),t}return O.default(i,[{key:"renderChildren",value:function(){var t=this,e=this.props,r=e.children,n=e.data;return M.default.Children.toArray(r).map((function(e,r){var i=R.default(e.props.liveUpdate)?t.props.liveUpdate:e.props.liveUpdate,o=R.default(e.props.labelWidth)?t.props.labelWidth:e.props.labelWidth;return u.cloneElement(e,{key:r,data:n,liveUpdate:i,labelWidth:o,_onUpdateValue:t.handleUpdateValue})}))}},{key:"render",value:function(){var t=this.props,e=t.style,r=t.className,n=D.default("react-dat-gui",r);return M.default.createElement("div",{className:n,style:e},M.default.createElement("ul",{className:"dg main"},this.renderChildren()))}}]),i}(u.Component);E.default(ut,"defaultProps",{liveUpdate:!0,className:null,style:null,labelWidth:"40%"}),e.zI=Z,e.OM=z,e.ZP=ut},8706:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.autoprefix=void 0;var n,i=(n=r(4287))&&n.__esModule?n:{default:n},o=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},s={borderRadius:function(t){return{msBorderRadius:t,MozBorderRadius:t,OBorderRadius:t,WebkitBorderRadius:t,borderRadius:t}},boxShadow:function(t){return{msBoxShadow:t,MozBoxShadow:t,OBoxShadow:t,WebkitBoxShadow:t,boxShadow:t}},userSelect:function(t){return{WebkitTouchCallout:t,KhtmlUserSelect:t,MozUserSelect:t,msUserSelect:t,WebkitUserSelect:t,userSelect:t}},flex:function(t){return{WebkitBoxFlex:t,MozBoxFlex:t,WebkitFlex:t,msFlex:t,flex:t}},flexBasis:function(t){return{WebkitFlexBasis:t,flexBasis:t}},justifyContent:function(t){return{WebkitJustifyContent:t,justifyContent:t}},transition:function(t){return{msTransition:t,MozTransition:t,OTransition:t,WebkitTransition:t,transition:t}},transform:function(t){return{msTransform:t,MozTransform:t,OTransform:t,WebkitTransform:t,transform:t}},absolute:function(t){var e=t&&t.split(" ");return{position:"absolute",top:e&&e[0],right:e&&e[1],bottom:e&&e[2],left:e&&e[3]}},extend:function(t,e){return e[t]||{extend:t}}},a=e.autoprefix=function(t){var e={};return(0,i.default)(t,(function(t,r){var n={};(0,i.default)(t,(function(t,e){var r=s[e];r?n=o({},n,r(t)):n[e]=t})),e[r]=n})),e};e.default=a},8615:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.active=void 0;var n,i=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},o=(n=r(959))&&n.__esModule?n:{default:n};function s(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}var a=e.active=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"span";return function(r){function n(){var r,a,c;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n);for(var l=arguments.length,u=Array(l),h=0;h<l;h++)u[h]=arguments[h];return a=c=s(this,(r=n.__proto__||Object.getPrototypeOf(n)).call.apply(r,[this].concat(u))),c.state={active:!1},c.handleMouseDown=function(){return c.setState({active:!0})},c.handleMouseUp=function(){return c.setState({active:!1})},c.render=function(){return o.default.createElement(e,{onMouseDown:c.handleMouseDown,onMouseUp:c.handleMouseUp},o.default.createElement(t,i({},c.props,c.state)))},s(c,a)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(n,r),n}(o.default.Component)};e.default=a},6626:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.hover=void 0;var n,i=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},o=(n=r(959))&&n.__esModule?n:{default:n};function s(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}var a=e.hover=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"span";return function(r){function n(){var r,a,c;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n);for(var l=arguments.length,u=Array(l),h=0;h<l;h++)u[h]=arguments[h];return a=c=s(this,(r=n.__proto__||Object.getPrototypeOf(n)).call.apply(r,[this].concat(u))),c.state={hover:!1},c.handleMouseOver=function(){return c.setState({hover:!0})},c.handleMouseOut=function(){return c.setState({hover:!1})},c.render=function(){return o.default.createElement(e,{onMouseOver:c.handleMouseOver,onMouseOut:c.handleMouseOut},o.default.createElement(t,i({},c.props,c.state)))},s(c,a)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(n,r),n}(o.default.Component)};e.default=a},7642:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.flattenNames=void 0;var n=a(r(6549)),i=a(r(4287)),o=a(r(9143)),s=a(r(5512));function a(t){return t&&t.__esModule?t:{default:t}}var c=e.flattenNames=function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],r=[];return(0,s.default)(e,(function(e){Array.isArray(e)?t(e).map((function(t){return r.push(t)})):(0,o.default)(e)?(0,i.default)(e,(function(t,e){!0===t&&r.push(e),r.push(e+"-"+t)})):(0,n.default)(e)&&r.push(e)})),r};e.default=c},14:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ReactCSS=e.loop=e.handleActive=e.handleHover=e.hover=void 0;var n=l(r(7642)),i=l(r(1339)),o=l(r(8706)),s=l(r(6626)),a=l(r(8615)),c=l(r(5742));function l(t){return t&&t.__esModule?t:{default:t}}e.hover=s.default,e.handleHover=s.default,e.handleActive=a.default,e.loop=c.default;var u=e.ReactCSS=function(t){for(var e=arguments.length,r=Array(e>1?e-1:0),s=1;s<e;s++)r[s-1]=arguments[s];var a=(0,n.default)(r),c=(0,i.default)(t,a);return(0,o.default)(c)};e.default=u},5742:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){var r={},n=function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];r[t]=e};return 0===t&&n("first-child"),t===e-1&&n("last-child"),(0===t||t%2==0)&&n("even"),1===Math.abs(t%2)&&n("odd"),n("nth-child",t),r}},1339:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.mergeClasses=void 0;var n=s(r(4287)),i=s(r(2222)),o=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t};function s(t){return t&&t.__esModule?t:{default:t}}var a=e.mergeClasses=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=t.default&&(0,i.default)(t.default)||{};return e.map((function(e){var i=t[e];return i&&(0,n.default)(i,(function(t,e){r[e]||(r[e]={}),r[e]=o({},r[e],i[e])})),e})),r};e.default=a},2415:(t,e,r)=>{"use strict";var n=r(959),i="function"==typeof Object.is?Object.is:function(t,e){return t===e&&(0!==t||1/t==1/e)||t!=t&&e!=e},o=n.useState,s=n.useEffect,a=n.useLayoutEffect,c=n.useDebugValue;function l(t){var e=t.getSnapshot;t=t.value;try{var r=e();return!i(t,r)}catch(t){return!0}}var u="undefined"==typeof window||void 0===window.document||void 0===window.document.createElement?function(t,e){return e()}:function(t,e){var r=e(),n=o({inst:{value:r,getSnapshot:e}}),i=n[0].inst,u=n[1];return a((function(){i.value=r,i.getSnapshot=e,l(i)&&u({inst:i})}),[t,r,e]),s((function(){return l(i)&&u({inst:i}),t((function(){l(i)&&u({inst:i})}))}),[t]),c(r),r};e.useSyncExternalStore=void 0!==n.useSyncExternalStore?n.useSyncExternalStore:u},4322:(t,e,r)=>{"use strict";t.exports=r(2415)},6933:t=>{t.exports=function(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n},t.exports.__esModule=!0,t.exports.default=t.exports},3438:(t,e,r)=>{var n=r(6933);t.exports=function(t){if(Array.isArray(t))return n(t)},t.exports.__esModule=!0,t.exports.default=t.exports},4665:t=>{t.exports=function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t},t.exports.__esModule=!0,t.exports.default=t.exports},770:t=>{t.exports=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},t.exports.__esModule=!0,t.exports.default=t.exports},8348:(t,e,r)=>{var n=r(8416);function i(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,n(i.key),i)}}t.exports=function(t,e,r){return e&&i(t.prototype,e),r&&i(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t},t.exports.__esModule=!0,t.exports.default=t.exports},3427:(t,e,r)=>{var n=r(8416);t.exports=function(t,e,r){return(e=n(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t},t.exports.__esModule=!0,t.exports.default=t.exports},6642:t=>{function e(r){return t.exports=e=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},t.exports.__esModule=!0,t.exports.default=t.exports,e(r)}t.exports=e,t.exports.__esModule=!0,t.exports.default=t.exports},9732:(t,e,r)=>{var n=r(1258);t.exports=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&n(t,e)},t.exports.__esModule=!0,t.exports.default=t.exports},3484:t=>{t.exports=function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)},t.exports.__esModule=!0,t.exports.default=t.exports},2285:t=>{t.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},t.exports.__esModule=!0,t.exports.default=t.exports},6313:(t,e,r)=>{var n=r(6564);t.exports=function(t,e){if(null==t)return{};var r,i,o=n(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],e.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(t,r)&&(o[r]=t[r])}return o},t.exports.__esModule=!0,t.exports.default=t.exports},6564:t=>{t.exports=function(t,e){if(null==t)return{};var r,n,i={},o=Object.keys(t);for(n=0;n<o.length;n++)r=o[n],e.indexOf(r)>=0||(i[r]=t[r]);return i},t.exports.__esModule=!0,t.exports.default=t.exports},8236:(t,e,r)=>{var n=r(3884).default,i=r(4665);t.exports=function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return i(t)},t.exports.__esModule=!0,t.exports.default=t.exports},1258:t=>{function e(r,n){return t.exports=e=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},t.exports.__esModule=!0,t.exports.default=t.exports,e(r,n)}t.exports=e,t.exports.__esModule=!0,t.exports.default=t.exports},6584:(t,e,r)=>{var n=r(3438),i=r(3484),o=r(7862),s=r(2285);t.exports=function(t){return n(t)||i(t)||o(t)||s()},t.exports.__esModule=!0,t.exports.default=t.exports},4761:(t,e,r)=>{var n=r(3884).default;t.exports=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)},t.exports.__esModule=!0,t.exports.default=t.exports},8416:(t,e,r)=>{var n=r(3884).default,i=r(4761);t.exports=function(t){var e=i(t,"string");return"symbol"===n(e)?e:String(e)},t.exports.__esModule=!0,t.exports.default=t.exports},3884:t=>{function e(r){return t.exports=e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t.exports.__esModule=!0,t.exports.default=t.exports,e(r)}t.exports=e,t.exports.__esModule=!0,t.exports.default=t.exports},7862:(t,e,r)=>{var n=r(6933);t.exports=function(t,e){if(t){if("string"==typeof t)return n(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?n(t,e):void 0}},t.exports.__esModule=!0,t.exports.default=t.exports},8948:function(t){t.exports=function(){"use strict";function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t(e)}var e=/^\s+/,r=/\s+$/;function n(i,o){if(o=o||{},(i=i||"")instanceof n)return i;if(!(this instanceof n))return new n(i,o);var s=function(n){var i={r:0,g:0,b:0},o=1,s=null,a=null,c=null,l=!1,u=!1;return"string"==typeof n&&(n=function(t){t=t.replace(e,"").replace(r,"").toLowerCase();var n,i=!1;if(b[t])t=b[t],i=!0;else if("transparent"==t)return{r:0,g:0,b:0,a:0,format:"name"};return(n=D.rgb.exec(t))?{r:n[1],g:n[2],b:n[3]}:(n=D.rgba.exec(t))?{r:n[1],g:n[2],b:n[3],a:n[4]}:(n=D.hsl.exec(t))?{h:n[1],s:n[2],l:n[3]}:(n=D.hsla.exec(t))?{h:n[1],s:n[2],l:n[3],a:n[4]}:(n=D.hsv.exec(t))?{h:n[1],s:n[2],v:n[3]}:(n=D.hsva.exec(t))?{h:n[1],s:n[2],v:n[3],a:n[4]}:(n=D.hex8.exec(t))?{r:O(n[1]),g:O(n[2]),b:O(n[3]),a:A(n[4]),format:i?"name":"hex8"}:(n=D.hex6.exec(t))?{r:O(n[1]),g:O(n[2]),b:O(n[3]),format:i?"name":"hex"}:(n=D.hex4.exec(t))?{r:O(n[1]+""+n[1]),g:O(n[2]+""+n[2]),b:O(n[3]+""+n[3]),a:A(n[4]+""+n[4]),format:i?"name":"hex8"}:!!(n=D.hex3.exec(t))&&{r:O(n[1]+""+n[1]),g:O(n[2]+""+n[2]),b:O(n[3]+""+n[3]),format:i?"name":"hex"}}(n)),"object"==t(n)&&(R(n.r)&&R(n.g)&&R(n.b)?(h=n.r,f=n.g,d=n.b,i={r:255*S(h,255),g:255*S(f,255),b:255*S(d,255)},l=!0,u="%"===String(n.r).substr(-1)?"prgb":"rgb"):R(n.h)&&R(n.s)&&R(n.v)?(s=j(n.s),a=j(n.v),i=function(t,e,r){t=6*S(t,360),e=S(e,100),r=S(r,100);var n=Math.floor(t),i=t-n,o=r*(1-e),s=r*(1-i*e),a=r*(1-(1-i)*e),c=n%6;return{r:255*[r,s,o,o,a,r][c],g:255*[a,r,r,s,o,o][c],b:255*[o,o,a,r,r,s][c]}}(n.h,s,a),l=!0,u="hsv"):R(n.h)&&R(n.s)&&R(n.l)&&(s=j(n.s),c=j(n.l),i=function(t,e,r){var n,i,o;function s(t,e,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?t+6*(e-t)*r:r<.5?e:r<2/3?t+(e-t)*(2/3-r)*6:t}if(t=S(t,360),e=S(e,100),r=S(r,100),0===e)n=i=o=r;else{var a=r<.5?r*(1+e):r+e-r*e,c=2*r-a;n=s(c,a,t+1/3),i=s(c,a,t),o=s(c,a,t-1/3)}return{r:255*n,g:255*i,b:255*o}}(n.h,s,c),l=!0,u="hsl"),n.hasOwnProperty("a")&&(o=n.a)),o=w(o),{ok:l,format:n.format||u,r:Math.min(255,Math.max(i.r,0)),g:Math.min(255,Math.max(i.g,0)),b:Math.min(255,Math.max(i.b,0)),a:o};var h,f,d}(i);this._originalInput=i,this._r=s.r,this._g=s.g,this._b=s.b,this._a=s.a,this._roundA=Math.round(100*this._a)/100,this._format=o.format||s.format,this._gradientType=o.gradientType,this._r<1&&(this._r=Math.round(this._r)),this._g<1&&(this._g=Math.round(this._g)),this._b<1&&(this._b=Math.round(this._b)),this._ok=s.ok}function i(t,e,r){t=S(t,255),e=S(e,255),r=S(r,255);var n,i,o=Math.max(t,e,r),s=Math.min(t,e,r),a=(o+s)/2;if(o==s)n=i=0;else{var c=o-s;switch(i=a>.5?c/(2-o-s):c/(o+s),o){case t:n=(e-r)/c+(e<r?6:0);break;case e:n=(r-t)/c+2;break;case r:n=(t-e)/c+4}n/=6}return{h:n,s:i,l:a}}function o(t,e,r){t=S(t,255),e=S(e,255),r=S(r,255);var n,i,o=Math.max(t,e,r),s=Math.min(t,e,r),a=o,c=o-s;if(i=0===o?0:c/o,o==s)n=0;else{switch(o){case t:n=(e-r)/c+(e<r?6:0);break;case e:n=(r-t)/c+2;break;case r:n=(t-e)/c+4}n/=6}return{h:n,s:i,v:a}}function s(t,e,r,n){var i=[T(Math.round(t).toString(16)),T(Math.round(e).toString(16)),T(Math.round(r).toString(16))];return n&&i[0].charAt(0)==i[0].charAt(1)&&i[1].charAt(0)==i[1].charAt(1)&&i[2].charAt(0)==i[2].charAt(1)?i[0].charAt(0)+i[1].charAt(0)+i[2].charAt(0):i.join("")}function a(t,e,r,n){return[T(k(n)),T(Math.round(t).toString(16)),T(Math.round(e).toString(16)),T(Math.round(r).toString(16))].join("")}function c(t,e){e=0===e?0:e||10;var r=n(t).toHsl();return r.s-=e/100,r.s=C(r.s),n(r)}function l(t,e){e=0===e?0:e||10;var r=n(t).toHsl();return r.s+=e/100,r.s=C(r.s),n(r)}function u(t){return n(t).desaturate(100)}function h(t,e){e=0===e?0:e||10;var r=n(t).toHsl();return r.l+=e/100,r.l=C(r.l),n(r)}function f(t,e){e=0===e?0:e||10;var r=n(t).toRgb();return r.r=Math.max(0,Math.min(255,r.r-Math.round(-e/100*255))),r.g=Math.max(0,Math.min(255,r.g-Math.round(-e/100*255))),r.b=Math.max(0,Math.min(255,r.b-Math.round(-e/100*255))),n(r)}function d(t,e){e=0===e?0:e||10;var r=n(t).toHsl();return r.l-=e/100,r.l=C(r.l),n(r)}function p(t,e){var r=n(t).toHsl(),i=(r.h+e)%360;return r.h=i<0?360+i:i,n(r)}function g(t){var e=n(t).toHsl();return e.h=(e.h+180)%360,n(e)}function v(t,e){if(isNaN(e)||e<=0)throw new Error("Argument to polyad must be a positive number");for(var r=n(t).toHsl(),i=[n(t)],o=360/e,s=1;s<e;s++)i.push(n({h:(r.h+s*o)%360,s:r.s,l:r.l}));return i}function _(t){var e=n(t).toHsl(),r=e.h;return[n(t),n({h:(r+72)%360,s:e.s,l:e.l}),n({h:(r+216)%360,s:e.s,l:e.l})]}function y(t,e,r){e=e||6,r=r||30;var i=n(t).toHsl(),o=360/r,s=[n(t)];for(i.h=(i.h-(o*e>>1)+720)%360;--e;)i.h=(i.h+o)%360,s.push(n(i));return s}function m(t,e){e=e||6;for(var r=n(t).toHsv(),i=r.h,o=r.s,s=r.v,a=[],c=1/e;e--;)a.push(n({h:i,s:o,v:s})),s=(s+c)%1;return a}n.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var t=this.toRgb();return(299*t.r+587*t.g+114*t.b)/1e3},getLuminance:function(){var t,e,r,n=this.toRgb();return t=n.r/255,e=n.g/255,r=n.b/255,.2126*(t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4))+.7152*(e<=.03928?e/12.92:Math.pow((e+.055)/1.055,2.4))+.0722*(r<=.03928?r/12.92:Math.pow((r+.055)/1.055,2.4))},setAlpha:function(t){return this._a=w(t),this._roundA=Math.round(100*this._a)/100,this},toHsv:function(){var t=o(this._r,this._g,this._b);return{h:360*t.h,s:t.s,v:t.v,a:this._a}},toHsvString:function(){var t=o(this._r,this._g,this._b),e=Math.round(360*t.h),r=Math.round(100*t.s),n=Math.round(100*t.v);return 1==this._a?"hsv("+e+", "+r+"%, "+n+"%)":"hsva("+e+", "+r+"%, "+n+"%, "+this._roundA+")"},toHsl:function(){var t=i(this._r,this._g,this._b);return{h:360*t.h,s:t.s,l:t.l,a:this._a}},toHslString:function(){var t=i(this._r,this._g,this._b),e=Math.round(360*t.h),r=Math.round(100*t.s),n=Math.round(100*t.l);return 1==this._a?"hsl("+e+", "+r+"%, "+n+"%)":"hsla("+e+", "+r+"%, "+n+"%, "+this._roundA+")"},toHex:function(t){return s(this._r,this._g,this._b,t)},toHexString:function(t){return"#"+this.toHex(t)},toHex8:function(t){return function(t,e,r,n,i){var o=[T(Math.round(t).toString(16)),T(Math.round(e).toString(16)),T(Math.round(r).toString(16)),T(k(n))];return i&&o[0].charAt(0)==o[0].charAt(1)&&o[1].charAt(0)==o[1].charAt(1)&&o[2].charAt(0)==o[2].charAt(1)&&o[3].charAt(0)==o[3].charAt(1)?o[0].charAt(0)+o[1].charAt(0)+o[2].charAt(0)+o[3].charAt(0):o.join("")}(this._r,this._g,this._b,this._a,t)},toHex8String:function(t){return"#"+this.toHex8(t)},toRgb:function(){return{r:Math.round(this._r),g:Math.round(this._g),b:Math.round(this._b),a:this._a}},toRgbString:function(){return 1==this._a?"rgb("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+")":"rgba("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:Math.round(100*S(this._r,255))+"%",g:Math.round(100*S(this._g,255))+"%",b:Math.round(100*S(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return 1==this._a?"rgb("+Math.round(100*S(this._r,255))+"%, "+Math.round(100*S(this._g,255))+"%, "+Math.round(100*S(this._b,255))+"%)":"rgba("+Math.round(100*S(this._r,255))+"%, "+Math.round(100*S(this._g,255))+"%, "+Math.round(100*S(this._b,255))+"%, "+this._roundA+")"},toName:function(){return 0===this._a?"transparent":!(this._a<1)&&(x[s(this._r,this._g,this._b,!0)]||!1)},toFilter:function(t){var e="#"+a(this._r,this._g,this._b,this._a),r=e,i=this._gradientType?"GradientType = 1, ":"";if(t){var o=n(t);r="#"+a(o._r,o._g,o._b,o._a)}return"progid:DXImageTransform.Microsoft.gradient("+i+"startColorstr="+e+",endColorstr="+r+")"},toString:function(t){var e=!!t;t=t||this._format;var r=!1,n=this._a<1&&this._a>=0;return e||!n||"hex"!==t&&"hex6"!==t&&"hex3"!==t&&"hex4"!==t&&"hex8"!==t&&"name"!==t?("rgb"===t&&(r=this.toRgbString()),"prgb"===t&&(r=this.toPercentageRgbString()),"hex"!==t&&"hex6"!==t||(r=this.toHexString()),"hex3"===t&&(r=this.toHexString(!0)),"hex4"===t&&(r=this.toHex8String(!0)),"hex8"===t&&(r=this.toHex8String()),"name"===t&&(r=this.toName()),"hsl"===t&&(r=this.toHslString()),"hsv"===t&&(r=this.toHsvString()),r||this.toHexString()):"name"===t&&0===this._a?this.toName():this.toRgbString()},clone:function(){return n(this.toString())},_applyModification:function(t,e){var r=t.apply(null,[this].concat([].slice.call(e)));return this._r=r._r,this._g=r._g,this._b=r._b,this.setAlpha(r._a),this},lighten:function(){return this._applyModification(h,arguments)},brighten:function(){return this._applyModification(f,arguments)},darken:function(){return this._applyModification(d,arguments)},desaturate:function(){return this._applyModification(c,arguments)},saturate:function(){return this._applyModification(l,arguments)},greyscale:function(){return this._applyModification(u,arguments)},spin:function(){return this._applyModification(p,arguments)},_applyCombination:function(t,e){return t.apply(null,[this].concat([].slice.call(e)))},analogous:function(){return this._applyCombination(y,arguments)},complement:function(){return this._applyCombination(g,arguments)},monochromatic:function(){return this._applyCombination(m,arguments)},splitcomplement:function(){return this._applyCombination(_,arguments)},triad:function(){return this._applyCombination(v,[3])},tetrad:function(){return this._applyCombination(v,[4])}},n.fromRatio=function(e,r){if("object"==t(e)){var i={};for(var o in e)e.hasOwnProperty(o)&&(i[o]="a"===o?e[o]:j(e[o]));e=i}return n(e,r)},n.equals=function(t,e){return!(!t||!e)&&n(t).toRgbString()==n(e).toRgbString()},n.random=function(){return n.fromRatio({r:Math.random(),g:Math.random(),b:Math.random()})},n.mix=function(t,e,r){r=0===r?0:r||50;var i=n(t).toRgb(),o=n(e).toRgb(),s=r/100;return n({r:(o.r-i.r)*s+i.r,g:(o.g-i.g)*s+i.g,b:(o.b-i.b)*s+i.b,a:(o.a-i.a)*s+i.a})},n.readability=function(t,e){var r=n(t),i=n(e);return(Math.max(r.getLuminance(),i.getLuminance())+.05)/(Math.min(r.getLuminance(),i.getLuminance())+.05)},n.isReadable=function(t,e,r){var i,o,s,a,c,l=n.readability(t,e);switch(o=!1,(s=r,"AA"!==(a=((s=s||{level:"AA",size:"small"}).level||"AA").toUpperCase())&&"AAA"!==a&&(a="AA"),"small"!==(c=(s.size||"small").toLowerCase())&&"large"!==c&&(c="small"),i={level:a,size:c}).level+i.size){case"AAsmall":case"AAAlarge":o=l>=4.5;break;case"AAlarge":o=l>=3;break;case"AAAsmall":o=l>=7}return o},n.mostReadable=function(t,e,r){var i,o,s,a,c=null,l=0;o=(r=r||{}).includeFallbackColors,s=r.level,a=r.size;for(var u=0;u<e.length;u++)(i=n.readability(t,e[u]))>l&&(l=i,c=n(e[u]));return n.isReadable(t,c,{level:s,size:a})||!o?c:(r.includeFallbackColors=!1,n.mostReadable(t,["#fff","#000"],r))};var b=n.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},x=n.hexNames=function(t){var e={};for(var r in t)t.hasOwnProperty(r)&&(e[t[r]]=r);return e}(b);function w(t){return t=parseFloat(t),(isNaN(t)||t<0||t>1)&&(t=1),t}function S(t,e){(function(t){return"string"==typeof t&&-1!=t.indexOf(".")&&1===parseFloat(t)})(t)&&(t="100%");var r=function(t){return"string"==typeof t&&-1!=t.indexOf("%")}(t);return t=Math.min(e,Math.max(0,parseFloat(t))),r&&(t=parseInt(t*e,10)/100),Math.abs(t-e)<1e-6?1:t%e/parseFloat(e)}function C(t){return Math.min(1,Math.max(0,t))}function O(t){return parseInt(t,16)}function T(t){return 1==t.length?"0"+t:""+t}function j(t){return t<=1&&(t=100*t+"%"),t}function k(t){return Math.round(255*parseFloat(t)).toString(16)}function A(t){return O(t)/255}var E,M,P,D=(M="[\\s|\\(]+("+(E="(?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?)")+")[,|\\s]+("+E+")[,|\\s]+("+E+")\\s*\\)?",P="[\\s|\\(]+("+E+")[,|\\s]+("+E+")[,|\\s]+("+E+")[,|\\s]+("+E+")\\s*\\)?",{CSS_UNIT:new RegExp(E),rgb:new RegExp("rgb"+M),rgba:new RegExp("rgba"+P),hsl:new RegExp("hsl"+M),hsla:new RegExp("hsla"+P),hsv:new RegExp("hsv"+M),hsva:new RegExp("hsva"+P),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/});function R(t){return!!D.CSS_UNIT.exec(t)}return n}()},4585:(t,e,r)=>{"use strict";function n(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function i(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?n(Object(r),!0).forEach((function(e){o(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function o(t,e,r){return(e=l(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function s(){return s=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},s.apply(this,arguments)}function a(t,e){if(null==t)return{};var r,n,i=function(t,e){if(null==t)return{};var r,n,i={},o=Object.keys(t);for(n=0;n<o.length;n++)r=o[n],e.indexOf(r)>=0||(i[r]=t[r]);return i}(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(n=0;n<o.length;n++)r=o[n],e.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(t,r)&&(i[r]=t[r])}return i}function c(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}function l(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==typeof e?e:String(e)}r.d(e,{Cd:()=>Di,E9:()=>H,Xz:()=>hi,ZA:()=>_n});class u{constructor(){o(this,"browserShadowBlurConstant",1),o(this,"DPI",96),o(this,"devicePixelRatio",1),o(this,"perfLimitSizeTotal",2097152),o(this,"maxCacheSideLimit",4096),o(this,"minCacheSideLimit",256),o(this,"disableStyleCopyPaste",!1),o(this,"enableGLFiltering",!0),o(this,"textureSize",4096),o(this,"forceGLPutImageData",!1),o(this,"cachesBoundsOfCurve",!0),o(this,"fontPaths",{}),o(this,"NUM_FRACTION_DIGITS",4)}}const h=new class extends u{constructor(t){super(),this.configure(t)}configure(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object.assign(this,t)}addFonts(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.fontPaths=i(i({},this.fontPaths),t)}removeFonts(){(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).forEach((t=>{delete this.fontPaths[t]}))}clearFonts(){this.fontPaths={}}restoreDefaults(t){const e=new u,r=(null==t?void 0:t.reduce(((t,r)=>(t[r]=e[r],t)),{}))||e;this.configure(r)}};class f{}class d extends f{testPrecision(t,e){const r="precision ".concat(e," float;\nvoid main(){}"),n=t.createShader(t.FRAGMENT_SHADER);return!!n&&(t.shaderSource(n,r),t.compileShader(n),!!t.getShaderParameter(n,t.COMPILE_STATUS))}queryWebGL(t){const e=t.getContext("webgl");e&&(this.maxTextureSize=e.getParameter(e.MAX_TEXTURE_SIZE),this.GLPrecision=["highp","mediump","lowp"].find((t=>this.testPrecision(e,t))),console.log("fabric: max texture size ".concat(this.maxTextureSize)))}isSupported(t){return!!this.maxTextureSize&&this.maxTextureSize>=t}}const p={};let g,v=!1;const _=()=>(v||(h.configure({devicePixelRatio:window.devicePixelRatio||1}),g="ontouchstart"in window||"ontouchstart"in document||window&&window.navigator&&window.navigator.maxTouchPoints>0,v=!0),{document,window,isTouchSupported:g,WebGLProbe:new d,dispose(){},copyPasteData:p}),y=()=>_().document,m=()=>_().window,b=new class{constructor(){o(this,"charWidthsCache",{}),o(this,"boundsOfCurveCache",{})}getFontCache(t){let{fontFamily:e,fontStyle:r,fontWeight:n}=t;e=e.toLowerCase(),this.charWidthsCache[e]||(this.charWidthsCache[e]={});const i=this.charWidthsCache[e],o="".concat(r.toLowerCase(),"_").concat((n+"").toLowerCase());return i[o]||(i[o]={}),i[o]}clearFontCache(t){(t=(t||"").toLowerCase())?this.charWidthsCache[t]&&delete this.charWidthsCache[t]:this.charWidthsCache={}}limitDimsByArea(t){const{perfLimitSizeTotal:e}=h,r=Math.sqrt(e*t);return[Math.floor(r),Math.floor(e/r)]}},x="6.0.0-beta10";function w(){}const S=Math.PI/2,C=2*Math.PI,O=Math.PI/180,T=Object.freeze([1,0,0,1,0,0]),k=16,A=.4477152502,E="center",M="left",P="top",D="bottom",R="right",L="none",F=/\r?\n/,B="json",I="svg",N=new class{constructor(){this[B]=new Map,this[I]=new Map}getClass(t){const e=this[B].get(t);if(!e)throw new Error("No class registered for ".concat(t));return e}setClass(t,e){e?this[B].set(e,t):(this[B].set(t.type,t),this[B].set(t.type.toLowerCase(),t))}getSVGClass(t){return this[I].get(t)}setSVGClass(t,e){this[I].set(null!=e?e:t.type.toLowerCase(),t)}},V=new class extends Array{remove(t){const e=this.indexOf(t);e>-1&&this.splice(e,1)}cancelAll(){const t=this.splice(0);return t.forEach((t=>t.abort())),t}cancelByCanvas(t){if(!t)return[];const e=this.filter((e=>{var r;return"object"==typeof e.target&&(null===(r=e.target)||void 0===r?void 0:r.canvas)===t}));return e.forEach((t=>t.abort())),e}cancelByTarget(t){if(!t)return[];const e=this.filter((e=>e.target===t));return e.forEach((t=>t.abort())),e}};class W{constructor(){o(this,"__eventListeners",{})}on(t,e){if(this.__eventListeners||(this.__eventListeners={}),"object"==typeof t){for(const e in t)this.on(e,t[e]);return()=>this.off(t)}if(e){const r=t;return this.__eventListeners[r]||(this.__eventListeners[r]=[]),this.__eventListeners[r].push(e),()=>this.off(r,e)}return()=>!1}once(t,e){if("object"==typeof t){const e=[];for(const r in t)e.push(this.once(r,t[r]));return()=>e.forEach((t=>t()))}if(e){const r=this.on(t,(function(){e(...arguments),r()}));return r}return()=>!1}_removeEventListener(t,e){if(this.__eventListeners[t])if(e){const r=this.__eventListeners[t],n=r.indexOf(e);n>-1&&r.splice(n,1)}else this.__eventListeners[t]=[]}off(t,e){if(this.__eventListeners)if(void 0===t)for(const t in this.__eventListeners)this._removeEventListener(t);else if("object"==typeof t)for(const e in t)this._removeEventListener(e,t[e]);else this._removeEventListener(t,e)}fire(t,e){var r;if(!this.__eventListeners)return;const n=null===(r=this.__eventListeners[t])||void 0===r?void 0:r.concat();if(n)for(let t=0;t<n.length;t++)n[t].call(this,e||{})}}const U=(t,e)=>isNaN(t)&&"number"==typeof e?e:t,z=(t,e)=>{const r=t.indexOf(e);return-1!==r&&t.splice(r,1),t},X=t=>{if(0===t)return 1;switch(Math.abs(t)/S){case 1:case 3:return 0;case 2:return-1}return Math.cos(t)},Y=t=>{if(0===t)return 0;const e=t/S,r=Math.sign(t);switch(e){case 1:return r;case 2:return 0;case 3:return-r}return Math.sin(t)};class H{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;"object"==typeof t?(this.x=t.x,this.y=t.y):(this.x=t,this.y=e)}add(t){return new H(this.x+t.x,this.y+t.y)}addEquals(t){return this.x+=t.x,this.y+=t.y,this}scalarAdd(t){return new H(this.x+t,this.y+t)}scalarAddEquals(t){return this.x+=t,this.y+=t,this}subtract(t){return new H(this.x-t.x,this.y-t.y)}subtractEquals(t){return this.x-=t.x,this.y-=t.y,this}scalarSubtract(t){return new H(this.x-t,this.y-t)}scalarSubtractEquals(t){return this.x-=t,this.y-=t,this}multiply(t){return new H(this.x*t.x,this.y*t.y)}scalarMultiply(t){return new H(this.x*t,this.y*t)}scalarMultiplyEquals(t){return this.x*=t,this.y*=t,this}divide(t){return new H(this.x/t.x,this.y/t.y)}scalarDivide(t){return new H(this.x/t,this.y/t)}scalarDivideEquals(t){return this.x/=t,this.y/=t,this}eq(t){return this.x===t.x&&this.y===t.y}lt(t){return this.x<t.x&&this.y<t.y}lte(t){return this.x<=t.x&&this.y<=t.y}gt(t){return this.x>t.x&&this.y>t.y}gte(t){return this.x>=t.x&&this.y>=t.y}lerp(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.5;return e=Math.max(Math.min(1,e),0),new H(this.x+(t.x-this.x)*e,this.y+(t.y-this.y)*e)}distanceFrom(t){const e=this.x-t.x,r=this.y-t.y;return Math.sqrt(e*e+r*r)}midPointFrom(t){return this.lerp(t)}min(t){return new H(Math.min(this.x,t.x),Math.min(this.y,t.y))}max(t){return new H(Math.max(this.x,t.x),Math.max(this.y,t.y))}toString(){return"".concat(this.x,",").concat(this.y)}setXY(t,e){return this.x=t,this.y=e,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setFromPoint(t){return this.x=t.x,this.y=t.y,this}swap(t){const e=this.x,r=this.y;this.x=t.x,this.y=t.y,t.x=e,t.y=r}clone(){return new H(this.x,this.y)}rotate(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:G;const r=Y(t),n=X(t),i=this.subtract(e);return new H(i.x*n-i.y*r,i.x*r+i.y*n).add(e)}transform(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return new H(t[0]*this.x+t[2]*this.y+(e?0:t[4]),t[1]*this.x+t[3]*this.y+(e?0:t[5]))}}const G=new H(0,0);function q(t){class e extends t{constructor(){super(...arguments),o(this,"_objects",[])}_onObjectAdded(t){}_onObjectRemoved(t){}_onStackOrderChanged(t){}add(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];const n=this._objects.push(...e);return e.forEach((t=>this._onObjectAdded(t))),n}insertAt(t){for(var e=arguments.length,r=new Array(e>1?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];return this._objects.splice(t,0,...r),r.forEach((t=>this._onObjectAdded(t))),this._objects.length}remove(){const t=this._objects,e=[];for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return n.forEach((r=>{const n=t.indexOf(r);-1!==n&&(t.splice(n,1),e.push(r),this._onObjectRemoved(r))})),e}forEachObject(t){this.getObjects().forEach(((e,r,n)=>t(e,r,n)))}getObjects(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return 0===e.length?[...this._objects]:this._objects.filter((t=>t.isType(...e)))}item(t){return this._objects[t]}isEmpty(){return 0===this._objects.length}size(){return this._objects.length}contains(t,r){return!!this._objects.includes(t)||!!r&&this._objects.some((r=>r instanceof e&&r.contains(t,!0)))}complexity(){return this._objects.reduce(((t,e)=>t+(e.complexity?e.complexity():0)),0)}sendObjectToBack(t){return!(!t||t===this._objects[0]||(z(this._objects,t),this._objects.unshift(t),this._onStackOrderChanged(t),0))}bringObjectToFront(t){return!(!t||t===this._objects[this._objects.length-1]||(z(this._objects,t),this._objects.push(t),this._onStackOrderChanged(t),0))}sendObjectBackwards(t,e){if(!t)return!1;const r=this._objects.indexOf(t);if(0!==r){const n=this.findNewLowerIndex(t,r,e);return z(this._objects,t),this._objects.splice(n,0,t),this._onStackOrderChanged(t),!0}return!1}bringObjectForward(t,e){if(!t)return!1;const r=this._objects.indexOf(t);if(r!==this._objects.length-1){const n=this.findNewUpperIndex(t,r,e);return z(this._objects,t),this._objects.splice(n,0,t),this._onStackOrderChanged(t),!0}return!1}moveObjectTo(t,e){return t!==this._objects[e]&&(z(this._objects,t),this._objects.splice(e,0,t),this._onStackOrderChanged(t),!0)}findNewLowerIndex(t,e,r){let n;if(r){n=e;for(let r=e-1;r>=0;--r)if(t.isOverlapping(this._objects[r])){n=r;break}}else n=e-1;return n}findNewUpperIndex(t,e,r){let n;if(r){n=e;for(let r=e+1;r<this._objects.length;++r)if(t.isOverlapping(this._objects[r])){n=r;break}}else n=e+1;return n}collectObjects(t){let{left:e,top:r,width:n,height:i}=t,{includeIntersecting:o=!0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const s=[],a=new H(e,r),c=a.add(new H(n,i));for(let t=this._objects.length-1;t>=0;t--){const e=this._objects[t];e.selectable&&e.visible&&(o&&e.intersectsWithRect(a,c,!0)||e.isContainedWithinRect(a,c,!0)||o&&e.containsPoint(a,void 0,!0)||o&&e.containsPoint(c,void 0,!0))&&s.push(e)}return s}}return e}class K extends W{_setOptions(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};for(const e in t)this.set(e,t[e])}_setObject(t){for(const e in t)this._set(e,t[e])}set(t,e){return"object"==typeof t?this._setObject(t):this._set(t,e),this}_set(t,e){this[t]=e}toggle(t){const e=this.get(t);return"boolean"==typeof e&&this.set(t,!e),this}get(t){return this[t]}}function $(t){return m().requestAnimationFrame(t)}let J=0;const Z=()=>J++,Q=()=>{const t=y().createElement("canvas");if(!t||void 0===t.getContext)throw new Error("Failed to create `canvas` element");return t},tt=(t,e,r)=>t.toDataURL("image/".concat(e),r),et=t=>t*O,rt=t=>t/O,nt=["translateX","translateY","angle"],it=(t,e,r)=>new H(t).transform(e,r),ot=t=>{const e=1/(t[0]*t[3]-t[1]*t[2]),r=[e*t[3],-e*t[1],-e*t[2],e*t[0],0,0],{x:n,y:i}=new H(t[4],t[5]).transform(r,!0);return r[4]=-n,r[5]=-i,r},st=(t,e,r)=>[t[0]*e[0]+t[2]*e[1],t[1]*e[0]+t[3]*e[1],t[0]*e[2]+t[2]*e[3],t[1]*e[2]+t[3]*e[3],r?0:t[0]*e[4]+t[2]*e[5]+t[4],r?0:t[1]*e[4]+t[3]*e[5]+t[5]],at=(t,e)=>t.reduceRight(((t,r)=>r?st(r,t,e):t),T),ct=t=>{const e=Math.atan2(t[1],t[0]),r=Math.pow(t[0],2)+Math.pow(t[1],2),n=Math.sqrt(r),i=(t[0]*t[3]-t[2]*t[1])/n,o=Math.atan2(t[0]*t[2]+t[1]*t[3],r);return{angle:rt(e),scaleX:n,scaleY:i,skewX:rt(o),skewY:0,translateX:t[4]||0,translateY:t[5]||0}},lt=function(t){return[1,0,0,1,t,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0]};function ut(){let{angle:t=0}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{x:e=0,y:r=0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=et(t),i=X(n),o=Y(n);return[i,o,-o,i,e?e-(i*e-o*r):0,r?r-(o*e+i*r):0]}const ht=function(t){return[t,0,0,arguments.length>1&&void 0!==arguments[1]?arguments[1]:t,0,0]},ft=t=>Math.tan(et(t)),dt=t=>[1,0,ft(t),1,0,0],pt=t=>[1,ft(t),0,1,0,0],gt=t=>{let{scaleX:e=1,scaleY:r=1,flipX:n=!1,flipY:i=!1,skewX:o=0,skewY:s=0}=t;return at([ht(n?-e:e,i?-r:r),o&&dt(o),s&&pt(s)],!0)},vt=function(t){let{signal:e,crossOrigin:r=null}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Promise((function(n,i){if(e&&e.aborted)return i(new Error("`options.signal` is in `aborted` state"));const o=y().createElement("img");let s;e&&(s=function(t){o.src="",i(t)},e.addEventListener("abort",s,{once:!0}));const a=function(){o.onload=o.onerror=null,s&&(null==e||e.removeEventListener("abort",s)),n(o)};t?(o.onload=a,o.onerror=function(){s&&(null==e||e.removeEventListener("abort",s)),i(new Error("Error loading "+o.src))},r&&(o.crossOrigin=r),o.src=t):a()}))},_t=function(t){let{signal:e,reviver:r=w}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Promise(((n,i)=>{const o=[];e&&e.addEventListener("abort",i,{once:!0}),Promise.all(t.map((t=>N.getClass(t.type).fromObject(t,{signal:e,reviver:r}).then((e=>(r(t,e),o.push(e),e)))))).then(n).catch((t=>{o.forEach((function(t){t.dispose&&t.dispose()})),i(t)})).finally((()=>{e&&e.removeEventListener("abort",i)}))}))},yt=function(t){let{signal:e}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Promise(((r,n)=>{const i=[];e&&e.addEventListener("abort",n,{once:!0});const o=Object.values(t).map((t=>t?t.colorStops?new(N.getClass("gradient"))(t):t.type?_t([t],{signal:e}).then((t=>{let[e]=t;return i.push(e),e})):t.source?N.getClass("pattern").fromObject(t,{signal:e}).then((t=>(i.push(t),t))):t:t)),s=Object.keys(t);Promise.all(o).then((t=>t.reduce(((t,e,r)=>(t[s[r]]=e,t)),{}))).then(r).catch((t=>{i.forEach((t=>{t.dispose&&t.dispose()})),n(t)})).finally((()=>{e&&e.removeEventListener("abort",n)}))}))},mt=function(t){return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:[]).reduce(((e,r)=>(r in t&&(e[r]=t[r]),e)),{})},bt=(t,e)=>Object.keys(t).reduce(((r,n)=>(e(t[n],n,t)&&(r[n]=t[n]),r)),{}),xt={aliceblue:"#F0F8FF",antiquewhite:"#FAEBD7",aqua:"#0FF",aquamarine:"#7FFFD4",azure:"#F0FFFF",beige:"#F5F5DC",bisque:"#FFE4C4",black:"#000",blanchedalmond:"#FFEBCD",blue:"#00F",blueviolet:"#8A2BE2",brown:"#A52A2A",burlywood:"#DEB887",cadetblue:"#5F9EA0",chartreuse:"#7FFF00",chocolate:"#D2691E",coral:"#FF7F50",cornflowerblue:"#6495ED",cornsilk:"#FFF8DC",crimson:"#DC143C",cyan:"#0FF",darkblue:"#00008B",darkcyan:"#008B8B",darkgoldenrod:"#B8860B",darkgray:"#A9A9A9",darkgrey:"#A9A9A9",darkgreen:"#006400",darkkhaki:"#BDB76B",darkmagenta:"#8B008B",darkolivegreen:"#556B2F",darkorange:"#FF8C00",darkorchid:"#9932CC",darkred:"#8B0000",darksalmon:"#E9967A",darkseagreen:"#8FBC8F",darkslateblue:"#483D8B",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",darkturquoise:"#00CED1",darkviolet:"#9400D3",deeppink:"#FF1493",deepskyblue:"#00BFFF",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1E90FF",firebrick:"#B22222",floralwhite:"#FFFAF0",forestgreen:"#228B22",fuchsia:"#F0F",gainsboro:"#DCDCDC",ghostwhite:"#F8F8FF",gold:"#FFD700",goldenrod:"#DAA520",gray:"#808080",grey:"#808080",green:"#008000",greenyellow:"#ADFF2F",honeydew:"#F0FFF0",hotpink:"#FF69B4",indianred:"#CD5C5C",indigo:"#4B0082",ivory:"#FFFFF0",khaki:"#F0E68C",lavender:"#E6E6FA",lavenderblush:"#FFF0F5",lawngreen:"#7CFC00",lemonchiffon:"#FFFACD",lightblue:"#ADD8E6",lightcoral:"#F08080",lightcyan:"#E0FFFF",lightgoldenrodyellow:"#FAFAD2",lightgray:"#D3D3D3",lightgrey:"#D3D3D3",lightgreen:"#90EE90",lightpink:"#FFB6C1",lightsalmon:"#FFA07A",lightseagreen:"#20B2AA",lightskyblue:"#87CEFA",lightslategray:"#789",lightslategrey:"#789",lightsteelblue:"#B0C4DE",lightyellow:"#FFFFE0",lime:"#0F0",limegreen:"#32CD32",linen:"#FAF0E6",magenta:"#F0F",maroon:"#800000",mediumaquamarine:"#66CDAA",mediumblue:"#0000CD",mediumorchid:"#BA55D3",mediumpurple:"#9370DB",mediumseagreen:"#3CB371",mediumslateblue:"#7B68EE",mediumspringgreen:"#00FA9A",mediumturquoise:"#48D1CC",mediumvioletred:"#C71585",midnightblue:"#191970",mintcream:"#F5FFFA",mistyrose:"#FFE4E1",moccasin:"#FFE4B5",navajowhite:"#FFDEAD",navy:"#000080",oldlace:"#FDF5E6",olive:"#808000",olivedrab:"#6B8E23",orange:"#FFA500",orangered:"#FF4500",orchid:"#DA70D6",palegoldenrod:"#EEE8AA",palegreen:"#98FB98",paleturquoise:"#AFEEEE",palevioletred:"#DB7093",papayawhip:"#FFEFD5",peachpuff:"#FFDAB9",peru:"#CD853F",pink:"#FFC0CB",plum:"#DDA0DD",powderblue:"#B0E0E6",purple:"#800080",rebeccapurple:"#639",red:"#F00",rosybrown:"#BC8F8F",royalblue:"#4169E1",saddlebrown:"#8B4513",salmon:"#FA8072",sandybrown:"#F4A460",seagreen:"#2E8B57",seashell:"#FFF5EE",sienna:"#A0522D",silver:"#C0C0C0",skyblue:"#87CEEB",slateblue:"#6A5ACD",slategray:"#708090",slategrey:"#708090",snow:"#FFFAFA",springgreen:"#00FF7F",steelblue:"#4682B4",tan:"#D2B48C",teal:"#008080",thistle:"#D8BFD8",tomato:"#FF6347",turquoise:"#40E0D0",violet:"#EE82EE",wheat:"#F5DEB3",white:"#FFF",whitesmoke:"#F5F5F5",yellow:"#FF0",yellowgreen:"#9ACD32"},wt=(t,e,r)=>(r<0&&(r+=1),r>1&&(r-=1),r<1/6?t+6*(e-t)*r:r<.5?e:r<2/3?t+(e-t)*(2/3-r)*6:t),St=(t,e,r,n)=>{t/=255,e/=255,r/=255;const i=Math.max(t,e,r),o=Math.min(t,e,r);let s,a;const c=(i+o)/2;if(i===o)s=a=0;else{const n=i-o;switch(a=c>.5?n/(2-i-o):n/(i+o),i){case t:s=(e-r)/n+(e<r?6:0);break;case e:s=(r-t)/n+2;break;case r:s=(t-e)/n+4}s/=6}return[Math.round(360*s),Math.round(100*a),Math.round(100*c),n]},Ct=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"1";return parseFloat(t)/(t.endsWith("%")?100:1)},Ot=t=>Math.min(Math.round(t),255).toString(16).toUpperCase().padStart(2,"0"),Tt=t=>{let[e,r,n,i=1]=t;const o=Math.round(.3*e+.59*r+.11*n);return[o,o,o,i]};class jt{constructor(t){if(t)if(t instanceof jt)this.setSource([...t._source]);else if(Array.isArray(t)){const[e,r,n,i=1]=t;this.setSource([e,r,n,i])}else this.setSource(this._tryParsingColor(t));else this.setSource([0,0,0,1])}_tryParsingColor(t){return t in xt&&(t=xt[t]),"transparent"===t?[255,255,255,0]:jt.sourceFromHex(t)||jt.sourceFromRgb(t)||jt.sourceFromHsl(t)||[0,0,0,1]}getSource(){return this._source}setSource(t){this._source=t}toRgb(){const[t,e,r]=this.getSource();return"rgb(".concat(t,",").concat(e,",").concat(r,")")}toRgba(){return"rgba(".concat(this.getSource().join(","),")")}toHsl(){const[t,e,r]=St(...this.getSource());return"hsl(".concat(t,",").concat(e,"%,").concat(r,"%)")}toHsla(){const[t,e,r,n]=St(...this.getSource());return"hsla(".concat(t,",").concat(e,"%,").concat(r,"%,").concat(n,")")}toHex(){return this.toHexa().slice(0,6)}toHexa(){const[t,e,r,n]=this.getSource();return"".concat(Ot(t)).concat(Ot(e)).concat(Ot(r)).concat(Ot(Math.round(255*n)))}getAlpha(){return this.getSource()[3]}setAlpha(t){return this._source[3]=t,this}toGrayscale(){return this.setSource(Tt(this.getSource())),this}toBlackWhite(t){const[e,,,r]=Tt(this.getSource()),n=e<(t||127)?0:255;return this.setSource([n,n,n,r]),this}overlayWith(t){t instanceof jt||(t=new jt(t));const e=this.getSource(),r=t.getSource(),[n,i,o]=e.map(((t,e)=>Math.round(.5*t+.5*r[e])));return this.setSource([n,i,o,e[3]]),this}static fromRgb(t){return jt.fromRgba(t)}static fromRgba(t){return new jt(jt.sourceFromRgb(t))}static sourceFromRgb(t){const e=t.match(/^rgba?\(\s*(\d{0,3}(?:\.\d+)?%?)\s*[\s|,]\s*(\d{0,3}(?:\.\d+)?%?)\s*[\s|,]\s*(\d{0,3}(?:\.\d+)?%?)\s*(?:\s*[,/]\s*(\d{0,3}(?:\.\d+)?%?)\s*)?\)$/i);if(e){const[t,r,n]=e.slice(1,4).map((t=>{const e=parseFloat(t);return t.endsWith("%")?Math.round(2.55*e):e}));return[t,r,n,Ct(e[4])]}}static fromHsl(t){return jt.fromHsla(t)}static fromHsla(t){return new jt(jt.sourceFromHsl(t))}static sourceFromHsl(t){const e=t.match(/^hsla?\(\s*([+-]?\d{1,3})\s*[\s|,]\s*(\d{1,3}%)\s*[\s|,]\s*(\d{1,3}%)\s*(?:\s*[,/]\s*(\d*(?:\.\d+)?%?)\s*)?\)$/i);if(!e)return;const r=(parseFloat(e[1])%360+360)%360/360,n=parseFloat(e[2])/100,i=parseFloat(e[3])/100;let o,s,a;if(0===n)o=s=a=i;else{const t=i<=.5?i*(n+1):i+n-i*n,e=2*i-t;o=wt(e,t,r+1/3),s=wt(e,t,r),a=wt(e,t,r-1/3)}return[Math.round(255*o),Math.round(255*s),Math.round(255*a),Ct(e[4])]}static fromHex(t){return new jt(jt.sourceFromHex(t))}static sourceFromHex(t){if(t.match(/^#?(([0-9a-f]){3,4}|([0-9a-f]{2}){3,4})$/i)){const e=t.slice(t.indexOf("#")+1);let r;r=e.length<=4?e.split("").map((t=>t+t)):e.match(/.{2}/g);const[n,i,o,s=255]=r.map((t=>parseInt(t,16)));return[n,i,o,s/255]}}}const kt=(t,e)=>parseFloat(Number(t).toFixed(e)),At=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:k;const r=/\D{0,2}$/.exec(t),n=parseFloat(t),i=h.DPI;switch(null==r?void 0:r[0]){case"mm":return n*i/25.4;case"cm":return n*i/2.54;case"in":return n*i;case"pt":return n*i/72;case"pc":return n*i/72*12;case"em":return n*e;default:return n}},Et=t=>"matrix("+t.map((t=>kt(t,h.NUM_FRACTION_DIGITS))).join(" ")+")",Mt=(t,e)=>{if(e){if(e.toLive)return"".concat(t,": url(#SVGID_").concat(e.id,"); ");{const r=new jt(e),n=r.getAlpha();let i="".concat(t,": ").concat(r.toRgb(),"; ");return 1!==n&&(i+="".concat(t,"-opacity: ").concat(n.toString(),"; ")),i}}return"".concat(t,": none; ")},Pt=t=>!!t&&void 0!==t.toLive,Dt=t=>!!t&&"function"==typeof t.toObject,Rt=t=>!!t&&void 0!==t.offsetX&&void 0!==t.source,Lt=t=>!!t&&Array.isArray(t._objects),Ft=t=>!!t&&t.isType("Text","IText","Textbox"),Bt=t=>!!t&&t.isType("IText","Textbox"),It=t=>!!t&&"function"==typeof t.onDragStart&&"function"==typeof t.shouldStartDragging;function Nt(t){let e=0,r=0;const n=Vt(t),i=n.documentElement,o=n.body||{scrollLeft:0,scrollTop:0};for(;t&&(t.parentNode||t.host)&&((t=t.parentNode||t.host)===n?(e=o.scrollLeft||i.scrollLeft||0,r=o.scrollTop||i.scrollTop||0):(e+=t.scrollLeft||0,r+=t.scrollTop||0),1!==t.nodeType||"fixed"!==t.style.position););return{left:e,top:r}}const Vt=t=>t.ownerDocument||null,Wt=t=>{var e;return(null===(e=t.ownerDocument)||void 0===e?void 0:e.defaultView)||null};function Ut(t,e){const r=t.style;r&&("string"==typeof e?t.style.cssText+=";"+e:Object.entries(e).forEach((t=>{let[e,n]=t;return r.setProperty(e,n)})))}const zt=function(t,e,r){let{width:n,height:i}=r,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;t.width=n,t.height=i,o>1&&(t.setAttribute("width",(n*o).toString()),t.setAttribute("height",(i*o).toString()),e.scale(o,o))},Xt=(t,e)=>{let{width:r,height:n}=e;r&&(t.style.width="number"==typeof r?"".concat(r,"px"):r),n&&(t.style.height="number"==typeof n?"".concat(n,"px"):n)};function Yt(t){return void 0!==t.onselectstart&&(t.onselectstart=()=>!1),t.style.userSelect=L,t}class Ht{constructor(t){o(this,"_originalCanvasStyle",void 0),o(this,"lower",void 0);const e=this.createLowerCanvas(t);this.lower={el:e,ctx:e.getContext("2d")}}createLowerCanvas(t){const e=(r=t)&&void 0!==r.getContext?t:y().getElementById(t)||Q();var r;if(e.hasAttribute("data-fabric"))throw new Error("fabric.js: trying to initialize a canvas that has already been initialized");return this._originalCanvasStyle=e.style.cssText,e.setAttribute("data-fabric","main"),e.classList.add("lower-canvas"),e}cleanupDOM(t){let{width:e,height:r}=t;const{el:n}=this.lower;n.classList.remove("lower-canvas"),n.removeAttribute("data-fabric"),n.setAttribute("width","".concat(e)),n.setAttribute("height","".concat(r)),n.style.cssText=this._originalCanvasStyle||"",this._originalCanvasStyle=void 0}setDimensions(t,e){const{el:r,ctx:n}=this.lower;zt(r,n,t,e)}setCSSDimensions(t){Xt(this.lower.el,t)}calcOffset(){return function(t){var e;let r={left:0,top:0};const n=t&&Vt(t),i={left:0,top:0},o={borderLeftWidth:M,borderTopWidth:P,paddingLeft:M,paddingTop:P};if(!n)return i;const s=(null===(e=Wt(t))||void 0===e?void 0:e.getComputedStyle(t,null))||{};for(const t in o)i[o[t]]+=parseInt(s[t],10)||0;const a=n.documentElement;void 0!==t.getBoundingClientRect&&(r=t.getBoundingClientRect());const c=Nt(t);return{left:r.left+c.left-(a.clientLeft||0)+i.left,top:r.top+c.top-(a.clientTop||0)+i.top}}(this.lower.el)}dispose(){_().dispose(this.lower.el),delete this.lower}}const Gt={backgroundColor:"",backgroundImage:null,overlayColor:"",overlayImage:null,includeDefaultValues:!0,renderOnAddRemove:!0,controlsAboveOverlay:!1,allowTouchScrolling:!1,imageSmoothingEnabled:!0,viewportTransform:T.concat(),backgroundVpt:!0,overlayVpt:!0,enableRetinaScaling:!0,svgViewportTransformation:!0,skipOffscreen:!0,clipPath:void 0};class qt extends(q(K)){get lowerCanvasEl(){var t;return null===(t=this.elements.lower)||void 0===t?void 0:t.el}get contextContainer(){var t;return null===(t=this.elements.lower)||void 0===t?void 0:t.ctx}static getDefaults(){return qt.ownDefaults}constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(),Object.assign(this,this.constructor.getDefaults()),this.set(e),this.initElements(t),this._setDimensionsImpl({width:this.width||this.elements.lower.el.width||0,height:this.height||this.elements.lower.el.height||0}),this.viewportTransform=[...this.viewportTransform],this.calcViewportBoundaries()}initElements(t){this.elements=new Ht(t)}add(){const t=super.add(...arguments);return arguments.length>0&&this.renderOnAddRemove&&this.requestRenderAll(),t}insertAt(t){for(var e=arguments.length,r=new Array(e>1?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];const i=super.insertAt(t,...r);return r.length>0&&this.renderOnAddRemove&&this.requestRenderAll(),i}remove(){const t=super.remove(...arguments);return t.length>0&&this.renderOnAddRemove&&this.requestRenderAll(),t}_onObjectAdded(t){t.canvas&&t.canvas!==this&&(console.warn("fabric.Canvas: trying to add an object that belongs to a different canvas.\nResulting to default behavior: removing object from previous canvas and adding to new canvas"),t.canvas.remove(t)),t._set("canvas",this),t.setCoords(),this.fire("object:added",{target:t}),t.fire("added",{target:this})}_onObjectRemoved(t){t._set("canvas",void 0),this.fire("object:removed",{target:t}),t.fire("removed",{target:this})}_onStackOrderChanged(){this.renderOnAddRemove&&this.requestRenderAll()}_isRetinaScaling(){return h.devicePixelRatio>1&&this.enableRetinaScaling}getRetinaScaling(){return this._isRetinaScaling()?Math.max(1,h.devicePixelRatio):1}calcOffset(){return this._offset=this.elements.calcOffset()}getWidth(){return this.width}getHeight(){return this.height}setWidth(t,e){return this.setDimensions({width:t},e)}setHeight(t,e){return this.setDimensions({height:t},e)}_setDimensionsImpl(t){let{cssOnly:e=!1,backstoreOnly:r=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!e){const e=i({width:this.width,height:this.height},t);this.elements.setDimensions(e,this.getRetinaScaling()),this.hasLostContext=!0,this.width=e.width,this.height=e.height}r||this.elements.setCSSDimensions(t),this.calcOffset()}setDimensions(t){let{cssOnly:e=!1,backstoreOnly:r=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._setDimensionsImpl(t,{cssOnly:e,backstoreOnly:r}),e||this.requestRenderAll()}getZoom(){return this.viewportTransform[0]}setViewportTransform(t){const e=this.backgroundImage,r=this.overlayImage,n=this._objects.length;this.viewportTransform=t;for(let t=0;t<n;t++){const e=this._objects[t];e.group||e.setCoords()}e&&e.setCoords(),r&&r.setCoords(),this.calcViewportBoundaries(),this.renderOnAddRemove&&this.requestRenderAll()}zoomToPoint(t,e){const r=t,n=[...this.viewportTransform],i=it(t,ot(n));n[0]=e,n[3]=e;const o=it(i,n);n[4]+=r.x-o.x,n[5]+=r.y-o.y,this.setViewportTransform(n)}setZoom(t){this.zoomToPoint(new H(0,0),t)}absolutePan(t){const e=[...this.viewportTransform];return e[4]=-t.x,e[5]=-t.y,this.setViewportTransform(e)}relativePan(t){return this.absolutePan(new H(-t.x-this.viewportTransform[4],-t.y-this.viewportTransform[5]))}getElement(){return this.elements.lower.el}clearContext(t){t.clearRect(0,0,this.width,this.height)}getContext(){return this.elements.lower.ctx}clear(){this.remove(...this.getObjects()),this.backgroundImage=null,this.overlayImage=null,this.backgroundColor="",this.overlayColor="",this.clearContext(this.getContext()),this.fire("canvas:cleared"),this.renderOnAddRemove&&this.requestRenderAll()}renderAll(){this.cancelRequestedRender(),this.destroyed||this.renderCanvas(this.getContext(),this._objects)}renderAndReset(){this.nextRenderHandle=0,this.renderAll()}requestRenderAll(){this.nextRenderHandle||this.disposed||this.destroyed||(this.nextRenderHandle=$((()=>this.renderAndReset())))}calcViewportBoundaries(){const t=this.width,e=this.height,r=ot(this.viewportTransform),n=it({x:0,y:0},r),i=it({x:t,y:e},r),o=n.min(i),s=n.max(i);return this.vptCoords={tl:o,tr:new H(s.x,o.y),bl:new H(o.x,s.y),br:s}}cancelRequestedRender(){var t;this.nextRenderHandle&&(t=this.nextRenderHandle,m().cancelAnimationFrame(t),this.nextRenderHandle=0)}drawControls(t){}renderCanvas(t,e){if(this.destroyed)return;const r=this.viewportTransform,n=this.clipPath;this.calcViewportBoundaries(),this.clearContext(t),t.imageSmoothingEnabled=this.imageSmoothingEnabled,t.patternQuality="best",this.fire("before:render",{ctx:t}),this._renderBackground(t),t.save(),t.transform(r[0],r[1],r[2],r[3],r[4],r[5]),this._renderObjects(t,e),t.restore(),this.controlsAboveOverlay||this.drawControls(t),n&&(n._set("canvas",this),n.shouldCache(),n._transformDone=!0,n.renderCache({forClipping:!0}),this.drawClipPathOnCanvas(t,n)),this._renderOverlay(t),this.controlsAboveOverlay&&this.drawControls(t),this.fire("after:render",{ctx:t}),this.__cleanupTask&&(this.__cleanupTask(),this.__cleanupTask=void 0)}drawClipPathOnCanvas(t,e){const r=this.viewportTransform;t.save(),t.transform(...r),t.globalCompositeOperation="destination-in",e.transform(t),t.scale(1/e.zoomX,1/e.zoomY),t.drawImage(e._cacheCanvas,-e.cacheTranslationX,-e.cacheTranslationY),t.restore()}_renderObjects(t,e){for(let r=0,n=e.length;r<n;++r)e[r]&&e[r].render(t)}_renderBackgroundOrOverlay(t,e){const r=this["".concat(e,"Color")],n=this["".concat(e,"Image")],i=this.viewportTransform,o=this["".concat(e,"Vpt")];if(!r&&!n)return;const s=Pt(r);if(r){if(t.save(),t.beginPath(),t.moveTo(0,0),t.lineTo(this.width,0),t.lineTo(this.width,this.height),t.lineTo(0,this.height),t.closePath(),t.fillStyle=s?r.toLive(t):r,o&&t.transform(...i),s){t.transform(1,0,0,1,r.offsetX||0,r.offsetY||0);const e=r.gradientTransform||r.patternTransform;e&&t.transform(...e)}t.fill(),t.restore()}if(n){t.save();const{skipOffscreen:e}=this;this.skipOffscreen=o,o&&t.transform(...i),n.render(t),this.skipOffscreen=e,t.restore()}}_renderBackground(t){this._renderBackgroundOrOverlay(t,"background")}_renderOverlay(t){this._renderBackgroundOrOverlay(t,"overlay")}getCenter(){return{top:this.height/2,left:this.width/2}}getCenterPoint(){return new H(this.width/2,this.height/2)}centerObjectH(t){return this._centerObject(t,new H(this.getCenterPoint().x,t.getCenterPoint().y))}centerObjectV(t){return this._centerObject(t,new H(t.getCenterPoint().x,this.getCenterPoint().y))}centerObject(t){return this._centerObject(t,this.getCenterPoint())}viewportCenterObject(t){return this._centerObject(t,this.getVpCenter())}viewportCenterObjectH(t){return this._centerObject(t,new H(this.getVpCenter().x,t.getCenterPoint().y))}viewportCenterObjectV(t){return this._centerObject(t,new H(t.getCenterPoint().x,this.getVpCenter().y))}getVpCenter(){return it(this.getCenterPoint(),ot(this.viewportTransform))}_centerObject(t,e){t.setXY(e,E,E),t.setCoords(),this.renderOnAddRemove&&this.requestRenderAll()}toDatalessJSON(t){return this.toDatalessObject(t)}toObject(t){return this._toObjectMethod("toObject",t)}toJSON(){return this.toObject()}toDatalessObject(t){return this._toObjectMethod("toDatalessObject",t)}_toObjectMethod(t,e){const r=this.clipPath,n=r&&!r.excludeFromExport?this._toObject(r,t,e):null;return i(i(i({version:x},mt(this,e)),{},{objects:this._objects.filter((t=>!t.excludeFromExport)).map((r=>this._toObject(r,t,e)))},this.__serializeBgOverlay(t,e)),n?{clipPath:n}:null)}_toObject(t,e,r){let n;this.includeDefaultValues||(n=t.includeDefaultValues,t.includeDefaultValues=!1);const i=t[e](r);return this.includeDefaultValues||(t.includeDefaultValues=!!n),i}__serializeBgOverlay(t,e){const r={},n=this.backgroundImage,i=this.overlayImage,o=this.backgroundColor,s=this.overlayColor;return Pt(o)?o.excludeFromExport||(r.background=o.toObject(e)):o&&(r.background=o),Pt(s)?s.excludeFromExport||(r.overlay=s.toObject(e)):s&&(r.overlay=s),n&&!n.excludeFromExport&&(r.backgroundImage=this._toObject(n,t,e)),i&&!i.excludeFromExport&&(r.overlayImage=this._toObject(i,t,e)),r}toSVG(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0;t.reviver=e;const r=[];return this._setSVGPreamble(r,t),this._setSVGHeader(r,t),this.clipPath&&r.push('<g clip-path="url(#'.concat(this.clipPath.clipPathId,')" >\n')),this._setSVGBgOverlayColor(r,"background"),this._setSVGBgOverlayImage(r,"backgroundImage",e),this._setSVGObjects(r,e),this.clipPath&&r.push("</g>\n"),this._setSVGBgOverlayColor(r,"overlay"),this._setSVGBgOverlayImage(r,"overlayImage",e),r.push("</svg>"),r.join("")}_setSVGPreamble(t,e){e.suppressPreamble||t.push('<?xml version="1.0" encoding="',e.encoding||"UTF-8",'" standalone="no" ?>\n','<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" ','"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">\n')}_setSVGHeader(t,e){const r=e.width||"".concat(this.width),n=e.height||"".concat(this.height),i=h.NUM_FRACTION_DIGITS,o=e.viewBox;let s;if(o)s='viewBox="'.concat(o.x," ").concat(o.y," ").concat(o.width," ").concat(o.height,'" ');else if(this.svgViewportTransformation){const t=this.viewportTransform;s='viewBox="'.concat(kt(-t[4]/t[0],i)," ").concat(kt(-t[5]/t[3],i)," ").concat(kt(this.width/t[0],i)," ").concat(kt(this.height/t[3],i),'" ')}else s='viewBox="0 0 '.concat(this.width," ").concat(this.height,'" ');t.push("<svg ",'xmlns="http://www.w3.org/2000/svg" ','xmlns:xlink="http://www.w3.org/1999/xlink" ','version="1.1" ','width="',r,'" ','height="',n,'" ',s,'xml:space="preserve">\n',"<desc>Created with Fabric.js ",x,"</desc>\n","<defs>\n",this.createSVGFontFacesMarkup(),this.createSVGRefElementsMarkup(),this.createSVGClipPathMarkup(e),"</defs>\n")}createSVGClipPathMarkup(t){const e=this.clipPath;return e?(e.clipPathId="CLIPPATH_".concat(Z()),'<clipPath id="'+e.clipPathId+'" >\n'+this.clipPath.toClipPathSVG(t.reviver)+"</clipPath>\n"):""}createSVGRefElementsMarkup(){return["background","overlay"].map((t=>{const e=this["".concat(t,"Color")];if(Pt(e)){const r=this["".concat(t,"Vpt")],n=this.viewportTransform,i={width:this.width/(r?n[0]:1),height:this.height/(r?n[3]:1)};return e.toSVG(i,{additionalTransform:r?Et(n):""})}})).join("")}createSVGFontFacesMarkup(){const t=[],e={},r=h.fontPaths;this._objects.forEach((function e(r){t.push(r),Lt(r)&&r._objects.forEach(e)})),t.forEach((t=>{if(!Ft(t))return;const{styles:n,fontFamily:i}=t;!e[i]&&r[i]&&(e[i]=!0,n&&Object.values(n).forEach((t=>{Object.values(t).forEach((t=>{let{fontFamily:n=""}=t;!e[n]&&r[n]&&(e[n]=!0)}))})))}));const n=Object.keys(e).map((t=>"\t\t@font-face {\n\t\t\tfont-family: '".concat(t,"';\n\t\t\tsrc: url('").concat(r[t],"');\n\t\t}\n"))).join("");return n?'\t<style type="text/css"><![CDATA[\n'.concat(n,"]]></style>\n"):""}_setSVGObjects(t,e){this.forEachObject((r=>{r.excludeFromExport||this._setSVGObject(t,r,e)}))}_setSVGObject(t,e,r){t.push(e.toSVG(r))}_setSVGBgOverlayImage(t,e,r){const n=this[e];n&&!n.excludeFromExport&&n.toSVG&&t.push(n.toSVG(r))}_setSVGBgOverlayColor(t,e){const r=this["".concat(e,"Color")];if(r)if(Pt(r)){const n=r.repeat||"",i=this.width,o=this.height,s=this["".concat(e,"Vpt")]?Et(ot(this.viewportTransform)):"";t.push('<rect transform="'.concat(s," translate(").concat(i/2,",").concat(o/2,')" x="').concat(r.offsetX-i/2,'" y="').concat(r.offsetY-o/2,'" width="').concat("repeat-y"!==n&&"no-repeat"!==n||!Rt(r)?i:r.source.width,'" height="').concat("repeat-x"!==n&&"no-repeat"!==n||!Rt(r)?o:r.source.height,'" fill="url(#SVGID_').concat(r.id,')"></rect>\n'))}else t.push('<rect x="0" y="0" width="100%" height="100%" ','fill="',r,'"',"></rect>\n")}loadFromJSON(t,e){let{signal:r}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!t)return Promise.reject(new Error("fabric.js: `json` is undefined"));const n="string"==typeof t?JSON.parse(t):t,{objects:i=[],backgroundImage:o,background:s,overlayImage:a,overlay:c,clipPath:l}=n,u=this.renderOnAddRemove;return this.renderOnAddRemove=!1,Promise.all([_t(i,{reviver:e,signal:r}),yt({backgroundImage:o,backgroundColor:s,overlayImage:a,overlayColor:c,clipPath:l},{signal:r})]).then((t=>{let[e,r]=t;return this.clear(),this.add(...e),this.set(n),this.set(r),this.renderOnAddRemove=u,this}))}clone(t){const e=this.toObject(t);return this.cloneWithoutData().loadFromJSON(e)}cloneWithoutData(){const t=Q();return t.width=this.width,t.height=this.height,new this.constructor(t)}toDataURL(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{format:e="png",quality:r=1,multiplier:n=1,enableRetinaScaling:i=!1}=t,o=n*(i?this.getRetinaScaling():1);return tt(this.toCanvasElement(o,t),e,r)}toCanvasElement(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,{width:e,height:r,left:n,top:i,filter:o}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const s=(e||this.width)*t,a=(r||this.height)*t,c=this.getZoom(),l=this.width,u=this.height,h=c*t,f=this.viewportTransform,d=[h,0,0,h,(f[4]-(n||0))*t,(f[5]-(i||0))*t],p=this.enableRetinaScaling,g=Q(),v=o?this._objects.filter((t=>o(t))):this._objects;return g.width=s,g.height=a,this.enableRetinaScaling=!1,this.viewportTransform=d,this.width=s,this.height=a,this.calcViewportBoundaries(),this.renderCanvas(g.getContext("2d"),v),this.viewportTransform=f,this.width=l,this.height=u,this.calcViewportBoundaries(),this.enableRetinaScaling=p,g}dispose(){return!this.disposed&&this.elements.cleanupDOM({width:this.width,height:this.height}),this.disposed=!0,new Promise(((t,e)=>{const r=()=>{this.destroy(),t(!0)};r.kill=e,this.__cleanupTask&&this.__cleanupTask.kill("aborted"),this.destroyed?t(!1):this.nextRenderHandle?this.__cleanupTask=r:r()}))}destroy(){this.destroyed=!0,this.cancelRequestedRender(),this.forEachObject((t=>t.dispose())),this._objects=[],this.backgroundImage&&this.backgroundImage.dispose(),this.backgroundImage=null,this.overlayImage&&this.overlayImage.dispose(),this.overlayImage=null,this.elements.dispose()}toString(){return"#<Canvas (".concat(this.complexity(),"): { objects: ").concat(this._objects.length," }>")}}o(qt,"ownDefaults",Gt);const Kt=["touchstart","touchmove","touchend"],$t=t=>Kt.indexOf(t.type)>-1||"touch"===t.pointerType,Jt=t=>{t.preventDefault(),t.stopPropagation()},Zt=t=>{if(0===t.length)return{left:0,top:0,width:0,height:0};const{min:e,max:r}=t.reduce(((t,e)=>{let{min:r,max:n}=t;return{min:r.min(e),max:n.max(e)}}),{min:new H(t[0]),max:new H(t[0])}),n=r.subtract(e);return{left:e.x,top:e.y,width:n.x,height:n.y}},Qt=["translateX","translateY","scaleX","scaleY"],te=(t,e)=>{const r=ct(e),{translateX:n,translateY:i,scaleX:o,scaleY:s}=r,c=a(r,Qt),l=new H(n,i);t.flipX=!1,t.flipY=!1,Object.assign(t,c),t.set({scaleX:o,scaleY:s}),t.setPositionByOrigin(l,E,E)},ee=t=>{t.scaleX=1,t.scaleY=1,t.skewX=0,t.skewY=0,t.flipX=!1,t.flipY=!1,t.rotate(0)},re=t=>({scaleX:t.scaleX,scaleY:t.scaleY,skewX:t.skewX,skewY:t.skewY,angle:t.angle,left:t.left,flipX:t.flipX,flipY:t.flipY,top:t.top}),ne=(t,e,r)=>{const n=t/2,i=e/2,o=gt(r),s=[new H(-n,-i),new H(n,-i),new H(-n,i),new H(n,i)].map((t=>t.transform(o))),a=Zt(s);return new H(a.width,a.height)},ie=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:T;return st(ot(arguments.length>1&&void 0!==arguments[1]?arguments[1]:T),t)},oe=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:T,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:T;return t.transform(ie(e,r))},se=(t,e)=>{var r;const{transform:{target:n}}=e;null===(r=n.canvas)||void 0===r||r.fire("object:".concat(t),i(i({},e),{},{target:n})),n.fire(t,e)},ae={left:-.5,top:-.5,center:0,bottom:.5,right:.5},ce=t=>"string"==typeof t?ae[t]:t-.5,le="not-allowed";function ue(t){return t.originX===E&&t.originY===E}function he(t){return.5-ce(t)}const fe=(t,e)=>t[e],de=(t,e,r,n)=>({e:t,transform:e,pointer:new H(r,n)});function pe(t,e){const r=t.getTotalAngle()+rt(Math.atan2(e.y,e.x))+360;return Math.round(r%360/45)}function ge(t,e,r,n,i){var o;let{target:s,corner:a}=t;const c=s.controls[a],l=(null===(o=s.canvas)||void 0===o?void 0:o.getZoom())||1,u=s.padding/l,h=function(t,e,r,n){const i=t.getRelativeCenterPoint(),o=void 0!==r&&void 0!==n?t.translateToGivenOrigin(i,E,E,r,n):new H(t.left,t.top);return(t.angle?e.rotate(-et(t.angle),i):e).subtract(o)}(s,new H(n,i),e,r);return h.x>=u&&(h.x-=u),h.x<=-u&&(h.x+=u),h.y>=u&&(h.y-=u),h.y<=u&&(h.y+=u),h.x-=c.offsetX,h.y-=c.offsetY,h}const ve=(t,e,r,n)=>{const{target:i,offsetX:o,offsetY:s}=e,a=r-o,c=n-s,l=!fe(i,"lockMovementX")&&i.left!==a,u=!fe(i,"lockMovementY")&&i.top!==c;return l&&i.set(M,a),u&&i.set(P,c),(l||u)&&se("moving",de(t,e,r,n)),l||u};class _e{getSvgStyles(t){const e=this.fillRule?this.fillRule:"nonzero",r=this.strokeWidth?this.strokeWidth:"0",n=this.strokeDashArray?this.strokeDashArray.join(" "):L,i=this.strokeDashOffset?this.strokeDashOffset:"0",o=this.strokeLineCap?this.strokeLineCap:"butt",s=this.strokeLineJoin?this.strokeLineJoin:"miter",a=this.strokeMiterLimit?this.strokeMiterLimit:"4",c=void 0!==this.opacity?this.opacity:"1",l=this.visible?"":" visibility: hidden;",u=t?"":this.getSvgFilter(),h=Mt("fill",this.fill);return[Mt("stroke",this.stroke),"stroke-width: ",r,"; ","stroke-dasharray: ",n,"; ","stroke-linecap: ",o,"; ","stroke-dashoffset: ",i,"; ","stroke-linejoin: ",s,"; ","stroke-miterlimit: ",a,"; ",h,"fill-rule: ",e,"; ","opacity: ",c,";",u,l].join("")}getSvgSpanStyles(t,e){const r="; ",n=t.fontFamily?"font-family: ".concat(-1===t.fontFamily.indexOf("'")&&-1===t.fontFamily.indexOf('"')?"'".concat(t.fontFamily,"'"):t.fontFamily).concat(r):"",i=t.strokeWidth?"stroke-width: ".concat(t.strokeWidth).concat(r):"",o=t.fontSize?"font-size: ".concat(t.fontSize,"px").concat(r):"",s=t.fontStyle?"font-style: ".concat(t.fontStyle).concat(r):"",a=t.fontWeight?"font-weight: ".concat(t.fontWeight).concat(r):"",c=t.fill?Mt("fill",t.fill):"",l=t.stroke?Mt("stroke",t.stroke):"",u=this.getSvgTextDecoration(t),h=t.deltaY?"baseline-shift: ".concat(-t.deltaY,"; "):"";return[l,i,n,o,s,a,u?"text-decoration: ".concat(u).concat(r):u,c,h,e?"white-space: pre; ":""].join("")}getSvgTextDecoration(t){return["overline","underline","line-through"].filter((e=>t[e.replace("-","")])).join(" ")}getSvgFilter(){return this.shadow?"filter: url(#SVGID_".concat(this.shadow.id,");"):""}getSvgCommons(){return[this.id?'id="'.concat(this.id,'" '):"",this.clipPath?'clip-path="url(#'.concat(this.clipPath.clipPathId,')" '):""].join("")}getSvgTransform(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";const r=t?this.calcTransformMatrix():this.calcOwnMatrix(),n='transform="'.concat(Et(r));return"".concat(n).concat(e,'" ')}toSVG(t){return this._createBaseSVGMarkup(this._toSVG(t),{reviver:t})}toClipPathSVG(t){return"\t"+this._createBaseClipPathSVGMarkup(this._toSVG(t),{reviver:t})}_createBaseClipPathSVGMarkup(t){let{reviver:e,additionalTransform:r=""}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=[this.getSvgTransform(!0,r),this.getSvgCommons()].join(""),i=t.indexOf("COMMON_PARTS");return t[i]=n,e?e(t.join("")):t.join("")}_createBaseSVGMarkup(t){let{noStyle:e,reviver:r,withShadow:n,additionalTransform:i}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const o=e?"":'style="'.concat(this.getSvgStyles(),'" '),s=n?'style="'.concat(this.getSvgFilter(),'" '):"",a=this.clipPath,c=this.strokeUniform?'vector-effect="non-scaling-stroke" ':"",l=a&&a.absolutePositioned,u=this.stroke,h=this.fill,f=this.shadow,d=[],p=t.indexOf("COMMON_PARTS");let g;a&&(a.clipPathId="CLIPPATH_".concat(Z()),g='<clipPath id="'.concat(a.clipPathId,'" >\n').concat(a.toClipPathSVG(r),"</clipPath>\n")),l&&d.push("<g ",s,this.getSvgCommons()," >\n"),d.push("<g ",this.getSvgTransform(!1),l?"":s+this.getSvgCommons()," >\n");const v=[o,c,e?"":this.addPaintOrder()," ",i?'transform="'.concat(i,'" '):""].join("");return t[p]=v,h&&h.toLive&&d.push(h.toSVG(this)),u&&u.toLive&&d.push(u.toSVG(this)),f&&d.push(f.toSVG(this)),a&&d.push(g),d.push(t.join("")),d.push("</g>\n"),l&&d.push("</g>\n"),r?r(d.join("")):d.join("")}addPaintOrder(){return"fill"!==this.paintFirst?' paint-order="'.concat(this.paintFirst,'" '):""}}const ye=(t,e,r,n)=>-r*Math.cos(t/n*S)+r+e,me=()=>!1;class be{constructor(t){let{startValue:e,byValue:r,duration:n=500,delay:i=0,easing:s=ye,onStart:a=w,onChange:c=w,onComplete:l=w,abort:u=me,target:h}=t;o(this,"_state","pending"),o(this,"durationProgress",0),o(this,"valueProgress",0),this.tick=this.tick.bind(this),this.duration=n,this.delay=i,this.easing=s,this._onStart=a,this._onChange=c,this._onComplete=l,this._abort=u,this.target=h,this.startValue=e,this.byValue=r,this.value=this.startValue,this.endValue=Object.freeze(this.calculate(this.duration).value)}get state(){return this._state}isDone(){return"aborted"===this._state||"completed"===this._state}start(){const t=t=>{"pending"===this._state&&(this.startTime=t||+new Date,this._state="running",this._onStart(),this.tick(this.startTime))};this.register(),this.delay>0?setTimeout((()=>$(t)),this.delay):$(t)}tick(t){const e=(t||+new Date)-this.startTime,r=Math.min(e,this.duration);this.durationProgress=r/this.duration;const{value:n,valueProgress:i}=this.calculate(r);this.value=Object.freeze(n),this.valueProgress=i,"aborted"!==this._state&&(this._abort(this.value,this.valueProgress,this.durationProgress)?(this._state="aborted",this.unregister()):e>=this.duration?(this.durationProgress=this.valueProgress=1,this._onChange(this.endValue,this.valueProgress,this.durationProgress),this._state="completed",this._onComplete(this.endValue,this.valueProgress,this.durationProgress),this.unregister()):(this._onChange(this.value,this.valueProgress,this.durationProgress),$(this.tick)))}register(){V.push(this)}unregister(){V.remove(this)}abort(){this._state="aborted",this.unregister()}}const xe=["startValue","endValue"];class we extends be{constructor(t){let{startValue:e=0,endValue:r=100}=t;super(i(i({},a(t,xe)),{},{startValue:e,byValue:r-e}))}calculate(t){const e=this.easing(t,this.startValue,this.byValue,this.duration);return{value:e,valueProgress:Math.abs((e-this.startValue)/this.byValue)}}}const Se=["startValue","endValue"];class Ce extends be{constructor(t){let{startValue:e=[0],endValue:r=[100]}=t;super(i(i({},a(t,Se)),{},{startValue:e,byValue:r.map(((t,r)=>t-e[r]))}))}calculate(t){const e=this.startValue.map(((e,r)=>this.easing(t,e,this.byValue[r],this.duration,r)));return{value:e,valueProgress:Math.abs((e[0]-this.startValue[0])/this.byValue[0])}}}const Oe=(t,e,r)=>Math.max(t,Math.min(e,r)),Te=["startValue","endValue","easing","onChange","onComplete","abort"],je=(t,e,r,n)=>e+r*(1-Math.cos(t/n*S)),ke=t=>t&&((e,r,n)=>t(new jt(e).toRgba(),r,n));class Ae extends be{constructor(t){let{startValue:e,endValue:r,easing:n=je,onChange:o,onComplete:s,abort:c}=t,l=a(t,Te);const u=new jt(e).getSource(),h=new jt(r).getSource();super(i(i({},l),{},{startValue:u,byValue:h.map(((t,e)=>t-u[e])),easing:n,onChange:ke(o),onComplete:ke(s),abort:ke(c)}))}calculate(t){const[e,r,n,i]=this.startValue.map(((e,r)=>this.easing(t,e,this.byValue[r],this.duration,r))),o=[...[e,r,n].map(Math.round),Oe(0,i,1)];return{value:o,valueProgress:o.map(((t,e)=>0!==this.byValue[e]?Math.abs((t-this.startValue[e])/this.byValue[e]):0)).find((t=>0!==t))||0}}}function Ee(t){const e=(t=>Array.isArray(t.startValue)||Array.isArray(t.endValue))(t)?new Ce(t):new we(t);return e.start(),e}const Me=new H(1,0),Pe=(t,e)=>t.rotate(e),De=(t,e)=>new H(e).subtract(t),Re=t=>t.distanceFrom(new H),Le=(t,e)=>{const r=t.x*e.x+t.y*e.y,n=t.x*e.y-t.y*e.x;return Math.atan2(n,r)},Fe=t=>t.scalarDivide(Re(t)),Be=(t,e,r)=>{const n=De(t,e),i=De(t,r),o=Le(n,i);return{vector:Fe(Pe(n,o/2)),angle:o}},Ie=function(t){let e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return Fe(new H(-t.y,t.x).scalarMultiply(e?1:-1))};class Ne{constructor(t){this.status=t,this.points=[]}includes(t){return this.points.some((e=>e.eq(t)))}append(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return this.points=this.points.concat(e.filter((t=>!this.includes(t)))),this}static isPointContained(t,e,r){let n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(e.eq(r))return t.eq(e);if(e.x===r.x)return t.x===e.x&&(n||t.y>=Math.min(e.y,r.y)&&t.y<=Math.max(e.y,r.y));if(e.y===r.y)return t.y===e.y&&(n||t.x>=Math.min(e.x,r.x)&&t.x<=Math.max(e.x,r.x));{const i=De(e,r),o=De(e,t).divide(i);return n?Math.abs(o.x)===Math.abs(o.y):o.x===o.y&&o.x>=0&&o.x<=1}}static intersectLineLine(t,e,r,n){let i=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],o=!(arguments.length>5&&void 0!==arguments[5])||arguments[5];const s=e.x-t.x,a=e.y-t.y,c=n.x-r.x,l=n.y-r.y,u=t.x-r.x,h=t.y-r.y,f=c*h-l*u,d=s*h-a*u,p=l*s-c*a;if(0!==p){const e=f/p,r=d/p;return(i||0<=e&&e<=1)&&(o||0<=r&&r<=1)?new Ne("Intersection").append(new H(t.x+e*s,t.y+e*a)):new Ne}if(0===f||0===d){const s=i||o||Ne.isPointContained(t,r,n)||Ne.isPointContained(e,r,n)||Ne.isPointContained(r,t,e)||Ne.isPointContained(n,t,e);return new Ne(s?"Coincident":void 0)}return new Ne("Parallel")}static intersectSegmentLine(t,e,r,n){return Ne.intersectLineLine(t,e,r,n,!1,!0)}static intersectSegmentSegment(t,e,r,n){return Ne.intersectLineLine(t,e,r,n,!1,!1)}static intersectLinePolygon(t,e,r){let n=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];const i=new Ne,o=r.length;for(let s,a,c,l=0;l<o;l++){if(s=r[l],a=r[(l+1)%o],c=Ne.intersectLineLine(t,e,s,a,n,!1),"Coincident"===c.status)return c;i.append(...c.points)}return i.points.length>0&&(i.status="Intersection"),i}static intersectSegmentPolygon(t,e,r){return Ne.intersectLinePolygon(t,e,r,!1)}static intersectPolygonPolygon(t,e){const r=new Ne,n=t.length,i=[];for(let o=0;o<n;o++){const s=t[o],a=t[(o+1)%n],c=Ne.intersectSegmentPolygon(s,a,e);"Coincident"===c.status?(i.push(c),r.append(s,a)):r.append(...c.points)}return i.length>0&&i.length===t.length?new Ne("Coincident"):(r.points.length>0&&(r.status="Intersection"),r)}static intersectPolygonRectangle(t,e,r){const n=e.min(r),i=e.max(r),o=new H(i.x,n.y),s=new H(n.x,i.y);return Ne.intersectPolygonPolygon(t,[n,o,i,s])}}class Ve extends K{_getTransformedDimensions(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const e=i({scaleX:this.scaleX,scaleY:this.scaleY,skewX:this.skewX,skewY:this.skewY,width:this.width,height:this.height,strokeWidth:this.strokeWidth},t),r=e.strokeWidth;let n=r,o=0;this.strokeUniform&&(n=0,o=r);const s=e.width+n,a=e.height+n;let c;return c=0===e.skewX&&0===e.skewY?new H(s*e.scaleX,a*e.scaleY):ne(s,a,e),c.scalarAdd(o)}translateToGivenOrigin(t,e,r,n,i){let o=t.x,s=t.y;const a=ce(n)-ce(e),c=ce(i)-ce(r);if(a||c){const t=this._getTransformedDimensions();o+=a*t.x,s+=c*t.y}return new H(o,s)}translateToCenterPoint(t,e,r){const n=this.translateToGivenOrigin(t,e,r,E,E);return this.angle?n.rotate(et(this.angle),t):n}translateToOriginPoint(t,e,r){const n=this.translateToGivenOrigin(t,E,E,e,r);return this.angle?n.rotate(et(this.angle),t):n}getCenterPoint(){const t=this.getRelativeCenterPoint();return this.group?it(t,this.group.calcTransformMatrix()):t}getRelativeCenterPoint(){return this.translateToCenterPoint(new H(this.left,this.top),this.originX,this.originY)}getPointByOrigin(t,e){return this.translateToOriginPoint(this.getRelativeCenterPoint(),t,e)}setPositionByOrigin(t,e,r){const n=this.translateToCenterPoint(t,e,r),i=this.translateToOriginPoint(n,this.originX,this.originY);this.set({left:i.x,top:i.y})}_setOriginToCenter(){this._originalOriginX=this.originX,this._originalOriginY=this.originY;const t=this.getRelativeCenterPoint();this.originX=E,this.originY=E,this.left=t.x,this.top=t.y}_resetOrigin(){if(void 0!==this._originalOriginX&&void 0!==this._originalOriginY){const t=this.translateToOriginPoint(this.getRelativeCenterPoint(),this._originalOriginX,this._originalOriginY);this.left=t.x,this.top=t.y,this.originX=this._originalOriginX,this.originY=this._originalOriginY,this._originalOriginX=void 0,this._originalOriginY=void 0}}_getLeftTopCoords(){return this.translateToOriginPoint(this.getRelativeCenterPoint(),M,P)}}class We extends Ve{getX(){return this.getXY().x}setX(t){this.setXY(this.getXY().setX(t))}getY(){return this.getXY().y}setY(t){this.setXY(this.getXY().setY(t))}getRelativeX(){return this.left}setRelativeX(t){this.left=t}getRelativeY(){return this.top}setRelativeY(t){this.top=t}getXY(){const t=this.getRelativeXY();return this.group?it(t,this.group.calcTransformMatrix()):t}setXY(t,e,r){this.group&&(t=it(t,ot(this.group.calcTransformMatrix()))),this.setRelativeXY(t,e,r)}getRelativeXY(){return new H(this.left,this.top)}setRelativeXY(t,e,r){this.setPositionByOrigin(t,e||this.originX,r||this.originY)}_getCoords(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return arguments.length>1&&void 0!==arguments[1]&&arguments[1]?t?this.calcACoords():this.calcLineCoords():(this.aCoords||(this.aCoords=this.calcACoords()),this.lineCoords||(this.lineCoords=this.calcLineCoords()),t?this.aCoords:this.lineCoords)}getCoords(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const{tl:r,tr:n,br:i,bl:o}=this._getCoords(t,e),s=[r,n,i,o];if(this.group){const t=this.group.calcTransformMatrix();return s.map((e=>it(e,t)))}return s}intersectsWithRect(t,e,r,n){const i=this.getCoords(r,n);return"Intersection"===Ne.intersectPolygonRectangle(i,t,e).status}intersectsWithObject(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const n=Ne.intersectPolygonPolygon(this.getCoords(e,r),t.getCoords(e,r));return"Intersection"===n.status||"Coincident"===n.status||t.isContainedWithinObject(this,e,r)||this.isContainedWithinObject(t,e,r)}isContainedWithinObject(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const n=this.getCoords(e,r),i=e?t.aCoords:t.lineCoords,o=t._getImageLines(i);for(let e=0;e<4;e++)if(!t.containsPoint(n[e],o))return!1;return!0}isContainedWithinRect(t,e,r,n){const i=this.getBoundingRect(r,n);return i.left>=t.x&&i.left+i.width<=e.x&&i.top>=t.y&&i.top+i.height<=e.y}isOverlapping(t){return this.intersectsWithObject(t)||this.isContainedWithinObject(t)||t.isContainedWithinObject(this)}containsPoint(t,e){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=this._getCoords(r,n),o=e||this._getImageLines(i),s=this._findCrossPoints(t,o);return 0!==s&&s%2==1}isOnScreen(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.canvas)return!1;const{tl:e,br:r}=this.canvas.vptCoords;return!!this.getCoords(!0,t).some((t=>t.x<=r.x&&t.x>=e.x&&t.y<=r.y&&t.y>=e.y))||!!this.intersectsWithRect(e,r,!0,t)||this._containsCenterOfCanvas(e,r,t)}_containsCenterOfCanvas(t,e,r){const n=t.midPointFrom(e);return this.containsPoint(n,void 0,!0,r)}isPartiallyOnScreen(t){if(!this.canvas)return!1;const{tl:e,br:r}=this.canvas.vptCoords;return!!this.intersectsWithRect(e,r,!0,t)||this.getCoords(!0,t).every((t=>(t.x>=r.x||t.x<=e.x)&&(t.y>=r.y||t.y<=e.y)))&&this._containsCenterOfCanvas(e,r,t)}_getImageLines(t){let{tl:e,tr:r,bl:n,br:i}=t;return{topline:{o:e,d:r},rightline:{o:r,d:i},bottomline:{o:i,d:n},leftline:{o:n,d:e}}}_findCrossPoints(t,e){let r=0;for(const n in e){let i;const o=e[n];if(!(o.o.y<t.y&&o.d.y<t.y||o.o.y>=t.y&&o.d.y>=t.y)){if(o.o.x===o.d.x&&o.o.x>=t.x)i=o.o.x;else{const e=0,r=(o.d.y-o.o.y)/(o.d.x-o.o.x);i=-(t.y-e*t.x-(o.o.y-r*o.o.x))/(e-r)}if(i>=t.x&&(r+=1),2===r)break}}return r}getBoundingRect(t,e){return Zt(this.getCoords(t,e))}getScaledWidth(){return this._getTransformedDimensions().x}getScaledHeight(){return this._getTransformedDimensions().y}scale(t){this._set("scaleX",t),this._set("scaleY",t),this.setCoords()}scaleToWidth(t,e){const r=this.getBoundingRect(e).width/this.getScaledWidth();return this.scale(t/this.width/r)}scaleToHeight(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const r=this.getBoundingRect(e).height/this.getScaledHeight();return this.scale(t/this.height/r)}getCanvasRetinaScaling(){var t;return(null===(t=this.canvas)||void 0===t?void 0:t.getRetinaScaling())||1}getTotalAngle(){return this.group?ct(this.calcTransformMatrix()).angle:this.angle}calcLineCoords(){const t=this.getViewportTransform(),e=this.padding,r=et(this.getTotalAngle()),n=X(r)*e,i=Y(r)*e,o=n+i,s=n-i,{tl:a,tr:c,bl:l,br:u}=this.calcACoords(),h={tl:it(a,t),tr:it(c,t),bl:it(l,t),br:it(u,t)};return e&&(h.tl.x-=s,h.tl.y-=o,h.tr.x+=o,h.tr.y-=s,h.bl.x-=o,h.bl.y+=s,h.br.x+=s,h.br.y+=o),h}getViewportTransform(){var t;return(null===(t=this.canvas)||void 0===t?void 0:t.viewportTransform)||T.concat()}calcACoords(){const t=ut({angle:this.angle}),{x:e,y:r}=this.getRelativeCenterPoint(),n=lt(e,r),i=st(n,t),o=this._getTransformedDimensions(),s=o.x/2,a=o.y/2;return{tl:it({x:-s,y:-a},i),tr:it({x:s,y:-a},i),bl:it({x:-s,y:a},i),br:it({x:s,y:a},i)}}setCoords(){this.aCoords=this.calcACoords(),this.lineCoords=this.group?this.aCoords:this.calcLineCoords()}transformMatrixKey(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const e="_";let r="";return!t&&this.group&&(r=this.group.transformMatrixKey(t)+e),r+this.top+e+this.left+e+this.scaleX+e+this.scaleY+e+this.skewX+e+this.skewY+e+this.angle+e+this.originX+e+this.originY+e+this.width+e+this.height+e+this.strokeWidth+this.flipX+this.flipY}calcTransformMatrix(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=this.calcOwnMatrix();if(t||!this.group)return e;const r=this.transformMatrixKey(t),n=this.matrixCache;return n&&n.key===r?n.value:(this.group&&(e=st(this.group.calcTransformMatrix(!1),e)),this.matrixCache={key:r,value:e},e)}calcOwnMatrix(){const t=this.transformMatrixKey(!0),e=this.ownMatrixCache;if(e&&e.key===t)return e.value;const r=this.getRelativeCenterPoint(),n=(t=>{let{translateX:e=0,translateY:r=0,angle:n=0}=t,i=a(t,nt);return at([lt(e,r),n&&ut({angle:n}),gt(i)])})({angle:this.angle,translateX:r.x,translateY:r.y,scaleX:this.scaleX,scaleY:this.scaleY,skewX:this.skewX,skewY:this.skewY,flipX:this.flipX,flipY:this.flipY});return this.ownMatrixCache={key:t,value:n},n}_getNonTransformedDimensions(){return new H(this.width,this.height).scalarAdd(this.strokeWidth)}_calculateCurrentDimensions(t){return this._getTransformedDimensions(t).transform(this.getViewportTransform(),!0).scalarAdd(2*this.padding)}}class Ue extends We{getParent(t){return((e=this.group)&&e.isType("ActiveSelection")?this.__owningGroup:this.group)||(t?void 0:this.canvas);var e}isDescendantOf(t){return this.__owningGroup===t||this.group===t||this.canvas===t||!!this.__owningGroup&&this.__owningGroup.isDescendantOf(t)||!!this.group&&this.group.isDescendantOf(t)}getAncestors(t){const e=[];let r=this;do{r=r instanceof Ue?r.getParent(t):void 0,r&&e.push(r)}while(r);return e}findCommonAncestors(t,e){if(this===t)return{fork:[],otherFork:[],common:[this,...this.getAncestors(e)]};const r=this.getAncestors(e),n=t.getAncestors(e);if(0===r.length&&n.length>0&&this===n[n.length-1])return{fork:[],otherFork:[t,...n.slice(0,n.length-1)],common:[this]};for(let e,i=0;i<r.length;i++){if(e=r[i],e===t)return{fork:[this,...r.slice(0,i)],otherFork:[],common:r.slice(i)};for(let o=0;o<n.length;o++){if(this===n[o])return{fork:[],otherFork:[t,...n.slice(0,o)],common:[this,...r]};if(e===n[o])return{fork:[this,...r.slice(0,i)],otherFork:[t,...n.slice(0,o)],common:r.slice(i)}}}return{fork:[this,...r],otherFork:[t,...n],common:[]}}hasCommonAncestors(t,e){const r=this.findCommonAncestors(t,e);return r&&!!r.common.length}isInFrontOf(t){if(this===t)return;const e=this.findCommonAncestors(t);if(!e)return;if(e.fork.includes(t))return!0;if(e.otherFork.includes(this))return!1;const r=e.common[0];if(!r)return;const n=e.fork.pop(),i=e.otherFork.pop(),o=r._objects.indexOf(n),s=r._objects.indexOf(i);return o>-1&&o>s}}class ze extends Ue{animate(t,e){return Object.entries(t).reduce(((t,r)=>{let[n,i]=r;return t[n]=this._animate(n,i,e),t}),{})}_animate(t,e){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const n=t.split("."),i=this.colorProperties.includes(n[n.length-1]),{easing:o,duration:s,abort:a,startValue:c,onChange:l,onComplete:u}=r,h={target:this,startValue:null!=c?c:n.reduce(((t,e)=>t[e]),this),endValue:e,easing:o,duration:s,abort:null==a?void 0:a.bind(this),onChange:(t,e,r)=>{n.reduce(((e,r,i)=>(i===n.length-1&&(e[r]=t),e[r])),this),l&&l(t,e,r)},onComplete:(t,e,r)=>{this.setCoords(),u&&u(t,e,r)}};return i?function(t){const e=new Ae(t);return e.start(),e}(h):Ee(h)}}class Xe{constructor(t){const e="string"==typeof t?Xe.parseShadow(t):t;Object.assign(this,this.constructor.ownDefaults);for(const t in e)this[t]=e[t];this.id=Z()}static parseShadow(t){const e=t.trim(),[r,n=0,i=0,o=0]=(Xe.reOffsetsAndBlur.exec(e)||[]).map((t=>parseFloat(t)||0));return{color:(e.replace(Xe.reOffsetsAndBlur,"")||"rgb(0,0,0)").trim(),offsetX:n,offsetY:i,blur:o}}toString(){return[this.offsetX,this.offsetY,this.blur,this.color].join("px ")}toSVG(t){const e=Pe(new H(this.offsetX,this.offsetY),et(-t.angle)),r=new jt(this.color);let n=40,i=40;return t.width&&t.height&&(n=100*kt((Math.abs(e.x)+this.blur)/t.width,h.NUM_FRACTION_DIGITS)+20,i=100*kt((Math.abs(e.y)+this.blur)/t.height,h.NUM_FRACTION_DIGITS)+20),t.flipX&&(e.x*=-1),t.flipY&&(e.y*=-1),'<filter id="SVGID_'.concat(this.id,'" y="-').concat(i,'%" height="').concat(100+2*i,'%" x="-').concat(n,'%" width="').concat(100+2*n,'%" >\n\t<feGaussianBlur in="SourceAlpha" stdDeviation="').concat(kt(this.blur?this.blur/2:0,h.NUM_FRACTION_DIGITS),'"></feGaussianBlur>\n\t<feOffset dx="').concat(kt(e.x,h.NUM_FRACTION_DIGITS),'" dy="').concat(kt(e.y,h.NUM_FRACTION_DIGITS),'" result="oBlur" ></feOffset>\n\t<feFlood flood-color="').concat(r.toRgb(),'" flood-opacity="').concat(r.getAlpha(),'"/>\n\t<feComposite in2="oBlur" operator="in" />\n\t<feMerge>\n\t\t<feMergeNode></feMergeNode>\n\t\t<feMergeNode in="SourceGraphic"></feMergeNode>\n\t</feMerge>\n</filter>\n')}toObject(){const t={color:this.color,blur:this.blur,offsetX:this.offsetX,offsetY:this.offsetY,affectStroke:this.affectStroke,nonScaling:this.nonScaling},e=Xe.ownDefaults;return this.includeDefaultValues?t:bt(t,((t,r)=>t!==e[r]))}}o(Xe,"ownDefaults",{color:"rgb(0,0,0)",blur:0,offsetX:0,offsetY:0,affectStroke:!1,includeDefaultValues:!0,nonScaling:!1}),o(Xe,"reOffsetsAndBlur",/(?:\s|^)(-?\d+(?:\.\d*)?(?:px)?(?:\s?|$))?(-?\d+(?:\.\d*)?(?:px)?(?:\s?|$))?(\d+(?:\.\d*)?(?:px)?)?(?:\s?|$)(?:$|\s)/);const Ye=t=>JSON.parse(JSON.stringify(t)),He=[P,M,"scaleX","scaleY","flipX","flipY","originX","originY","angle","opacity","globalCompositeOperation","shadow","visible","skewX","skewY"],Ge=["fill","stroke","strokeWidth","strokeDashArray","width","height","paintFirst","strokeUniform","strokeLineCap","strokeDashOffset","strokeLineJoin","strokeMiterLimit","backgroundColor","clipPath"],qe={originX:M,originY:P,top:0,left:0,width:0,height:0,scaleX:1,scaleY:1,flipX:!1,flipY:!1,opacity:1,angle:0,skewX:0,skewY:0,cornerSize:13,touchCornerSize:24,transparentCorners:!0,hoverCursor:null,moveCursor:null,padding:0,borderColor:"rgb(178,204,255)",borderDashArray:null,cornerColor:"rgb(178,204,255)",cornerStrokeColor:"",cornerStyle:"rect",cornerDashArray:null,centeredScaling:!1,centeredRotation:!0,fill:"rgb(0,0,0)",fillRule:"nonzero",globalCompositeOperation:"source-over",backgroundColor:"",selectionBackgroundColor:"",stroke:null,strokeWidth:1,strokeDashArray:null,strokeDashOffset:0,strokeLineCap:"butt",strokeLineJoin:"miter",strokeMiterLimit:4,shadow:null,borderOpacityWhenMoving:.4,borderScaleFactor:1,minScaleLimit:0,selectable:!0,evented:!0,visible:!0,hasControls:!0,hasBorders:!0,perPixelTargetFind:!1,includeDefaultValues:!0,lockMovementX:!1,lockMovementY:!1,lockRotation:!1,lockScalingX:!1,lockScalingY:!1,lockSkewingX:!1,lockSkewingY:!1,lockScalingFlip:!1,excludeFromExport:!1,objectCaching:!0,noScaleCache:!0,strokeUniform:!1,dirty:!0,paintFirst:"fill",activeOn:"down",colorProperties:["fill","stroke","backgroundColor"],clipPath:void 0,inverted:!1,absolutePositioned:!1,FX_DURATION:500},Ke=["extraParam"];let $e=class t extends ze{static getDefaults(){return i({},t.ownDefaults)}get type(){const t=this.constructor.type;return"FabricObject"===t?"object":t.toLowerCase()}set type(t){console.warn("Setting type has no effect",t)}constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),o(this,"_cacheContext",null),Object.assign(this,this.constructor.getDefaults()),this.setOptions(t)}_createCacheCanvas(){this._cacheCanvas=Q(),this._cacheContext=this._cacheCanvas.getContext("2d"),this._updateCacheCanvas(),this.dirty=!0}_limitCacheSize(t){const e=t.width,r=t.height,n=h.maxCacheSideLimit,i=h.minCacheSideLimit;if(e<=n&&r<=n&&e*r<=h.perfLimitSizeTotal)return e<i&&(t.width=i),r<i&&(t.height=i),t;const o=e/r,[s,a]=b.limitDimsByArea(o),c=Oe(i,s,n),l=Oe(i,a,n);return e>c&&(t.zoomX/=e/c,t.width=c,t.capped=!0),r>l&&(t.zoomY/=r/l,t.height=l,t.capped=!0),t}_getCacheCanvasDimensions(){const t=this.getTotalObjectScaling(),e=this._getTransformedDimensions({skewX:0,skewY:0}),r=e.x*t.x/this.scaleX,n=e.y*t.y/this.scaleY;return{width:r+2,height:n+2,zoomX:t.x,zoomY:t.y,x:r,y:n}}_updateCacheCanvas(){const t=this._cacheCanvas,e=this._cacheContext,r=this._limitCacheSize(this._getCacheCanvasDimensions()),n=h.minCacheSideLimit,i=r.width,o=r.height,s=r.zoomX,a=r.zoomY,c=i!==this.cacheWidth||o!==this.cacheHeight,l=this.zoomX!==s||this.zoomY!==a;if(!t||!e)return!1;let u,f,d=c||l,p=0,g=0,v=!1;if(c){const t=this._cacheCanvas.width,e=this._cacheCanvas.height,s=i>t||o>e;v=s||(i<.9*t||o<.9*e)&&t>n&&e>n,s&&!r.capped&&(i>n||o>n)&&(p=.1*i,g=.1*o)}return Ft(this)&&this.path&&(d=!0,v=!0,p+=this.getHeightOfLine(0)*this.zoomX,g+=this.getHeightOfLine(0)*this.zoomY),!!d&&(v?(t.width=Math.ceil(i+p),t.height=Math.ceil(o+g)):(e.setTransform(1,0,0,1,0,0),e.clearRect(0,0,t.width,t.height)),u=r.x/2,f=r.y/2,this.cacheTranslationX=Math.round(t.width/2-u)+u,this.cacheTranslationY=Math.round(t.height/2-f)+f,this.cacheWidth=i,this.cacheHeight=o,e.translate(this.cacheTranslationX,this.cacheTranslationY),e.scale(s,a),this.zoomX=s,this.zoomY=a,!0)}setOptions(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._setOptions(t)}transform(t){const e=this.group&&!this.group._transformDone||this.group&&this.canvas&&t===this.canvas.contextTop,r=this.calcTransformMatrix(!e);t.transform(r[0],r[1],r[2],r[3],r[4],r[5])}toObject(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];const e=h.NUM_FRACTION_DIGITS,r=this.clipPath&&!this.clipPath.excludeFromExport?i(i({},this.clipPath.toObject(t)),{},{inverted:this.clipPath.inverted,absolutePositioned:this.clipPath.absolutePositioned}):null,n=i(i({},mt(this,t)),{},{type:this.constructor.type,version:x,originX:this.originX,originY:this.originY,left:kt(this.left,e),top:kt(this.top,e),width:kt(this.width,e),height:kt(this.height,e),fill:Dt(this.fill)?this.fill.toObject():this.fill,stroke:Dt(this.stroke)?this.stroke.toObject():this.stroke,strokeWidth:kt(this.strokeWidth,e),strokeDashArray:this.strokeDashArray?this.strokeDashArray.concat():this.strokeDashArray,strokeLineCap:this.strokeLineCap,strokeDashOffset:this.strokeDashOffset,strokeLineJoin:this.strokeLineJoin,strokeUniform:this.strokeUniform,strokeMiterLimit:kt(this.strokeMiterLimit,e),scaleX:kt(this.scaleX,e),scaleY:kt(this.scaleY,e),angle:kt(this.angle,e),flipX:this.flipX,flipY:this.flipY,opacity:kt(this.opacity,e),shadow:this.shadow&&this.shadow.toObject?this.shadow.toObject():this.shadow,visible:this.visible,backgroundColor:this.backgroundColor,fillRule:this.fillRule,paintFirst:this.paintFirst,globalCompositeOperation:this.globalCompositeOperation,skewX:kt(this.skewX,e),skewY:kt(this.skewY,e)},r?{clipPath:r}:null);return this.includeDefaultValues?n:this._removeDefaultValues(n)}toDatalessObject(t){return this.toObject(t)}_removeDefaultValues(t){const e=this.constructor.getDefaults(),r=Object.keys(e).length>0?e:Object.getPrototypeOf(this);return bt(t,((t,e)=>{if(e===M||e===P||"type"===e)return!0;const n=r[e];return t!==n&&!(Array.isArray(t)&&Array.isArray(n)&&0===t.length&&0===n.length)}))}toString(){return"#<".concat(this.constructor.type,">")}getObjectScaling(){if(!this.group)return new H(Math.abs(this.scaleX),Math.abs(this.scaleY));const t=ct(this.calcTransformMatrix());return new H(Math.abs(t.scaleX),Math.abs(t.scaleY))}getTotalObjectScaling(){const t=this.getObjectScaling();if(this.canvas){const e=this.canvas.getZoom(),r=this.getCanvasRetinaScaling();return t.scalarMultiply(e*r)}return t}getObjectOpacity(){let t=this.opacity;return this.group&&(t*=this.group.getObjectOpacity()),t}_constrainScale(t){return Math.abs(t)<this.minScaleLimit?t<0?-this.minScaleLimit:this.minScaleLimit:0===t?1e-4:t}_set(t,e){const r=this[t]!==e;if("scaleX"!==t&&"scaleY"!==t||(e=this._constrainScale(e)),"scaleX"===t&&e<0?(this.flipX=!this.flipX,e*=-1):"scaleY"===t&&e<0?(this.flipY=!this.flipY,e*=-1):"shadow"!==t||!e||e instanceof Xe?"dirty"===t&&this.group&&this.group.set("dirty",e):e=new Xe(e),this[t]=e,r){const e=this.group&&this.group.isOnACache();this.constructor.cacheProperties.includes(t)?(this.dirty=!0,e&&this.group.set("dirty",!0)):e&&this.constructor.stateProperties.includes(t)&&this.group.set("dirty",!0)}return this}isNotVisible(){return 0===this.opacity||!this.width&&!this.height&&0===this.strokeWidth||!this.visible}render(t){this.isNotVisible()||this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(t.save(),this._setupCompositeOperation(t),this.drawSelectionBackground(t),this.transform(t),this._setOpacity(t),this._setShadow(t),this.shouldCache()?(this.renderCache(),this.drawCacheOnCanvas(t)):(this._removeCacheCanvas(),this.drawObject(t),this.dirty=!1),t.restore())}drawSelectionBackground(t){}renderCache(t){t=t||{},this._cacheCanvas&&this._cacheContext||this._createCacheCanvas(),this.isCacheDirty()&&this._cacheContext&&(this.drawObject(this._cacheContext,t.forClipping),this.dirty=!1)}_removeCacheCanvas(){this._cacheCanvas=void 0,this._cacheContext=null,this.cacheWidth=0,this.cacheHeight=0}hasStroke(){return this.stroke&&"transparent"!==this.stroke&&0!==this.strokeWidth}hasFill(){return this.fill&&"transparent"!==this.fill}needsItsOwnCache(){return!("stroke"!==this.paintFirst||!this.hasFill()||!this.hasStroke()||"object"!=typeof this.shadow)||!!this.clipPath}shouldCache(){return this.ownCaching=this.needsItsOwnCache()||this.objectCaching&&(!this.group||!this.group.isOnACache()),this.ownCaching}willDrawShadow(){return!!this.shadow&&(0!==this.shadow.offsetX||0!==this.shadow.offsetY)}drawClipPathOnCache(t,e){if(t.save(),e.inverted?t.globalCompositeOperation="destination-out":t.globalCompositeOperation="destination-in",e.absolutePositioned){const e=ot(this.calcTransformMatrix());t.transform(e[0],e[1],e[2],e[3],e[4],e[5])}e.transform(t),t.scale(1/e.zoomX,1/e.zoomY),t.drawImage(e._cacheCanvas,-e.cacheTranslationX,-e.cacheTranslationY),t.restore()}drawObject(t,e){const r=this.fill,n=this.stroke;e?(this.fill="black",this.stroke="",this._setClippingProperties(t)):this._renderBackground(t),this._render(t),this._drawClipPath(t,this.clipPath),this.fill=r,this.stroke=n}_drawClipPath(t,e){e&&(e._set("canvas",this.canvas),e.shouldCache(),e._transformDone=!0,e.renderCache({forClipping:!0}),this.drawClipPathOnCache(t,e))}drawCacheOnCanvas(t){t.scale(1/this.zoomX,1/this.zoomY),t.drawImage(this._cacheCanvas,-this.cacheTranslationX,-this.cacheTranslationY)}isCacheDirty(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.isNotVisible())return!1;if(this._cacheCanvas&&this._cacheContext&&!t&&this._updateCacheCanvas())return!0;if(this.dirty||this.clipPath&&this.clipPath.absolutePositioned){if(this._cacheCanvas&&this._cacheContext&&!t){const t=this.cacheWidth/this.zoomX,e=this.cacheHeight/this.zoomY;this._cacheContext.clearRect(-t/2,-e/2,t,e)}return!0}return!1}_renderBackground(t){if(!this.backgroundColor)return;const e=this._getNonTransformedDimensions();t.fillStyle=this.backgroundColor,t.fillRect(-e.x/2,-e.y/2,e.x,e.y),this._removeShadow(t)}_setOpacity(t){this.group&&!this.group._transformDone?t.globalAlpha=this.getObjectOpacity():t.globalAlpha*=this.opacity}_setStrokeStyles(t,e){const r=e.stroke;r&&(t.lineWidth=e.strokeWidth,t.lineCap=e.strokeLineCap,t.lineDashOffset=e.strokeDashOffset,t.lineJoin=e.strokeLineJoin,t.miterLimit=e.strokeMiterLimit,Pt(r)?"percentage"===r.gradientUnits||r.gradientTransform||r.patternTransform?this._applyPatternForTransformedGradient(t,r):(t.strokeStyle=r.toLive(t),this._applyPatternGradientTransform(t,r)):t.strokeStyle=e.stroke)}_setFillStyles(t,e){let{fill:r}=e;r&&(Pt(r)?(t.fillStyle=r.toLive(t),this._applyPatternGradientTransform(t,r)):t.fillStyle=r)}_setClippingProperties(t){t.globalAlpha=1,t.strokeStyle="transparent",t.fillStyle="#000000"}_setLineDash(t,e){e&&0!==e.length&&(1&e.length&&e.push(...e),t.setLineDash(e))}_setShadow(t){if(!this.shadow)return;const e=this.shadow,r=this.canvas,n=this.getCanvasRetinaScaling(),[i,,,o]=(null==r?void 0:r.viewportTransform)||T,s=i*n,a=o*n,c=e.nonScaling?new H(1,1):this.getObjectScaling();t.shadowColor=e.color,t.shadowBlur=e.blur*h.browserShadowBlurConstant*(s+a)*(c.x+c.y)/4,t.shadowOffsetX=e.offsetX*s*c.x,t.shadowOffsetY=e.offsetY*a*c.y}_removeShadow(t){this.shadow&&(t.shadowColor="",t.shadowBlur=t.shadowOffsetX=t.shadowOffsetY=0)}_applyPatternGradientTransform(t,e){if(!Pt(e))return{offsetX:0,offsetY:0};const r=e.gradientTransform||e.patternTransform,n=-this.width/2+e.offsetX||0,i=-this.height/2+e.offsetY||0;return"percentage"===e.gradientUnits?t.transform(this.width,0,0,this.height,n,i):t.transform(1,0,0,1,n,i),r&&t.transform(r[0],r[1],r[2],r[3],r[4],r[5]),{offsetX:n,offsetY:i}}_renderPaintInOrder(t){"stroke"===this.paintFirst?(this._renderStroke(t),this._renderFill(t)):(this._renderFill(t),this._renderStroke(t))}_render(t){}_renderFill(t){this.fill&&(t.save(),this._setFillStyles(t,this),"evenodd"===this.fillRule?t.fill("evenodd"):t.fill(),t.restore())}_renderStroke(t){if(this.stroke&&0!==this.strokeWidth){if(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(t),t.save(),this.strokeUniform){const e=this.getObjectScaling();t.scale(1/e.x,1/e.y)}this._setLineDash(t,this.strokeDashArray),this._setStrokeStyles(t,this),t.stroke(),t.restore()}}_applyPatternForTransformedGradient(t,e){var r;const n=this._limitCacheSize(this._getCacheCanvasDimensions()),i=Q(),o=this.getCanvasRetinaScaling(),s=n.x/this.scaleX/o,a=n.y/this.scaleY/o;i.width=Math.ceil(s),i.height=Math.ceil(a);const c=i.getContext("2d");c&&(c.beginPath(),c.moveTo(0,0),c.lineTo(s,0),c.lineTo(s,a),c.lineTo(0,a),c.closePath(),c.translate(s/2,a/2),c.scale(n.zoomX/this.scaleX/o,n.zoomY/this.scaleY/o),this._applyPatternGradientTransform(c,e),c.fillStyle=e.toLive(t),c.fill(),t.translate(-this.width/2-this.strokeWidth/2,-this.height/2-this.strokeWidth/2),t.scale(o*this.scaleX/n.zoomX,o*this.scaleY/n.zoomY),t.strokeStyle=null!==(r=c.createPattern(i,"no-repeat"))&&void 0!==r?r:"")}_findCenterFromElement(){return new H(this.left+this.width/2,this.top+this.height/2)}clone(t){const e=this.toObject(t);return this.constructor.fromObject(e)}cloneAsImage(t){const e=this.toCanvasElement(t);return new(N.getClass("image"))(e)}toCanvasElement(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const e=re(this),r=this.group,n=this.shadow,i=Math.abs,o=t.enableRetinaScaling?Math.max(h.devicePixelRatio,1):1,s=(t.multiplier||1)*o;delete this.group,t.withoutTransform&&ee(this),t.withoutShadow&&(this.shadow=null),t.viewportTransform&&((t,e,r)=>{const n=ie(e,r);te(t,st(n,t.calcOwnMatrix()))})(this,this.getViewportTransform());const a=Q(),c=this.getBoundingRect(!0,!0),l=this.shadow,u=new H;if(l){const t=l.blur,e=l.nonScaling?new H(1,1):this.getObjectScaling();u.x=2*Math.round(i(l.offsetX)+t)*i(e.x),u.y=2*Math.round(i(l.offsetY)+t)*i(e.y)}const f=c.width+u.x,d=c.height+u.y;a.width=Math.ceil(f),a.height=Math.ceil(d);const p=new qt(a,{enableRetinaScaling:!1,renderOnAddRemove:!1,skipOffscreen:!1});"jpeg"===t.format&&(p.backgroundColor="#fff"),this.setPositionByOrigin(new H(p.width/2,p.height/2),E,E);const g=this.canvas;p._objects=[this],this.set("canvas",p),this.setCoords();const v=p.toCanvasElement(s||1,t);return this.set("canvas",g),this.shadow=n,r&&(this.group=r),this.set(e),this.setCoords(),p._objects=[],p.destroy(),v}toDataURL(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return tt(this.toCanvasElement(t),t.format||"png",t.quality||1)}isType(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return e.includes(this.constructor.type)||e.includes(this.type)}complexity(){return 1}toJSON(){return this.toObject()}rotate(t){const e=(this.originX!==E||this.originY!==E)&&this.centeredRotation;e&&this._setOriginToCenter(),this.set("angle",t),e&&this._resetOrigin()}setOnGroup(){}_setupCompositeOperation(t){this.globalCompositeOperation&&(t.globalCompositeOperation=this.globalCompositeOperation)}dispose(){V.cancelByTarget(this),this.off(),this._set("canvas",void 0),this._cacheCanvas&&_().dispose(this._cacheCanvas),this._cacheCanvas=void 0,this._cacheContext=null}static _fromObject(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{extraParam:r}=e,n=a(e,Ke);return yt(Ye(t),n).then((t=>{const e=i(i({},n),t);if(r){const{[r]:t,type:n}=e;return new this(t,a(e,[r,"type"].map(l)))}return new this(e)}))}static fromObject(t,e){return this._fromObject(t,e)}};o($e,"stateProperties",He),o($e,"cacheProperties",Ge),o($e,"ownDefaults",qe),o($e,"type","FabricObject"),N.setClass($e),N.setClass($e,"object");const Je=(t,e)=>(r,n,i,o)=>{const s=e(r,n,i,o);return s&&se(t,de(r,n,i,o)),s};function Ze(t){return(e,r,n,i)=>{const{target:o,originX:s,originY:a}=r,c=o.getRelativeCenterPoint(),l=o.translateToOriginPoint(c,s,a),u=t(e,r,n,i);return o.setPositionByOrigin(l,s,a),u}}const Qe=Je("resizing",Ze(((t,e,r,n)=>{const i=ge(e,e.originX,e.originY,r,n);if(e.originX===E||e.originX===R&&i.x<0||e.originX===M&&i.x>0){const{target:t}=e,r=t.strokeWidth/(t.strokeUniform?t.scaleX:1),n=ue(e)?2:1,o=t.width,s=Math.ceil(Math.abs(i.x*n/t.scaleX)-r);return t.set("width",Math.max(s,0)),o!==t.width}return!1})));function tr(t,e,r,n,i){n=n||{};const o=this.sizeX||n.cornerSize||i.cornerSize,s=this.sizeY||n.cornerSize||i.cornerSize,a=void 0!==n.transparentCorners?n.transparentCorners:i.transparentCorners,c=a?"stroke":"fill",l=!a&&(n.cornerStrokeColor||i.cornerStrokeColor);let u,h=e,f=r;t.save(),t.fillStyle=n.cornerColor||i.cornerColor||"",t.strokeStyle=n.cornerStrokeColor||i.cornerStrokeColor||"",o>s?(u=o,t.scale(1,s/o),f=r*o/s):s>o?(u=s,t.scale(o/s,1),h=e*s/o):u=o,t.lineWidth=1,t.beginPath(),t.arc(h,f,u/2,0,C,!1),t[c](),l&&t.stroke(),t.restore()}function er(t,e,r,n,i){n=n||{};const o=this.sizeX||n.cornerSize||i.cornerSize,s=this.sizeY||n.cornerSize||i.cornerSize,a=void 0!==n.transparentCorners?n.transparentCorners:i.transparentCorners,c=a?"stroke":"fill",l=!a&&(n.cornerStrokeColor||i.cornerStrokeColor),u=o/2,h=s/2;t.save(),t.fillStyle=n.cornerColor||i.cornerColor||"",t.strokeStyle=n.cornerStrokeColor||i.cornerStrokeColor||"",t.lineWidth=1,t.translate(e,r);const f=i.getTotalAngle();t.rotate(et(f)),t["".concat(c,"Rect")](-u,-h,o,s),l&&t.strokeRect(-u,-h,o,s),t.restore()}class rr{constructor(t){o(this,"visible",!0),o(this,"actionName","scale"),o(this,"angle",0),o(this,"x",0),o(this,"y",0),o(this,"offsetX",0),o(this,"offsetY",0),o(this,"sizeX",null),o(this,"sizeY",null),o(this,"touchSizeX",null),o(this,"touchSizeY",null),o(this,"cursorStyle","crosshair"),o(this,"withConnection",!1),Object.assign(this,t)}shouldActivate(t,e){var r;return(null===(r=e.canvas)||void 0===r?void 0:r.getActiveObject())===e&&e.isControlVisible(t)}getActionHandler(t,e,r){return this.actionHandler}getMouseDownHandler(t,e,r){return this.mouseDownHandler}getMouseUpHandler(t,e,r){return this.mouseUpHandler}cursorStyleHandler(t,e,r){return e.cursorStyle}getActionName(t,e,r){return e.actionName}getVisibility(t,e){var r,n;return null!==(r=null===(n=t._controlsVisibility)||void 0===n?void 0:n[e])&&void 0!==r?r:this.visible}setVisibility(t,e,r){this.visible=t}positionHandler(t,e,r,n){return new H(this.x*t.x+this.offsetX,this.y*t.y+this.offsetY).transform(e)}calcCornerCoords(t,e,r,n,i){let o,s,a,c;const l=i?this.touchSizeX:this.sizeX,u=i?this.touchSizeY:this.sizeY;if(l&&u&&l!==u){const e=Math.atan2(u,l),r=Math.sqrt(l*l+u*u)/2,n=e-et(t),i=S-e-et(t);o=r*X(n),s=r*Y(n),a=r*X(i),c=r*Y(i)}else{const r=(l&&u?l:e)*Math.SQRT1_2,n=et(45-t);o=a=r*X(n),s=c=r*Y(n)}return{tl:new H(r-c,n-a),tr:new H(r+o,n-s),bl:new H(r-o,n+s),br:new H(r+c,n+a)}}render(t,e,r,n,i){"circle"===((n=n||{}).cornerStyle||i.cornerStyle)?tr.call(this,t,e,r,n,i):er.call(this,t,e,r,n,i)}}const nr=(t,e,r)=>r.lockRotation?le:e.cursorStyle,ir=Je("rotating",Ze(((t,e,r,n)=>{let{target:i,ex:o,ey:s,theta:a,originX:c,originY:l}=e;const u=i.translateToOriginPoint(i.getRelativeCenterPoint(),c,l);if(fe(i,"lockRotation"))return!1;const h=Math.atan2(s-u.y,o-u.x),f=Math.atan2(n-u.y,r-u.x);let d=rt(f-h+a);if(i.snapAngle&&i.snapAngle>0){const t=i.snapAngle,e=i.snapThreshold||t,r=Math.ceil(d/t)*t,n=Math.floor(d/t)*t;Math.abs(d-n)<e?d=n:Math.abs(d-r)<e&&(d=r)}d<0&&(d=360+d),d%=360;const p=i.angle!==d;return i.angle=d,p})));function or(t,e){const r=e.canvas,n=t[r.uniScaleKey];return r.uniformScaling&&!n||!r.uniformScaling&&n}function sr(t,e,r){const n=fe(t,"lockScalingX"),i=fe(t,"lockScalingY");return!((!n||!i)&&(e||!n&&!i||!r)&&(!n||"x"!==e)&&(!i||"y"!==e))}const ar=["e","se","s","sw","w","nw","n","ne","e"],cr=(t,e,r)=>{const n=or(t,r);if(sr(r,0!==e.x&&0===e.y?"x":0===e.x&&0!==e.y?"y":"",n))return le;const i=pe(r,e);return"".concat(ar[i],"-resize")};function lr(t,e,r,n){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};const o=e.target,s=i.by,a=or(t,o);let c,l,u,h,f,d;if(sr(o,s,a))return!1;if(e.gestureScale)l=e.scaleX*e.gestureScale,u=e.scaleY*e.gestureScale;else{if(c=ge(e,e.originX,e.originY,r,n),f="y"!==s?Math.sign(c.x||e.signX||1):1,d="x"!==s?Math.sign(c.y||e.signY||1):1,e.signX||(e.signX=f),e.signY||(e.signY=d),fe(o,"lockScalingFlip")&&(e.signX!==f||e.signY!==d))return!1;if(h=o._getTransformedDimensions(),a&&!s){const t=Math.abs(c.x)+Math.abs(c.y),{original:r}=e,n=t/(Math.abs(h.x*r.scaleX/o.scaleX)+Math.abs(h.y*r.scaleY/o.scaleY));l=r.scaleX*n,u=r.scaleY*n}else l=Math.abs(c.x*o.scaleX/h.x),u=Math.abs(c.y*o.scaleY/h.y);ue(e)&&(l*=2,u*=2),e.signX!==f&&"y"!==s&&(e.originX=he(e.originX),l*=-1,e.signX=f),e.signY!==d&&"x"!==s&&(e.originY=he(e.originY),u*=-1,e.signY=d)}const p=o.scaleX,g=o.scaleY;return s?("x"===s&&o.set("scaleX",l),"y"===s&&o.set("scaleY",u)):(!fe(o,"lockScalingX")&&o.set("scaleX",l),!fe(o,"lockScalingY")&&o.set("scaleY",u)),p!==o.scaleX||g!==o.scaleY}const ur=Je("scaling",Ze(((t,e,r,n)=>lr(t,e,r,n)))),hr=Je("scaling",Ze(((t,e,r,n)=>lr(t,e,r,n,{by:"x"})))),fr=Je("scaling",Ze(((t,e,r,n)=>lr(t,e,r,n,{by:"y"})))),dr=["target","ex","ey","skewingSide"],pr={x:{counterAxis:"y",scale:"scaleX",skew:"skewX",lockSkewing:"lockSkewingX",origin:"originX",flip:"flipX"},y:{counterAxis:"x",scale:"scaleY",skew:"skewY",lockSkewing:"lockSkewingY",origin:"originY",flip:"flipY"}},gr=["ns","nesw","ew","nwse"];function vr(t,e,r,n,o){const{target:s}=r,{counterAxis:c,origin:l,lockSkewing:u,skew:h,flip:f}=pr[t];if(fe(s,u))return!1;const{origin:d,flip:p}=pr[c],g=ce(r[d])*(s[p]?-1:1),v=-Math.sign(g)*(s[f]?-1:1),_=-(0===s[h]&&ge(r,E,E,n,o)[t]>0||s[h]>0?1:-1)*v*.5+.5,y=Je("skewing",Ze(((e,r,n,i)=>function(t,e,r){let{target:n,ex:i,ey:o,skewingSide:s}=e,c=a(e,dr);const{skew:l}=pr[t],u=r.subtract(new H(i,o)).divide(new H(n.scaleX,n.scaleY))[t],h=n[l],f=c[l],d=Math.tan(et(f)),p="y"===t?n._getTransformedDimensions({scaleX:1,scaleY:1,skewX:0}).x:n._getTransformedDimensions({scaleX:1,scaleY:1}).y,g=2*u*s/Math.max(p,1)+d,v=rt(Math.atan(g));n.set(l,v);const _=h!==n[l];if(_&&"y"===t){const{skewX:t,scaleX:e}=n,r=n._getTransformedDimensions({skewY:h}),i=n._getTransformedDimensions(),o=0!==t?r.x/i.x:1;1!==o&&n.set("scaleX",o*e)}return _}(t,r,new H(n,i)))));return y(e,i(i({},r),{},{[l]:_,skewingSide:v}),n,o)}function _r(t,e){return t[e.canvas.altActionKey]}const yr=(t,e,r)=>{const n=_r(t,r);return 0===e.x?n?"skewX":"scaleY":0===e.y?n?"skewY":"scaleX":""},mr=(t,e,r)=>_r(t,r)?((t,e,r)=>{if(0!==e.x&&fe(r,"lockSkewingY"))return le;if(0!==e.y&&fe(r,"lockSkewingX"))return le;const n=pe(r,e)%4;return"".concat(gr[n],"-resize")})(0,e,r):cr(t,e,r),br=(t,e,r,n)=>_r(t,e.target)?((t,e,r,n)=>vr("y",t,e,r,n))(t,e,r,n):hr(t,e,r,n),xr=(t,e,r,n)=>_r(t,e.target)?((t,e,r,n)=>vr("x",t,e,r,n))(t,e,r,n):fr(t,e,r,n),wr=()=>({ml:new rr({x:-.5,y:0,cursorStyleHandler:mr,actionHandler:br,getActionName:yr}),mr:new rr({x:.5,y:0,cursorStyleHandler:mr,actionHandler:br,getActionName:yr}),mb:new rr({x:0,y:.5,cursorStyleHandler:mr,actionHandler:xr,getActionName:yr}),mt:new rr({x:0,y:-.5,cursorStyleHandler:mr,actionHandler:xr,getActionName:yr}),tl:new rr({x:-.5,y:-.5,cursorStyleHandler:cr,actionHandler:ur}),tr:new rr({x:.5,y:-.5,cursorStyleHandler:cr,actionHandler:ur}),bl:new rr({x:-.5,y:.5,cursorStyleHandler:cr,actionHandler:ur}),br:new rr({x:.5,y:.5,cursorStyleHandler:cr,actionHandler:ur}),mtr:new rr({x:0,y:-.5,actionHandler:ir,cursorStyleHandler:nr,offsetY:-40,withConnection:!0,actionName:"rotate"})}),Sr=()=>i(i({},wr()),{mr:new rr({x:.5,y:0,actionHandler:Qe,cursorStyleHandler:mr,actionName:"resizing"}),ml:new rr({x:-.5,y:0,actionHandler:Qe,cursorStyleHandler:mr,actionName:"resizing"})});class Cr extends $e{static getDefaults(){return i(i({},super.getDefaults()),{},{controls:wr()},Cr.ownDefaults)}_updateCacheCanvas(){const t=this.canvas;if(this.noScaleCache&&t&&t._currentTransform){const e=t._currentTransform.target,r=t._currentTransform.action;if(this===e&&r.startsWith("scale"))return!1}return super._updateCacheCanvas()}_findTargetCorner(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this.hasControls||!this.canvas)return"";this.__corner=void 0;const r=Object.entries(this.oCoords);for(let n=r.length-1;n>=0;n--){const[i,o]=r[n];if(this.controls[i].shouldActivate(i,this)){const r=this._getImageLines(e?o.touchCorner:o.corner),n=this._findCrossPoints(t,r);if(0!==n&&n%2==1)return this.__corner=i,i}}return""}calcOCoords(){const t=this.getViewportTransform(),e=this.getCenterPoint(),r=lt(e.x,e.y),n=ut({angle:this.getTotalAngle()-(this.group&&this.flipX?180:0)}),i=st(r,n),o=st(t,i),s=st(o,[1/t[0],0,0,1/t[3],0,0]),a=this.group?ct(this.calcTransformMatrix()):void 0,c=this._calculateCurrentDimensions(a),l={};return this.forEachControl(((t,e)=>{const r=t.positionHandler(c,s,this,t);l[e]=Object.assign(r,this._calcCornerCoords(t,r))})),l}_calcCornerCoords(t,e){return{corner:t.calcCornerCoords(this.angle,this.cornerSize,e.x,e.y,!1),touchCorner:t.calcCornerCoords(this.angle,this.touchCornerSize,e.x,e.y,!0)}}setCoords(){super.setCoords(),this.oCoords=this.calcOCoords()}forEachControl(t){for(const e in this.controls)t(this.controls[e],e,this)}drawSelectionBackground(t){if(!this.selectionBackgroundColor||this.canvas&&!this.canvas.interactive||this.canvas&&this.canvas._activeObject!==this)return;t.save();const e=this.getRelativeCenterPoint(),r=this._calculateCurrentDimensions(),n=this.getViewportTransform();t.translate(e.x,e.y),t.scale(1/n[0],1/n[3]),t.rotate(et(this.angle)),t.fillStyle=this.selectionBackgroundColor,t.fillRect(-r.x/2,-r.y/2,r.x,r.y),t.restore()}strokeBorders(t,e){t.strokeRect(-e.x/2,-e.y/2,e.x,e.y)}_drawBorders(t,e){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const n=i({hasControls:this.hasControls,borderColor:this.borderColor,borderDashArray:this.borderDashArray},r);t.save(),t.strokeStyle=n.borderColor,this._setLineDash(t,n.borderDashArray),this.strokeBorders(t,e),n.hasControls&&this.drawControlsConnectingLines(t,e),t.restore()}_renderControls(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{hasBorders:r,hasControls:n}=this,o=i({hasBorders:r,hasControls:n},e),s=this.getViewportTransform(),a=o.hasBorders,c=o.hasControls,l=st(s,this.calcTransformMatrix()),u=ct(l);t.save(),t.translate(u.translateX,u.translateY),t.lineWidth=1*this.borderScaleFactor,this.group||(t.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1),this.flipX&&(u.angle-=180),t.rotate(et(this.group?u.angle:this.angle)),a&&this.drawBorders(t,u,e),c&&this.drawControls(t,e),t.restore()}drawBorders(t,e,r){let n;if(r&&r.forActiveSelection||this.group){const t=ne(this.width,this.height,e),r=(this.strokeUniform?(new H).scalarAdd(this.canvas?this.canvas.getZoom():1):new H(e.scaleX,e.scaleY)).scalarMultiply(this.strokeWidth);n=t.add(r).scalarAdd(this.borderScaleFactor)}else n=this._calculateCurrentDimensions().scalarAdd(this.borderScaleFactor);this._drawBorders(t,n,r)}drawControlsConnectingLines(t,e){let r=!1;t.beginPath(),this.forEachControl(((n,i)=>{n.withConnection&&n.getVisibility(this,i)&&(r=!0,t.moveTo(n.x*e.x,n.y*e.y),t.lineTo(n.x*e.x+n.offsetX,n.y*e.y+n.offsetY))})),r&&t.stroke()}drawControls(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t.save();const r=this.getCanvasRetinaScaling(),{cornerStrokeColor:n,cornerDashArray:o,cornerColor:s}=this,a=i({cornerStrokeColor:n,cornerDashArray:o,cornerColor:s},e);t.setTransform(r,0,0,r,0,0),t.strokeStyle=t.fillStyle=a.cornerColor,this.transparentCorners||(t.strokeStyle=a.cornerStrokeColor),this._setLineDash(t,a.cornerDashArray),this.setCoords(),this.forEachControl(((e,r)=>{if(e.getVisibility(this,r)){const n=this.oCoords[r];e.render(t,n.x,n.y,a,this)}})),t.restore()}isControlVisible(t){return this.controls[t]&&this.controls[t].getVisibility(this,t)}setControlVisible(t,e){this._controlsVisibility||(this._controlsVisibility={}),this._controlsVisibility[t]=e}setControlsVisibility(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object.entries(t).forEach((t=>{let[e,r]=t;return this.setControlVisible(e,r)}))}clearContextTop(t){if(!this.canvas)return;const e=this.canvas.contextTop;if(!e)return;const r=this.canvas.viewportTransform;e.save(),e.transform(r[0],r[1],r[2],r[3],r[4],r[5]),this.transform(e);const n=this.width+4,i=this.height+4;return e.clearRect(-n/2,-i/2,n,i),t||e.restore(),e}onDeselect(t){return!1}onSelect(t){return!1}canDrop(t){return!1}renderDragSourceEffect(t){}renderDropTargetEffect(t){}}function Or(t,e){return e.forEach((e=>{Object.getOwnPropertyNames(e.prototype).forEach((r=>{"constructor"!==r&&Object.defineProperty(t.prototype,r,Object.getOwnPropertyDescriptor(e.prototype,r)||Object.create(null))}))})),t}o(Cr,"ownDefaults",{});class Tr extends Cr{}Or(Tr,[_e]),N.setClass(Tr),N.setClass(Tr,"object");const jr=["display","transform","fill","fill-opacity","fill-rule","opacity","stroke","stroke-dasharray","stroke-linecap","stroke-dashoffset","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","id","paint-order","vector-effect","instantiated_by_use","clip-path"];function kr(t){return new RegExp("^("+t.join("|")+")\\b","i")}var Ar,Er;const Mr={},Pr={cssRules:Mr,gradientDefs:{},clipPaths:{}},Dr=String.raw(Ar||(Ar=c(["(?:[-+]?(?:d*.d+|d+.?)(?:[eE][-+]?d+)?)"],["(?:[-+]?(?:\\d*\\.\\d+|\\d+\\.?)(?:[eE][-+]?\\d+)?)"])));String.raw(Er||(Er=c(["(?:s+,?s*|,s*|$)"],["(?:\\s+,?\\s*|,\\s*|$)"])));const Rr=new RegExp("(normal|italic)?\\s*(normal|small-caps)?\\s*(normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900)?\\s*("+Dr+"(?:px|cm|mm|em|pt|pc|in)*)(?:\\/(normal|"+Dr+"))?\\s+(.*)"),Lr={cx:M,x:M,r:"radius",cy:P,y:P,display:"visible",visibility:"visible",transform:"transformMatrix","fill-opacity":"fillOpacity","fill-rule":"fillRule","font-family":"fontFamily","font-size":"fontSize","font-style":"fontStyle","font-weight":"fontWeight","letter-spacing":"charSpacing","paint-order":"paintFirst","stroke-dasharray":"strokeDashArray","stroke-dashoffset":"strokeDashOffset","stroke-linecap":"strokeLineCap","stroke-linejoin":"strokeLineJoin","stroke-miterlimit":"strokeMiterLimit","stroke-opacity":"strokeOpacity","stroke-width":"strokeWidth","text-decoration":"textDecoration","text-anchor":"textAnchor",opacity:"opacity","clip-path":"clipPath","clip-rule":"clipRule","vector-effect":"strokeUniform","image-rendering":"imageSmoothing"},Fr={stroke:"strokeOpacity",fill:"fillOpacity"},Br="font-size",Ir="clip-path",Nr=(kr(["path","circle","polygon","polyline","ellipse","rect","line","image","text"]),kr(["symbol","image","marker","pattern","view","svg"]),kr(["pattern","defs","symbol","metadata","clipPath","mask","desc"]),kr(["symbol","g","a","svg","clipPath","defs"]));function Vr(t,e){const r=t.nodeName,n=t.getAttribute("class"),i=t.getAttribute("id");let o;if(o=new RegExp("^"+r,"i"),e=e.replace(o,""),i&&e.length&&(o=new RegExp("#"+i+"(?![a-zA-Z\\-]+)","i"),e=e.replace(o,"")),n&&e.length){const t=n.split(" ");for(let r=t.length;r--;)o=new RegExp("\\."+t[r]+"(?![a-zA-Z\\-]+)","i"),e=e.replace(o,"")}return 0===e.length}function Wr(t,e){let r=!0;const n=Vr(t,e.pop());return n&&e.length&&(r=function(t,e){let r,n=!0;for(;t.parentElement&&1===t.parentElement.nodeType&&e.length;)n&&(r=e.pop()),n=Vr(t=t.parentElement,r);return 0===e.length}(t,e)),n&&r&&0===e.length}function Ur(t){return t in Lr?Lr[t]:t}new RegExp("^\\s*("+Dr+"+)\\s*,?\\s*("+Dr+"+)\\s*,?\\s*("+Dr+"+)\\s*,?\\s*("+Dr+"+)\\s*$");const zr=t=>t.replace(new RegExp("(".concat(Dr,")"),"gi")," $1 ").replace(/,/gi," ").replace(/\s+/gi," ");var Xr,Yr,Hr,Gr,qr,Kr,$r;const Jr="(".concat(Dr,")"),Zr=String.raw(Xr||(Xr=c(["(skewX)(",")"],["(skewX)\\(","\\)"])),Jr),Qr=String.raw(Yr||(Yr=c(["(skewY)(",")"],["(skewY)\\(","\\)"])),Jr),tn=String.raw(Hr||(Hr=c(["(rotate)(","(?: "," ",")?)"],["(rotate)\\(","(?: "," ",")?\\)"])),Jr,Jr,Jr),en=String.raw(Gr||(Gr=c(["(scale)(","(?: ",")?)"],["(scale)\\(","(?: ",")?\\)"])),Jr,Jr),rn=String.raw(qr||(qr=c(["(translate)(","(?: ",")?)"],["(translate)\\(","(?: ",")?\\)"])),Jr,Jr),nn=String.raw(Kr||(Kr=c(["(matrix)("," "," "," "," "," ",")"],["(matrix)\\("," "," "," "," "," ","\\)"])),Jr,Jr,Jr,Jr,Jr,Jr),on="(?:".concat(nn,"|").concat(rn,"|").concat(tn,"|").concat(en,"|").concat(Zr,"|").concat(Qr,")"),sn="(?:".concat(on,"*)"),an=String.raw($r||($r=c(["^s*(?:","?)s*$"],["^\\s*(?:","?)\\s*$"])),sn),cn=new RegExp(an),ln=new RegExp(on,"g");function un(t){const e=[];if(!(t=zr(t).replace(/\s*([()])\s*/gi,"$1"))||t&&!cn.test(t))return[...T];for(const r of t.matchAll(ln)){const t=new RegExp(on).exec(r[0]);if(!t)continue;let n=T;const i=t.filter((t=>!!t)),[,o,...s]=i,[a,c,l,u,h,f]=s.map((t=>parseFloat(t)));switch(o){case"translate":n=lt(a,c);break;case"rotate":n=ut({angle:a},{x:c,y:l});break;case"scale":n=ht(a,c);break;case"skewX":n=dt(a);break;case"skewY":n=pt(a);break;case"matrix":n=[a,c,l,u,h,f]}e.push(n)}return at(e)}function hn(t,e,r,n){const i=Array.isArray(e);let o;if("fill"!==t&&"stroke"!==t||e!==L){if("strokeUniform"===t)return"non-scaling-stroke"===e;if("strokeDashArray"===t)e=e===L?null:e.replace(/,/g," ").split(/\s+/).map(parseFloat);else if("transformMatrix"===t)e=r&&r.transformMatrix?st(r.transformMatrix,un(e)):un(e);else if("visible"===t)e=e!==L&&"hidden"!==e,r&&!1===r.visible&&(e=!1);else if("opacity"===t)e=parseFloat(e),r&&void 0!==r.opacity&&(e*=r.opacity);else if("textAnchor"===t)e="start"===e?M:"end"===e?R:E;else if("charSpacing"===t)o=At(e,n)/n*1e3;else if("paintFirst"===t){const t=e.indexOf("fill"),r=e.indexOf("stroke");e="fill",(t>-1&&r>-1&&r<t||-1===t&&r>-1)&&(e="stroke")}else{if("href"===t||"xlink:href"===t||"font"===t)return e;if("imageSmoothing"===t)return"optimizeQuality"===e;o=i?e.map(At):At(e,n)}}else e="";return!i&&isNaN(o)?e:o}function fn(t,e,r){if(!t)return{};let n,o,s,a={};void 0===r&&(r=t.getAttribute("svgUid")),t.parentNode&&Nr.test(t.parentNode.nodeName)&&(a=fn(t.parentNode,e,r));let c=e.reduce((function(e,r){return n=t.getAttribute(r),n&&(e[r]=n),e}),{});const l=Object.assign(function(t,e){const r={};for(const n in Mr[e])if(Wr(t,n.split(" ")))for(const t in Mr[e][n])r[t]=Mr[e][n][t];return r}(t,r),function(t){const e={},r=t.getAttribute("style");return r?("string"==typeof r?function(t,e){let r,n;t.replace(/;\s*$/,"").split(";").forEach((function(t){const i=t.split(":");r=i[0].trim().toLowerCase(),n=i[1].trim(),e[r]=n}))}(r,e):function(t,e){let r,n;for(const i in t)void 0!==t[i]&&(r=i.toLowerCase(),n=t[i],e[r]=n)}(r,e),e):e}(t));c=Object.assign(c,l),l[Ir]&&t.setAttribute(Ir,l[Ir]),o=s=a.fontSize||k,c[Br]&&(c[Br]=o=At(c[Br],s));const u={};for(const t in c){const e=Ur(t),r=hn(e,c[t],a,o);u[e]=r}u&&u.font&&function(t,e){const r=t.match(Rr);if(!r)return;const n=r[1],i=r[3],o=r[4],s=r[5],a=r[6];n&&(e.fontStyle=n),i&&(e.fontWeight=isNaN(parseFloat(i))?i:parseFloat(i)),o&&(e.fontSize=At(o)),a&&(e.fontFamily=a),s&&(e.lineHeight="normal"===s?1:s)}(u.font,u);const h=i(i({},a),u);return Nr.test(t.nodeName)?h:function(t){for(const e in Fr){if(void 0===t[Fr[e]]||""===t[e])continue;const r=Tr.getDefaults();if(void 0===t[e]){if(!r[e])continue;t[e]=r[e]}if(0===t[e].indexOf("url("))continue;const n=new jt(t[e]);t[e]=n.setAlpha(kt(n.getAlpha()*t[Fr[e]],2)).toRgba()}return t}(h)}const dn=["left","top","width","height","visible"],pn=["rx","ry"];class gn extends Tr{static getDefaults(){return i(i({},super.getDefaults()),gn.ownDefaults)}constructor(t){super(t),this._initRxRy()}_initRxRy(){const{rx:t,ry:e}=this;t&&!e?this.ry=t:e&&!t&&(this.rx=e)}_render(t){const{width:e,height:r}=this,n=-e/2,i=-r/2,o=this.rx?Math.min(this.rx,e/2):0,s=this.ry?Math.min(this.ry,r/2):0,a=0!==o||0!==s;t.beginPath(),t.moveTo(n+o,i),t.lineTo(n+e-o,i),a&&t.bezierCurveTo(n+e-A*o,i,n+e,i+A*s,n+e,i+s),t.lineTo(n+e,i+r-s),a&&t.bezierCurveTo(n+e,i+r-A*s,n+e-A*o,i+r,n+e-o,i+r),t.lineTo(n+o,i+r),a&&t.bezierCurveTo(n+A*o,i+r,n,i+r-A*s,n,i+r-s),t.lineTo(n,i+s),a&&t.bezierCurveTo(n,i+A*s,n+A*o,i,n+o,i),t.closePath(),this._renderPaintInOrder(t)}toObject(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return super.toObject([...pn,...t])}_toSVG(){const{width:t,height:e,rx:r,ry:n}=this;return["<rect ","COMMON_PARTS",'x="'.concat(-t/2,'" y="').concat(-e/2,'" rx="').concat(r,'" ry="').concat(n,'" width="').concat(t,'" height="').concat(e,'" />\n')]}static async fromElement(t,e){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const n=fn(t,this.ATTRIBUTE_NAMES),{left:o=0,top:s=0,width:c=0,height:l=0,visible:u=!0}=n,h=a(n,dn);return new this(i(i(i({},r),h),{},{left:o,top:s,width:c,height:l,visible:Boolean(u&&c&&l)}))}}o(gn,"type","Rect"),o(gn,"cacheProperties",[...Ge,...pn]),o(gn,"ownDefaults",{rx:0,ry:0}),o(gn,"ATTRIBUTE_NAMES",[...jr,"x","y","rx","ry","width","height"]),N.setClass(gn),N.setSVGClass(gn);const vn=["objects"];class _n extends(q(Tr)){static getDefaults(){return i(i({},super.getDefaults()),_n.ownDefaults)}constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0;super(),o(this,"_activeObjects",[]),o(this,"__objectSelectionTracker",void 0),o(this,"__objectSelectionDisposer",void 0),o(this,"_firstLayoutDone",!1),this._objects=t,this.__objectMonitor=this.__objectMonitor.bind(this),this.__objectSelectionTracker=this.__objectSelectionMonitor.bind(this,!0),this.__objectSelectionDisposer=this.__objectSelectionMonitor.bind(this,!1),this.set(i(i({},e),{},{angle:0,skewX:0,skewY:0})),this.forEachObject((t=>{this.enterGroup(t,!1)})),this._applyLayoutStrategy({type:"initialization",options:e,objectsRelativeToGroup:r})}canEnterGroup(t){return t===this||this.isDescendantOf(t)?(console.error("fabric.Group: circular object trees are not supported, this call has no effect"),!1):-1===this._objects.indexOf(t)||(console.error("fabric.Group: duplicate objects are not supported inside group, this call has no effect"),!1)}_filterObjectsBeforeEnteringGroup(t){return t.filter(((t,e,r)=>this.canEnterGroup(t)&&r.indexOf(t)===e))}add(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];const n=this._filterObjectsBeforeEnteringGroup(e),i=super.add(...n);return this._onAfterObjectsChange("added",n),i}insertAt(t){for(var e=arguments.length,r=new Array(e>1?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];const i=this._filterObjectsBeforeEnteringGroup(r),o=super.insertAt(t,...i);return this._onAfterObjectsChange("added",i),o}remove(){const t=super.remove(...arguments);return this._onAfterObjectsChange("removed",t),t}_onObjectAdded(t){this.enterGroup(t,!0),this.fire("object:added",{target:t}),t.fire("added",{target:this})}_onRelativeObjectAdded(t){this.enterGroup(t,!1),this.fire("object:added",{target:t}),t.fire("added",{target:this})}_onObjectRemoved(t,e){this.exitGroup(t,e),this.fire("object:removed",{target:t}),t.fire("removed",{target:this})}_onAfterObjectsChange(t,e){this._applyLayoutStrategy({type:t,targets:e}),this._set("dirty",!0)}_onStackOrderChanged(){this._set("dirty",!0)}_set(t,e){const r=this[t];return super._set(t,e),"canvas"===t&&r!==e&&this.forEachObject((r=>{r._set(t,e)})),"layout"===t&&r!==e&&this._applyLayoutStrategy({type:"layout_change",layout:e,prevLayout:r}),"interactive"===t&&this.forEachObject((t=>this._watchObject(e,t))),this}_shouldSetNestedCoords(){return this.subTargetCheck}removeAll(){return this._activeObjects=[],this.remove(...this._objects)}__objectMonitor(t){this._applyLayoutStrategy(i(i({},t),{},{type:"object_modified"})),this._set("dirty",!0)}__objectSelectionMonitor(t,e){let{target:r}=e;if(t)this._activeObjects.push(r),this._set("dirty",!0);else if(this._activeObjects.length>0){const t=this._activeObjects.indexOf(r);t>-1&&(this._activeObjects.splice(t,1),this._set("dirty",!0))}}_watchObject(t,e){const r=t?"on":"off";t&&this._watchObject(!1,e),e[r]("changed",this.__objectMonitor),e[r]("modified",this.__objectMonitor),e[r]("selected",this.__objectSelectionTracker),e[r]("deselected",this.__objectSelectionDisposer)}enterGroup(t,e){return t.group&&t.group.remove(t),this._enterGroup(t,e),!0}_enterGroup(t,e){e&&te(t,st(ot(this.calcTransformMatrix()),t.calcTransformMatrix())),this._shouldSetNestedCoords()&&t.setCoords(),t._set("group",this),t._set("canvas",this.canvas),this.interactive&&this._watchObject(!0,t);const r=this.canvas&&this.canvas.getActiveObject&&this.canvas.getActiveObject();r&&(r===t||t.isDescendantOf(r))&&this._activeObjects.push(t)}exitGroup(t,e){this._exitGroup(t,e),t._set("canvas",void 0)}_exitGroup(t,e){t._set("group",void 0),e||(te(t,st(this.calcTransformMatrix(),t.calcTransformMatrix())),t.setCoords()),this._watchObject(!1,t);const r=this._activeObjects.length>0?this._activeObjects.indexOf(t):-1;r>-1&&this._activeObjects.splice(r,1)}shouldCache(){const t=Tr.prototype.shouldCache.call(this);if(t)for(let t=0;t<this._objects.length;t++)if(this._objects[t].willDrawShadow())return this.ownCaching=!1,!1;return t}willDrawShadow(){if(Tr.prototype.willDrawShadow.call(this))return!0;for(let t=0;t<this._objects.length;t++)if(this._objects[t].willDrawShadow())return!0;return!1}isOnACache(){return this.ownCaching||!!this.group&&this.group.isOnACache()}drawObject(t){this._renderBackground(t);for(let r=0;r<this._objects.length;r++){var e;null!==(e=this.canvas)&&void 0!==e&&e.preserveObjectStacking&&this._objects[r].group!==this?(t.save(),t.transform(...ot(this.calcTransformMatrix())),this._objects[r].render(t),t.restore()):this._objects[r].group===this&&this._objects[r].render(t)}this._drawClipPath(t,this.clipPath)}setCoords(){super.setCoords(),this._shouldSetNestedCoords()&&this.forEachObject((t=>t.setCoords()))}render(t){this._transformDone=!0,super.render(t),this._transformDone=!1}triggerLayout(t){t&&t.layout&&(t.prevLayout=this.layout,this.layout=t.layout),this._applyLayoutStrategy({type:"imperative",context:t})}_adjustObjectPosition(t,e){t.set({left:t.left+e.x,top:t.top+e.y})}_applyLayoutStrategy(t){const e="initialization"===t.type;if(!e&&!this._firstLayoutDone)return;const r=e&&t.options,n=r&&{angle:r.angle||0,skewX:r.skewX||0,skewY:r.skewY||0},i=this.getRelativeCenterPoint();let o,s=this.getLayoutStrategyResult(this.layout,[...this._objects],t);if(s){const r=new H(s.centerX,s.centerY),a=i.subtract(r).add(new H(s.correctionX||0,s.correctionY||0));o=a.transform(ot(this.calcOwnMatrix()),!0),this.set({width:s.width,height:s.height}),!t.objectsRelativeToGroup&&this.forEachObject((t=>{t.group===this&&this._adjustObjectPosition(t,o)})),!e&&"clip-path"!==this.layout&&this.clipPath&&!this.clipPath.absolutePositioned&&this._adjustObjectPosition(this.clipPath,o),r.eq(i)&&!n||(this.setPositionByOrigin(r,E,E),n&&this.set(n),this.setCoords())}else{if(!e)return;s={centerX:i.x,centerY:i.y,width:this.width,height:this.height},n&&this.set(n),o=new H}this._firstLayoutDone=!0,this.onLayout(t,s),this.fire("layout",{context:t,result:s,diff:o}),this.group&&this.group._applyLayoutStrategy&&(t.path||(t.path=[]),t.path.push(this),this.group._applyLayoutStrategy(t))}getLayoutStrategyResult(t,e,r){if("fit-content-lazy"===t&&"added"===r.type&&e.length>r.targets.length){const e=r.targets.concat(this);return this.prepareBoundingBox(t,e,r)}if("fit-content"===t||"fit-content-lazy"===t||"fixed"===t&&("initialization"===r.type||"imperative"===r.type))return this.prepareBoundingBox(t,e,r);if("clip-path"===t&&this.clipPath){const n=this.clipPath,i=n._getTransformedDimensions();if(n.absolutePositioned&&("initialization"===r.type||"layout_change"===r.type)){let t=n.getCenterPoint();if(this.group){const e=ot(this.group.calcTransformMatrix());t=it(t,e)}return{centerX:t.x,centerY:t.y,width:i.x,height:i.y}}if(!n.absolutePositioned){let o;const s=n.getRelativeCenterPoint(),a=it(s,this.calcOwnMatrix(),!0);if("initialization"===r.type||"layout_change"===r.type){const i=this.prepareBoundingBox(t,e,r)||{};return o=new H(i.centerX||0,i.centerY||0),{centerX:o.x+a.x,centerY:o.y+a.y,correctionX:i.correctionX-a.x,correctionY:i.correctionY-a.y,width:n.width,height:n.height}}return o=this.getRelativeCenterPoint(),{centerX:o.x+a.x,centerY:o.y+a.y,width:i.x,height:i.y}}}}prepareBoundingBox(t,e,r){return"initialization"===r.type?this.prepareInitialBoundingBox(t,e,r):"imperative"===r.type&&r.context?i(i({},this.getObjectsBoundingBox(e)||{}),r.context):this.getObjectsBoundingBox(e)}prepareInitialBoundingBox(t,e,r){const n=r.options||{},i="number"==typeof n.left,o="number"==typeof n.top,s="number"==typeof n.width,a="number"==typeof n.height;if(i&&o&&s&&a&&r.objectsRelativeToGroup||0===e.length)return;const c=this.getObjectsBoundingBox(e)||{},{centerX:l=0,centerY:u=0,width:h=0,height:f=0}=c,d=s?this.width:h,p=a?this.height:f,g=new H(l,u),v=new H(ce(this.originX),ce(this.originY)),_=new H(d,p),y=this._getTransformedDimensions({width:0,height:0}),m=this._getTransformedDimensions({width:d,height:p,strokeWidth:0}),b=this._getTransformedDimensions({width:c.width,height:c.height,strokeWidth:0}),x=new H(0,0),w=v.scalarAdd(.5),S=m.multiply(w),C=new H(s?b.x/2:S.x,a?b.y/2:S.y),O=new H(i?this.left-(m.x+y.x)*v.x:g.x-C.x,o?this.top-(m.y+y.y)*v.y:g.y-C.y),T=new H(i?O.x-g.x+b.x*(s?.5:0):-(s?.5*(m.x-y.x):m.x*w.x),o?O.y-g.y+b.y*(a?.5:0):-(a?.5*(m.y-y.y):m.y*w.y)).add(x),j=new H(s?-m.x/2:0,a?-m.y/2:0).add(T);return{centerX:O.x,centerY:O.y,correctionX:j.x,correctionY:j.y,width:_.x,height:_.y}}getObjectsBoundingBox(t,e){if(0===t.length)return null;const r=[];t.forEach((t=>{const e=t.getRelativeCenterPoint();let n=t._getTransformedDimensions().scalarDivide(2);if(t.angle){const e=et(t.angle),r=Math.abs(Y(e)),i=Math.abs(X(e)),o=n.x*i+n.y*r,s=n.x*r+n.y*i;n=new H(o,s)}r.push(e.subtract(n),e.add(n))}));const{left:n,top:i,width:o,height:s}=Zt(r),a=new H(o,s),c=(e?new H:new H(n,i)).add(a.scalarDivide(2)).transform(this.calcOwnMatrix());return{centerX:c.x,centerY:c.y,width:a.x,height:a.y}}onLayout(t,e){}__serializeObjects(t,e){const r=this.includeDefaultValues;return this._objects.filter((function(t){return!t.excludeFromExport})).map((function(n){const i=n.includeDefaultValues;n.includeDefaultValues=r;const o=n[t||"toObject"](e);return n.includeDefaultValues=i,o}))}toObject(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return i(i({},super.toObject(["layout","subTargetCheck","interactive",...t])),{},{objects:this.__serializeObjects("toObject",t)})}toString(){return"#<Group: (".concat(this.complexity(),")>")}dispose(){this._activeObjects=[],this.forEachObject((t=>{this._watchObject(!1,t),t.dispose()})),super.dispose()}_createSVGBgRect(t){if(!this.backgroundColor)return"";const e=gn.prototype._toSVG.call(this),r=e.indexOf("COMMON_PARTS");e[r]='for="group" ';const n=e.join("");return t?t(n):n}_toSVG(t){const e=["<g ","COMMON_PARTS"," >\n"],r=this._createSVGBgRect(t);r&&e.push("\t\t",r);for(let r=0;r<this._objects.length;r++)e.push("\t\t",this._objects[r].toSVG(t));return e.push("</g>\n"),e}getSvgStyles(){const t=void 0!==this.opacity&&1!==this.opacity?"opacity: ".concat(this.opacity,";"):"",e=this.visible?"":" visibility: hidden;";return[t,this.getSvgFilter(),e].join("")}toClipPathSVG(t){const e=[],r=this._createSVGBgRect(t);r&&e.push("\t",r);for(let r=0;r<this._objects.length;r++)e.push("\t",this._objects[r].toClipPathSVG(t));return this._createBaseClipPathSVGMarkup(e,{reviver:t})}static fromObject(t){let{objects:e=[]}=t,r=a(t,vn);return Promise.all([_t(e),yt(r)]).then((t=>{let[e,n]=t;return new this(e,i(i({},r),n),!0)}))}}o(_n,"stateProperties",[...Tr.stateProperties,"layout"]),o(_n,"type","Group"),o(_n,"ownDefaults",{layout:"fit-content",strokeWidth:0,subTargetCheck:!1,interactive:!1}),N.setClass(_n);class yn extends _n{constructor(t,e,r){super(t,e,r),o(this,"multiSelectionStacking","canvas-stacking"),this.setCoords()}_shouldSetNestedCoords(){return!0}__objectSelectionMonitor(){}multiSelectAdd(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];"selection-order"===this.multiSelectionStacking?this.add(...e):e.forEach((t=>{const e=this._objects.findIndex((e=>e.isInFrontOf(t))),r=-1===e?this.size():e;this.insertAt(r,t)}))}enterGroup(t,e){if(t.group){const e=t.group;e._exitGroup(t),t.__owningGroup=e}return this._enterGroup(t,e),!0}exitGroup(t,e){this._exitGroup(t,e);const r=t.__owningGroup;r&&(r._enterGroup(t,!0),delete t.__owningGroup)}_onAfterObjectsChange(t,e){super._onAfterObjectsChange(t,e);const r=[];e.forEach((t=>{t.group&&!r.includes(t.group)&&r.push(t.group)})),"removed"===t?r.forEach((t=>{t._onAfterObjectsChange("added",e)})):r.forEach((t=>{t._set("dirty",!0)}))}onDeselect(){return this.removeAll(),!1}toString(){return"#<ActiveSelection: (".concat(this.complexity(),")>")}shouldCache(){return!1}isOnACache(){return!1}_renderControls(t,e,r){t.save(),t.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1,super._renderControls(t,e);const n=i(i({hasControls:!1},r),{},{forActiveSelection:!0});for(let e=0;e<this._objects.length;e++)this._objects[e]._renderControls(t,n);t.restore()}}o(yn,"type","ActiveSelection"),N.setClass(yn),N.setClass(yn,"activeSelection");class mn{static getAcuteAngleFactor(t,e){const r=e?Le(t,e):Le(Me,t);return Math.abs(r)<S?-1:1}constructor(t){this.options=t,this.strokeProjectionMagnitude=this.options.strokeWidth/2,this.scale=new H(this.options.scaleX,this.options.scaleY),this.strokeUniformScalar=this.options.strokeUniform?new H(1/this.options.scaleX,1/this.options.scaleY):new H(1,1)}createSideVector(t,e){const r=De(t,e);return this.options.strokeUniform?r.multiply(this.scale):r}projectOrthogonally(t,e,r){return this.applySkew(t.add(this.calcOrthogonalProjection(t,e,r)))}isSkewed(){return 0!==this.options.skewX||0!==this.options.skewY}applySkew(t){const e=new H(t);return e.y+=e.x*Math.tan(et(this.options.skewY)),e.x+=e.y*Math.tan(et(this.options.skewX)),e}scaleUnitVector(t,e){return t.multiply(this.strokeUniformScalar).scalarMultiply(e)}}class bn extends mn{constructor(t,e,r,n){super(n),this.A=new H(t),this.B=new H(e),this.C=new H(r),this.bisector=this.options.strokeUniform?Be(this.A.multiply(this.scale),this.B.multiply(this.scale),this.C.multiply(this.scale)):Be(this.A,this.B,this.C)}get bisectorVector(){return this.bisector.vector}get bisectorAngle(){return this.bisector.angle}calcOrthogonalProjection(t,e){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.strokeProjectionMagnitude;const n=this.createSideVector(t,e),i=Ie(n),o=mn.getAcuteAngleFactor(i,this.bisectorVector);return this.scaleUnitVector(i,r*o)}projectBevel(){return[this.B,this.C].map((t=>this.projectOrthogonally(this.A,t)))}projectMiter(){const t=Math.abs(this.bisectorAngle),e=1/Math.sin(t/2),r=this.scaleUnitVector(this.bisectorVector,-this.strokeProjectionMagnitude*e),n=this.options.strokeUniform?e:this.options.strokeMiterLimit;return Re(r)/this.strokeProjectionMagnitude<=n?[this.applySkew(this.A.add(r))]:this.projectBevel()}projectRoundNoSkew(){const t=new H(mn.getAcuteAngleFactor(this.bisectorVector),mn.getAcuteAngleFactor(new H(this.bisectorVector.y,this.bisectorVector.x))),e=new H(1,0).scalarMultiply(this.strokeProjectionMagnitude).multiply(this.strokeUniformScalar).multiply(t),r=new H(0,1).scalarMultiply(this.strokeProjectionMagnitude).multiply(this.strokeUniformScalar).multiply(t);return[this.A.add(e),this.A.add(r)]}projectRoundWithSkew(){const t=[];[this.B,this.C].forEach((e=>t.push(this.projectOrthogonally(this.A,e))));const{skewX:e,skewY:r}=this.options,n=(new H).scalarAdd(this.strokeProjectionMagnitude).multiply(this.strokeUniformScalar),i=n.y/Math.sqrt(1+Math.tan(et(r))**2),o=new H(Math.sqrt(n.x**2-(i*n.x/n.y)**2),i),s=n.x/Math.sqrt(1+Math.tan(et(e))**2);return[new H(s,Math.sqrt(i**2-(s*i/n.x)**2)),o].forEach((e=>{t.push(this.applySkew(this.A.add(e)),this.applySkew(this.A.subtract(e)))})),t}projectRound(){return this.isSkewed()?this.projectRoundWithSkew():this.projectRoundNoSkew()}projectPoints(){switch(this.options.strokeLineJoin){case"miter":return this.projectMiter();case"round":return this.projectRound();default:return this.projectBevel()}}project(){return this.projectPoints().map((t=>({originPoint:this.A,projectedPoint:t,bisector:this.bisector})))}}class xn extends mn{constructor(t,e,r){super(r),this.A=new H(t),this.T=new H(e)}calcOrthogonalProjection(t,e){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.strokeProjectionMagnitude;const n=this.createSideVector(t,e);return this.scaleUnitVector(Ie(n),r)}projectButt(){return[this.projectOrthogonally(this.A,this.T,this.strokeProjectionMagnitude),this.projectOrthogonally(this.A,this.T,-this.strokeProjectionMagnitude)]}projectRound(){return new bn(this.A,this.T,this.T,this.options).projectRound()}projectSquare(){const t=this.calcOrthogonalProjection(this.A,this.T,this.strokeProjectionMagnitude),e=this.scaleUnitVector(Fe(De(this.A,this.T)),-this.strokeProjectionMagnitude),r=this.A.add(e);return[r.add(t),r.subtract(t)].map((t=>this.applySkew(t)))}projectPoints(){switch(this.options.strokeLineCap){case"round":return this.projectRound();case"square":return this.projectSquare();default:return this.projectButt()}}project(){return this.projectPoints().map((t=>({originPoint:this.A,projectedPoint:t})))}}const wn=function(t,e){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return t.fill!==e.fill||t.stroke!==e.stroke||t.strokeWidth!==e.strokeWidth||t.fontSize!==e.fontSize||t.fontFamily!==e.fontFamily||t.fontWeight!==e.fontWeight||t.fontStyle!==e.fontStyle||t.textBackgroundColor!==e.textBackgroundColor||t.deltaY!==e.deltaY||r&&(t.overline!==e.overline||t.underline!==e.underline||t.linethrough!==e.linethrough)},Sn=(t,e)=>{const r=e.split("\n"),n=[];let i=-1,o={};t=Ye(t);for(let e=0;e<r.length;e++)if(t[e])for(let s=0;s<r[e].length;s++){i++;const r=t[e][s];r&&Object.keys(r).length>0&&(wn(o,r,!0)?n.push({start:i,end:i+1,style:r}):n[n.length-1].end++),o=r||{}}else i+=r[e].length,o={};return n},Cn=(t,e)=>{if(!Array.isArray(t))return Ye(t);const r=e.split(F),n={};let o=-1,s=0;for(let e=0;e<r.length;e++)for(let a=0;a<r[e].length;a++)o++,t[s]&&t[s].start<=o&&o<t[s].end&&(n[e]=n[e]||{},n[e][a]=i({},t[s].style),o===t[s].end-1&&s++);return n},On=(t,e)=>{const r=t.charCodeAt(e);if(isNaN(r))return"";if(r<55296||r>57343)return t.charAt(e);if(55296<=r&&r<=56319){if(t.length<=e+1)throw"High surrogate without following low surrogate";const r=t.charCodeAt(e+1);if(56320>r||r>57343)throw"High surrogate without following low surrogate";return t.charAt(e)+t.charAt(e+1)}if(0===e)throw"Low surrogate without preceding high surrogate";const n=t.charCodeAt(e-1);if(55296>n||n>56319)throw"Low surrogate without preceding high surrogate";return!1};var Tn;const jn="(".concat(Dr,")"),kn="(M) (?:".concat(jn," ").concat(jn," ?)+"),An="(L) (?:".concat(jn," ").concat(jn," ?)+"),En="(H) (?:".concat(jn," ?)+"),Mn="(V) (?:".concat(jn," ?)+"),Pn=String.raw(Tn||(Tn=c(["(Z)s*"],["(Z)\\s*"]))),Dn="(C) (?:".concat(jn," ").concat(jn," ").concat(jn," ").concat(jn," ").concat(jn," ").concat(jn," ?)+"),Rn="(S) (?:".concat(jn," ").concat(jn," ").concat(jn," ").concat(jn," ?)+"),Ln="(Q) (?:".concat(jn," ").concat(jn," ").concat(jn," ").concat(jn," ?)+"),Fn="(T) (?:".concat(jn," ").concat(jn," ?)+"),Bn="(A) (?:".concat(jn," ").concat(jn," ").concat(jn," ([01]) ?([01]) ").concat(jn," ").concat(jn," ?)+"),In="(?:(?:".concat(kn,")")+"|(?:".concat(An,")")+"|(?:".concat(En,")")+"|(?:".concat(Mn,")")+"|(?:".concat(Pn,")")+"|(?:".concat(Dn,")")+"|(?:".concat(Rn,")")+"|(?:".concat(Ln,")")+"|(?:".concat(Fn,")")+"|(?:".concat(Bn,"))"),Nn={m:"l",M:"L"},Vn=(t,e,r,n,i,o,s,a,c,l,u)=>{const h=X(t),f=Y(t),d=X(e),p=Y(e),g=r*i*d-n*o*p+s,v=n*i*d+r*o*p+a;return["C",l+c*(-r*i*f-n*o*h),u+c*(-n*i*f+r*o*h),g+c*(r*i*p+n*o*d),v+c*(n*i*p-r*o*d),g,v]},Wn=(t,e,r,n)=>{const i=Math.atan2(e,t),o=Math.atan2(n,r);return o>=i?o-i:2*Math.PI-(i-o)};function Un(t,e,r,n,i,o,s,a){let c;if(h.cachesBoundsOfCurve&&(c=[...arguments].join(),b.boundsOfCurveCache[c]))return b.boundsOfCurveCache[c];const l=Math.sqrt,u=Math.abs,f=[],d=[[0,0],[0,0]];let p=6*t-12*r+6*i,g=-3*t+9*r-9*i+3*s,v=3*r-3*t;for(let t=0;t<2;++t){if(t>0&&(p=6*e-12*n+6*o,g=-3*e+9*n-9*o+3*a,v=3*n-3*e),u(g)<1e-12){if(u(p)<1e-12)continue;const t=-v/p;0<t&&t<1&&f.push(t);continue}const r=p*p-4*v*g;if(r<0)continue;const i=l(r),s=(-p+i)/(2*g);0<s&&s<1&&f.push(s);const c=(-p-i)/(2*g);0<c&&c<1&&f.push(c)}let _=f.length;const y=_,m=Yn(t,e,r,n,i,o,s,a);for(;_--;){const{x:t,y:e}=m(f[_]);d[0][_]=t,d[1][_]=e}d[0][y]=t,d[1][y]=e,d[0][y+1]=s,d[1][y+1]=a;const x=[new H(Math.min(...d[0]),Math.min(...d[1])),new H(Math.max(...d[0]),Math.max(...d[1]))];return h.cachesBoundsOfCurve&&(b.boundsOfCurveCache[c]=x),x}const zn=(t,e,r)=>{let[n,i,o,s,a,c,l,u]=r;const h=((t,e,r,n,i,o,s)=>{if(0===r||0===n)return[];let a=0,c=0,l=0;const u=Math.PI,h=s*O,f=Y(h),d=X(h),p=.5*(-d*t-f*e),g=.5*(-d*e+f*t),v=r**2,_=n**2,y=g**2,m=p**2,b=v*_-v*y-_*m;let x=Math.abs(r),w=Math.abs(n);if(b<0){const t=Math.sqrt(1-b/(v*_));x*=t,w*=t}else l=(i===o?-1:1)*Math.sqrt(b/(v*y+_*m));const S=l*x*g/w,C=-l*w*p/x,T=d*S-f*C+.5*t,j=f*S+d*C+.5*e;let k=Wn(1,0,(p-S)/x,(g-C)/w),A=Wn((p-S)/x,(g-C)/w,(-p-S)/x,(-g-C)/w);0===o&&A>0?A-=2*u:1===o&&A<0&&(A+=2*u);const E=Math.ceil(Math.abs(A/u*2)),M=new Array(E),P=A/E,D=8/3*Math.sin(P/4)*Math.sin(P/4)/Math.sin(P/2);let R=k+P;for(let t=0;t<E;t++)M[t]=Vn(k,R,d,f,x,w,T,j,D,a,c),a=M[t][5],c=M[t][6],k=R,R+=P;return M})(l-t,u-e,i,o,a,c,s);for(let r=0,n=h.length;r<n;r++)h[r][1]+=t,h[r][2]+=e,h[r][3]+=t,h[r][4]+=e,h[r][5]+=t,h[r][6]+=e;return h},Xn=(t,e,r,n)=>Math.sqrt((r-t)**2+(n-e)**2),Yn=(t,e,r,n,i,o,s,a)=>c=>{const l=c**3,u=3*(d=c)**2*(1-d),h=(t=>3*t*(1-t)**2)(c),f=(t=>(1-t)**3)(c);var d;return new H(s*l+i*u+r*h+t*f,a*l+o*u+n*h+e*f)},Hn=t=>t**2,Gn=t=>2*t*(1-t),qn=t=>(1-t)**2,Kn=(t,e,r,n,i,o,s,a)=>c=>{const l=Hn(c),u=Gn(c),h=qn(c),f=3*(h*(r-t)+u*(i-r)+l*(s-i)),d=3*(h*(n-e)+u*(o-n)+l*(a-o));return Math.atan2(d,f)},$n=(t,e,r,n,i,o)=>s=>{const a=Hn(s),c=Gn(s),l=qn(s);return new H(i*a+r*c+t*l,o*a+n*c+e*l)},Jn=(t,e,r,n,i,o)=>s=>{const a=1-s,c=2*(a*(r-t)+s*(i-r)),l=2*(a*(n-e)+s*(o-n));return Math.atan2(l,c)},Zn=(t,e,r)=>{let n=new H(e,r),i=0;for(let e=1;e<=100;e+=1){const r=t(e/100);i+=Xn(n.x,n.y,r.x,r.y),n=r}return i},Qn=t=>{let e,r,n=0,i=0,o=0,s=0,a=0;const c=[];for(const l of t){const t={x:i,y:o,command:l[0],length:0};switch(l[0]){case"M":r=t,s=i=l[1],a=o=l[2];break;case"L":r=t,r.length=Xn(i,o,l[1],l[2]),i=l[1],o=l[2];break;case"C":e=Yn(i,o,l[1],l[2],l[3],l[4],l[5],l[6]),r=t,r.iterator=e,r.angleFinder=Kn(i,o,l[1],l[2],l[3],l[4],l[5],l[6]),r.length=Zn(e,i,o),i=l[5],o=l[6];break;case"Q":e=$n(i,o,l[1],l[2],l[3],l[4]),r=t,r.iterator=e,r.angleFinder=Jn(i,o,l[1],l[2],l[3],l[4]),r.length=Zn(e,i,o),i=l[3],o=l[4];break;case"Z":r=t,r.destX=s,r.destY=a,r.length=Xn(i,o,s,a),i=s,o=a}n+=r.length,c.push(r)}return c.push({length:n,x:i,y:o}),c},ti=function(t,e){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Qn(t),n=0;for(;e-r[n].length>0&&n<r.length-2;)e-=r[n].length,n++;const o=r[n],s=e/o.length,a=t[n];switch(o.command){case"M":return{x:o.x,y:o.y,angle:0};case"Z":return i(i({},new H(o.x,o.y).lerp(new H(o.destX,o.destY),s)),{},{angle:Math.atan2(o.destY-o.y,o.destX-o.x)});case"L":return i(i({},new H(o.x,o.y).lerp(new H(a[1],a[2]),s)),{},{angle:Math.atan2(a[2]-o.y,a[1]-o.x)});case"C":case"Q":return((t,e)=>{let r,n=0,o=0,s={x:t.x,y:t.y},a=i({},s),c=.01,l=0;const u=t.iterator,h=t.angleFinder;for(;o<e&&c>1e-4;)a=u(n),l=n,r=Xn(s.x,s.y,a.x,a.y),r+o>e?(n-=c,c/=2):(s=a,n+=c,o+=r);return i(i({},a),{},{angle:h(l)})})(o,e)}},ei=(t,e)=>{let r=t._findCenterFromElement();t.transformMatrix&&((t=>{if(t.transformMatrix){const{scaleX:e,scaleY:r,angle:n,skewX:i}=ct(t.transformMatrix);t.flipX=!1,t.flipY=!1,t.set("scaleX",e),t.set("scaleY",r),t.angle=n,t.skewX=i,t.skewY=0}})(t),r=r.transform(t.transformMatrix)),delete t.transformMatrix,e&&(t.scaleX*=e.scaleX,t.scaleY*=e.scaleY,t.cropX=e.cropX,t.cropY=e.cropY,r.x+=e.offsetLeft,r.y+=e.offsetTop,t.width=e.width,t.height=e.height),t.setPositionByOrigin(r,E,E)};class ri extends Ht{constructor(t){let{allowTouchScrolling:e=!1,containerClass:r=""}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(t),o(this,"upper",void 0),o(this,"container",void 0);const{el:n}=this.lower,i=this.createUpperCanvas();this.upper={el:i,ctx:i.getContext("2d")},this.applyCanvasStyle(n,{allowTouchScrolling:e}),this.applyCanvasStyle(i,{allowTouchScrolling:e});const s=this.createContainerElement();s.classList.add(r),n.parentNode&&n.parentNode.replaceChild(s,n),s.append(n,i),this.container=s}createUpperCanvas(){const{el:t}=this.lower,e=Q();return e.className=t.className,e.classList.remove("lower-canvas"),e.classList.add("upper-canvas"),e.setAttribute("data-fabric","top"),e.style.cssText=t.style.cssText,e.setAttribute("draggable","true"),e}createContainerElement(){const t=y().createElement("div");return t.setAttribute("data-fabric","wrapper"),Ut(t,{position:"relative"}),Yt(t),t}applyCanvasStyle(t,e){let{allowTouchScrolling:r}=e;Ut(t,{position:"absolute",left:"0",top:"0"}),function(t,e){const r=e?"manipulation":L;Ut(t,{"touch-action":r,"-ms-touch-action":r})}(t,r),Yt(t)}setDimensions(t,e){super.setDimensions(t,e);const{el:r,ctx:n}=this.upper;zt(r,n,t,e)}setCSSDimensions(t){super.setCSSDimensions(t),Xt(this.upper.el,t),Xt(this.container,t)}cleanupDOM(t){const e=this.container,{el:r}=this.lower,{el:n}=this.upper;super.cleanupDOM(t),e.removeChild(n),e.removeChild(r),e.parentNode&&e.parentNode.replaceChild(r,e)}dispose(){super.dispose(),_().dispose(this.upper.el),delete this.upper,delete this.container}}class ni extends qt{static getDefaults(){return i(i({},super.getDefaults()),ni.ownDefaults)}get upperCanvasEl(){var t;return null===(t=this.elements.upper)||void 0===t?void 0:t.el}get contextTop(){var t;return null===(t=this.elements.upper)||void 0===t?void 0:t.ctx}get wrapperEl(){return this.elements.container}constructor(t){super(t,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}),o(this,"interactive",!0),o(this,"targets",[]),o(this,"_hoveredTargets",[]),o(this,"_objectsToRender",[]),o(this,"_currentTransform",null),o(this,"_groupSelector",null),o(this,"contextTopDirty",!1),o(this,"_activeSelection",void 0),this._activeSelection=new yn([],{canvas:this})}initElements(t){this.elements=new ri(t,{allowTouchScrolling:this.allowTouchScrolling,containerClass:this.containerClass}),this._createCacheCanvas()}_onObjectAdded(t){this._objectsToRender=void 0,super._onObjectAdded(t)}_onObjectRemoved(t){this._objectsToRender=void 0,t===this._activeObject&&(this.fire("before:selection:cleared",{deselected:[t]}),this._discardActiveObject(),this.fire("selection:cleared",{deselected:[t]}),t.fire("deselected",{target:t})),t===this._hoveredTarget&&(this._hoveredTarget=void 0,this._hoveredTargets=[]),super._onObjectRemoved(t)}_chooseObjectsToRender(){const t=this._activeObject;return!this.preserveObjectStacking&&t?this._objects.filter((e=>!e.group&&e!==t)).concat(t):this._objects}renderAll(){this.cancelRequestedRender(),this.destroyed||(!this.contextTopDirty||this._groupSelector||this.isDrawingMode||(this.clearContext(this.contextTop),this.contextTopDirty=!1),this.hasLostContext&&(this.renderTopLayer(this.contextTop),this.hasLostContext=!1),!this._objectsToRender&&(this._objectsToRender=this._chooseObjectsToRender()),this.renderCanvas(this.getContext(),this._objectsToRender))}renderTopLayer(t){t.save(),this.isDrawingMode&&this._isCurrentlyDrawing&&(this.freeDrawingBrush&&this.freeDrawingBrush._render(),this.contextTopDirty=!0),this.selection&&this._groupSelector&&(this._drawSelection(t),this.contextTopDirty=!0),t.restore()}renderTop(){const t=this.contextTop;this.clearContext(t),this.renderTopLayer(t),this.fire("after:render",{ctx:t})}_normalizePointer(t,e){return it(this.restorePointerVpt(e),ot(t.calcTransformMatrix()))}setTargetFindTolerance(t){t=Math.round(t),this.targetFindTolerance=t;const e=this.getRetinaScaling(),r=Math.ceil((2*t+1)*e);this.pixelFindCanvasEl.width=this.pixelFindCanvasEl.height=r,this.pixelFindContext.scale(e,e)}isTargetTransparent(t,e,r){const n=this.targetFindTolerance,i=this.pixelFindContext;this.clearContext(i),i.save(),i.translate(-e+n,-r+n),i.transform(...this.viewportTransform);const o=t.selectionBackgroundColor;t.selectionBackgroundColor="",t.render(i),t.selectionBackgroundColor=o,i.restore();const s=Math.round(n*this.getRetinaScaling());return((t,e,r,n)=>{const i=2*(n=Math.round(n))+1,{data:o}=t.getImageData(e-n,r-n,i,i);for(let t=3;t<o.length;t+=4)if(o[t]>0)return!1;return!0})(i,s,s,s)}_isSelectionKeyPressed(t){const e=this.selectionKey;return!!e&&(Array.isArray(e)?!!e.find((e=>!!e&&!0===t[e])):t[e])}_shouldClearSelection(t,e){const r=this.getActiveObjects(),n=this._activeObject;return!!(!e||e&&n&&r.length>1&&-1===r.indexOf(e)&&n!==e&&!this._isSelectionKeyPressed(t)||e&&!e.evented||e&&!e.selectable&&n&&n!==e)}_shouldCenterTransform(t,e,r){if(!t)return;let n;return"scale"===e||"scaleX"===e||"scaleY"===e||"resizing"===e?n=this.centeredScaling||t.centeredScaling:"rotate"===e&&(n=this.centeredRotation||t.centeredRotation),n?!r:r}_getOriginFromCorner(t,e){const r={x:t.originX,y:t.originY};return["ml","tl","bl"].includes(e)?r.x=R:["mr","tr","br"].includes(e)&&(r.x=M),["tl","mt","tr"].includes(e)?r.y=D:["bl","mb","br"].includes(e)&&(r.y=P),r}_setupCurrentTransform(t,e,r){if(!e)return;const n=e.group?oe(this.getPointer(t),void 0,e.group.calcTransformMatrix()):this.getPointer(t),o=e.__corner||"",s=!!o&&e.controls[o],a=r&&s?s.getActionHandler(t,e,s):ve,c=((t,e,r,n)=>{if(!e||!t)return"drag";const i=n.controls[e];return i.getActionName(r,i,n)})(r,o,t,e),l=this._getOriginFromCorner(e,o),u=t[this.centeredKey],h={target:e,action:c,actionHandler:a,actionPerformed:!1,corner:o,scaleX:e.scaleX,scaleY:e.scaleY,skewX:e.skewX,skewY:e.skewY,offsetX:n.x-e.left,offsetY:n.y-e.top,originX:l.x,originY:l.y,ex:n.x,ey:n.y,lastX:n.x,lastY:n.y,theta:et(e.angle),width:e.width,height:e.height,shiftKey:t.shiftKey,altKey:u,original:i(i({},re(e)),{},{originX:l.x,originY:l.y})};this._shouldCenterTransform(e,c,u)&&(h.originX=E,h.originY=E),this._currentTransform=h,this._beforeTransform(t)}setCursor(t){this.upperCanvasEl.style.cursor=t}_drawSelection(t){const{x:e,y:r,deltaX:n,deltaY:i}=this._groupSelector,o=new H(e,r).transform(this.viewportTransform),s=new H(e+n,r+i).transform(this.viewportTransform),a=this.selectionLineWidth/2;let c=Math.min(o.x,s.x),l=Math.min(o.y,s.y),u=Math.max(o.x,s.x),h=Math.max(o.y,s.y);this.selectionColor&&(t.fillStyle=this.selectionColor,t.fillRect(c,l,u-c,h-l)),this.selectionLineWidth&&this.selectionBorderColor&&(t.lineWidth=this.selectionLineWidth,t.strokeStyle=this.selectionBorderColor,c+=a,l+=a,u-=a,h-=a,Tr.prototype._setLineDash.call(this,t,this.selectionDashArray),t.strokeRect(c,l,u-c,h-l))}findTarget(t){if(this.skipTargetFind)return;const e=this.getPointer(t,!0),r=this._activeObject,n=this.getActiveObjects();if(this.targets=[],r&&n.length>=1){if(r._findTargetCorner(e,$t(t)))return r;if(n.length>1&&this.searchPossibleTargets([r],e))return r;if(r===this.searchPossibleTargets([r],e)){if(this.preserveObjectStacking){const n=this.targets;this.targets=[];const i=this.searchPossibleTargets(this._objects,e);return t[this.altSelectionKey]&&i&&i!==r?(this.targets=n,r):i}return r}}return this.searchPossibleTargets(this._objects,e)}_checkTarget(t,e,r){if(e&&e.visible&&e.evented&&e.containsPoint(t)){if(!this.perPixelTargetFind&&!e.perPixelTargetFind||e.isEditing)return!0;if(!this.isTargetTransparent(e,r.x,r.y))return!0}return!1}_searchPossibleTargets(t,e){let r,n=t.length;for(;n--;){const i=t[n],o=i.group?this._normalizePointer(i.group,e):e;if(this._checkTarget(o,i,e)){if(r=t[n],Lt(r)&&r.subTargetCheck){const t=this._searchPossibleTargets(r._objects,e);t&&this.targets.push(t)}break}}return r}searchPossibleTargets(t,e){const r=this._searchPossibleTargets(t,e);return r&&Lt(r)&&r.interactive&&this.targets[0]?this.targets[0]:r}restorePointerVpt(t){return t.transform(ot(this.viewportTransform))}getPointer(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this._absolutePointer&&!e)return this._absolutePointer;if(this._pointer&&e)return this._pointer;const r=this.upperCanvasEl,n=r.getBoundingClientRect();let i=(t=>{const e=Nt(t.target),r=function(t){const e=t.changedTouches;return e&&e[0]?e[0]:t}(t);return new H(r.clientX+e.left,r.clientY+e.top)})(t),o=n.width||0,s=n.height||0;o&&s||(P in n&&D in n&&(s=Math.abs(n.top-n.bottom)),R in n&&M in n&&(o=Math.abs(n.right-n.left))),this.calcOffset(),i.x=i.x-this._offset.left,i.y=i.y-this._offset.top,e||(i=this.restorePointerVpt(i));const a=this.getRetinaScaling();1!==a&&(i.x/=a,i.y/=a);const c=0===o||0===s?new H(1,1):new H(r.width/o,r.height/s);return i.multiply(c)}_setDimensionsImpl(t,e){this._resetTransformEventData(),super._setDimensionsImpl(t,e),this._isCurrentlyDrawing&&this.freeDrawingBrush&&this.freeDrawingBrush._setBrushStyles(this.contextTop)}_createCacheCanvas(){this.pixelFindCanvasEl=Q(),this.pixelFindContext=this.pixelFindCanvasEl.getContext("2d",{willReadFrequently:!0}),this.setTargetFindTolerance(this.targetFindTolerance)}getTopContext(){return this.elements.upper.ctx}getSelectionContext(){return this.elements.upper.ctx}getSelectionElement(){return this.elements.upper.el}getActiveObject(){return this._activeObject}getActiveSelection(){return this._activeSelection}getActiveObjects(){const t=this._activeObject;return t?t===this._activeSelection?[...t._objects]:[t]:[]}_fireSelectionEvents(t,e){let r=!1,n=!1;const i=this.getActiveObjects(),o=[],s=[];t.forEach((t=>{i.includes(t)||(r=!0,t.fire("deselected",{e,target:t}),s.push(t))})),i.forEach((n=>{t.includes(n)||(r=!0,n.fire("selected",{e,target:n}),o.push(n))})),t.length>0&&i.length>0?(n=!0,r&&this.fire("selection:updated",{e,selected:o,deselected:s})):i.length>0?(n=!0,this.fire("selection:created",{e,selected:o})):t.length>0&&(n=!0,this.fire("selection:cleared",{e,deselected:s})),n&&(this._objectsToRender=void 0)}setActiveObject(t,e){const r=this.getActiveObjects(),n=this._setActiveObject(t,e);return this._fireSelectionEvents(r,e),n}_setActiveObject(t,e){return!(this._activeObject===t||!this._discardActiveObject(e,t)&&this._activeObject||t.onSelect({e})||(this._activeObject=t,0))}_discardActiveObject(t,e){const r=this._activeObject;return!!r&&!r.onDeselect({e:t,object:e})&&(r===this._activeSelection&&(this._activeSelection.removeAll(),ee(this._activeSelection)),this._currentTransform&&this._currentTransform.target===r&&this.endCurrentTransform(t),this._activeObject=void 0,!0)}discardActiveObject(t){const e=this.getActiveObjects(),r=this.getActiveObject();e.length&&this.fire("before:selection:cleared",{e:t,deselected:[r]});const n=this._discardActiveObject(t);return this._fireSelectionEvents(e,t),n}setViewportTransform(t){super.setViewportTransform(t);const e=this._activeObject;e&&e.setCoords()}destroy(){const t=this._activeSelection;t.removeAll(),this._activeSelection=void 0,t.dispose(),super.destroy(),this.pixelFindContext=null,this.pixelFindCanvasEl=void 0}clear(){this.discardActiveObject(),this._activeObject=void 0,this.clearContext(this.contextTop),super.clear()}drawControls(t){const e=this._activeObject;e&&e._renderControls(t)}_toObject(t,e,r){const n=this._realizeGroupTransformOnObject(t),i=super._toObject(t,e,r);return t.set(n),i}_realizeGroupTransformOnObject(t){if(t.group&&t.group===this._activeSelection&&this._activeObject===t.group){const e=mt(t,["angle","flipX","flipY",M,"scaleX","scaleY","skewX","skewY",P]);return((t,e)=>{te(t,st(e,t.calcOwnMatrix()))})(t,this._activeObject.calcOwnMatrix()),e}return{}}_setSVGObject(t,e,r){const n=this._realizeGroupTransformOnObject(e);super._setSVGObject(t,e,r),e.set(n)}}o(ni,"ownDefaults",{uniformScaling:!0,uniScaleKey:"shiftKey",centeredScaling:!1,centeredRotation:!1,centeredKey:"altKey",altActionKey:"shiftKey",selection:!0,selectionKey:"shiftKey",selectionColor:"rgba(100, 100, 255, 0.3)",selectionDashArray:[],selectionBorderColor:"rgba(255, 255, 255, 0.3)",selectionLineWidth:1,selectionFullyContained:!1,hoverCursor:"move",moveCursor:"move",defaultCursor:"default",freeDrawingCursor:"crosshair",notAllowedCursor:"not-allowed",containerClass:"canvas-container",perPixelTargetFind:!1,targetFindTolerance:0,skipTargetFind:!1,preserveObjectStacking:!1,stopContextMenu:!1,fireRightClick:!1,fireMiddleClick:!1,enablePointerEvents:!1});class ii{constructor(t){o(this,"targets",[]),o(this,"__disposer",void 0);const e=()=>{const e=t.getActiveObject();Bt(e)&&e.hiddenTextarea&&e.hiddenTextarea.focus()},r=t.upperCanvasEl;r.addEventListener("click",e),this.__disposer=()=>r.removeEventListener("click",e)}exitTextEditing(){this.target=void 0,this.targets.forEach((t=>{t.isEditing&&t.exitEditing()}))}add(t){this.targets.push(t)}remove(t){this.unregister(t),z(this.targets,t)}register(t){this.target=t}unregister(t){t===this.target&&(this.target=void 0)}onMouseMove(t){var e;(null===(e=this.target)||void 0===e?void 0:e.isEditing)&&this.target.updateSelectionOnMouseMove(t)}clear(){this.targets=[],this.target=void 0}dispose(){this.clear(),this.__disposer(),delete this.__disposer}}const oi=["target","oldTarget","fireCanvas","e"],si={passive:!1};function ai(t,e){return!!t.button&&t.button===e-1}const ci=function(t){for(var e=arguments.length,r=new Array(e>1?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];return t.addEventListener(...r)},li=function(t){for(var e=arguments.length,r=new Array(e>1?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];return t.removeEventListener(...r)},ui={mouse:{in:"over",out:"out",targetIn:"mouseover",targetOut:"mouseout",canvasIn:"mouse:over",canvasOut:"mouse:out"},drag:{in:"enter",out:"leave",targetIn:"dragenter",targetOut:"dragleave",canvasIn:"drag:enter",canvasOut:"drag:leave"}};class hi extends ni{constructor(t){super(t,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}),o(this,"_isClick",void 0),o(this,"textEditingManager",new ii(this)),["_onMouseDown","_onTouchStart","_onMouseMove","_onMouseUp","_onTouchEnd","_onResize","_onMouseWheel","_onMouseOut","_onMouseEnter","_onContextMenu","_onDoubleClick","_onDragStart","_onDragEnd","_onDragProgress","_onDragOver","_onDragEnter","_onDragLeave","_onDrop"].forEach((t=>{this[t]=this[t].bind(this)})),this.addOrRemove(ci,"add")}_getEventPrefix(){return this.enablePointerEvents?"pointer":"mouse"}addOrRemove(t,e){const r=this.upperCanvasEl,n=this._getEventPrefix();t(Wt(r),"resize",this._onResize),t(r,n+"down",this._onMouseDown),t(r,"".concat(n,"move"),this._onMouseMove,si),t(r,"".concat(n,"out"),this._onMouseOut),t(r,"".concat(n,"enter"),this._onMouseEnter),t(r,"wheel",this._onMouseWheel),t(r,"contextmenu",this._onContextMenu),t(r,"dblclick",this._onDoubleClick),t(r,"dragstart",this._onDragStart),t(r,"dragend",this._onDragEnd),t(r,"dragover",this._onDragOver),t(r,"dragenter",this._onDragEnter),t(r,"dragleave",this._onDragLeave),t(r,"drop",this._onDrop),this.enablePointerEvents||t(r,"touchstart",this._onTouchStart,si)}removeListeners(){this.addOrRemove(li,"remove");const t=this._getEventPrefix(),e=Vt(this.upperCanvasEl);li(e,"".concat(t,"up"),this._onMouseUp),li(e,"touchend",this._onTouchEnd,si),li(e,"".concat(t,"move"),this._onMouseMove,si),li(e,"touchmove",this._onMouseMove,si)}_onMouseWheel(t){this.__onMouseWheel(t)}_onMouseOut(t){const e=this._hoveredTarget,r={e:t,isClick:!1,pointer:this.getPointer(t),absolutePointer:this.getPointer(t,!0)};this.fire("mouse:out",i(i({},r),{},{target:e})),this._hoveredTarget=void 0,e&&e.fire("mouseout",i({},r)),this._hoveredTargets.forEach((t=>{this.fire("mouse:out",i(i({},r),{},{target:t})),t&&t.fire("mouseout",i({},r))})),this._hoveredTargets=[]}_onMouseEnter(t){this._currentTransform||this.findTarget(t)||(this.fire("mouse:over",{e:t,isClick:!1,pointer:this.getPointer(t),absolutePointer:this.getPointer(t,!0)}),this._hoveredTarget=void 0,this._hoveredTargets=[])}_onDragStart(t){this._isClick=!1;const e=this.getActiveObject();if(It(e)&&e.onDragStart(t)){this._dragSource=e;const r={e:t,target:e};return this.fire("dragstart",r),e.fire("dragstart",r),void ci(this.upperCanvasEl,"drag",this._onDragProgress)}Jt(t)}_renderDragEffects(t,e,r){let n=!1;const i=this._dropTarget;i&&i!==e&&i!==r&&(i.clearContextTop(),n=!0),null==e||e.clearContextTop(),r!==e&&(null==r||r.clearContextTop());const o=this.contextTop;o.save(),o.transform(...this.viewportTransform),e&&(o.save(),e.transform(o),e.renderDragSourceEffect(t),o.restore(),n=!0),r&&(o.save(),r.transform(o),r.renderDropTargetEffect(t),o.restore(),n=!0),o.restore(),n&&(this.contextTopDirty=!0)}_onDragEnd(t){const e=!!t.dataTransfer&&t.dataTransfer.dropEffect!==L,r=e?this._activeObject:void 0,n={e:t,target:this._dragSource,subTargets:this.targets,dragSource:this._dragSource,didDrop:e,dropTarget:r};li(this.upperCanvasEl,"drag",this._onDragProgress),this.fire("dragend",n),this._dragSource&&this._dragSource.fire("dragend",n),delete this._dragSource,this._onMouseUp(t)}_onDragProgress(t){const e={e:t,target:this._dragSource,dragSource:this._dragSource,dropTarget:this._draggedoverTarget};this.fire("drag",e),this._dragSource&&this._dragSource.fire("drag",e)}findDragTargets(t){return this.targets=[],{target:this._searchPossibleTargets(this._objects,this.getPointer(t,!0)),targets:[...this.targets]}}_onDragOver(t){const e="dragover",{target:r,targets:n}=this.findDragTargets(t),i=this._dragSource,o={e:t,target:r,subTargets:n,dragSource:i,canDrop:!1,dropTarget:void 0};let s;this.fire(e,o),this._fireEnterLeaveEvents(r,o),r&&(r.canDrop(t)&&(s=r),r.fire(e,o));for(let r=0;r<n.length;r++){const i=n[r];i.canDrop(t)&&(s=i),i.fire(e,o)}this._renderDragEffects(t,i,s),this._dropTarget=s}_onDragEnter(t){const{target:e,targets:r}=this.findDragTargets(t),n={e:t,target:e,subTargets:r,dragSource:this._dragSource};this.fire("dragenter",n),this._fireEnterLeaveEvents(e,n)}_onDragLeave(t){const e={e:t,target:this._draggedoverTarget,subTargets:this.targets,dragSource:this._dragSource};this.fire("dragleave",e),this._fireEnterLeaveEvents(void 0,e),this._renderDragEffects(t,this._dragSource),this._dropTarget=void 0,this.targets=[],this._hoveredTargets=[]}_onDrop(t){const{target:e,targets:r}=this.findDragTargets(t),n=this._basicEventHandler("drop:before",{e:t,target:e,subTargets:r,dragSource:this._dragSource,pointer:this.getPointer(t)});n.didDrop=!1,n.dropTarget=void 0,this._basicEventHandler("drop",n),this.fire("drop:after",n)}_onContextMenu(t){const e=this.findTarget(t),r=this.targets||[],n=this._basicEventHandler("contextmenu:before",{e:t,target:e,subTargets:r});return this.stopContextMenu&&Jt(t),this._basicEventHandler("contextmenu",n),!1}_onDoubleClick(t){this._cacheTransformEventData(t),this._handleEvent(t,"dblclick"),this._resetTransformEventData()}getPointerId(t){const e=t.changedTouches;return e?e[0]&&e[0].identifier:this.enablePointerEvents?t.pointerId:-1}_isMainEvent(t){return!0===t.isPrimary||!1!==t.isPrimary&&("touchend"===t.type&&0===t.touches.length||!t.changedTouches||t.changedTouches[0].identifier===this.mainTouchId)}_onTouchStart(t){t.preventDefault(),null===this.mainTouchId&&(this.mainTouchId=this.getPointerId(t)),this.__onMouseDown(t),this._resetTransformEventData();const e=this.upperCanvasEl,r=this._getEventPrefix(),n=Vt(e);ci(n,"touchend",this._onTouchEnd,si),ci(n,"touchmove",this._onMouseMove,si),li(e,"".concat(r,"down"),this._onMouseDown)}_onMouseDown(t){this.__onMouseDown(t),this._resetTransformEventData();const e=this.upperCanvasEl,r=this._getEventPrefix();li(e,"".concat(r,"move"),this._onMouseMove,si);const n=Vt(e);ci(n,"".concat(r,"up"),this._onMouseUp),ci(n,"".concat(r,"move"),this._onMouseMove,si)}_onTouchEnd(t){if(t.touches.length>0)return;this.__onMouseUp(t),this._resetTransformEventData(),this.mainTouchId=null;const e=this._getEventPrefix(),r=Vt(this.upperCanvasEl);li(r,"touchend",this._onTouchEnd,si),li(r,"touchmove",this._onMouseMove,si),this._willAddMouseDown&&clearTimeout(this._willAddMouseDown),this._willAddMouseDown=setTimeout((()=>{ci(this.upperCanvasEl,"".concat(e,"down"),this._onMouseDown),this._willAddMouseDown=0}),400)}_onMouseUp(t){this.__onMouseUp(t),this._resetTransformEventData();const e=this.upperCanvasEl,r=this._getEventPrefix();if(this._isMainEvent(t)){const t=Vt(this.upperCanvasEl);li(t,"".concat(r,"up"),this._onMouseUp),li(t,"".concat(r,"move"),this._onMouseMove,si),ci(e,"".concat(r,"move"),this._onMouseMove,si)}}_onMouseMove(t){const e=this.getActiveObject();!this.allowTouchScrolling&&(!e||It(e)&&!e.shouldStartDragging())&&t.preventDefault&&t.preventDefault(),this.__onMouseMove(t)}_onResize(){this.calcOffset(),this._resetTransformEventData()}_shouldRender(t){const e=this.getActiveObject();return!!(!!e!=!!t||e&&t&&e!==t)||(Bt(e),!1)}__onMouseUp(t){const e=this._currentTransform;this._cacheTransformEventData(t);const r=this._target,n=this._isClick;if(this._handleEvent(t,"up:before"),ai(t,3))return void(this.fireRightClick&&this._handleEvent(t,"up",3,n));if(ai(t,2))return this.fireMiddleClick&&this._handleEvent(t,"up",2,n),void this._resetTransformEventData();if(this.isDrawingMode&&this._isCurrentlyDrawing)return void this._onMouseUpInDrawingMode(t);if(!this._isMainEvent(t))return;let i,o,s=!1;if(e&&(this._finalizeCurrentTransform(t),s=e.actionPerformed),!n){const e=r===this._activeObject;this.handleSelection(t),s||(s=this._shouldRender(r)||!e&&r===this._activeObject)}if(r){if(o=r._findTargetCorner(this.getPointer(t,!0),$t(t)),r.selectable&&r!==this._activeObject&&"up"===r.activeOn)this.setActiveObject(r,t),s=!0;else{const n=r.controls[o],s=n&&n.getMouseUpHandler(t,r,n);s&&(i=this.getPointer(t),s(t,e,i.x,i.y))}r.isMoving=!1}if(e&&(e.target!==r||e.corner!==o)){const r=e.target&&e.target.controls[e.corner],n=r&&r.getMouseUpHandler(t,e.target,r);i=i||this.getPointer(t),n&&n(t,e,i.x,i.y)}this._setCursorFromEvent(t,r),this._handleEvent(t,"up",1,n),this._groupSelector=null,this._currentTransform=null,r&&(r.__corner=void 0),s?this.requestRenderAll():n||Bt(this._activeObject)&&this._activeObject.isEditing||this.renderTop()}_basicEventHandler(t,e){const{target:r,subTargets:n=[]}=e;this.fire(t,e),r&&r.fire(t,e);for(let r=0;r<n.length;r++)n[r].fire(t,e);return e}_handleEvent(t,e){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=this._target,o=this.targets||[],s={e:t,target:i,subTargets:o,button:r,isClick:n,pointer:this.getPointer(t),absolutePointer:this.getPointer(t,!0),transform:this._currentTransform};"up"===e&&(s.currentTarget=this.findTarget(t),s.currentSubTargets=this.targets),this.fire("mouse:".concat(e),s),i&&i.fire("mouse".concat(e),s);for(let t=0;t<o.length;t++)o[t].fire("mouse".concat(e),s)}endCurrentTransform(t){const e=this._currentTransform;this._finalizeCurrentTransform(t),e&&e.target&&(e.target.isMoving=!1),this._currentTransform=null}_finalizeCurrentTransform(t){const e=this._currentTransform,r=e.target,n={e:t,target:r,transform:e,action:e.action};r._scaling&&(r._scaling=!1),r.setCoords(),e.actionPerformed&&(this.fire("object:modified",n),r.fire("modified",n))}_onMouseDownInDrawingMode(t){this._isCurrentlyDrawing=!0,this.getActiveObject()&&(this.discardActiveObject(t),this.requestRenderAll());const e=this.getPointer(t);this.freeDrawingBrush&&this.freeDrawingBrush.onMouseDown(e,{e:t,pointer:e}),this._handleEvent(t,"down")}_onMouseMoveInDrawingMode(t){if(this._isCurrentlyDrawing){const e=this.getPointer(t);this.freeDrawingBrush&&this.freeDrawingBrush.onMouseMove(e,{e:t,pointer:e})}this.setCursor(this.freeDrawingCursor),this._handleEvent(t,"move")}_onMouseUpInDrawingMode(t){const e=this.getPointer(t);this.freeDrawingBrush?this._isCurrentlyDrawing=!!this.freeDrawingBrush.onMouseUp({e:t,pointer:e}):this._isCurrentlyDrawing=!1,this._handleEvent(t,"up")}__onMouseDown(t){this._isClick=!0,this._cacheTransformEventData(t),this._handleEvent(t,"down:before");let e=this._target;if(ai(t,3))return void(this.fireRightClick&&this._handleEvent(t,"down",3));if(ai(t,2))return void(this.fireMiddleClick&&this._handleEvent(t,"down",2));if(this.isDrawingMode)return void this._onMouseDownInDrawingMode(t);if(!this._isMainEvent(t))return;if(this._currentTransform)return;let r=this._shouldRender(e),n=!1;if(this.handleMultiSelection(t,e)?(e=this._activeObject,n=!0,r=!0):this._shouldClearSelection(t,e)&&this.discardActiveObject(t),this.selection&&(!e||!e.selectable&&!e.isEditing&&e!==this._activeObject)){const e=this.getPointer(t);this._groupSelector={x:e.x,y:e.y,deltaY:0,deltaX:0}}if(e){const r=e===this._activeObject;e.selectable&&"down"===e.activeOn&&this.setActiveObject(e,t);const i=e._findTargetCorner(this.getPointer(t,!0),$t(t));if(e===this._activeObject&&(i||!n)){this._setupCurrentTransform(t,e,r);const n=e.controls[i],o=this.getPointer(t),s=n&&n.getMouseDownHandler(t,e,n);s&&s(t,this._currentTransform,o.x,o.y)}}r&&(this._objectsToRender=void 0),this._handleEvent(t,"down"),r&&this.requestRenderAll()}_resetTransformEventData(){this._target=void 0,this._pointer=void 0,this._absolutePointer=void 0}_cacheTransformEventData(t){this._resetTransformEventData(),this._pointer=this.getPointer(t,!0),this._absolutePointer=this.restorePointerVpt(this._pointer),this._target=this._currentTransform?this._currentTransform.target:this.findTarget(t)}_beforeTransform(t){const e=this._currentTransform;this.fire("before:transform",{e:t,transform:e})}__onMouseMove(t){if(this._isClick=!1,this._handleEvent(t,"move:before"),this._cacheTransformEventData(t),this.isDrawingMode)return void this._onMouseMoveInDrawingMode(t);if(!this._isMainEvent(t))return;const e=this._groupSelector;if(e){const r=this.getPointer(t);e.deltaX=r.x-e.x,e.deltaY=r.y-e.y,this.renderTop()}else if(this._currentTransform)this._transformObject(t);else{const e=this.findTarget(t);this._setCursorFromEvent(t,e),this._fireOverOutEvents(t,e)}this.textEditingManager.onMouseMove(t),this._handleEvent(t,"move"),this._resetTransformEventData()}_fireOverOutEvents(t,e){const r=this._hoveredTarget,n=this._hoveredTargets,i=this.targets,o=Math.max(n.length,i.length);this.fireSyntheticInOutEvents("mouse",{e:t,target:e,oldTarget:r,fireCanvas:!0});for(let e=0;e<o;e++)this.fireSyntheticInOutEvents("mouse",{e:t,target:i[e],oldTarget:n[e]});this._hoveredTarget=e,this._hoveredTargets=this.targets.concat()}_fireEnterLeaveEvents(t,e){const r=this._draggedoverTarget,n=this._hoveredTargets,o=this.targets,s=Math.max(n.length,o.length);this.fireSyntheticInOutEvents("drag",i(i({},e),{},{target:t,oldTarget:r,fireCanvas:!0}));for(let t=0;t<s;t++)this.fireSyntheticInOutEvents("drag",i(i({},e),{},{target:o[t],oldTarget:n[t]}));this._draggedoverTarget=t}fireSyntheticInOutEvents(t,e){let{target:r,oldTarget:n,fireCanvas:o,e:s}=e,c=a(e,oi);const{targetIn:l,targetOut:u,canvasIn:h,canvasOut:f}=ui[t],d=n!==r;if(n&&d){const t=i(i({},c),{},{e:s,target:n,nextTarget:r,isClick:!1,pointer:this.getPointer(s),absolutePointer:this.getPointer(s,!0)});o&&this.fire(h,t),n.fire(u,t)}if(r&&d){const t=i(i({},c),{},{e:s,target:r,previousTarget:n,isClick:!1,pointer:this.getPointer(s),absolutePointer:this.getPointer(s,!0)});o&&this.fire(f,t),r.fire(l,t)}}__onMouseWheel(t){this._cacheTransformEventData(t),this._handleEvent(t,"wheel"),this._resetTransformEventData()}_transformObject(t){const e=this.getPointer(t),r=this._currentTransform,n=r.target,i=n.group?oe(e,void 0,n.group.calcTransformMatrix()):e;r.reset=!1,r.shiftKey=t.shiftKey,r.altKey=!!this.centeredKey&&t[this.centeredKey],this._performTransformAction(t,r,i),r.actionPerformed&&this.requestRenderAll()}_performTransformAction(t,e,r){const n=r.x,i=r.y,o=e.action,s=e.actionHandler;let a=!1;s&&(a=s(t,e,n,i)),"drag"===o&&a&&(e.target.isMoving=!0,this.setCursor(e.target.moveCursor||this.moveCursor)),e.actionPerformed=e.actionPerformed||a}_setCursorFromEvent(t,e){if(!e)return void this.setCursor(this.defaultCursor);let r=e.hoverCursor||this.hoverCursor;const n=this._activeObject===this._activeSelection?this._activeObject:null,i=(!n||e.group!==n)&&e._findTargetCorner(this.getPointer(t,!0));if(i){const r=e.controls[i];this.setCursor(r.cursorStyleHandler(t,r,e))}else e.subTargetCheck&&this.targets.concat().reverse().map((t=>{r=t.hoverCursor||r})),this.setCursor(r)}handleMultiSelection(t,e){const r=this._activeObject,n=this._activeSelection,i=r===n;if(r&&this._isSelectionKeyPressed(t)&&this.selection&&e&&e.selectable&&(r!==e||i)&&(i||!e.isDescendantOf(r)&&!r.isDescendantOf(e))&&!e.onSelect({e:t})&&!r.__corner){if(i){const r=n.getObjects();if(!(e!==n||(e=this.searchPossibleTargets(r,this.getPointer(t,!0)))&&e.selectable))return!1;e.group===n?(n.remove(e),this._hoveredTarget=e,this._hoveredTargets=[...this.targets],1===n.size()&&this._setActiveObject(n.item(0),t)):(n.multiSelectAdd(e),this._hoveredTarget=n,this._hoveredTargets=[...this.targets]),this._fireSelectionEvents(r,t)}else Bt(r)&&r.exitEditing(),n.multiSelectAdd(r,e),this._hoveredTarget=n,this._setActiveObject(n,t),this._fireSelectionEvents([r],t);return!0}return!1}handleSelection(t){if(!this.selection||!this._groupSelector)return!1;const{x:e,y:r,deltaX:n,deltaY:i}=this._groupSelector,o=new H(e,r),s=o.add(new H(n,i)),a=o.min(s),c=o.max(s).subtract(a),l=o.eq(s),u=this.collectObjects({left:a.x,top:a.y,width:c.x,height:c.y},{includeIntersecting:!this.selectionFullyContained}),h=l?u[0]?[u[0]]:[]:u.length>1?u.filter((e=>!e.onSelect({e:t}))).reverse():u;return 1===h.length?this.setActiveObject(h[0],t):h.length>1&&(this._activeSelection.add(...h),this.setActiveObject(this._activeSelection,t)),this._groupSelector=null,!0}clear(){this.textEditingManager.clear(),super.clear()}destroy(){this.removeListeners(),this.textEditingManager.dispose(),super.destroy()}}const fi={x1:0,y1:0,x2:0,y2:0},di=i(i({},fi),{},{r1:0,r2:0});function pi(t){return"linearGradient"===t.nodeName||"LINEARGRADIENT"===t.nodeName?"linear":"radial"}function gi(t){return"userSpaceOnUse"===t.getAttribute("gradientUnits")?"pixels":"percentage"}const vi=/^(\d+\.\d+)%|(\d+)%$/;function _i(t){return t&&vi.test(t)}function yi(t,e){const r="number"==typeof t?t:"string"==typeof t?parseFloat(t)/(_i(t)?100:1):NaN;return Oe(0,U(r,e),1)}const mi=/\s*;\s*/,bi=/\s*:\s*/;function xi(t,e){let r,n;const i=t.getAttribute("style");if(i){const t=i.split(mi);""===t[t.length-1]&&t.pop();for(let e=t.length;e--;){const[i,o]=t[e].split(bi).map((t=>t.trim()));"stop-color"===i?r=o:"stop-opacity"===i&&(n=o)}}const o=new jt(r||t.getAttribute("stop-color")||"rgb(0,0,0)");return{offset:yi(t.getAttribute("offset"),0),color:o.toRgb(),opacity:U(parseFloat(n||t.getAttribute("stop-opacity")||""),1)*o.getAlpha()*e}}function wi(t,e){const r=[],n=t.getElementsByTagName("stop"),i=yi(e,1);for(let t=n.length;t--;)r.push(xi(n[t],i));return r}function Si(t,e){return t.getAttribute(e)}function Ci(t,e){return function(t,e){let r,{width:n,height:i,gradientUnits:o}=e;return Object.keys(t).reduce(((e,s)=>{const a=t[s];return"Infinity"===a?r=1:"-Infinity"===a?r=0:(r="string"==typeof a?parseFloat(a):a,"string"==typeof a&&_i(a)&&(r*=.01,"pixels"===o&&("x1"!==s&&"x2"!==s&&"r2"!==s||(r*=n),"y1"!==s&&"y2"!==s||(r*=i)))),e[s]=r,e}),{})}("linear"===pi(t)?function(t){return{x1:Si(t,"x1")||0,y1:Si(t,"y1")||0,x2:Si(t,"x2")||"100%",y2:Si(t,"y2")||0}}(t):function(t){return{x1:Si(t,"fx")||Si(t,"cx")||"50%",y1:Si(t,"fy")||Si(t,"cy")||"50%",r1:0,x2:Si(t,"cx")||"50%",y2:Si(t,"cy")||"50%",r2:Si(t,"r")||"50%"}}(t),i(i({},e),{},{gradientUnits:gi(t)}))}class Oi{constructor(t){let{type:e="linear",gradientUnits:r="pixels",coords:n,colorStops:o=[],offsetX:s=0,offsetY:a=0,gradientTransform:c=null,id:l}=t;this.id=l?"".concat(l,"_").concat(Z()):Z(),this.type=e,this.gradientUnits=r,this.gradientTransform=c,this.offsetX=s,this.offsetY=a,this.coords=i(i({},"radial"===this.type?di:fi),n),this.colorStops=o.slice()}addColorStop(t){for(const e in t){const r=new jt(t[e]);this.colorStops.push({offset:parseFloat(e),color:r.toRgb(),opacity:r.getAlpha()})}return this}toObject(t){return i(i({},mt(this,t)),{},{type:this.type,coords:this.coords,colorStops:this.colorStops,offsetX:this.offsetX,offsetY:this.offsetY,gradientUnits:this.gradientUnits,gradientTransform:this.gradientTransform?this.gradientTransform.concat():this.gradientTransform})}toSVG(t){let{additionalTransform:e}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=[],n=this.gradientTransform?this.gradientTransform.concat():T.concat(),o="pixels"===this.gradientUnits?"userSpaceOnUse":"objectBoundingBox",s=this.colorStops.map((t=>i({},t))).sort(((t,e)=>t.offset-e.offset));let a=-this.offsetX,c=-this.offsetY;"objectBoundingBox"===o?(a/=t.width,c/=t.height):(a+=t.width/2,c+=t.height/2),t instanceof $e&&t.isType("Path")&&"percentage"!==this.gradientUnits&&(a-=t.pathOffset.x,c-=t.pathOffset.y),n[4]-=a,n[5]-=c;const l=['id="SVGID_'.concat(this.id,'"'),'gradientUnits="'.concat(o,'"'),'gradientTransform="'.concat(e?e+" ":"").concat(Et(n),'"'),""].join(" ");if("linear"===this.type){const{x1:t,y1:e,x2:n,y2:i}=this.coords;r.push("<linearGradient ",l,' x1="',t,'" y1="',e,'" x2="',n,'" y2="',i,'">\n')}else if("radial"===this.type){const{x1:t,y1:e,x2:n,y2:i,r1:o,r2:a}=this.coords,c=o>a;r.push("<radialGradient ",l,' cx="',c?t:n,'" cy="',c?e:i,'" r="',c?o:a,'" fx="',c?n:t,'" fy="',c?i:e,'">\n'),c&&(s.reverse(),s.forEach((t=>{t.offset=1-t.offset})));const u=Math.min(o,a);if(u>0){const t=u/Math.max(o,a);s.forEach((e=>{e.offset+=t*(1-e.offset)}))}}return s.forEach((t=>{let{color:e,offset:n,opacity:i}=t;r.push("<stop ",'offset="',100*n+"%",'" style="stop-color:',e,void 0!==i?";stop-opacity: "+i:";",'"/>\n')})),r.push("linear"===this.type?"</linearGradient>":"</radialGradient>","\n"),r.join("")}toLive(t){const e=this.coords,r="linear"===this.type?t.createLinearGradient(e.x1,e.y1,e.x2,e.y2):t.createRadialGradient(e.x1,e.y1,e.r1,e.x2,e.y2,e.r2);return this.colorStops.forEach((t=>{let{color:e,opacity:n,offset:i}=t;r.addColorStop(i,void 0!==n?new jt(e).setAlpha(n).toRgba():e)})),r}static fromElement(t,e,r){const n=gi(t),o=e._findCenterFromElement();return new this(i({id:t.getAttribute("id")||void 0,type:pi(t),coords:Ci(t,{width:r.viewBoxWidth||r.width,height:r.viewBoxHeight||r.height}),colorStops:wi(t,r.opacity),gradientUnits:n,gradientTransform:un(t.getAttribute("gradientTransform")||"")},"pixels"===n?{offsetX:e.width/2-o.x,offsetY:e.height/2-o.y}:{offsetX:0,offsetY:0}))}}o(Oi,"type","Gradient"),N.setClass(Oi,"gradient");const Ti=["source"];class ji{get type(){return"pattern"}set type(t){console.warn("Setting type has no effect",t)}constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};o(this,"repeat","repeat"),o(this,"offsetX",0),o(this,"offsetY",0),o(this,"crossOrigin",""),o(this,"patternTransform",null),this.id=Z(),Object.assign(this,t)}isImageSource(){return!!this.source&&"string"==typeof this.source.src}isCanvasSource(){return!!this.source&&!!this.source.toDataURL}sourceToString(){return this.isImageSource()?this.source.src:this.isCanvasSource()?this.source.toDataURL():""}toLive(t){return this.source&&(!this.isImageSource()||this.source.complete&&0!==this.source.naturalWidth&&0!==this.source.naturalHeight)?t.createPattern(this.source,this.repeat):null}toObject(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];const{repeat:e,crossOrigin:r}=this;return i(i({},mt(this,t)),{},{type:"pattern",source:this.sourceToString(),repeat:e,crossOrigin:r,offsetX:kt(this.offsetX,h.NUM_FRACTION_DIGITS),offsetY:kt(this.offsetY,h.NUM_FRACTION_DIGITS),patternTransform:this.patternTransform?[...this.patternTransform]:null})}toSVG(t){let{width:e,height:r}=t;const{source:n,repeat:i,id:o}=this,s=U(this.offsetX/e,0),a=U(this.offsetY/r,0),c="repeat-y"===i||"no-repeat"===i?1+Math.abs(s||0):U(n.width/e,0),l="repeat-x"===i||"no-repeat"===i?1+Math.abs(a||0):U(n.height/r,0);return['<pattern id="SVGID_'.concat(o,'" x="').concat(s,'" y="').concat(a,'" width="').concat(c,'" height="').concat(l,'">'),'<image x="0" y="0" width="'.concat(n.width,'" height="').concat(n.height,'" xlink:href="').concat(this.sourceToString(),'"></image>'),"</pattern>",""].join("\n")}static async fromObject(t,e){let{source:r}=t,n=a(t,Ti);const o=await vt(r,i(i({},e),{},{crossOrigin:n.crossOrigin}));return new this(i(i({},n),{},{source:o}))}}o(ji,"type","Pattern"),N.setClass(ji),N.setClass(ji,"pattern");const ki=["path","left","top"],Ai=["d"];class Ei extends Tr{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{path:r,left:n,top:i}=e;super(a(e,ki)),this._setPath(t||[],!0),"number"==typeof n&&this.set(M,n),"number"==typeof i&&this.set(P,i)}_setPath(t,e){this.path=(t=>{let e=0,r=0,n=0,i=0;const o=[];let s,a=0,c=0;for(const l of t){const t=[...l];let u;switch(t[0]){case"l":t[1]+=e,t[2]+=r;case"L":e=t[1],r=t[2],u=["L",e,r];break;case"h":t[1]+=e;case"H":e=t[1],u=["L",e,r];break;case"v":t[1]+=r;case"V":r=t[1],u=["L",e,r];break;case"m":t[1]+=e,t[2]+=r;case"M":e=t[1],r=t[2],n=t[1],i=t[2],u=["M",e,r];break;case"c":t[1]+=e,t[2]+=r,t[3]+=e,t[4]+=r,t[5]+=e,t[6]+=r;case"C":a=t[3],c=t[4],e=t[5],r=t[6],u=["C",t[1],t[2],a,c,e,r];break;case"s":t[1]+=e,t[2]+=r,t[3]+=e,t[4]+=r;case"S":"C"===s?(a=2*e-a,c=2*r-c):(a=e,c=r),e=t[3],r=t[4],u=["C",a,c,t[1],t[2],e,r],a=u[3],c=u[4];break;case"q":t[1]+=e,t[2]+=r,t[3]+=e,t[4]+=r;case"Q":a=t[1],c=t[2],e=t[3],r=t[4],u=["Q",a,c,e,r];break;case"t":t[1]+=e,t[2]+=r;case"T":"Q"===s?(a=2*e-a,c=2*r-c):(a=e,c=r),e=t[1],r=t[2],u=["Q",a,c,e,r];break;case"a":t[6]+=e,t[7]+=r;case"A":zn(e,r,t).forEach((t=>o.push(t))),e=t[6],r=t[7];break;case"z":case"Z":e=n,r=i,u=["Z"]}u?(o.push(u),s=u[0]):s=""}return o})(Array.isArray(t)?t:(t=>{t=zr(t);const e=[];for(const r of t.matchAll(new RegExp(In,"gi"))){let t=r[0];const n=[];let i;do{if(i=new RegExp(In,"i").exec(t),!i)break;const e=i.filter((t=>t));e.shift();const r=e.map((t=>{const e=Number.parseFloat(t);return Number.isNaN(e)?t:e}));if(n.push(r),e.length<=1)break;e.shift(),t=t.replace(new RegExp("".concat(e.join(" ?")," ?$")),"")}while(i);n.reverse().forEach(((t,r)=>{const n=Nn[t[0]];r>0&&("l"==n||"L"==n)&&(t[0]=n),e.push(t)}))}return e})(t)),this.setBoundingBox(e)}_findCenterFromElement(){const t=this._calcBoundsFromPath();return new H(t.left+t.width/2,t.top+t.height/2)}_renderPathCommands(t){let e=0,r=0,n=0,i=0,o=0,s=0;const a=-this.pathOffset.x,c=-this.pathOffset.y;t.beginPath();for(const l of this.path)switch(l[0]){case"L":n=l[1],i=l[2],t.lineTo(n+a,i+c);break;case"M":n=l[1],i=l[2],e=n,r=i,t.moveTo(n+a,i+c);break;case"C":n=l[5],i=l[6],o=l[3],s=l[4],t.bezierCurveTo(l[1]+a,l[2]+c,o+a,s+c,n+a,i+c);break;case"Q":t.quadraticCurveTo(l[1]+a,l[2]+c,l[3]+a,l[4]+c),n=l[3],i=l[4],o=l[1],s=l[2];break;case"Z":n=e,i=r,t.closePath()}}_render(t){this._renderPathCommands(t),this._renderPaintInOrder(t)}toString(){return"#<Path (".concat(this.complexity(),'): { "top": ').concat(this.top,', "left": ').concat(this.left," }>")}toObject(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return i(i({},super.toObject(t)),{},{path:Ye(this.path)})}toDatalessObject(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];const e=this.toObject(t);return this.sourcePath&&(delete e.path,e.sourcePath=this.sourcePath),e}_toSVG(){const t=(e=this.path,r=h.NUM_FRACTION_DIGITS,e.map((t=>t.map(((t,e)=>0===e||void 0===r?t:kt(t,r))).join(" "))).join(" "));var e,r;return["<path ","COMMON_PARTS",'d="'.concat(t,'" stroke-linecap="round" />\n')]}_getOffsetTransform(){const t=h.NUM_FRACTION_DIGITS;return" translate(".concat(kt(-this.pathOffset.x,t),", ").concat(kt(-this.pathOffset.y,t),")")}toClipPathSVG(t){const e=this._getOffsetTransform();return"\t"+this._createBaseClipPathSVGMarkup(this._toSVG(),{reviver:t,additionalTransform:e})}toSVG(t){const e=this._getOffsetTransform();return this._createBaseSVGMarkup(this._toSVG(),{reviver:t,additionalTransform:e})}complexity(){return this.path.length}setDimensions(){this.setBoundingBox()}setBoundingBox(t){const{width:e,height:r,pathOffset:n}=this._calcDimensions();this.set({width:e,height:r,pathOffset:n}),t&&this.setPositionByOrigin(n,E,E)}_calcBoundsFromPath(){const t=[];let e=0,r=0,n=0,i=0;for(const o of this.path)switch(o[0]){case"L":n=o[1],i=o[2],t.push(new H(e,r),new H(n,i));break;case"M":n=o[1],i=o[2],e=n,r=i;break;case"C":t.push(...Un(n,i,o[1],o[2],o[3],o[4],o[5],o[6])),n=o[5],i=o[6];break;case"Q":t.push(...Un(n,i,o[1],o[2],o[1],o[2],o[3],o[4])),n=o[3],i=o[4];break;case"Z":n=e,i=r}return Zt(t)}_calcDimensions(){const t=this._calcBoundsFromPath();return i(i({},t),{},{pathOffset:new H(t.left+t.width/2,t.top+t.height/2)})}static fromObject(t){return this._fromObject(t,{extraParam:"path"})}static async fromElement(t,e){const r=fn(t,this.ATTRIBUTE_NAMES),{d:n}=r;return new this(n,i(i(i({},a(r,Ai)),e),{},{left:void 0,top:void 0}))}}o(Ei,"type","Path"),o(Ei,"cacheProperties",[...Ge,"path","fillRule"]),o(Ei,"ATTRIBUTE_NAMES",[...jr,"d"]),N.setClass(Ei),N.setSVGClass(Ei);const Mi=["left","top","radius"],Pi=["radius","startAngle","endAngle"];class Di extends Tr{static getDefaults(){return i(i({},super.getDefaults()),Di.ownDefaults)}_set(t,e){return super._set(t,e),"radius"===t&&this.setRadius(e),this}_render(t){t.beginPath(),t.arc(0,0,this.radius,et(this.startAngle),et(this.endAngle),!1),this._renderPaintInOrder(t)}getRadiusX(){return this.get("radius")*this.get("scaleX")}getRadiusY(){return this.get("radius")*this.get("scaleY")}setRadius(t){this.radius=t,this.set({width:2*t,height:2*t})}toObject(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return super.toObject([...Pi,...t])}_toSVG(){const t=(this.endAngle-this.startAngle)%360;if(0===t)return["<circle ","COMMON_PARTS",'cx="0" cy="0" ','r="',this.radius,'" />\n'];{const{radius:e}=this,r=et(this.startAngle),n=et(this.endAngle),i=X(r)*e,o=Y(r)*e,s=X(n)*e,a=Y(n)*e,c=t>180?"1":"0";return['<path d="M '.concat(i," ").concat(o)," A ".concat(e," ").concat(e)," 0 ","".concat(c," 1")," ".concat(s," ").concat(a),'" ',"COMMON_PARTS"," />\n"]}}static async fromElement(t){const e=fn(t,this.ATTRIBUTE_NAMES),{left:r=0,top:n=0,radius:o=0}=e;return new this(i(i({},a(e,Mi)),{},{radius:o,left:r-o,top:n-o}))}static fromObject(t){return super._fromObject(t)}}o(Di,"type","Circle"),o(Di,"cacheProperties",[...Ge,...Pi]),o(Di,"ownDefaults",{radius:0,startAngle:0,endAngle:360}),o(Di,"ATTRIBUTE_NAMES",["cx","cy","r",...jr]),N.setClass(Di),N.setSVGClass(Di);const Ri=["x1","y1","x2","y2"],Li=["x1","y1","x2","y2"],Fi=["x1","x2","y1","y2"];class Bi extends Tr{constructor(){let[t,e,r,n]=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[0,0,0,0],o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(i(i({},o),{},{x1:t,y1:e,x2:r,y2:n})),this._setWidthHeight();const{left:s,top:a}=o;"number"==typeof s&&this.set(M,s),"number"==typeof a&&this.set(P,a)}_setWidthHeight(){const{x1:t,y1:e,x2:r,y2:n}=this;this.width=Math.abs(r-t),this.height=Math.abs(n-e);const{left:i,top:o,width:s,height:a}=Zt([{x:t,y:e},{x:r,y:n}]),c=new H(i+s/2,o+a/2);this.setPositionByOrigin(c,E,E)}_set(t,e){return super._set(t,e),Fi.includes(t)&&this._setWidthHeight(),this}_render(t){t.beginPath();const e=this.calcLinePoints();t.moveTo(e.x1,e.y1),t.lineTo(e.x2,e.y2),t.lineWidth=this.strokeWidth;const r=t.strokeStyle;var n;Pt(this.stroke)?t.strokeStyle=this.stroke.toLive(t):t.strokeStyle=null!==(n=this.stroke)&&void 0!==n?n:t.fillStyle,this.stroke&&this._renderStroke(t),t.strokeStyle=r}_findCenterFromElement(){return new H((this.x1+this.x2)/2,(this.y1+this.y2)/2)}toObject(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return i(i({},super.toObject(t)),this.calcLinePoints())}_getNonTransformedDimensions(){const t=super._getNonTransformedDimensions();return"butt"===this.strokeLineCap&&(0===this.width&&(t.y-=this.strokeWidth),0===this.height&&(t.x-=this.strokeWidth)),t}calcLinePoints(){const{x1:t,x2:e,y1:r,y2:n,width:i,height:o}=this,s=t<=e?-1:1,a=r<=n?-1:1;return{x1:s*i/2,x2:s*-i/2,y1:a*o/2,y2:a*-o/2}}_toSVG(){const{x1:t,x2:e,y1:r,y2:n}=this.calcLinePoints();return["<line ","COMMON_PARTS",'x1="'.concat(t,'" y1="').concat(r,'" x2="').concat(e,'" y2="').concat(n,'" />\n')]}static async fromElement(t){const e=fn(t,this.ATTRIBUTE_NAMES),{x1:r=0,y1:n=0,x2:i=0,y2:o=0}=e;return new this([r,n,i,o],a(e,Ri))}static fromObject(t){let{x1:e,y1:r,x2:n,y2:o}=t,s=a(t,Li);return this._fromObject(i(i({},s),{},{points:[e,r,n,o]}),{extraParam:"points"})}}o(Bi,"type","Line"),o(Bi,"cacheProperties",[...Ge,...Fi]),o(Bi,"ATTRIBUTE_NAMES",jr.concat(Fi)),N.setClass(Bi),N.setSVGClass(Bi);class Ii extends Tr{static getDefaults(){return i(i({},super.getDefaults()),Ii.ownDefaults)}_render(t){const e=this.width/2,r=this.height/2;t.beginPath(),t.moveTo(-e,r),t.lineTo(0,-r),t.lineTo(e,r),t.closePath(),this._renderPaintInOrder(t)}_toSVG(){const t=this.width/2,e=this.height/2;return["<polygon ","COMMON_PARTS",'points="',"".concat(-t," ").concat(e,",0 ").concat(-e,",").concat(t," ").concat(e),'" />']}}o(Ii,"type","Triangle"),o(Ii,"ownDefaults",{width:100,height:100}),N.setClass(Ii),N.setSVGClass(Ii);const Ni=["rx","ry"];class Vi extends Tr{static getDefaults(){return i(i({},super.getDefaults()),Vi.ownDefaults)}_set(t,e){switch(super._set(t,e),t){case"rx":this.rx=e,this.set("width",2*e);break;case"ry":this.ry=e,this.set("height",2*e)}return this}getRx(){return this.get("rx")*this.get("scaleX")}getRy(){return this.get("ry")*this.get("scaleY")}toObject(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return super.toObject([...Ni,...t])}_toSVG(){return["<ellipse ","COMMON_PARTS",'cx="0" cy="0" ','rx="',this.rx,'" ry="',this.ry,'" />\n']}_render(t){t.beginPath(),t.save(),t.transform(1,0,0,this.ry/this.rx,0,0),t.arc(0,0,this.rx,0,C,!1),t.restore(),this._renderPaintInOrder(t)}static async fromElement(t){const e=fn(t,this.ATTRIBUTE_NAMES);return e.left=(e.left||0)-e.rx,e.top=(e.top||0)-e.ry,new this(e)}}o(Vi,"type","Ellipse"),o(Vi,"cacheProperties",[...Ge,...Ni]),o(Vi,"ownDefaults",{rx:0,ry:0}),o(Vi,"ATTRIBUTE_NAMES",[...jr,"cx","cy","rx","ry"]),N.setClass(Vi),N.setSVGClass(Vi);const Wi=["left","top"],Ui={exactBoundingBox:!1};class zi extends Tr{static getDefaults(){return i(i({},super.getDefaults()),zi.ownDefaults)}constructor(){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(i({points:arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]},t));const{left:e,top:r}=t;this.initialized=!0,this.setBoundingBox(!0),"number"==typeof e&&this.set(M,e),"number"==typeof r&&this.set(P,r)}isOpen(){return!0}_projectStrokeOnPoints(){return function(t,e){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const n=[];return t.length<=1||t.forEach(((i,o)=>{let s,a;0===o?(a=t[1],s=r?i:t[t.length-1]):o===t.length-1?(s=t[o-1],a=r?i:t[0]):(s=t[o-1],a=t[o+1]),!r||0!==o&&o!==t.length-1?n.push(...new bn(i,s,a,e).project()):n.push(...new xn(i,0===o?a:s,e).project())})),n}(this.points,this,this.isOpen())}_calcDimensions(){const t=this.exactBoundingBox?this._projectStrokeOnPoints().map((t=>t.projectedPoint)):this.points;if(0===t.length)return{left:0,top:0,width:0,height:0,pathOffset:new H,strokeOffset:new H};const e=Zt(t),r=Zt(this.points),n=e.left+e.width/2,o=e.top+e.height/2,s=n-o*Math.tan(et(this.skewX)),a=o-s*Math.tan(et(this.skewY));return i(i({},e),{},{pathOffset:new H(s,a),strokeOffset:new H(r.left,r.top).subtract(new H(e.left,e.top))})}_findCenterFromElement(){const t=Zt(this.points);return new H(t.left+t.width/2,t.top+t.height/2)}setDimensions(){this.setBoundingBox()}setBoundingBox(t){const{left:e,top:r,width:n,height:i,pathOffset:o,strokeOffset:s}=this._calcDimensions();this.set({width:n,height:i,pathOffset:o,strokeOffset:s}),t&&this.setPositionByOrigin(new H(e+n/2,r+i/2),E,E)}_getNonTransformedDimensions(){return this.exactBoundingBox?new H(this.width,this.height):super._getNonTransformedDimensions()}_getTransformedDimensions(t){return this.exactBoundingBox?super._getTransformedDimensions(i(i({},t||{}),{},{strokeWidth:0,skewX:0,skewY:0})):super._getTransformedDimensions(t)}_set(t,e){const r=this.initialized&&this[t]!==e,n=super._set(t,e);return r&&(("scaleX"===t||"scaleY"===t)&&this.strokeUniform&&this.constructor.layoutProperties.includes("strokeUniform")&&"round"!==this.strokeLineJoin||this.constructor.layoutProperties.includes(t))&&this.setDimensions(),n}toObject(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return i(i({},super.toObject(t)),{},{points:Ye(this.points)})}_toSVG(){const t=[],e=this.pathOffset.x,r=this.pathOffset.y,n=h.NUM_FRACTION_DIGITS;for(let i=0,o=this.points.length;i<o;i++)t.push(kt(this.points[i].x-e,n),",",kt(this.points[i].y-r,n)," ");return["<".concat(this.constructor.type.toLowerCase()," "),"COMMON_PARTS",'points="'.concat(t.join(""),'" />\n')]}_render(t){const e=this.points.length,r=this.pathOffset.x,n=this.pathOffset.y;if(e&&!isNaN(this.points[e-1].y)){t.beginPath(),t.moveTo(this.points[0].x-r,this.points[0].y-n);for(let i=0;i<e;i++){const e=this.points[i];t.lineTo(e.x-r,e.y-n)}!this.isOpen()&&t.closePath(),this._renderPaintInOrder(t)}}complexity(){return this.points.length}static async fromElement(t,e){return new this(function(t){if(!t)return null;t=(t=t.replace(/,/g," ").trim()).split(/\s+/);const e=[];for(let r=0;r<t.length;r+=2)e.push({x:parseFloat(t[r]),y:parseFloat(t[r+1])});return e}(t.getAttribute("points"))||[],i(i({},a(fn(t,this.ATTRIBUTE_NAMES),Wi)),e))}static fromObject(t){return this._fromObject(t,{extraParam:"points"})}}o(zi,"ownDefaults",Ui),o(zi,"type","Polyline"),o(zi,"layoutProperties",["skewX","skewY","strokeLineCap","strokeLineJoin","strokeMiterLimit","strokeWidth","strokeUniform","points"]),o(zi,"cacheProperties",[...Ge,"points"]),o(zi,"ATTRIBUTE_NAMES",[...jr]),N.setClass(zi),N.setSVGClass(zi);class Xi extends zi{static getDefaults(){return i(i({},super.getDefaults()),zi.ownDefaults)}isOpen(){return!1}}o(Xi,"ownDefaults",Ui),o(Xi,"type","Polygon"),N.setClass(Xi),N.setSVGClass(Xi);const Yi=["fontSize","fontWeight","fontFamily","fontStyle"],Hi=["underline","overline","linethrough"],Gi=[...Yi,"lineHeight","text","charSpacing","textAlign","styles","path","pathStartOffset","pathSide","pathAlign"],qi=[...Gi,...Hi,"textBackgroundColor","direction"],Ki=[...Yi,...Hi,"stroke","strokeWidth","fill","deltaY","textBackgroundColor"],$i={_reNewline:F,_reSpacesAndTabs:/[ \t\r]/g,_reSpaceAndTab:/[ \t\r]/,_reWords:/\S+/g,fontSize:40,fontWeight:"normal",fontFamily:"Times New Roman",underline:!1,overline:!1,linethrough:!1,textAlign:M,fontStyle:"normal",lineHeight:1.16,superscript:{size:.6,baseline:-.35},subscript:{size:.6,baseline:.11},textBackgroundColor:"",stroke:null,shadow:null,path:void 0,pathStartOffset:0,pathSide:M,pathAlign:"baseline",_fontSizeFraction:.222,offsets:{underline:.1,linethrough:-.315,overline:-.88},_fontSizeMult:1.13,charSpacing:0,deltaY:0,direction:"ltr",CACHE_FONT_SIZE:400,MIN_TEXT_WIDTH:2},Ji="justify",Zi="justify-left",Qi="justify-right",to="justify-center";class eo extends Tr{isEmptyStyles(t){if(!this.styles)return!0;if(void 0!==t&&!this.styles[t])return!0;const e=void 0===t?this.styles:{line:this.styles[t]};for(const t in e)for(const r in e[t])for(const n in e[t][r])return!1;return!0}styleHas(t,e){if(!this.styles)return!1;if(void 0!==e&&!this.styles[e])return!1;const r=void 0===e?this.styles:{0:this.styles[e]};for(const e in r)for(const n in r[e])if(void 0!==r[e][n][t])return!0;return!1}cleanStyle(t){if(!this.styles)return!1;const e=this.styles;let r,n,i=0,o=!0,s=0;for(const s in e){r=0;for(const a in e[s]){const c=e[s][a]||{};i++,void 0!==c[t]?(n?c[t]!==n&&(o=!1):n=c[t],c[t]===this[t]&&delete c[t]):o=!1,0!==Object.keys(c).length?r++:delete e[s][a]}0===r&&delete e[s]}for(let t=0;t<this._textLines.length;t++)s+=this._textLines[t].length;o&&i===s&&(this[t]=n,this.removeStyle(t))}removeStyle(t){if(!this.styles)return;const e=this.styles;let r,n,i;for(n in e){for(i in r=e[n],r)delete r[i][t],0===Object.keys(r[i]).length&&delete r[i];0===Object.keys(r).length&&delete e[n]}}_extendStyles(t,e){const{lineIndex:r,charIndex:n}=this.get2DCursorLocation(t);this._getLineStyle(r)||this._setLineStyle(r),Object.keys(this._getStyleDeclaration(r,n)).length||this._setStyleDeclaration(r,n,{}),Object.assign(this._getStyleDeclaration(r,n),e)}getSelectionStyles(t,e,r){const n=[];for(let i=t;i<(e||t);i++)n.push(this.getStyleAtPosition(i,r));return n}getStyleAtPosition(t,e){const{lineIndex:r,charIndex:n}=this.get2DCursorLocation(t);return e?this.getCompleteStyleDeclaration(r,n):this._getStyleDeclaration(r,n)}setSelectionStyles(t,e,r){for(let n=e;n<(r||e);n++)this._extendStyles(n,t);this._forceClearCache=!0}_getStyleDeclaration(t,e){var r;const n=this.styles&&this.styles[t];return n&&null!==(r=n[e])&&void 0!==r?r:{}}getCompleteStyleDeclaration(t,e){return i(i({},mt(this,this.constructor._styleProperties)),this._getStyleDeclaration(t,e))}_setStyleDeclaration(t,e,r){this.styles[t][e]=r}_deleteStyleDeclaration(t,e){delete this.styles[t][e]}_getLineStyle(t){return!!this.styles[t]}_setLineStyle(t){this.styles[t]={}}_deleteLineStyle(t){delete this.styles[t]}}o(eo,"_styleProperties",Ki);const ro=/  +/g,no=/"/g;function io(t,e,r,n,i){return"\t\t".concat(function(t,e){let{left:r,top:n,width:i,height:o}=e,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:h.NUM_FRACTION_DIGITS;const a=Mt("fill",t),[c,l,u,f]=[r,n,i,o].map((t=>kt(t,s)));return"<rect ".concat(a,' x="').concat(c,'" y="').concat(l,'" width="').concat(u,'" height="').concat(f,'"></rect>')}(t,{left:e,top:r,width:n,height:i}),"\n")}const oo=["textAnchor","textDecoration","dx","dy","top","left","fontSize","strokeWidth"];let so;class ao extends eo{static getDefaults(){return i(i({},super.getDefaults()),ao.ownDefaults)}constructor(t,e){super(i(i({},e),{},{text:t,styles:(null==e?void 0:e.styles)||{}})),o(this,"__charBounds",[]),this.initialized=!0,this.path&&this.setPathInfo(),this.initDimensions(),this.setCoords()}setPathInfo(){const t=this.path;t&&(t.segmentsInfo=Qn(t.path))}_splitText(){const t=this._splitTextIntoLines(this.text);return this.textLines=t.lines,this._textLines=t.graphemeLines,this._unwrappedTextLines=t._unwrappedLines,this._text=t.graphemeText,t}initDimensions(){this._splitText(),this._clearCache(),this.dirty=!0,this.path?(this.width=this.path.width,this.height=this.path.height):(this.width=this.calcTextWidth()||this.cursorWidth||this.MIN_TEXT_WIDTH,this.height=this.calcTextHeight()),this.textAlign.includes(Ji)&&this.enlargeSpaces()}enlargeSpaces(){let t,e,r,n,i,o,s;for(let a=0,c=this._textLines.length;a<c;a++)if((this.textAlign===Ji||a!==c-1&&!this.isEndOfWrapping(a))&&(n=0,i=this._textLines[a],e=this.getLineWidth(a),e<this.width&&(s=this.textLines[a].match(this._reSpacesAndTabs)))){r=s.length,t=(this.width-e)/r;for(let e=0;e<=i.length;e++)o=this.__charBounds[a][e],this._reSpaceAndTab.test(i[e])?(o.width+=t,o.kernedWidth+=t,o.left+=n,n+=t):o.left+=n}}isEndOfWrapping(t){return t===this._textLines.length-1}missingNewlineOffset(t){return 1}get2DCursorLocation(t,e){const r=e?this._unwrappedTextLines:this._textLines;let n;for(n=0;n<r.length;n++){if(t<=r[n].length)return{lineIndex:n,charIndex:t};t-=r[n].length+this.missingNewlineOffset(n)}return{lineIndex:n-1,charIndex:r[n-1].length<t?r[n-1].length:t}}toString(){return"#<Text (".concat(this.complexity(),'): { "text": "').concat(this.text,'", "fontFamily": "').concat(this.fontFamily,'" }>')}_getCacheCanvasDimensions(){const t=super._getCacheCanvasDimensions(),e=this.fontSize;return t.width+=e*t.zoomX,t.height+=e*t.zoomY,t}_render(t){const e=this.path;e&&!e.isNotVisible()&&e._render(t),this._setTextStyles(t),this._renderTextLinesBackground(t),this._renderTextDecoration(t,"underline"),this._renderText(t),this._renderTextDecoration(t,"overline"),this._renderTextDecoration(t,"linethrough")}_renderText(t){"stroke"===this.paintFirst?(this._renderTextStroke(t),this._renderTextFill(t)):(this._renderTextFill(t),this._renderTextStroke(t))}_setTextStyles(t,e,r){if(t.textBaseline="alphabetic",this.path)switch(this.pathAlign){case E:t.textBaseline="middle";break;case"ascender":t.textBaseline=P;break;case"descender":t.textBaseline=D}t.font=this._getFontDeclaration(e,r)}calcTextWidth(){let t=this.getLineWidth(0);for(let e=1,r=this._textLines.length;e<r;e++){const r=this.getLineWidth(e);r>t&&(t=r)}return t}_renderTextLine(t,e,r,n,i,o){this._renderChars(t,e,r,n,i,o)}_renderTextLinesBackground(t){if(!this.textBackgroundColor&&!this.styleHas("textBackgroundColor"))return;const e=t.fillStyle,r=this._getLeftOffset();let n=this._getTopOffset();for(let e=0,i=this._textLines.length;e<i;e++){const i=this.getHeightOfLine(e);if(!this.textBackgroundColor&&!this.styleHas("textBackgroundColor",e)){n+=i;continue}const o=this._textLines[e].length,s=this._getLineLeftOffset(e);let a,c,l=0,u=0,h=this.getValueOfPropertyAt(e,0,"textBackgroundColor");for(let f=0;f<o;f++){const o=this.__charBounds[e][f];c=this.getValueOfPropertyAt(e,f,"textBackgroundColor"),this.path?(t.save(),t.translate(o.renderLeft,o.renderTop),t.rotate(o.angle),t.fillStyle=c,c&&t.fillRect(-o.width/2,-i/this.lineHeight*(1-this._fontSizeFraction),o.width,i/this.lineHeight),t.restore()):c!==h?(a=r+s+u,"rtl"===this.direction&&(a=this.width-a-l),t.fillStyle=h,h&&t.fillRect(a,n,l,i/this.lineHeight),u=o.left,l=o.width,h=c):l+=o.kernedWidth}c&&!this.path&&(a=r+s+u,"rtl"===this.direction&&(a=this.width-a-l),t.fillStyle=c,t.fillRect(a,n,l,i/this.lineHeight)),n+=i}t.fillStyle=e,this._removeShadow(t)}_measureChar(t,e,r,n){const i=b.getFontCache(e),o=r+t,s=this._getFontDeclaration(e)===this._getFontDeclaration(n),a=e.fontSize/this.CACHE_FONT_SIZE;let c,l,u,h;if(r&&void 0!==i[r]&&(u=i[r]),void 0!==i[t]&&(h=c=i[t]),s&&void 0!==i[o]&&(l=i[o],h=l-u),void 0===c||void 0===u||void 0===l){const n=(so||(so=Q().getContext("2d")),so);this._setTextStyles(n,e,!0),void 0===c&&(h=c=n.measureText(t).width,i[t]=c),void 0===u&&s&&r&&(u=n.measureText(r).width,i[r]=u),s&&void 0===l&&(l=n.measureText(o).width,i[o]=l,h=l-u)}return{width:c*a,kernedWidth:h*a}}getHeightOfChar(t,e){return this.getValueOfPropertyAt(t,e,"fontSize")}measureLine(t){const e=this._measureLine(t);return 0!==this.charSpacing&&(e.width-=this._getWidthOfCharSpacing()),e.width<0&&(e.width=0),e}_measureLine(t){let e,r,n=0;const i=this.pathSide===R,o=this.path,s=this._textLines[t],a=s.length,c=new Array(a);this.__charBounds[t]=c;for(let i=0;i<a;i++){const o=s[i];r=this._getGraphemeBox(o,t,i,e),c[i]=r,n+=r.kernedWidth,e=o}if(c[a]={left:r?r.left+r.width:0,width:0,kernedWidth:0,height:this.fontSize,deltaY:0},o&&o.segmentsInfo){let t=0;const e=o.segmentsInfo[o.segmentsInfo.length-1].length,s=ti(o.path,0,o.segmentsInfo);switch(s.x+=o.pathOffset.x,s.y+=o.pathOffset.y,this.textAlign){case M:t=i?e-n:0;break;case E:t=(e-n)/2;break;case R:t=i?0:e-n}t+=this.pathStartOffset*(i?-1:1);for(let n=i?a-1:0;i?n>=0:n<a;i?n--:n++)r=c[n],t>e?t%=e:t<0&&(t+=e),this._setGraphemeOnPath(t,r,s),t+=r.kernedWidth}return{width:n,numOfSpaces:0}}_setGraphemeOnPath(t,e,r){const n=t+e.kernedWidth/2,i=this.path,o=ti(i.path,n,i.segmentsInfo);e.renderLeft=o.x-r.x,e.renderTop=o.y-r.y,e.angle=o.angle+(this.pathSide===R?Math.PI:0)}_getGraphemeBox(t,e,r,n,i){const o=this.getCompleteStyleDeclaration(e,r),s=n?this.getCompleteStyleDeclaration(e,r-1):{},a=this._measureChar(t,o,n,s);let c,l=a.kernedWidth,u=a.width;0!==this.charSpacing&&(c=this._getWidthOfCharSpacing(),u+=c,l+=c);const h={width:u,left:0,height:o.fontSize,kernedWidth:l,deltaY:o.deltaY};if(r>0&&!i){const t=this.__charBounds[e][r-1];h.left=t.left+t.width+a.kernedWidth-a.width}return h}getHeightOfLine(t){if(this.__lineHeights[t])return this.__lineHeights[t];let e=this.getHeightOfChar(t,0);for(let r=1,n=this._textLines[t].length;r<n;r++)e=Math.max(this.getHeightOfChar(t,r),e);return this.__lineHeights[t]=e*this.lineHeight*this._fontSizeMult}calcTextHeight(){let t,e=0;for(let r=0,n=this._textLines.length;r<n;r++)t=this.getHeightOfLine(r),e+=r===n-1?t/this.lineHeight:t;return e}_getLeftOffset(){return"ltr"===this.direction?-this.width/2:this.width/2}_getTopOffset(){return-this.height/2}_renderTextCommon(t,e){t.save();let r=0;const n=this._getLeftOffset(),i=this._getTopOffset();for(let o=0,s=this._textLines.length;o<s;o++){const s=this.getHeightOfLine(o),a=s/this.lineHeight,c=this._getLineLeftOffset(o);this._renderTextLine(e,t,this._textLines[o],n+c,i+r+a,o),r+=s}t.restore()}_renderTextFill(t){(this.fill||this.styleHas("fill"))&&this._renderTextCommon(t,"fillText")}_renderTextStroke(t){(this.stroke&&0!==this.strokeWidth||!this.isEmptyStyles())&&(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(t),t.save(),this._setLineDash(t,this.strokeDashArray),t.beginPath(),this._renderTextCommon(t,"strokeText"),t.closePath(),t.restore())}_renderChars(t,e,r,n,i,o){const s=this.getHeightOfLine(o),a=this.textAlign.includes(Ji),c=this.path,l=!a&&0===this.charSpacing&&this.isEmptyStyles(o)&&!c,u="ltr"===this.direction,h="ltr"===this.direction?1:-1,f=e.direction;let d,p,g,v,_,y="",m=0;if(e.save(),f!==this.direction&&(e.canvas.setAttribute("dir",u?"ltr":"rtl"),e.direction=u?"ltr":"rtl",e.textAlign=u?M:R),i-=s*this._fontSizeFraction/this.lineHeight,l)return this._renderChar(t,e,o,0,r.join(""),n,i),void e.restore();for(let s=0,l=r.length-1;s<=l;s++)v=s===l||this.charSpacing||c,y+=r[s],g=this.__charBounds[o][s],0===m?(n+=h*(g.kernedWidth-g.width),m+=g.width):m+=g.kernedWidth,a&&!v&&this._reSpaceAndTab.test(r[s])&&(v=!0),v||(d=d||this.getCompleteStyleDeclaration(o,s),p=this.getCompleteStyleDeclaration(o,s+1),v=wn(d,p,!1)),v&&(c?(e.save(),e.translate(g.renderLeft,g.renderTop),e.rotate(g.angle),this._renderChar(t,e,o,s,y,-m/2,0),e.restore()):(_=n,this._renderChar(t,e,o,s,y,_,i)),y="",d=p,n+=h*m,m=0);e.restore()}_applyPatternGradientTransformText(t){const e=Q(),r=this.width+this.strokeWidth,n=this.height+this.strokeWidth,i=e.getContext("2d");return e.width=r,e.height=n,i.beginPath(),i.moveTo(0,0),i.lineTo(r,0),i.lineTo(r,n),i.lineTo(0,n),i.closePath(),i.translate(r/2,n/2),i.fillStyle=t.toLive(i),this._applyPatternGradientTransform(i,t),i.fill(),i.createPattern(e,"no-repeat")}handleFiller(t,e,r){let n,i;return Pt(r)?"percentage"===r.gradientUnits||r.gradientTransform||r.patternTransform?(n=-this.width/2,i=-this.height/2,t.translate(n,i),t[e]=this._applyPatternGradientTransformText(r),{offsetX:n,offsetY:i}):(t[e]=r.toLive(t),this._applyPatternGradientTransform(t,r)):(t[e]=r,{offsetX:0,offsetY:0})}_setStrokeStyles(t,e){let{stroke:r,strokeWidth:n}=e;return t.lineWidth=n,t.lineCap=this.strokeLineCap,t.lineDashOffset=this.strokeDashOffset,t.lineJoin=this.strokeLineJoin,t.miterLimit=this.strokeMiterLimit,this.handleFiller(t,"strokeStyle",r)}_setFillStyles(t,e){let{fill:r}=e;return this.handleFiller(t,"fillStyle",r)}_renderChar(t,e,r,n,i,o,s){const a=this._getStyleDeclaration(r,n),c=this.getCompleteStyleDeclaration(r,n),l="fillText"===t&&c.fill,u="strokeText"===t&&c.stroke&&c.strokeWidth;if(u||l){if(e.save(),e.font=this._getFontDeclaration(c),a.textBackgroundColor&&this._removeShadow(e),a.deltaY&&(s+=a.deltaY),l){const t=this._setFillStyles(e,c);e.fillText(i,o-t.offsetX,s-t.offsetY)}if(u){const t=this._setStrokeStyles(e,c);e.strokeText(i,o-t.offsetX,s-t.offsetY)}e.restore()}}setSuperscript(t,e){this._setScript(t,e,this.superscript)}setSubscript(t,e){this._setScript(t,e,this.subscript)}_setScript(t,e,r){const n=this.get2DCursorLocation(t,!0),i=this.getValueOfPropertyAt(n.lineIndex,n.charIndex,"fontSize"),o=this.getValueOfPropertyAt(n.lineIndex,n.charIndex,"deltaY"),s={fontSize:i*r.size,deltaY:o+i*r.baseline};this.setSelectionStyles(s,t,e)}_getLineLeftOffset(t){const e=this.getLineWidth(t),r=this.width-e,n=this.textAlign,i=this.direction,o=this.isEndOfWrapping(t);let s=0;return n===Ji||n===to&&!o||n===Qi&&!o||n===Zi&&!o?0:(n===E&&(s=r/2),n===R&&(s=r),n===to&&(s=r/2),n===Qi&&(s=r),"rtl"===i&&(n===R||n===Ji||n===Qi?s=0:n===M||n===Zi?s=-r:n!==E&&n!==to||(s=-r/2)),s)}_clearCache(){this._forceClearCache=!1,this.__lineWidths=[],this.__lineHeights=[],this.__charBounds=[]}getLineWidth(t){if(void 0!==this.__lineWidths[t])return this.__lineWidths[t];const{width:e}=this.measureLine(t);return this.__lineWidths[t]=e,e}_getWidthOfCharSpacing(){return 0!==this.charSpacing?this.fontSize*this.charSpacing/1e3:0}getValueOfPropertyAt(t,e,r){var n;return null!==(n=this._getStyleDeclaration(t,e)[r])&&void 0!==n?n:this[r]}_renderTextDecoration(t,e){if(!this[e]&&!this.styleHas(e))return;let r=this._getTopOffset();const n=this._getLeftOffset(),i=this.path,o=this._getWidthOfCharSpacing(),s=this.offsets[e];for(let a=0,c=this._textLines.length;a<c;a++){const c=this.getHeightOfLine(a);if(!this[e]&&!this.styleHas(e,a)){r+=c;continue}const l=this._textLines[a],u=c/this.lineHeight,h=this._getLineLeftOffset(a);let f,d,p=0,g=0,v=this.getValueOfPropertyAt(a,0,e),_=this.getValueOfPropertyAt(a,0,"fill");const y=r+u*(1-this._fontSizeFraction);let m=this.getHeightOfChar(a,0),b=this.getValueOfPropertyAt(a,0,"deltaY");for(let r=0,o=l.length;r<o;r++){const o=this.__charBounds[a][r];f=this.getValueOfPropertyAt(a,r,e),d=this.getValueOfPropertyAt(a,r,"fill");const c=this.getHeightOfChar(a,r),l=this.getValueOfPropertyAt(a,r,"deltaY");if(i&&f&&d)t.save(),t.fillStyle=_,t.translate(o.renderLeft,o.renderTop),t.rotate(o.angle),t.fillRect(-o.kernedWidth/2,s*c+l,o.kernedWidth,this.fontSize/15),t.restore();else if((f!==v||d!==_||c!==m||l!==b)&&g>0){let e=n+h+p;"rtl"===this.direction&&(e=this.width-e-g),v&&_&&(t.fillStyle=_,t.fillRect(e,y+s*m+b,g,this.fontSize/15)),p=o.left,g=o.width,v=f,_=d,m=c,b=l}else g+=o.kernedWidth}let x=n+h+p;"rtl"===this.direction&&(x=this.width-x-g),t.fillStyle=d,f&&d&&t.fillRect(x,y+s*m+b,g-o,this.fontSize/15),r+=c}this._removeShadow(t)}_getFontDeclaration(t,e){const r=t||this,n=this.fontFamily,i=ao.genericFonts.indexOf(n.toLowerCase())>-1,o=void 0===n||n.indexOf("'")>-1||n.indexOf(",")>-1||n.indexOf('"')>-1||i?r.fontFamily:'"'.concat(r.fontFamily,'"');return[r.fontStyle,r.fontWeight,e?this.CACHE_FONT_SIZE+"px":r.fontSize+"px",o].join(" ")}render(t){this.visible&&(this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(this._forceClearCache&&this.initDimensions(),super.render(t)))}graphemeSplit(t){return(t=>{const e=[];for(let r,n=0;n<t.length;n++)!1!==(r=On(t,n))&&e.push(r);return e})(t)}_splitTextIntoLines(t){const e=t.split(this._reNewline),r=new Array(e.length),n=["\n"];let i=[];for(let t=0;t<e.length;t++)r[t]=this.graphemeSplit(e[t]),i=i.concat(r[t],n);return i.pop(),{_unwrappedLines:r,lines:e,graphemeText:i,graphemeLines:r}}toObject(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return i(i({},super.toObject([...qi,...t])),{},{styles:Sn(this.styles,this.text)},this.path?{path:this.path.toObject()}:{})}set(t,e){const{textLayoutProperties:r}=this.constructor;super.set(t,e);let n=!1,i=!1;if("object"==typeof t)for(const e in t)"path"===e&&this.setPathInfo(),n=n||r.includes(e),i=i||"path"===e;else n=r.includes(t),i="path"===t;return i&&this.setPathInfo(),n&&this.initialized&&(this.initDimensions(),this.setCoords()),this}complexity(){return 1}static async fromElement(t,e){const r=fn(t,ao.ATTRIBUTE_NAMES),n=i(i({},e),r),{textAnchor:o=M,textDecoration:s="",dx:c=0,dy:l=0,top:u=0,left:h=0,fontSize:f=k,strokeWidth:d=1}=n,p=a(n,oo),g=new this((t.textContent||"").replace(/^\s+|\s+$|\n+/g,"").replace(/\s+/g," "),i({left:h+c,top:u+l,underline:s.includes("underline"),overline:s.includes("overline"),linethrough:s.includes("line-through"),strokeWidth:0,fontSize:f},p)),v=g.getScaledHeight()/g.height,_=((g.height+g.strokeWidth)*g.lineHeight-g.height)*v,y=g.getScaledHeight()+_;let m=0;return o===E&&(m=g.getScaledWidth()/2),o===R&&(m=g.getScaledWidth()),g.set({left:g.left-m,top:g.top-(y-g.fontSize*(.07+g._fontSizeFraction))/g.lineHeight,strokeWidth:d}),g}static fromObject(t){return this._fromObject(i(i({},t),{},{styles:Cn(t.styles||{},t.text)}),{extraParam:"text"})}}o(ao,"textLayoutProperties",Gi),o(ao,"cacheProperties",[...Ge,...qi]),o(ao,"ownDefaults",$i),o(ao,"type","Text"),o(ao,"genericFonts",["sans-serif","serif","cursive","fantasy","monospace"]),o(ao,"ATTRIBUTE_NAMES",jr.concat("x","y","dx","dy","font-family","font-style","font-weight","font-size","letter-spacing","text-decoration","text-anchor")),Or(ao,[class extends _e{_toSVG(){const t=this._getSVGLeftTopOffsets(),e=this._getSVGTextAndBg(t.textTop,t.textLeft);return this._wrapSVGTextAndBg(e)}toSVG(t){return this._createBaseSVGMarkup(this._toSVG(),{reviver:t,noStyle:!0,withShadow:!0})}_getSVGLeftTopOffsets(){return{textLeft:-this.width/2,textTop:-this.height/2,lineTop:this.getHeightOfLine(0)}}_wrapSVGTextAndBg(t){let{textBgRects:e,textSpans:r}=t;const n=this.getSvgTextDecoration(this);return[e.join(""),'\t\t<text xml:space="preserve" ',this.fontFamily?'font-family="'.concat(this.fontFamily.replace(no,"'"),'" '):"",this.fontSize?'font-size="'.concat(this.fontSize,'" '):"",this.fontStyle?'font-style="'.concat(this.fontStyle,'" '):"",this.fontWeight?'font-weight="'.concat(this.fontWeight,'" '):"",n?'text-decoration="'.concat(n,'" '):"","rtl"===this.direction?'direction="'.concat(this.direction,'" '):"",'style="',this.getSvgStyles(!0),'"',this.addPaintOrder()," >",r.join(""),"</text>\n"]}_getSVGTextAndBg(t,e){const r=[],n=[];let i,o=t;this.backgroundColor&&n.push(...io(this.backgroundColor,-this.width/2,-this.height/2,this.width,this.height));for(let t=0,s=this._textLines.length;t<s;t++)i=this._getLineLeftOffset(t),"rtl"===this.direction&&(i+=this.width),(this.textBackgroundColor||this.styleHas("textBackgroundColor",t))&&this._setSVGTextLineBg(n,t,e+i,o),this._setSVGTextLineText(r,t,e+i,o),o+=this.getHeightOfLine(t);return{textSpans:r,textBgRects:n}}_createTextCharSpan(t,e,r,n){const i=this.getSvgSpanStyles(e,t!==t.trim()||!!t.match(ro)),o=i?'style="'.concat(i,'"'):"",s=e.deltaY,a=s?' dy="'.concat(kt(s,h.NUM_FRACTION_DIGITS),'" '):"";return'<tspan x="'.concat(kt(r,h.NUM_FRACTION_DIGITS),'" y="').concat(kt(n,h.NUM_FRACTION_DIGITS),'" ').concat(a).concat(o,">").concat(t.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&apos;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),"</tspan>")}_setSVGTextLineText(t,e,r,n){const i=this.getHeightOfLine(e),o=this.textAlign.includes(Ji),s=this._textLines[e];let a,c,l,u,h,f="",d=0;n+=i*(1-this._fontSizeFraction)/this.lineHeight;for(let i=0,p=s.length-1;i<=p;i++)h=i===p||this.charSpacing,f+=s[i],l=this.__charBounds[e][i],0===d?(r+=l.kernedWidth-l.width,d+=l.width):d+=l.kernedWidth,o&&!h&&this._reSpaceAndTab.test(s[i])&&(h=!0),h||(a=a||this.getCompleteStyleDeclaration(e,i),c=this.getCompleteStyleDeclaration(e,i+1),h=wn(a,c,!0)),h&&(u=this._getStyleDeclaration(e,i),t.push(this._createTextCharSpan(f,u,r,n)),f="",a=c,"rtl"===this.direction?r-=d:r+=d,d=0)}_setSVGTextLineBg(t,e,r,n){const i=this._textLines[e],o=this.getHeightOfLine(e)/this.lineHeight;let s,a,c=0,l=0,u=this.getValueOfPropertyAt(e,0,"textBackgroundColor");for(let h=0;h<i.length;h++)s=this.__charBounds[e][h],a=this.getValueOfPropertyAt(e,h,"textBackgroundColor"),a!==u?(u&&t.push(...io(u,r+l,n,c,o)),l=s.left,c=s.width,u=a):c+=s.kernedWidth;a&&t.push(...io(u,r+l,n,c,o))}_getSVGLineTopOffset(t){let e=0,r=0;for(let r=0;r<t;r++)e+=this.getHeightOfLine(r);return r=this.getHeightOfLine(j),{lineTop:e,offset:(this._fontSizeMult-this._fontSizeFraction)*r/(this.lineHeight*this._fontSizeMult)}}getSvgStyles(t){return"".concat(super.getSvgStyles(t)," white-space: pre;")}}]),N.setClass(ao),N.setSVGClass(ao);class co{constructor(t){o(this,"target",void 0),o(this,"__mouseDownInPlace",!1),o(this,"__dragStartFired",!1),o(this,"__isDraggingOver",!1),o(this,"__dragStartSelection",void 0),o(this,"__dragImageDisposer",void 0),o(this,"_dispose",void 0),this.target=t;const e=[this.target.on("dragenter",this.dragEnterHandler.bind(this)),this.target.on("dragover",this.dragOverHandler.bind(this)),this.target.on("dragleave",this.dragLeaveHandler.bind(this)),this.target.on("dragend",this.dragEndHandler.bind(this)),this.target.on("drop",this.dropHandler.bind(this))];this._dispose=()=>{e.forEach((t=>t())),this._dispose=void 0}}isPointerOverSelection(t){const e=this.target,r=e.getSelectionStartFromPointer(t);return e.isEditing&&r>=e.selectionStart&&r<=e.selectionEnd&&e.selectionStart<e.selectionEnd}start(t){return this.__mouseDownInPlace=this.isPointerOverSelection(t)}isActive(){return this.__mouseDownInPlace}end(t){const e=this.isActive();return e&&!this.__dragStartFired&&(this.target.setCursorByClick(t),this.target.initDelayedCursor(!0)),this.__mouseDownInPlace=!1,this.__dragStartFired=!1,this.__isDraggingOver=!1,e}getDragStartSelection(){return this.__dragStartSelection}setDragImage(t,e){var r;let{selectionStart:n,selectionEnd:i}=e;const o=this.target,s=o.canvas,a=new H(o.flipX?-1:1,o.flipY?-1:1),c=o._getCursorBoundaries(n),l=new H(c.left+c.leftOffset,c.top+c.topOffset).multiply(a).transform(o.calcTransformMatrix()),u=s.getPointer(t).subtract(l),h=s._isRetinaScaling(),f=o.getCanvasRetinaScaling(),d=o.getBoundingRect(!0),p=l.subtract(new H(d.left,d.top)),g=s.viewportTransform,v=p.add(u).transform(g,!0),_=o.backgroundColor,y=Ye(o.styles);o.backgroundColor="";const m={stroke:"transparent",fill:"transparent",textBackgroundColor:"transparent"};o.setSelectionStyles(m,0,n),o.setSelectionStyles(m,i,o.text.length),o.dirty=!0;const b=o.toCanvasElement({enableRetinaScaling:h,viewportTransform:!0});o.backgroundColor=_,o.styles=y,o.dirty=!0,Ut(b,{position:"fixed",left:"".concat(-b.width,"px"),border:L,width:"".concat(b.width/f,"px"),height:"".concat(b.height/f,"px")}),this.__dragImageDisposer&&this.__dragImageDisposer(),this.__dragImageDisposer=()=>{b.remove()},Vt(t.target||this.target.hiddenTextarea).body.appendChild(b),null===(r=t.dataTransfer)||void 0===r||r.setDragImage(b,v.x,v.y)}onDragStart(t){this.__dragStartFired=!0;const e=this.target,r=this.isActive();if(r&&t.dataTransfer){const r=this.__dragStartSelection={selectionStart:e.selectionStart,selectionEnd:e.selectionEnd},n=e._text.slice(r.selectionStart,r.selectionEnd).join(""),o=i({text:e.text,value:n},r);t.dataTransfer.setData("text/plain",n),t.dataTransfer.setData("application/fabric",JSON.stringify({value:n,styles:e.getSelectionStyles(r.selectionStart,r.selectionEnd,!0)})),t.dataTransfer.effectAllowed="copyMove",this.setDragImage(t,o)}return e.abortCursorAnimation(),r}canDrop(t){if(this.target.editable&&!this.target.__corner&&!t.defaultPrevented){if(this.isActive()&&this.__dragStartSelection){const e=this.target.getSelectionStartFromPointer(t),r=this.__dragStartSelection;return e<r.selectionStart||e>r.selectionEnd}return!0}return!1}targetCanDrop(t){return this.target.canDrop(t)}dragEnterHandler(t){let{e}=t;const r=this.targetCanDrop(e);!this.__isDraggingOver&&r&&(this.__isDraggingOver=!0)}dragOverHandler(t){const{e}=t,r=this.targetCanDrop(e);!this.__isDraggingOver&&r?this.__isDraggingOver=!0:this.__isDraggingOver&&!r&&(this.__isDraggingOver=!1),this.__isDraggingOver&&(e.preventDefault(),t.canDrop=!0,t.dropTarget=this.target)}dragLeaveHandler(){(this.__isDraggingOver||this.isActive())&&(this.__isDraggingOver=!1)}dropHandler(t){var e;const{e:r}=t,n=r.defaultPrevented;this.__isDraggingOver=!1,r.preventDefault();let i=null===(e=r.dataTransfer)||void 0===e?void 0:e.getData("text/plain");if(i&&!n){const e=this.target,n=e.canvas;let o=e.getSelectionStartFromPointer(r);const{styles:s}=r.dataTransfer.types.includes("application/fabric")?JSON.parse(r.dataTransfer.getData("application/fabric")):{},a=i[Math.max(0,i.length-1)],c=0;if(this.__dragStartSelection){const t=this.__dragStartSelection.selectionStart,r=this.__dragStartSelection.selectionEnd;o>t&&o<=r?o=t:o>r&&(o-=r-t),e.removeChars(t,r),delete this.__dragStartSelection}e._reNewline.test(a)&&(e._reNewline.test(e._text[o])||o===e._text.length)&&(i=i.trimEnd()),t.didDrop=!0,t.dropTarget=e,e.insertChars(i,s,o),n.setActiveObject(e),e.enterEditing(r),e.selectionStart=Math.min(o+c,e._text.length),e.selectionEnd=Math.min(e.selectionStart+i.length,e._text.length),e.hiddenTextarea.value=e.text,e._updateTextarea(),e.hiddenTextarea.focus(),e.fire("changed",{index:o+c,action:"drop"}),n.fire("text:changed",{target:e}),n.contextTopDirty=!0,n.requestRenderAll()}}dragEndHandler(t){let{e}=t;if(this.isActive()&&this.__dragStartFired&&this.__dragStartSelection){var r;const t=this.target,n=this.target.canvas,{selectionStart:i,selectionEnd:o}=this.__dragStartSelection,s=(null===(r=e.dataTransfer)||void 0===r?void 0:r.dropEffect)||L;s===L?(t.selectionStart=i,t.selectionEnd=o,t._updateTextarea(),t.hiddenTextarea.focus()):(t.clearContextTop(),"move"===s&&(t.removeChars(i,o),t.selectionStart=t.selectionEnd=i,t.hiddenTextarea&&(t.hiddenTextarea.value=t.text),t._updateTextarea(),t.fire("changed",{index:i,action:"dragend"}),n.fire("text:changed",{target:t}),n.requestRenderAll()),t.exitEditing())}this.__dragImageDisposer&&this.__dragImageDisposer(),delete this.__dragImageDisposer,delete this.__dragStartSelection,this.__isDraggingOver=!1}dispose(){this._dispose&&this._dispose()}}const lo=/[ \n\.,;!\?\-]/;class uo extends ao{constructor(){super(...arguments),o(this,"_currentCursorOpacity",1)}initBehavior(){this._tick=this._tick.bind(this),this._onTickComplete=this._onTickComplete.bind(this),this.updateSelectionOnMouseMove=this.updateSelectionOnMouseMove.bind(this)}onDeselect(t){return this.isEditing&&this.exitEditing(),this.selected=!1,super.onDeselect(t)}_animateCursor(t){let{toValue:e,duration:r,delay:n,onComplete:i}=t;return Ee({startValue:this._currentCursorOpacity,endValue:e,duration:r,delay:n,onComplete:i,abort:()=>!this.canvas||this.selectionStart!==this.selectionEnd,onChange:t=>{this._currentCursorOpacity=t,this.renderCursorOrSelection()}})}_tick(t){this._currentTickState=this._animateCursor({toValue:1,duration:this.cursorDuration,delay:t,onComplete:this._onTickComplete})}_onTickComplete(){var t;null===(t=this._currentTickCompleteState)||void 0===t||t.abort(),this._currentTickCompleteState=this._animateCursor({toValue:0,duration:this.cursorDuration/2,delay:100,onComplete:this._tick})}initDelayedCursor(t){this.abortCursorAnimation(),this._tick(t?0:this.cursorDelay)}abortCursorAnimation(){let t=!1;[this._currentTickState,this._currentTickCompleteState].forEach((e=>{e&&!e.isDone()&&(t=!0,e.abort())})),this._currentCursorOpacity=1,t&&this.clearContextTop()}restartCursorIfNeeded(){[this._currentTickState,this._currentTickCompleteState].some((t=>!t||t.isDone()))&&this.initDelayedCursor()}selectAll(){return this.selectionStart=0,this.selectionEnd=this._text.length,this._fireSelectionChanged(),this._updateTextarea(),this}getSelectedText(){return this._text.slice(this.selectionStart,this.selectionEnd).join("")}findWordBoundaryLeft(t){let e=0,r=t-1;if(this._reSpace.test(this._text[r]))for(;this._reSpace.test(this._text[r]);)e++,r--;for(;/\S/.test(this._text[r])&&r>-1;)e++,r--;return t-e}findWordBoundaryRight(t){let e=0,r=t;if(this._reSpace.test(this._text[r]))for(;this._reSpace.test(this._text[r]);)e++,r++;for(;/\S/.test(this._text[r])&&r<this._text.length;)e++,r++;return t+e}findLineBoundaryLeft(t){let e=0,r=t-1;for(;!/\n/.test(this._text[r])&&r>-1;)e++,r--;return t-e}findLineBoundaryRight(t){let e=0,r=t;for(;!/\n/.test(this._text[r])&&r<this._text.length;)e++,r++;return t+e}searchWordBoundary(t,e){const r=this._text;let n=t>0&&this._reSpace.test(r[t])&&(-1===e||!F.test(r[t-1]))?t-1:t,i=r[n];for(;n>0&&n<r.length&&!lo.test(i);)n+=e,i=r[n];return-1===e&&lo.test(i)&&n++,n}selectWord(t){t=t||this.selectionStart;const e=this.searchWordBoundary(t,-1),r=Math.max(e,this.searchWordBoundary(t,1));this.selectionStart=e,this.selectionEnd=r,this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()}selectLine(t){t=t||this.selectionStart;const e=this.findLineBoundaryLeft(t),r=this.findLineBoundaryRight(t);return this.selectionStart=e,this.selectionEnd=r,this._fireSelectionChanged(),this._updateTextarea(),this}enterEditing(t){!this.isEditing&&this.editable&&(this.canvas&&(this.canvas.calcOffset(),this.canvas.textEditingManager.exitTextEditing()),this.isEditing=!0,this.initHiddenTextarea(),this.hiddenTextarea.focus(),this.hiddenTextarea.value=this.text,this._updateTextarea(),this._saveEditingProps(),this._setEditingProps(),this._textBeforeEdit=this.text,this._tick(),this.fire("editing:entered",{e:t}),this._fireSelectionChanged(),this.canvas&&(this.canvas.fire("text:editing:entered",{target:this,e:t}),this.canvas.requestRenderAll()))}updateSelectionOnMouseMove(t){if(this.__corner)return;const e=this.hiddenTextarea;Vt(e).activeElement!==e&&e.focus();const r=this.getSelectionStartFromPointer(t),n=this.selectionStart,i=this.selectionEnd;(r===this.__selectionStartOnMouseDown&&n!==i||n!==r&&i!==r)&&(r>this.__selectionStartOnMouseDown?(this.selectionStart=this.__selectionStartOnMouseDown,this.selectionEnd=r):(this.selectionStart=r,this.selectionEnd=this.__selectionStartOnMouseDown),this.selectionStart===n&&this.selectionEnd===i||(this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()))}_setEditingProps(){this.hoverCursor="text",this.canvas&&(this.canvas.defaultCursor=this.canvas.moveCursor="text"),this.borderColor=this.editingBorderColor,this.hasControls=this.selectable=!1,this.lockMovementX=this.lockMovementY=!0}fromStringToGraphemeSelection(t,e,r){const n=r.slice(0,t),i=this.graphemeSplit(n).length;if(t===e)return{selectionStart:i,selectionEnd:i};const o=r.slice(t,e);return{selectionStart:i,selectionEnd:i+this.graphemeSplit(o).length}}fromGraphemeToStringSelection(t,e,r){const n=r.slice(0,t).join("").length;return t===e?{selectionStart:n,selectionEnd:n}:{selectionStart:n,selectionEnd:n+r.slice(t,e).join("").length}}_updateTextarea(){if(this.cursorOffsetCache={},this.hiddenTextarea){if(!this.inCompositionMode){const t=this.fromGraphemeToStringSelection(this.selectionStart,this.selectionEnd,this._text);this.hiddenTextarea.selectionStart=t.selectionStart,this.hiddenTextarea.selectionEnd=t.selectionEnd}this.updateTextareaPosition()}}updateFromTextArea(){if(!this.hiddenTextarea)return;this.cursorOffsetCache={};const t=this.hiddenTextarea;this.text=t.value,this.set("dirty",!0),this.initDimensions(),this.setCoords();const e=this.fromStringToGraphemeSelection(t.selectionStart,t.selectionEnd,t.value);this.selectionEnd=this.selectionStart=e.selectionEnd,this.inCompositionMode||(this.selectionStart=e.selectionStart),this.updateTextareaPosition()}updateTextareaPosition(){if(this.selectionStart===this.selectionEnd){const t=this._calcTextareaPosition();this.hiddenTextarea.style.left=t.left,this.hiddenTextarea.style.top=t.top}}_calcTextareaPosition(){if(!this.canvas)return{left:"1px",top:"1px"};const t=this.inCompositionMode?this.compositionStart:this.selectionStart,e=this._getCursorBoundaries(t),r=this.get2DCursorLocation(t),n=r.lineIndex,i=r.charIndex,o=this.getValueOfPropertyAt(n,i,"fontSize")*this.lineHeight,s=e.leftOffset,a=this.getCanvasRetinaScaling(),c=this.canvas.upperCanvasEl,l=c.width/a,u=c.height/a,h=l-o,f=u-o,d=new H(e.left+s,e.top+e.topOffset+o).transform(this.calcTransformMatrix()).transform(this.canvas.viewportTransform).multiply(new H(c.clientWidth/l,c.clientHeight/u));return d.x<0&&(d.x=0),d.x>h&&(d.x=h),d.y<0&&(d.y=0),d.y>f&&(d.y=f),d.x+=this.canvas._offset.left,d.y+=this.canvas._offset.top,{left:"".concat(d.x,"px"),top:"".concat(d.y,"px"),fontSize:"".concat(o,"px"),charHeight:o}}_saveEditingProps(){this._savedProps={hasControls:this.hasControls,borderColor:this.borderColor,lockMovementX:this.lockMovementX,lockMovementY:this.lockMovementY,hoverCursor:this.hoverCursor,selectable:this.selectable,defaultCursor:this.canvas&&this.canvas.defaultCursor,moveCursor:this.canvas&&this.canvas.moveCursor}}_restoreEditingProps(){this._savedProps&&(this.hoverCursor=this._savedProps.hoverCursor,this.hasControls=this._savedProps.hasControls,this.borderColor=this._savedProps.borderColor,this.selectable=this._savedProps.selectable,this.lockMovementX=this._savedProps.lockMovementX,this.lockMovementY=this._savedProps.lockMovementY,this.canvas&&(this.canvas.defaultCursor=this._savedProps.defaultCursor||this.canvas.defaultCursor,this.canvas.moveCursor=this._savedProps.moveCursor||this.canvas.moveCursor),delete this._savedProps)}_exitEditing(){const t=this.hiddenTextarea;this.selected=!1,this.isEditing=!1,t&&(t.blur&&t.blur(),t.parentNode&&t.parentNode.removeChild(t)),this.hiddenTextarea=null,this.abortCursorAnimation(),this.selectionStart!==this.selectionEnd&&this.clearContextTop()}exitEditing(){const t=this._textBeforeEdit!==this.text;return this._exitEditing(),this.selectionEnd=this.selectionStart,this._restoreEditingProps(),this._forceClearCache&&(this.initDimensions(),this.setCoords()),this.fire("editing:exited"),t&&this.fire("modified"),this.canvas&&(this.canvas.fire("text:editing:exited",{target:this}),t&&this.canvas.fire("object:modified",{target:this})),this}_removeExtraneousStyles(){for(const t in this.styles)this._textLines[t]||delete this.styles[t]}removeStyleFromTo(t,e){const{lineIndex:r,charIndex:n}=this.get2DCursorLocation(t,!0),{lineIndex:i,charIndex:o}=this.get2DCursorLocation(e,!0);if(r!==i){if(this.styles[r])for(let t=n;t<this._unwrappedTextLines[r].length;t++)delete this.styles[r][t];if(this.styles[i])for(let t=o;t<this._unwrappedTextLines[i].length;t++){const e=this.styles[i][t];e&&(this.styles[r]||(this.styles[r]={}),this.styles[r][n+t-o]=e)}for(let t=r+1;t<=i;t++)delete this.styles[t];this.shiftLineStyles(i,r-i)}else if(this.styles[r]){const t=this.styles[r],e=o-n;for(let e=n;e<o;e++)delete t[e];for(const n in this.styles[r]){const r=parseInt(n,10);r>=o&&(t[r-e]=t[n],delete t[n])}}}shiftLineStyles(t,e){const r=Object.assign({},this.styles);for(const n in this.styles){const i=parseInt(n,10);i>t&&(this.styles[i+e]=r[i],r[i-e]||delete this.styles[i])}}insertNewlineStyleObject(t,e,r,n){const o={},s=this._unwrappedTextLines[t].length===e;let a=!1;r||(r=1),this.shiftLineStyles(t,r);const c=this.styles[t]?this.styles[t][0===e?e:e-1]:void 0;for(const r in this.styles[t]){const n=parseInt(r,10);n>=e&&(a=!0,o[n-e]=this.styles[t][r],s&&0===e||delete this.styles[t][r])}let l=!1;for(a&&!s&&(this.styles[t+r]=o,l=!0),l&&r--;r>0;)n&&n[r-1]?this.styles[t+r]={0:i({},n[r-1])}:c?this.styles[t+r]={0:i({},c)}:delete this.styles[t+r],r--;this._forceClearCache=!0}insertCharStyleObject(t,e,r,n){this.styles||(this.styles={});const o=this.styles[t],s=o?i({},o):{};r||(r=1);for(const t in s){const n=parseInt(t,10);n>=e&&(o[n+r]=s[n],s[n-r]||delete o[n])}if(this._forceClearCache=!0,n){for(;r--;)Object.keys(n[r]).length&&(this.styles[t]||(this.styles[t]={}),this.styles[t][e+r]=i({},n[r]));return}if(!o)return;const a=o[e?e-1:1];for(;a&&r--;)this.styles[t][e+r]=i({},a)}insertNewStyleBlock(t,e,r){const n=this.get2DCursorLocation(e,!0),i=[0];let o,s=0;for(let e=0;e<t.length;e++)"\n"===t[e]?(s++,i[s]=0):i[s]++;for(i[0]>0&&(this.insertCharStyleObject(n.lineIndex,n.charIndex,i[0],r),r=r&&r.slice(i[0]+1)),s&&this.insertNewlineStyleObject(n.lineIndex,n.charIndex+i[0],s),o=1;o<s;o++)i[o]>0?this.insertCharStyleObject(n.lineIndex+o,0,i[o],r):r&&this.styles[n.lineIndex+o]&&r[0]&&(this.styles[n.lineIndex+o][0]=r[0]),r=r&&r.slice(i[o]+1);i[o]>0&&this.insertCharStyleObject(n.lineIndex+o,0,i[o],r)}removeChars(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t+1;this.removeStyleFromTo(t,e),this._text.splice(t,e-t),this.text=this._text.join(""),this.set("dirty",!0),this.initDimensions(),this.setCoords(),this._removeExtraneousStyles()}insertChars(t,e,r){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:r;n>r&&this.removeStyleFromTo(r,n);const i=this.graphemeSplit(t);this.insertNewStyleBlock(i,r,e),this._text=[...this._text.slice(0,r),...i,...this._text.slice(n)],this.text=this._text.join(""),this.set("dirty",!0),this.initDimensions(),this.setCoords(),this._removeExtraneousStyles()}setSelectionStartEndWithShift(t,e,r){r<=t?(e===t?this._selectionDirection=M:this._selectionDirection===R&&(this._selectionDirection=M,this.selectionEnd=t),this.selectionStart=r):r>t&&r<e?this._selectionDirection===R?this.selectionEnd=r:this.selectionStart=r:(e===t?this._selectionDirection=R:this._selectionDirection===M&&(this._selectionDirection=R,this.selectionStart=e),this.selectionEnd=r)}}class ho extends uo{initHiddenTextarea(){const t=this.canvas&&Vt(this.canvas.getElement())||y(),e=t.createElement("textarea");Object.entries({autocapitalize:"off",autocorrect:"off",autocomplete:"off",spellcheck:"false","data-fabric":"textarea",wrap:"off"}).map((t=>{let[r,n]=t;return e.setAttribute(r,n)}));const{top:r,left:n,fontSize:i}=this._calcTextareaPosition();e.style.cssText="position: absolute; top: ".concat(r,"; left: ").concat(n,"; z-index: -999; opacity: 0; width: 1px; height: 1px; font-size: 1px; padding-top: ").concat(i,";"),(this.hiddenTextareaContainer||t.body).appendChild(e),Object.entries({blur:"blur",keydown:"onKeyDown",keyup:"onKeyUp",input:"onInput",copy:"copy",cut:"copy",paste:"paste",compositionstart:"onCompositionStart",compositionupdate:"onCompositionUpdate",onCompositionUpdate:"onCompositionEnd"}).map((t=>{let[r,n]=t;return e.addEventListener(r,this[n].bind(this))})),this.hiddenTextarea=e}blur(){this.abortCursorAnimation()}onKeyDown(t){if(!this.isEditing)return;const e="rtl"===this.direction?this.keysMapRtl:this.keysMap;if(t.keyCode in e)this[e[t.keyCode]](t);else{if(!(t.keyCode in this.ctrlKeysMapDown)||!t.ctrlKey&&!t.metaKey)return;this[this.ctrlKeysMapDown[t.keyCode]](t)}t.stopImmediatePropagation(),t.preventDefault(),t.keyCode>=33&&t.keyCode<=40?(this.inCompositionMode=!1,this.clearContextTop(),this.renderCursorOrSelection()):this.canvas&&this.canvas.requestRenderAll()}onKeyUp(t){!this.isEditing||this._copyDone||this.inCompositionMode?this._copyDone=!1:t.keyCode in this.ctrlKeysMapUp&&(t.ctrlKey||t.metaKey)&&(this[this.ctrlKeysMapUp[t.keyCode]](t),t.stopImmediatePropagation(),t.preventDefault(),this.canvas&&this.canvas.requestRenderAll())}onInput(t){const e=this.fromPaste;if(this.fromPaste=!1,t&&t.stopPropagation(),!this.isEditing)return;const r=()=>{this.updateFromTextArea(),this.fire("changed"),this.canvas&&(this.canvas.fire("text:changed",{target:this}),this.canvas.requestRenderAll())};if(""===this.hiddenTextarea.value)return this.styles={},void r();const n=this._splitTextIntoLines(this.hiddenTextarea.value).graphemeText,i=this._text.length,o=n.length,s=this.selectionStart,a=this.selectionEnd,c=s!==a;let l,u,f,d,p=o-i;const g=this.fromStringToGraphemeSelection(this.hiddenTextarea.selectionStart,this.hiddenTextarea.selectionEnd,this.hiddenTextarea.value),v=s>g.selectionStart;c?(u=this._text.slice(s,a),p+=a-s):o<i&&(u=v?this._text.slice(a+p,a):this._text.slice(s,s-p));const y=n.slice(g.selectionEnd-p,g.selectionEnd);if(u&&u.length&&(y.length&&(l=this.getSelectionStyles(s,s+1,!1),l=y.map((()=>l[0]))),c?(f=s,d=a):v?(f=a-u.length,d=a):(f=a,d=a+u.length),this.removeStyleFromTo(f,d)),y.length){const{copyPasteData:t}=_();e&&y.join("")===t.copiedText&&!h.disableStyleCopyPaste&&(l=t.copiedTextStyle),this.insertNewStyleBlock(y,s,l)}r()}onCompositionStart(){this.inCompositionMode=!0}onCompositionEnd(){this.inCompositionMode=!1}onCompositionUpdate(t){this.compositionStart=t.target.selectionStart,this.compositionEnd=t.target.selectionEnd,this.updateTextareaPosition()}copy(){if(this.selectionStart===this.selectionEnd)return;const{copyPasteData:t}=_();t.copiedText=this.getSelectedText(),h.disableStyleCopyPaste?t.copiedTextStyle=null:t.copiedTextStyle=this.getSelectionStyles(this.selectionStart,this.selectionEnd,!0),this._copyDone=!0}paste(){this.fromPaste=!0}_getWidthBeforeCursor(t,e){let r,n=this._getLineLeftOffset(t);return e>0&&(r=this.__charBounds[t][e-1],n+=r.left+r.width),n}getDownCursorOffset(t,e){const r=this._getSelectionForOffset(t,e),n=this.get2DCursorLocation(r),i=n.lineIndex;if(i===this._textLines.length-1||t.metaKey||34===t.keyCode)return this._text.length-r;const o=n.charIndex,s=this._getWidthBeforeCursor(i,o),a=this._getIndexOnLine(i+1,s);return this._textLines[i].slice(o).length+a+1+this.missingNewlineOffset(i)}_getSelectionForOffset(t,e){return t.shiftKey&&this.selectionStart!==this.selectionEnd&&e?this.selectionEnd:this.selectionStart}getUpCursorOffset(t,e){const r=this._getSelectionForOffset(t,e),n=this.get2DCursorLocation(r),i=n.lineIndex;if(0===i||t.metaKey||33===t.keyCode)return-r;const o=n.charIndex,s=this._getWidthBeforeCursor(i,o),a=this._getIndexOnLine(i-1,s),c=this._textLines[i].slice(0,o),l=this.missingNewlineOffset(i-1);return-this._textLines[i-1].length+a-c.length+(1-l)}_getIndexOnLine(t,e){const r=this._textLines[t];let n,i,o=this._getLineLeftOffset(t),s=0;for(let a=0,c=r.length;a<c;a++)if(n=this.__charBounds[t][a].width,o+=n,o>e){i=!0;const t=o-n,r=o,c=Math.abs(t-e);s=Math.abs(r-e)<c?a:a-1;break}return i||(s=r.length-1),s}moveCursorDown(t){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorUpOrDown("Down",t)}moveCursorUp(t){0===this.selectionStart&&0===this.selectionEnd||this._moveCursorUpOrDown("Up",t)}_moveCursorUpOrDown(t,e){const r=this["get".concat(t,"CursorOffset")](e,this._selectionDirection===R);if(e.shiftKey?this.moveCursorWithShift(r):this.moveCursorWithoutShift(r),0!==r){const t=this.text.length;this.selectionStart=Oe(0,this.selectionStart,t),this.selectionEnd=Oe(0,this.selectionEnd,t),this.abortCursorAnimation(),this._currentCursorOpacity=1,this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea()}}moveCursorWithShift(t){const e=this._selectionDirection===M?this.selectionStart+t:this.selectionEnd+t;return this.setSelectionStartEndWithShift(this.selectionStart,this.selectionEnd,e),0!==t}moveCursorWithoutShift(t){return t<0?(this.selectionStart+=t,this.selectionEnd=this.selectionStart):(this.selectionEnd+=t,this.selectionStart=this.selectionEnd),0!==t}moveCursorLeft(t){0===this.selectionStart&&0===this.selectionEnd||this._moveCursorLeftOrRight("Left",t)}_move(t,e,r){let n;if(t.altKey)n=this["findWordBoundary"+r](this[e]);else{if(!t.metaKey&&35!==t.keyCode&&36!==t.keyCode)return this[e]+="Left"===r?-1:1,!0;n=this["findLineBoundary"+r](this[e])}if(void 0!==n&&this[e]!==n)return this[e]=n,!0}_moveLeft(t,e){return this._move(t,e,"Left")}_moveRight(t,e){return this._move(t,e,"Right")}moveCursorLeftWithoutShift(t){let e=!0;return this._selectionDirection=M,this.selectionEnd===this.selectionStart&&0!==this.selectionStart&&(e=this._moveLeft(t,"selectionStart")),this.selectionEnd=this.selectionStart,e}moveCursorLeftWithShift(t){return this._selectionDirection===R&&this.selectionStart!==this.selectionEnd?this._moveLeft(t,"selectionEnd"):0!==this.selectionStart?(this._selectionDirection=M,this._moveLeft(t,"selectionStart")):void 0}moveCursorRight(t){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorLeftOrRight("Right",t)}_moveCursorLeftOrRight(t,e){let r="moveCursor"+t+"With";this._currentCursorOpacity=1,e.shiftKey?r+="Shift":r+="outShift",this[r](e)&&(this.abortCursorAnimation(),this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea())}moveCursorRightWithShift(t){return this._selectionDirection===M&&this.selectionStart!==this.selectionEnd?this._moveRight(t,"selectionStart"):this.selectionEnd!==this._text.length?(this._selectionDirection=R,this._moveRight(t,"selectionEnd")):void 0}moveCursorRightWithoutShift(t){let e=!0;return this._selectionDirection=R,this.selectionStart===this.selectionEnd?(e=this._moveRight(t,"selectionStart"),this.selectionEnd=this.selectionStart):this.selectionStart=this.selectionEnd,e}}function fo(t){return t.button&&1!==t.button}class po extends ho{constructor(){super(...arguments),o(this,"draggableTextDelegate",void 0)}initBehavior(){this.on("mousedown",this._mouseDownHandler),this.on("mousedown:before",this._mouseDownHandlerBefore),this.on("mouseup",this.mouseUpHandler),this.on("mousedblclick",this.doubleClickHandler),this.on("tripleclick",this.tripleClickHandler),this.__lastClickTime=+new Date,this.__lastLastClickTime=+new Date,this.__lastPointer={},this.on("mousedown",this.onMouseDown),this.draggableTextDelegate=new co(this),super.initBehavior()}shouldStartDragging(){return this.draggableTextDelegate.isActive()}onDragStart(t){return this.draggableTextDelegate.onDragStart(t)}canDrop(t){return this.draggableTextDelegate.canDrop(t)}onMouseDown(t){if(!this.canvas)return;this.__newClickTime=+new Date;const e=t.pointer;this.isTripleClick(e)&&(this.fire("tripleclick",t),Jt(t.e)),this.__lastLastClickTime=this.__lastClickTime,this.__lastClickTime=this.__newClickTime,this.__lastPointer=e,this.__lastSelected=this.selected}isTripleClick(t){return this.__newClickTime-this.__lastClickTime<500&&this.__lastClickTime-this.__lastLastClickTime<500&&this.__lastPointer.x===t.x&&this.__lastPointer.y===t.y}doubleClickHandler(t){this.isEditing&&this.selectWord(this.getSelectionStartFromPointer(t.e))}tripleClickHandler(t){this.isEditing&&this.selectLine(this.getSelectionStartFromPointer(t.e))}_mouseDownHandler(t){let{e}=t;this.canvas&&this.editable&&!fo(e)&&!this.__corner&&(this.draggableTextDelegate.start(e)||(this.canvas.textEditingManager.register(this),this.selected&&(this.inCompositionMode=!1,this.setCursorByClick(e)),this.isEditing&&(this.__selectionStartOnMouseDown=this.selectionStart,this.selectionStart===this.selectionEnd&&this.abortCursorAnimation(),this.renderCursorOrSelection())))}_mouseDownHandlerBefore(t){let{e}=t;this.canvas&&this.editable&&!fo(e)&&(this.selected=this===this.canvas._activeObject)}mouseUpHandler(t){let{e,transform:r,button:n}=t;const i=this.draggableTextDelegate.end(e);if(this.canvas){this.canvas.textEditingManager.unregister(this);const t=this.canvas._activeObject;if(t&&t!==this)return}!this.editable||this.group&&!this.group.interactive||r&&r.actionPerformed||fo(e)||i||(this.__lastSelected&&!this.__corner?(this.selected=!1,this.__lastSelected=!1,this.enterEditing(e),this.selectionStart===this.selectionEnd?this.initDelayedCursor(!0):this.renderCursorOrSelection()):this.selected=!0)}setCursorByClick(t){const e=this.getSelectionStartFromPointer(t),r=this.selectionStart,n=this.selectionEnd;t.shiftKey?this.setSelectionStartEndWithShift(r,n,e):(this.selectionStart=e,this.selectionEnd=e),this.isEditing&&(this._fireSelectionChanged(),this._updateTextarea())}getSelectionStartFromPointer(t){const e=this.canvas.getPointer(t).transform(ot(this.calcTransformMatrix())).add(new H(-this._getLeftOffset(),-this._getTopOffset()));let r=0,n=0,i=0;for(let t=0;t<this._textLines.length&&r<=e.y;t++)r+=this.getHeightOfLine(t),i=t,t>0&&(n+=this._textLines[t-1].length+this.missingNewlineOffset(t-1));let o=Math.abs(this._getLineLeftOffset(i));const s=this._textLines[i].length,a=this.__charBounds[i];for(let t=0;t<s;t++){const r=o+a[t].kernedWidth;if(e.x<=r){Math.abs(e.x-r)<=Math.abs(e.x-o)&&n++;break}o=r,n++}return Math.min(this.flipX?s-n:n,this._text.length)}}const go="moveCursorUp",vo="moveCursorDown",_o="moveCursorLeft",yo="moveCursorRight",mo="exitEditing",bo={selectionStart:0,selectionEnd:0,selectionColor:"rgba(17,119,255,0.3)",isEditing:!1,editable:!0,editingBorderColor:"rgba(102,153,255,0.25)",cursorWidth:2,cursorColor:"",cursorDelay:1e3,cursorDuration:600,caching:!0,hiddenTextareaContainer:null,_selectionDirection:null,_reSpace:/\s|\r?\n/,inCompositionMode:!1,keysMap:{9:mo,27:mo,33:go,34:vo,35:yo,36:_o,37:_o,38:go,39:yo,40:vo},keysMapRtl:{9:mo,27:mo,33:go,34:vo,35:_o,36:yo,37:yo,38:go,39:_o,40:vo},ctrlKeysMapDown:{65:"selectAll"},ctrlKeysMapUp:{67:"copy",88:"cut"}};class xo extends po{static getDefaults(){return i(i({},super.getDefaults()),xo.ownDefaults)}get type(){return"i-text"}constructor(t,e){super(t,e),this.initBehavior()}_set(t,e){return this.isEditing&&this._savedProps&&t in this._savedProps?(this._savedProps[t]=e,this):("canvas"===t&&(this.canvas instanceof hi&&this.canvas.textEditingManager.remove(this),e instanceof hi&&e.textEditingManager.add(this)),super._set(t,e))}setSelectionStart(t){t=Math.max(t,0),this._updateAndFire("selectionStart",t)}setSelectionEnd(t){t=Math.min(t,this.text.length),this._updateAndFire("selectionEnd",t)}_updateAndFire(t,e){this[t]!==e&&(this._fireSelectionChanged(),this[t]=e),this._updateTextarea()}_fireSelectionChanged(){this.fire("selection:changed"),this.canvas&&this.canvas.fire("text:selection:changed",{target:this})}initDimensions(){this.isEditing&&this.initDelayedCursor(),super.initDimensions()}getSelectionStyles(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.selectionStart||0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.selectionEnd,r=arguments.length>2?arguments[2]:void 0;return super.getSelectionStyles(t,e,r)}setSelectionStyles(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.selectionStart||0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.selectionEnd;return super.setSelectionStyles(t,e,r)}get2DCursorLocation(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.selectionStart,e=arguments.length>1?arguments[1]:void 0;return super.get2DCursorLocation(t,e)}render(t){super.render(t),this.cursorOffsetCache={},this.renderCursorOrSelection()}toCanvasElement(t){const e=this.isEditing;this.isEditing=!1;const r=super.toCanvasElement(t);return this.isEditing=e,r}renderCursorOrSelection(){if(!this.isEditing)return;const t=this.clearContextTop(!0);if(!t)return;const e=this._getCursorBoundaries();this.selectionStart===this.selectionEnd?this.renderCursor(t,e):this.renderSelection(t,e),this.canvas.contextTopDirty=!0,t.restore()}_getCursorBoundaries(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.selectionStart,e=arguments.length>1?arguments[1]:void 0;const r=this._getLeftOffset(),n=this._getTopOffset(),i=this._getCursorBoundariesOffsets(t,e);return{left:r,top:n,leftOffset:i.left,topOffset:i.top}}_getCursorBoundariesOffsets(t,e){return e?this.__getCursorBoundariesOffsets(t):this.cursorOffsetCache&&"top"in this.cursorOffsetCache?this.cursorOffsetCache:this.cursorOffsetCache=this.__getCursorBoundariesOffsets(t)}__getCursorBoundariesOffsets(t){let e=0,r=0;const{charIndex:n,lineIndex:i}=this.get2DCursorLocation(t);for(let t=0;t<i;t++)e+=this.getHeightOfLine(t);const o=this._getLineLeftOffset(i),s=this.__charBounds[i][n];s&&(r=s.left),0!==this.charSpacing&&n===this._textLines[i].length&&(r-=this._getWidthOfCharSpacing());const a={top:e,left:o+(r>0?r:0)};return"rtl"===this.direction&&(this.textAlign===R||this.textAlign===Ji||this.textAlign===Qi?a.left*=-1:this.textAlign===M||this.textAlign===Zi?a.left=o-(r>0?r:0):this.textAlign!==E&&this.textAlign!==to||(a.left=o-(r>0?r:0))),a}renderCursorAt(t){const e=this._getCursorBoundaries(t,!0);this._renderCursor(this.canvas.contextTop,e,t)}renderCursor(t,e){this._renderCursor(t,e,this.selectionStart)}_renderCursor(t,e,r){const n=this.get2DCursorLocation(r),i=n.lineIndex,o=n.charIndex>0?n.charIndex-1:0,s=this.getValueOfPropertyAt(i,o,"fontSize"),a=this.scaleX*this.canvas.getZoom(),c=this.cursorWidth/a,l=this.getValueOfPropertyAt(i,o,"deltaY"),u=e.topOffset+(1-this._fontSizeFraction)*this.getHeightOfLine(i)/this.lineHeight-s*(1-this._fontSizeFraction);this.inCompositionMode&&this.renderSelection(t,e),t.fillStyle=this.cursorColor||this.getValueOfPropertyAt(i,o,"fill"),t.globalAlpha=this._currentCursorOpacity,t.fillRect(e.left+e.leftOffset-c/2,u+e.top+l,c,s)}renderSelection(t,e){const r={selectionStart:this.inCompositionMode?this.hiddenTextarea.selectionStart:this.selectionStart,selectionEnd:this.inCompositionMode?this.hiddenTextarea.selectionEnd:this.selectionEnd};this._renderSelection(t,r,e)}renderDragSourceEffect(){const t=this.draggableTextDelegate.getDragStartSelection();this._renderSelection(this.canvas.contextTop,t,this._getCursorBoundaries(t.selectionStart,!0))}renderDropTargetEffect(t){const e=this.getSelectionStartFromPointer(t);this.renderCursorAt(e)}_renderSelection(t,e,r){const n=e.selectionStart,i=e.selectionEnd,o=this.textAlign.includes(Ji),s=this.get2DCursorLocation(n),a=this.get2DCursorLocation(i),c=s.lineIndex,l=a.lineIndex,u=s.charIndex<0?0:s.charIndex,h=a.charIndex<0?0:a.charIndex;for(let e=c;e<=l;e++){const n=this._getLineLeftOffset(e)||0;let i=this.getHeightOfLine(e),s=0,a=0,f=0;if(e===c&&(a=this.__charBounds[c][u].left),e>=c&&e<l)f=o&&!this.isEndOfWrapping(e)?this.width:this.getLineWidth(e)||5;else if(e===l)if(0===h)f=this.__charBounds[l][h].left;else{const t=this._getWidthOfCharSpacing();f=this.__charBounds[l][h-1].left+this.__charBounds[l][h-1].width-t}s=i,(this.lineHeight<1||e===l&&this.lineHeight>1)&&(i/=this.lineHeight);let d=r.left+n+a,p=i,g=0;const v=f-a;this.inCompositionMode?(t.fillStyle=this.compositionColor||"black",p=1,g=i):t.fillStyle=this.selectionColor,"rtl"===this.direction&&(this.textAlign===R||this.textAlign===Ji||this.textAlign===Qi?d=this.width-d-v:this.textAlign===M||this.textAlign===Zi?d=r.left+n-f:this.textAlign!==E&&this.textAlign!==to||(d=r.left+n-f)),t.fillRect(d,r.top+r.topOffset+g,v,p),r.topOffset+=s}}getCurrentCharFontSize(){const t=this._getCurrentCharIndex();return this.getValueOfPropertyAt(t.l,t.c,"fontSize")}getCurrentCharColor(){const t=this._getCurrentCharIndex();return this.getValueOfPropertyAt(t.l,t.c,"fill")}_getCurrentCharIndex(){const t=this.get2DCursorLocation(this.selectionStart,!0),e=t.charIndex>0?t.charIndex-1:0;return{l:t.lineIndex,c:e}}dispose(){this._exitEditing(),this.draggableTextDelegate.dispose(),super.dispose()}}o(xo,"ownDefaults",bo),o(xo,"type","IText"),N.setClass(xo),N.setClass(xo,"i-text");class wo extends xo{static getDefaults(){return i(i({},super.getDefaults()),{},{controls:Sr()},wo.ownDefaults)}initDimensions(){this.initialized&&(this.isEditing&&this.initDelayedCursor(),this._clearCache(),this.dynamicMinWidth=0,this._styleMap=this._generateStyleMap(this._splitText()),this.dynamicMinWidth>this.width&&this._set("width",this.dynamicMinWidth),this.textAlign.includes(Ji)&&this.enlargeSpaces(),this.height=this.calcTextHeight())}_generateStyleMap(t){let e=0,r=0,n=0;const i={};for(let o=0;o<t.graphemeLines.length;o++)"\n"===t.graphemeText[n]&&o>0?(r=0,n++,e++):!this.splitByGrapheme&&this._reSpaceAndTab.test(t.graphemeText[n])&&o>0&&(r++,n++),i[o]={line:e,offset:r},n+=t.graphemeLines[o].length,r+=t.graphemeLines[o].length;return i}styleHas(t,e){if(this._styleMap&&!this.isWrapping){const t=this._styleMap[e];t&&(e=t.line)}return super.styleHas(t,e)}isEmptyStyles(t){if(!this.styles)return!0;let e,r=0,n=t+1,i=!1;const o=this._styleMap[t],s=this._styleMap[t+1];o&&(t=o.line,r=o.offset),s&&(n=s.line,i=n===t,e=s.offset);const a=void 0===t?this.styles:{line:this.styles[t]};for(const t in a)for(const n in a[t])if(n>=r&&(!i||n<e))for(const e in a[t][n])return!1;return!0}_getStyleDeclaration(t,e){if(this._styleMap&&!this.isWrapping){const r=this._styleMap[t];if(!r)return{};t=r.line,e=r.offset+e}return super._getStyleDeclaration(t,e)}_setStyleDeclaration(t,e,r){const n=this._styleMap[t];t=n.line,e=n.offset+e,this.styles[t][e]=r}_deleteStyleDeclaration(t,e){const r=this._styleMap[t];t=r.line,e=r.offset+e,delete this.styles[t][e]}_getLineStyle(t){const e=this._styleMap[t];return!!this.styles[e.line]}_setLineStyle(t){const e=this._styleMap[t];this.styles[e.line]={}}_wrapText(t,e){this.isWrapping=!0;const r=this.getGraphemeDataForRender(t),n=[];for(let i=0;i<t.length;i++)n.push(...this._wrapLine(i,e,r));return this.isWrapping=!1,n}getGraphemeDataForRender(t){const e=this.splitByGrapheme,r=e?"":" ";let n=0;return{wordsData:t.map(((t,i)=>{let o=0;const s=e?this.graphemeSplit(t):this.wordSplit(t);return 0===s.length&&s.push([]),s.map((t=>{t=e?t:this.graphemeSplit(t);const s=this._measureWord(t,i,o);return n=Math.max(s,n),o+=t.length+r.length,{word:t,width:s}}))})),largestWordWidth:n}}_measureWord(t,e){let r,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=0;for(let o=0,s=t.length;o<s;o++)i+=this._getGraphemeBox(t[o],e,o+n,r,!0).kernedWidth,r=t[o];return i}wordSplit(t){return t.split(this._wordJoiners)}_wrapLine(t,e,r){let{largestWordWidth:n,wordsData:i}=r,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;const s=this._getWidthOfCharSpacing(),a=this.splitByGrapheme,c=[],l=a?"":" ";let u=0,h=[],f=0,d=0,p=!0;e-=o;const g=Math.max(e,n,this.dynamicMinWidth),v=i[t];let _;for(f=0,_=0;_<v.length;_++){const{word:e,width:r}=v[_];f+=e.length,u+=d+r-s,u>g&&!p?(c.push(h),h=[],u=r,p=!0):u+=s,p||a||h.push(l),h=h.concat(e),d=a?0:this._measureWord([l],t,f),f++,p=!1}return _&&c.push(h),n+o>this.dynamicMinWidth&&(this.dynamicMinWidth=n-s+o),c}isEndOfWrapping(t){return!this._styleMap[t+1]||this._styleMap[t+1].line!==this._styleMap[t].line}missingNewlineOffset(t){return this.splitByGrapheme?this.isEndOfWrapping(t)?1:0:1}_splitTextIntoLines(t){const e=super._splitTextIntoLines(t),r=this._wrapText(e.lines,this.width),n=new Array(r.length);for(let t=0;t<r.length;t++)n[t]=r[t].join("");return e.lines=n,e.graphemeLines=r,e}getMinWidth(){return Math.max(this.minWidth,this.dynamicMinWidth)}_removeExtraneousStyles(){const t={};for(const e in this._styleMap)this._textLines[e]&&(t[this._styleMap[e].line]=1);for(const e in this.styles)t[e]||delete this.styles[e]}toObject(t){return super.toObject(["minWidth","splitByGrapheme"].concat(t))}}o(wo,"type","Textbox"),o(wo,"textLayoutProperties",[...xo.textLayoutProperties,"width"]),o(wo,"ownDefaults",{minWidth:20,dynamicMinWidth:2,lockScalingFlip:!0,noScaleCache:!1,_wordJoiners:/[ \t\r]/,splitByGrapheme:!1}),N.setClass(wo);class So{constructor(){o(this,"resources",{})}applyFilters(t,e,r,n,i){const o=i.getContext("2d");if(!o)return;o.drawImage(e,0,0,r,n);const s={sourceWidth:r,sourceHeight:n,imageData:o.getImageData(0,0,r,n),originalEl:e,originalImageData:o.getImageData(0,0,r,n),canvasEl:i,ctx:o,filterBackend:this};t.forEach((t=>{t.applyTo(s)}));const{imageData:a}=s;return a.width===r&&a.height===n||(i.width=a.width,i.height=a.height),o.putImageData(a,0,0),s}}class Co{constructor(){let{tileSize:t=h.textureSize}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};o(this,"aPosition",new Float32Array([0,0,0,1,1,0,1,1])),o(this,"resources",{}),this.tileSize=t,this.setupGLContext(t,t),this.captureGPUInfo()}setupGLContext(t,e){this.dispose(),this.createWebGLCanvas(t,e),this.chooseFastestCopyGLTo2DMethod(t,e)}chooseFastestCopyGLTo2DMethod(t,e){const r=Q(),n=new ArrayBuffer(t*e*4);if(h.forceGLPutImageData)return this.imageBuffer=n,void(this.copyGLTo2D=Oo);const i={imageBuffer:n},o={destinationWidth:t,destinationHeight:e,targetCanvas:r};let s;r.width=t,r.height=e,s=m().performance.now(),this.copyGLTo2D.call(i,this.gl,o);const a=m().performance.now()-s;s=m().performance.now(),Oo.call(i,this.gl,o),a>m().performance.now()-s&&(this.imageBuffer=n,this.copyGLTo2D=Oo)}createWebGLCanvas(t,e){const r=Q();r.width=t,r.height=e;const n=r.getContext("webgl",{alpha:!0,premultipliedAlpha:!1,depth:!1,stencil:!1,antialias:!1});n&&(n.clearColor(0,0,0,0),this.canvas=r,this.gl=n)}applyFilters(t,e,r,n,i,o){const s=this.gl,a=i.getContext("2d");if(!s||!a)return;let c;o&&(c=this.getCachedTexture(o,e));const l={originalWidth:e.width||e.originalWidth||0,originalHeight:e.height||e.originalHeight||0,sourceWidth:r,sourceHeight:n,destinationWidth:r,destinationHeight:n,context:s,sourceTexture:this.createTexture(s,r,n,c?void 0:e),targetTexture:this.createTexture(s,r,n),originalTexture:c||this.createTexture(s,r,n,c?void 0:e),passes:t.length,webgl:!0,aPosition:this.aPosition,programCache:this.programCache,pass:0,filterBackend:this,targetCanvas:i},u=s.createFramebuffer();return s.bindFramebuffer(s.FRAMEBUFFER,u),t.forEach((t=>{t&&t.applyTo(l)})),function(t){const e=t.targetCanvas,r=e.width,n=e.height,i=t.destinationWidth,o=t.destinationHeight;r===i&&n===o||(e.width=i,e.height=o)}(l),this.copyGLTo2D(s,l),s.bindTexture(s.TEXTURE_2D,null),s.deleteTexture(l.sourceTexture),s.deleteTexture(l.targetTexture),s.deleteFramebuffer(u),a.setTransform(1,0,0,1,0,0),l}dispose(){this.canvas&&(this.canvas=null,this.gl=null),this.clearWebGLCaches()}clearWebGLCaches(){this.programCache={},this.textureCache={}}createTexture(t,e,r,n,i){const{NEAREST:o,TEXTURE_2D:s,RGBA:a,UNSIGNED_BYTE:c,CLAMP_TO_EDGE:l,TEXTURE_MAG_FILTER:u,TEXTURE_MIN_FILTER:h,TEXTURE_WRAP_S:f,TEXTURE_WRAP_T:d}=t,p=t.createTexture();return t.bindTexture(s,p),t.texParameteri(s,u,i||o),t.texParameteri(s,h,i||o),t.texParameteri(s,f,l),t.texParameteri(s,d,l),n?t.texImage2D(s,0,a,a,c,n):t.texImage2D(s,0,a,e,r,0,a,c,null),p}getCachedTexture(t,e,r){const{textureCache:n}=this;if(n[t])return n[t];{const i=this.createTexture(this.gl,e.width,e.height,e,r);return i&&(n[t]=i),i}}evictCachesForKey(t){this.textureCache[t]&&(this.gl.deleteTexture(this.textureCache[t]),delete this.textureCache[t])}copyGLTo2D(t,e){const r=t.canvas,n=e.targetCanvas,i=n.getContext("2d");if(!i)return;i.translate(0,n.height),i.scale(1,-1);const o=r.height-n.height;i.drawImage(r,0,o,n.width,n.height,0,0,n.width,n.height)}captureGPUInfo(){if(this.gpuInfo)return this.gpuInfo;const t=this.gl,e={renderer:"",vendor:""};if(!t)return e;const r=t.getExtension("WEBGL_debug_renderer_info");if(r){const n=t.getParameter(r.UNMASKED_RENDERER_WEBGL),i=t.getParameter(r.UNMASKED_VENDOR_WEBGL);n&&(e.renderer=n.toLowerCase()),i&&(e.vendor=i.toLowerCase())}return this.gpuInfo=e,e}}function Oo(t,e){const r=e.targetCanvas.getContext("2d"),n=e.destinationWidth,i=e.destinationHeight,o=n*i*4;if(!r)return;const s=new Uint8Array(this.imageBuffer,0,o),a=new Uint8ClampedArray(this.imageBuffer,0,o);t.readPixels(0,0,n,i,t.RGBA,t.UNSIGNED_BYTE,s);const c=new ImageData(a,n,i);r.putImageData(c,0,0)}let To;function jo(){return!To&&(!(arguments.length>0&&void 0!==arguments[0])||arguments[0])&&(To=function(){const{WebGLProbe:t}=_();return t.queryWebGL(Q()),h.enableGLFiltering&&t.isSupported(h.textureSize)?new Co({tileSize:h.textureSize}):new So}()),To}const ko=["filters","resizeFilter","src","crossOrigin"],Ao=["cropX","cropY"];class Eo extends Tr{static getDefaults(){return i(i({},super.getDefaults()),Eo.ownDefaults)}constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(i({filters:[]},e)),o(this,"_lastScaleX",1),o(this,"_lastScaleY",1),o(this,"_filterScalingX",1),o(this,"_filterScalingY",1),this.cacheKey="texture".concat(Z()),this.setElement("string"==typeof t?(this.canvas&&getElementDocument(this.canvas.getElement())||y()).getElementById(t):t,e)}getElement(){return this._element}setElement(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.removeTexture(this.cacheKey),this.removeTexture("".concat(this.cacheKey,"_filtered")),this._element=t,this._originalElement=t,this._setWidthHeight(e),t.classList.add(Eo.CSS_CANVAS),0!==this.filters.length&&this.applyFilters(),this.resizeFilter&&this.applyResizeFilters()}removeTexture(t){const e=jo(!1);e instanceof Co&&e.evictCachesForKey(t)}dispose(){super.dispose(),this.removeTexture(this.cacheKey),this.removeTexture("".concat(this.cacheKey,"_filtered")),this._cacheContext=null,["_originalElement","_element","_filteredEl","_cacheCanvas"].forEach((t=>{const e=this[t];e&&_().dispose(e),this[t]=void 0}))}getCrossOrigin(){return this._originalElement&&(this._originalElement.crossOrigin||null)}getOriginalSize(){const t=this.getElement();return t?{width:t.naturalWidth||t.width,height:t.naturalHeight||t.height}:{width:0,height:0}}_stroke(t){if(!this.stroke||0===this.strokeWidth)return;const e=this.width/2,r=this.height/2;t.beginPath(),t.moveTo(-e,-r),t.lineTo(e,-r),t.lineTo(e,r),t.lineTo(-e,r),t.lineTo(-e,-r),t.closePath()}toObject(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];const e=[];return this.filters.forEach((t=>{t&&e.push(t.toObject())})),i(i({},super.toObject([...Ao,...t])),{},{src:this.getSrc(),crossOrigin:this.getCrossOrigin(),filters:e},this.resizeFilter?{resizeFilter:this.resizeFilter.toObject()}:{})}hasCrop(){return!!this.cropX||!!this.cropY||this.width<this._element.width||this.height<this._element.height}_toSVG(){const t=[],e=this._element,r=-this.width/2,n=-this.height/2;let i,o=[],s="",a="";if(!e)return[];if(this.hasCrop()){const t=Z();o.push('<clipPath id="imageCrop_'+t+'">\n','\t<rect x="'+r+'" y="'+n+'" width="'+this.width+'" height="'+this.height+'" />\n',"</clipPath>\n"),s=' clip-path="url(#imageCrop_'+t+')" '}if(this.imageSmoothing||(a='" image-rendering="optimizeSpeed'),t.push("\t<image ","COMMON_PARTS",'xlink:href="',this.getSvgSrc(!0),'" x="',r-this.cropX,'" y="',n-this.cropY,'" width="',e.width||e.naturalWidth,'" height="',e.height||e.naturalHeight,a,'"',s,"></image>\n"),this.stroke||this.strokeDashArray){const t=this.fill;this.fill=null,i=["\t<rect ",'x="',r,'" y="',n,'" width="',this.width,'" height="',this.height,'" style="',this.getSvgStyles(),'"/>\n'],this.fill=t}return o="fill"!==this.paintFirst?o.concat(i,t):o.concat(t,i),o}getSrc(t){const e=t?this._element:this._originalElement;return e?e.toDataURL?e.toDataURL():this.srcFromAttribute?e.getAttribute("src"):e.src:this.src||""}getSvgSrc(t){return this.getSrc(t)}setSrc(t){let{crossOrigin:e,signal:r}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return vt(t,{crossOrigin:e,signal:r}).then((t=>{void 0!==e&&this.set({crossOrigin:e}),this.setElement(t)}))}toString(){return'#<Image: { src: "'.concat(this.getSrc(),'" }>')}applyResizeFilters(){const t=this.resizeFilter,e=this.minimumScaleTrigger,r=this.getTotalObjectScaling(),n=r.x,i=r.y,o=this._filteredEl||this._originalElement;if(this.group&&this.set("dirty",!0),!t||n>e&&i>e)return this._element=o,this._filterScalingX=1,this._filterScalingY=1,this._lastScaleX=n,void(this._lastScaleY=i);const s=Q(),a=o.width,c=o.height;s.width=a,s.height=c,this._element=s,this._lastScaleX=t.scaleX=n,this._lastScaleY=t.scaleY=i,jo().applyFilters([t],o,a,c,this._element),this._filterScalingX=s.width/this._originalElement.width,this._filterScalingY=s.height/this._originalElement.height}applyFilters(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.filters||[];if(t=t.filter((t=>t&&!t.isNeutralState())),this.set("dirty",!0),this.removeTexture("".concat(this.cacheKey,"_filtered")),0===t.length)return this._element=this._originalElement,this._filteredEl=null,this._filterScalingX=1,void(this._filterScalingY=1);const e=this._originalElement,r=e.naturalWidth||e.width,n=e.naturalHeight||e.height;if(this._element===this._originalElement){const t=Q();t.width=r,t.height=n,this._element=t,this._filteredEl=t}else this._element=this._filteredEl,this._filteredEl.getContext("2d").clearRect(0,0,r,n),this._lastScaleX=1,this._lastScaleY=1;jo().applyFilters(t,this._originalElement,r,n,this._element),this._originalElement.width===this._element.width&&this._originalElement.height===this._element.height||(this._filterScalingX=this._element.width/this._originalElement.width,this._filterScalingY=this._element.height/this._originalElement.height)}_render(t){t.imageSmoothingEnabled=this.imageSmoothing,!0!==this.isMoving&&this.resizeFilter&&this._needsResize()&&this.applyResizeFilters(),this._stroke(t),this._renderPaintInOrder(t)}drawCacheOnCanvas(t){t.imageSmoothingEnabled=this.imageSmoothing,super.drawCacheOnCanvas(t)}shouldCache(){return this.needsItsOwnCache()}_renderFill(t){const e=this._element;if(!e)return;const r=this._filterScalingX,n=this._filterScalingY,i=this.width,o=this.height,s=Math.max(this.cropX,0),a=Math.max(this.cropY,0),c=e.naturalWidth||e.width,l=e.naturalHeight||e.height,u=s*r,h=a*n,f=Math.min(i*r,c-u),d=Math.min(o*n,l-h),p=-i/2,g=-o/2,v=Math.min(i,c/r-s),_=Math.min(o,l/n-a);e&&t.drawImage(e,u,h,f,d,p,g,v,_)}_needsResize(){const t=this.getTotalObjectScaling();return t.x!==this._lastScaleX||t.y!==this._lastScaleY}_resetWidthHeight(){this.set(this.getOriginalSize())}_setWidthHeight(){let{width:t,height:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const r=this.getOriginalSize();this.width=t||r.width,this.height=e||r.height}parsePreserveAspectRatioAttribute(){const t=(t=>{const[e,r]=t.trim().split(" "),[n,i]=(o=e)&&o!==L?[o.slice(1,4),o.slice(5,8)]:o===L?[o,o]:["Mid","Mid"];var o;return{meetOrSlice:r||"meet",alignX:n,alignY:i}})(this.preserveAspectRatio||""),e=this.width,r=this.height,n={width:e,height:r};let i,o=this._element.width,s=this._element.height,a=1,c=1,l=0,u=0,h=0,f=0;return!t||t.alignX===L&&t.alignY===L?(a=e/o,c=r/s):("meet"===t.meetOrSlice&&(d=this._element,p=n,a=c=Math.min(p.width/d.width,p.height/d.height),i=(e-o*a)/2,"Min"===t.alignX&&(l=-i),"Max"===t.alignX&&(l=i),i=(r-s*c)/2,"Min"===t.alignY&&(u=-i),"Max"===t.alignY&&(u=i)),"slice"===t.meetOrSlice&&(a=c=((t,e)=>Math.max(e.width/t.width,e.height/t.height))(this._element,n),i=o-e/a,"Mid"===t.alignX&&(h=i/2),"Max"===t.alignX&&(h=i),i=s-r/c,"Mid"===t.alignY&&(f=i/2),"Max"===t.alignY&&(f=i),o=e/a,s=r/c)),{width:o,height:s,scaleX:a,scaleY:c,offsetLeft:l,offsetTop:u,cropX:h,cropY:f};var d,p}static fromObject(t){let{filters:e,resizeFilter:r,src:n,crossOrigin:o}=t,s=a(t,ko),c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Promise.all([vt(n,i(i({},c),{},{crossOrigin:o})),e&&_t(e,c),r&&_t([r],c),yt(s,c)]).then((t=>{let[e,r=[],[a]=[],c={}]=t;return new this(e,i(i({},s),{},{src:n,crossOrigin:o,filters:r,resizeFilter:a},c))}))}static fromURL(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return vt(t,e).then((t=>new this(t,e)))}static async fromElement(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=fn(t,this.ATTRIBUTE_NAMES);return this.fromURL(r["xlink:href"],i(i({},e),r)).catch((t=>(console.log(t),null)))}}o(Eo,"type","Image"),o(Eo,"cacheProperties",[...Ge,...Ao]),o(Eo,"ownDefaults",{strokeWidth:0,srcFromAttribute:!1,minimumScaleTrigger:.5,cropX:0,cropY:0,imageSmoothing:!0}),o(Eo,"CSS_CANVAS","canvas-img"),o(Eo,"ATTRIBUTE_NAMES",[...jr,"x","y","width","height","preserveAspectRatio","xlink:href","crossOrigin","image-rendering"]),N.setClass(Eo),N.setSVGClass(Eo);const Mo=t=>N.getSVGClass(t.tagName.toLowerCase().replace("svg:",""));var Po;(Po=function(t,e,r,n,i){this.elements=t,this.options=e,this.reviver=r,this.svgUid=e&&e.svgUid||0,this.parsingOptions=n,this.regexUrl=/^url\(['"]?#([^'"]+)['"]?\)/g,this.doc=i}.prototype).parse=function(){return Promise.all(this.elements.map(((t,e)=>(t.setAttribute("svgUid",this.svgUid),this.createObject(t)))))},Po.createObject=async function(t){const e=Mo(t);if(e){const r=await e.fromElement(t,this.options);let n;return this.resolveGradient(r,t,"fill"),this.resolveGradient(r,t,"stroke"),r instanceof Eo&&r._originalElement&&(n=r.parsePreserveAspectRatioAttribute(t)),ei(r,n),await this.resolveClipPath(r,t),this.reviver&&this.reviver(t,r),r}return null},Po.extractPropertyDefinition=function(t,e,r){const n=t[e],i=this.regexUrl;if(!i.test(n))return;i.lastIndex=0;const o=i.exec(n)[1];return i.lastIndex=0,Pr[r][this.svgUid][o]},Po.resolveGradient=function(t,e,r){const n=this.extractPropertyDefinition(t,r,"gradientDefs");if(n){const o=e.getAttribute(r+"-opacity"),s=Oi.fromElement(n,t,i(i({},this.options),{},{opacity:o}));t.set(r,s)}},Po.resolveClipPath=async function(t,e){const r=this.extractPropertyDefinition(t,"clipPath","clipPaths");if(r){const n=ot(t.calcTransformMatrix()),i=r[0].parentNode;let o=e;for(;o.parentNode&&o.getAttribute("clip-path")!==t.clipPath;)o=o.parentNode;o.parentNode.appendChild(i);const s=await Promise.all(r.map((t=>Mo(t).fromElement(t,this.options).then((t=>(ei(t),t.fillRule=t.clipRule,t)))))),a=1===s.length?s[0]:new _n(s),c=st(n,a.calcTransformMatrix());a.clipPath&&await this.resolveClipPath(a,o);const{scaleX:l,scaleY:u,angle:h,skewX:f,translateX:d,translateY:p}=ct(c);a.set({flipX:!1,flipY:!1}),a.set({scaleX:l,scaleY:u,angle:h,skewX:f,skewY:0}),a.setPositionByOrigin(new H(d,p),E,E),t.clipPath=a}else delete t.clipPath};const Do=t=>void 0!==t.webgl,Ro="precision highp float",Lo="\n    ".concat(Ro,";\n    varying vec2 vTexCoord;\n    uniform sampler2D uTexture;\n    void main() {\n      gl_FragColor = texture2D(uTexture, vTexCoord);\n    }"),Fo=["type"];class Bo{get type(){return this.constructor.type}constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=s({},(function(t){if(null==t)throw new TypeError("Cannot destructure "+t)}(t),t));o(this,"vertexSource","\n    attribute vec2 aPosition;\n    varying vec2 vTexCoord;\n    void main() {\n      vTexCoord = aPosition;\n      gl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);\n    }"),Object.assign(this,this.constructor.defaults,e)}getFragmentSource(){return Lo}createProgram(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.getFragmentSource(),r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.vertexSource;const{WebGLProbe:{GLPrecision:n="highp"}}=_();"highp"!==n&&(e=e.replace(new RegExp(Ro,"g"),Ro.replace("highp",n)));const i=t.createShader(t.VERTEX_SHADER),o=t.createShader(t.FRAGMENT_SHADER),s=t.createProgram();if(!i||!o||!s)throw new Error("Vertex, fragment shader or program creation error");if(t.shaderSource(i,r),t.compileShader(i),!t.getShaderParameter(i,t.COMPILE_STATUS))throw new Error("Vertex shader compile error for ".concat(this.type,": ").concat(t.getShaderInfoLog(i)));if(t.shaderSource(o,e),t.compileShader(o),!t.getShaderParameter(o,t.COMPILE_STATUS))throw new Error("Fragment shader compile error for ".concat(this.type,": ").concat(t.getShaderInfoLog(o)));if(t.attachShader(s,i),t.attachShader(s,o),t.linkProgram(s),!t.getProgramParameter(s,t.LINK_STATUS))throw new Error('Shader link error for "${this.type}" '+t.getProgramInfoLog(s));const a=this.getUniformLocations(t,s)||{};return a.uStepW=t.getUniformLocation(s,"uStepW"),a.uStepH=t.getUniformLocation(s,"uStepH"),{program:s,attributeLocations:this.getAttributeLocations(t,s),uniformLocations:a}}getAttributeLocations(t,e){return{aPosition:t.getAttribLocation(e,"aPosition")}}getUniformLocations(t,e){return{}}sendAttributeData(t,e,r){const n=e.aPosition,i=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,i),t.enableVertexAttribArray(n),t.vertexAttribPointer(n,2,t.FLOAT,!1,0,0),t.bufferData(t.ARRAY_BUFFER,r,t.STATIC_DRAW)}_setupFrameBuffer(t){const e=t.context;if(t.passes>1){const r=t.destinationWidth,n=t.destinationHeight;t.sourceWidth===r&&t.sourceHeight===n||(e.deleteTexture(t.targetTexture),t.targetTexture=t.filterBackend.createTexture(e,r,n)),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,t.targetTexture,0)}else e.bindFramebuffer(e.FRAMEBUFFER,null),e.finish()}_swapTextures(t){t.passes--,t.pass++;const e=t.targetTexture;t.targetTexture=t.sourceTexture,t.sourceTexture=e}isNeutralState(t){const e=this.mainParameter,r=this.constructor.defaults[e];if(e){const t=this[e];return Array.isArray(r)&&Array.isArray(t)?r.every(((e,r)=>e===t[r])):r===t}return!1}applyTo(t){Do(t)?(this._setupFrameBuffer(t),this.applyToWebGL(t),this._swapTextures(t)):this.applyTo2d(t)}applyTo2d(t){}getCacheKey(){return this.type}retrieveShader(t){const e=this.getCacheKey();return t.programCache[e]||(t.programCache[e]=this.createProgram(t.context)),t.programCache[e]}applyToWebGL(t){const e=t.context,r=this.retrieveShader(t);0===t.pass&&t.originalTexture?e.bindTexture(e.TEXTURE_2D,t.originalTexture):e.bindTexture(e.TEXTURE_2D,t.sourceTexture),e.useProgram(r.program),this.sendAttributeData(e,r.attributeLocations,t.aPosition),e.uniform1f(r.uniformLocations.uStepW,1/t.sourceWidth),e.uniform1f(r.uniformLocations.uStepH,1/t.sourceHeight),this.sendUniformData(e,r.uniformLocations),e.viewport(0,0,t.destinationWidth,t.destinationHeight),e.drawArrays(e.TRIANGLE_STRIP,0,4)}bindAdditionalTexture(t,e,r){t.activeTexture(r),t.bindTexture(t.TEXTURE_2D,e),t.activeTexture(t.TEXTURE0)}unbindAdditionalTexture(t,e){t.activeTexture(e),t.bindTexture(t.TEXTURE_2D,null),t.activeTexture(t.TEXTURE0)}getMainParameter(){return this.mainParameter?this[this.mainParameter]:void 0}setMainParameter(t){this.mainParameter&&(this[this.mainParameter]=t)}sendUniformData(t,e){}createHelpLayer(t){if(!t.helpLayer){const e=Q();e.width=t.sourceWidth,e.height=t.sourceHeight,t.helpLayer=e}}toObject(){const t=this.mainParameter;return i({type:this.type},t?{[t]:this[t]}:{})}toJSON(){return this.toObject()}static async fromObject(t,e){return new this(a(t,Fo))}}o(Bo,"type","BaseFilter");const Io={multiply:"gl_FragColor.rgb *= uColor.rgb;\n",screen:"gl_FragColor.rgb = 1.0 - (1.0 - gl_FragColor.rgb) * (1.0 - uColor.rgb);\n",add:"gl_FragColor.rgb += uColor.rgb;\n",difference:"gl_FragColor.rgb = abs(gl_FragColor.rgb - uColor.rgb);\n",subtract:"gl_FragColor.rgb -= uColor.rgb;\n",lighten:"gl_FragColor.rgb = max(gl_FragColor.rgb, uColor.rgb);\n",darken:"gl_FragColor.rgb = min(gl_FragColor.rgb, uColor.rgb);\n",exclusion:"gl_FragColor.rgb += uColor.rgb - 2.0 * (uColor.rgb * gl_FragColor.rgb);\n",overlay:"\n    if (uColor.r < 0.5) {\n      gl_FragColor.r *= 2.0 * uColor.r;\n    } else {\n      gl_FragColor.r = 1.0 - 2.0 * (1.0 - gl_FragColor.r) * (1.0 - uColor.r);\n    }\n    if (uColor.g < 0.5) {\n      gl_FragColor.g *= 2.0 * uColor.g;\n    } else {\n      gl_FragColor.g = 1.0 - 2.0 * (1.0 - gl_FragColor.g) * (1.0 - uColor.g);\n    }\n    if (uColor.b < 0.5) {\n      gl_FragColor.b *= 2.0 * uColor.b;\n    } else {\n      gl_FragColor.b = 1.0 - 2.0 * (1.0 - gl_FragColor.b) * (1.0 - uColor.b);\n    }\n    ",tint:"\n    gl_FragColor.rgb *= (1.0 - uColor.a);\n    gl_FragColor.rgb += uColor.rgb;\n    "};class No extends Bo{getCacheKey(){return"".concat(this.type,"_").concat(this.mode)}getFragmentSource(){return"\n      precision highp float;\n      uniform sampler2D uTexture;\n      uniform vec4 uColor;\n      varying vec2 vTexCoord;\n      void main() {\n        vec4 color = texture2D(uTexture, vTexCoord);\n        gl_FragColor = color;\n        if (color.a > 0.0) {\n          ".concat(Io[this.mode],"\n        }\n      }\n      ")}applyTo2d(t){let{imageData:{data:e}}=t;const r=new jt(this.color).getSource(),n=r[0]*this.alpha,i=r[1]*this.alpha,o=r[2]*this.alpha,s=1-this.alpha;for(let t=0;t<e.length;t+=4){const r=e[t],a=e[t+1],c=e[t+2];switch(this.mode){case"multiply":e[t]=r*n/255,e[t+1]=a*i/255,e[t+2]=c*o/255;break;case"screen":e[t]=255-(255-r)*(255-n)/255,e[t+1]=255-(255-a)*(255-i)/255,e[t+2]=255-(255-c)*(255-o)/255;break;case"add":e[t]=r+n,e[t+1]=a+i,e[t+2]=c+o;break;case"difference":e[t]=Math.abs(r-n),e[t+1]=Math.abs(a-i),e[t+2]=Math.abs(c-o);break;case"subtract":e[t]=r-n,e[t+1]=a-i,e[t+2]=c-o;break;case"darken":e[t]=Math.min(r,n),e[t+1]=Math.min(a,i),e[t+2]=Math.min(c,o);break;case"lighten":e[t]=Math.max(r,n),e[t+1]=Math.max(a,i),e[t+2]=Math.max(c,o);break;case"overlay":e[t]=n<128?2*r*n/255:255-2*(255-r)*(255-n)/255,e[t+1]=i<128?2*a*i/255:255-2*(255-a)*(255-i)/255,e[t+2]=o<128?2*c*o/255:255-2*(255-c)*(255-o)/255;break;case"exclusion":e[t]=n+r-2*n*r/255,e[t+1]=i+a-2*i*a/255,e[t+2]=o+c-2*o*c/255;break;case"tint":e[t]=n+r*s,e[t+1]=i+a*s,e[t+2]=o+c*s}}}getUniformLocations(t,e){return{uColor:t.getUniformLocation(e,"uColor")}}sendUniformData(t,e){const r=new jt(this.color).getSource();r[0]=this.alpha*r[0]/255,r[1]=this.alpha*r[1]/255,r[2]=this.alpha*r[2]/255,r[3]=this.alpha,t.uniform4fv(e.uColor,r)}toObject(){return{type:this.type,color:this.color,mode:this.mode,alpha:this.alpha}}}o(No,"defaults",{color:"#F95C63",mode:"multiply",alpha:1}),o(No,"type","BlendColor"),N.setClass(No);const Vo={multiply:"\n    precision highp float;\n    uniform sampler2D uTexture;\n    uniform sampler2D uImage;\n    uniform vec4 uColor;\n    varying vec2 vTexCoord;\n    varying vec2 vTexCoord2;\n    void main() {\n      vec4 color = texture2D(uTexture, vTexCoord);\n      vec4 color2 = texture2D(uImage, vTexCoord2);\n      color.rgba *= color2.rgba;\n      gl_FragColor = color;\n    }\n    ",mask:"\n    precision highp float;\n    uniform sampler2D uTexture;\n    uniform sampler2D uImage;\n    uniform vec4 uColor;\n    varying vec2 vTexCoord;\n    varying vec2 vTexCoord2;\n    void main() {\n      vec4 color = texture2D(uTexture, vTexCoord);\n      vec4 color2 = texture2D(uImage, vTexCoord2);\n      color.a = color2.a;\n      gl_FragColor = color;\n    }\n    "},Wo=["type","image"];class Uo extends Bo{getCacheKey(){return"".concat(this.type,"_").concat(this.mode)}getFragmentSource(){return Vo[this.mode]}applyToWebGL(t){const e=t.context,r=this.createTexture(t.filterBackend,this.image);this.bindAdditionalTexture(e,r,e.TEXTURE1),super.applyToWebGL(t),this.unbindAdditionalTexture(e,e.TEXTURE1)}createTexture(t,e){return t.getCachedTexture(e.cacheKey,e.getElement())}calculateMatrix(){const t=this.image,{width:e,height:r}=t.getElement();return[1/t.scaleX,0,0,0,1/t.scaleY,0,-t.left/e,-t.top/r,1]}applyTo2d(t){let{imageData:{data:e,width:r,height:n},filterBackend:{resources:i}}=t;const o=this.image;i.blendImage||(i.blendImage=Q());const s=i.blendImage,a=s.getContext("2d");s.width!==r||s.height!==n?(s.width=r,s.height=n):a.clearRect(0,0,r,n),a.setTransform(o.scaleX,0,0,o.scaleY,o.left,o.top),a.drawImage(o.getElement(),0,0,r,n);const c=a.getImageData(0,0,r,n).data;for(let t=0;t<e.length;t+=4){const r=e[t],n=e[t+1],i=e[t+2],o=e[t+3],s=c[t],a=c[t+1],l=c[t+2],u=c[t+3];switch(this.mode){case"multiply":e[t]=r*s/255,e[t+1]=n*a/255,e[t+2]=i*l/255,e[t+3]=o*u/255;break;case"mask":e[t+3]=u}}}getUniformLocations(t,e){return{uTransformMatrix:t.getUniformLocation(e,"uTransformMatrix"),uImage:t.getUniformLocation(e,"uImage")}}sendUniformData(t,e){const r=this.calculateMatrix();t.uniform1i(e.uImage,1),t.uniformMatrix3fv(e.uTransformMatrix,!1,r)}toObject(){return{type:this.type,image:this.image&&this.image.toObject(),mode:this.mode,alpha:this.alpha}}static fromObject(t,e){let{type:r,image:n}=t,o=a(t,Wo);return Eo.fromObject(n,e).then((t=>new this(i(i({},o),{},{image:t}))))}}o(Uo,"type","BlendImage"),o(Uo,"defaults",{mode:"multiply",alpha:1,vertexSource:"\n    attribute vec2 aPosition;\n    varying vec2 vTexCoord;\n    varying vec2 vTexCoord2;\n    uniform mat3 uTransformMatrix;\n    void main() {\n      vTexCoord = aPosition;\n      vTexCoord2 = (uTransformMatrix * vec3(aPosition, 1.0)).xy;\n      gl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);\n    }\n    "}),N.setClass(Uo);class zo extends Bo{getFragmentSource(){return"\n    precision highp float;\n    uniform sampler2D uTexture;\n    uniform vec2 uDelta;\n    varying vec2 vTexCoord;\n    const float nSamples = 15.0;\n    vec3 v3offset = vec3(12.9898, 78.233, 151.7182);\n    float random(vec3 scale) {\n      /* use the fragment position for a different seed per-pixel */\n      return fract(sin(dot(gl_FragCoord.xyz, scale)) * 43758.5453);\n    }\n    void main() {\n      vec4 color = vec4(0.0);\n      float total = 0.0;\n      float offset = random(v3offset);\n      for (float t = -nSamples; t <= nSamples; t++) {\n        float percent = (t + offset - 0.5) / nSamples;\n        float weight = 1.0 - abs(percent);\n        color += texture2D(uTexture, vTexCoord + uDelta * percent) * weight;\n        total += weight;\n      }\n      gl_FragColor = color / total;\n    }\n  "}applyTo(t){Do(t)?(this.aspectRatio=t.sourceWidth/t.sourceHeight,t.passes++,this._setupFrameBuffer(t),this.horizontal=!0,this.applyToWebGL(t),this._swapTextures(t),this._setupFrameBuffer(t),this.horizontal=!1,this.applyToWebGL(t),this._swapTextures(t)):this.applyTo2d(t)}applyTo2d(t){t.imageData=this.simpleBlur(t)}simpleBlur(t){let{ctx:e,imageData:r,filterBackend:{resources:n}}=t;const{width:i,height:o}=r;n.blurLayer1||(n.blurLayer1=Q(),n.blurLayer2=Q());const s=n.blurLayer1,a=n.blurLayer2;s.width===i&&s.height===o||(a.width=s.width=i,a.height=s.height=o);const c=s.getContext("2d"),l=a.getContext("2d"),u=.06*this.blur*.5;let h,f,d,p;for(c.putImageData(r,0,0),l.clearRect(0,0,i,o),p=-15;p<=15;p++)h=(Math.random()-.5)/4,f=p/15,d=u*f*i+h,l.globalAlpha=1-Math.abs(f),l.drawImage(s,d,h),c.drawImage(a,0,0),l.globalAlpha=1,l.clearRect(0,0,a.width,a.height);for(p=-15;p<=15;p++)h=(Math.random()-.5)/4,f=p/15,d=u*f*o+h,l.globalAlpha=1-Math.abs(f),l.drawImage(s,h,d),c.drawImage(a,0,0),l.globalAlpha=1,l.clearRect(0,0,a.width,a.height);e.drawImage(s,0,0);const g=e.getImageData(0,0,s.width,s.height);return c.globalAlpha=1,c.clearRect(0,0,s.width,s.height),g}getUniformLocations(t,e){return{delta:t.getUniformLocation(e,"uDelta")}}sendUniformData(t,e){const r=this.chooseRightDelta();t.uniform2fv(e.delta,r)}chooseRightDelta(){let t=1;const e=[0,0];this.horizontal?this.aspectRatio>1&&(t=1/this.aspectRatio):this.aspectRatio<1&&(t=this.aspectRatio);const r=t*this.blur*.12;return this.horizontal?e[0]=r:e[1]=r,e}}o(zo,"type","Blur"),o(zo,"defaults",{blur:0,mainParameter:"blur"}),N.setClass(zo);class Xo extends Bo{getFragmentSource(){return"\n  precision highp float;\n  uniform sampler2D uTexture;\n  uniform float uBrightness;\n  varying vec2 vTexCoord;\n  void main() {\n    vec4 color = texture2D(uTexture, vTexCoord);\n    color.rgb += uBrightness;\n    gl_FragColor = color;\n  }\n"}applyTo2d(t){let{imageData:{data:e}}=t;if(0===this.brightness)return;const r=Math.round(255*this.brightness);for(let t=0;t<e.length;t+=4)e[t]=e[t]+r,e[t+1]=e[t+1]+r,e[t+2]=e[t+2]+r}getUniformLocations(t,e){return{uBrightness:t.getUniformLocation(e,"uBrightness")}}sendUniformData(t,e){t.uniform1f(e.uBrightness,this.brightness)}}o(Xo,"type","Brightness"),o(Xo,"defaults",{brightness:0,mainParameter:"brightness"}),N.setClass(Xo);const Yo=["matrix"],Ho={matrix:[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],mainParameter:"matrix",colorsOnly:!0};class Go extends Bo{setOptions(t){let{matrix:e}=t,r=a(t,Yo);e&&(this.matrix=[...e]),Object.assign(this,r)}getFragmentSource(){return"\n  precision highp float;\n  uniform sampler2D uTexture;\n  varying vec2 vTexCoord;\n  uniform mat4 uColorMatrix;\n  uniform vec4 uConstants;\n  void main() {\n    vec4 color = texture2D(uTexture, vTexCoord);\n    color *= uColorMatrix;\n    color += uConstants;\n    gl_FragColor = color;\n  }"}applyTo2d(t){const e=t.imageData.data,r=this.matrix,n=this.colorsOnly;for(let t=0;t<e.length;t+=4){const i=e[t],o=e[t+1],s=e[t+2];if(n)e[t]=i*r[0]+o*r[1]+s*r[2]+255*r[4],e[t+1]=i*r[5]+o*r[6]+s*r[7]+255*r[9],e[t+2]=i*r[10]+o*r[11]+s*r[12]+255*r[14];else{const n=e[t+3];e[t]=i*r[0]+o*r[1]+s*r[2]+n*r[3]+255*r[4],e[t+1]=i*r[5]+o*r[6]+s*r[7]+n*r[8]+255*r[9],e[t+2]=i*r[10]+o*r[11]+s*r[12]+n*r[13]+255*r[14],e[t+3]=i*r[15]+o*r[16]+s*r[17]+n*r[18]+255*r[19]}}}getUniformLocations(t,e){return{uColorMatrix:t.getUniformLocation(e,"uColorMatrix"),uConstants:t.getUniformLocation(e,"uConstants")}}sendUniformData(t,e){const r=this.matrix,n=[r[0],r[1],r[2],r[3],r[5],r[6],r[7],r[8],r[10],r[11],r[12],r[13],r[15],r[16],r[17],r[18]],i=[r[4],r[9],r[14],r[19]];t.uniformMatrix4fv(e.uColorMatrix,!1,n),t.uniform4fv(e.uConstants,i)}}function qo(t,e){var r;const n=(o(r=class extends Go{get type(){return t}},"type",t),o(r,"defaults",i(i({},Ho),{},{mainParameter:void 0,matrix:e})),r);return N.setClass(n,t),n}o(Go,"type","ColorMatrix"),o(Go,"defaults",Ho),N.setClass(Go),qo("Brownie",[.5997,.34553,-.27082,0,.186,-.0377,.86095,.15059,0,-.1449,.24113,-.07441,.44972,0,-.02965,0,0,0,1,0]),qo("Vintage",[.62793,.32021,-.03965,0,.03784,.02578,.64411,.03259,0,.02926,.0466,-.08512,.52416,0,.02023,0,0,0,1,0]),qo("Kodachrome",[1.12855,-.39673,-.03992,0,.24991,-.16404,1.08352,-.05498,0,.09698,-.16786,-.56034,1.60148,0,.13972,0,0,0,1,0]),qo("Technicolor",[1.91252,-.85453,-.09155,0,.04624,-.30878,1.76589,-.10601,0,-.27589,-.2311,-.75018,1.84759,0,.12137,0,0,0,1,0]),qo("Polaroid",[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0]),qo("Sepia",[.393,.769,.189,0,0,.349,.686,.168,0,0,.272,.534,.131,0,0,0,0,0,1,0]),qo("BlackWhite",[1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,0,0,0,1,0]);const Ko=["subFilters"];class $o extends Bo{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{subFilters:e=[]}=t;super(a(t,Ko)),this.subFilters=e}applyTo(t){Do(t)&&(t.passes+=this.subFilters.length-1),this.subFilters.forEach((e=>{e.applyTo(t)}))}toObject(){return i(i({},super.toObject()),{},{subFilters:this.subFilters.map((t=>t.toObject()))})}isNeutralState(){return!this.subFilters.some((t=>!t.isNeutralState()))}static fromObject(t,e){return Promise.all((t.subFilters||[]).map((t=>N.getClass(t.type).fromObject(t,e)))).then((t=>new this({subFilters:t})))}}o($o,"type","Composed"),N.setClass($o);class Jo extends Bo{getFragmentSource(){return"\n  precision highp float;\n  uniform sampler2D uTexture;\n  uniform float uContrast;\n  varying vec2 vTexCoord;\n  void main() {\n    vec4 color = texture2D(uTexture, vTexCoord);\n    float contrastF = 1.015 * (uContrast + 1.0) / (1.0 * (1.015 - uContrast));\n    color.rgb = contrastF * (color.rgb - 0.5) + 0.5;\n    gl_FragColor = color;\n  }"}applyTo2d(t){let{imageData:{data:e}}=t;if(0===this.contrast)return;const r=Math.floor(255*this.contrast),n=259*(r+255)/(255*(259-r));for(let t=0;t<e.length;t+=4)e[t]=n*(e[t]-128)+128,e[t+1]=n*(e[t+1]-128)+128,e[t+2]=n*(e[t+2]-128)+128}getUniformLocations(t,e){return{uContrast:t.getUniformLocation(e,"uContrast")}}sendUniformData(t,e){t.uniform1f(e.uContrast,this.contrast)}}o(Jo,"type","Contrast"),o(Jo,"defaults",{contrast:0,mainParameter:"contrast"}),N.setClass(Jo);const Zo={Convolute_3_1:"\n    precision highp float;\n    uniform sampler2D uTexture;\n    uniform float uMatrix[9];\n    uniform float uStepW;\n    uniform float uStepH;\n    varying vec2 vTexCoord;\n    void main() {\n      vec4 color = vec4(0, 0, 0, 0);\n      for (float h = 0.0; h < 3.0; h+=1.0) {\n        for (float w = 0.0; w < 3.0; w+=1.0) {\n          vec2 matrixPos = vec2(uStepW * (w - 1), uStepH * (h - 1));\n          color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 3.0 + w)];\n        }\n      }\n      gl_FragColor = color;\n    }\n    ",Convolute_3_0:"\n    precision highp float;\n    uniform sampler2D uTexture;\n    uniform float uMatrix[9];\n    uniform float uStepW;\n    uniform float uStepH;\n    varying vec2 vTexCoord;\n    void main() {\n      vec4 color = vec4(0, 0, 0, 1);\n      for (float h = 0.0; h < 3.0; h+=1.0) {\n        for (float w = 0.0; w < 3.0; w+=1.0) {\n          vec2 matrixPos = vec2(uStepW * (w - 1.0), uStepH * (h - 1.0));\n          color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 3.0 + w)];\n        }\n      }\n      float alpha = texture2D(uTexture, vTexCoord).a;\n      gl_FragColor = color;\n      gl_FragColor.a = alpha;\n    }\n    ",Convolute_5_1:"\n    precision highp float;\n    uniform sampler2D uTexture;\n    uniform float uMatrix[25];\n    uniform float uStepW;\n    uniform float uStepH;\n    varying vec2 vTexCoord;\n    void main() {\n      vec4 color = vec4(0, 0, 0, 0);\n      for (float h = 0.0; h < 5.0; h+=1.0) {\n        for (float w = 0.0; w < 5.0; w+=1.0) {\n          vec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));\n          color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 5.0 + w)];\n        }\n      }\n      gl_FragColor = color;\n    }\n    ",Convolute_5_0:"\n    precision highp float;\n    uniform sampler2D uTexture;\n    uniform float uMatrix[25];\n    uniform float uStepW;\n    uniform float uStepH;\n    varying vec2 vTexCoord;\n    void main() {\n      vec4 color = vec4(0, 0, 0, 1);\n      for (float h = 0.0; h < 5.0; h+=1.0) {\n        for (float w = 0.0; w < 5.0; w+=1.0) {\n          vec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));\n          color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 5.0 + w)];\n        }\n      }\n      float alpha = texture2D(uTexture, vTexCoord).a;\n      gl_FragColor = color;\n      gl_FragColor.a = alpha;\n    }\n    ",Convolute_7_1:"\n    precision highp float;\n    uniform sampler2D uTexture;\n    uniform float uMatrix[49];\n    uniform float uStepW;\n    uniform float uStepH;\n    varying vec2 vTexCoord;\n    void main() {\n      vec4 color = vec4(0, 0, 0, 0);\n      for (float h = 0.0; h < 7.0; h+=1.0) {\n        for (float w = 0.0; w < 7.0; w+=1.0) {\n          vec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));\n          color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 7.0 + w)];\n        }\n      }\n      gl_FragColor = color;\n    }\n    ",Convolute_7_0:"\n    precision highp float;\n    uniform sampler2D uTexture;\n    uniform float uMatrix[49];\n    uniform float uStepW;\n    uniform float uStepH;\n    varying vec2 vTexCoord;\n    void main() {\n      vec4 color = vec4(0, 0, 0, 1);\n      for (float h = 0.0; h < 7.0; h+=1.0) {\n        for (float w = 0.0; w < 7.0; w+=1.0) {\n          vec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));\n          color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 7.0 + w)];\n        }\n      }\n      float alpha = texture2D(uTexture, vTexCoord).a;\n      gl_FragColor = color;\n      gl_FragColor.a = alpha;\n    }\n    ",Convolute_9_1:"\n    precision highp float;\n    uniform sampler2D uTexture;\n    uniform float uMatrix[81];\n    uniform float uStepW;\n    uniform float uStepH;\n    varying vec2 vTexCoord;\n    void main() {\n      vec4 color = vec4(0, 0, 0, 0);\n      for (float h = 0.0; h < 9.0; h+=1.0) {\n        for (float w = 0.0; w < 9.0; w+=1.0) {\n          vec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));\n          color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 9.0 + w)];\n        }\n      }\n      gl_FragColor = color;\n    }\n    ",Convolute_9_0:"\n    precision highp float;\n    uniform sampler2D uTexture;\n    uniform float uMatrix[81];\n    uniform float uStepW;\n    uniform float uStepH;\n    varying vec2 vTexCoord;\n    void main() {\n      vec4 color = vec4(0, 0, 0, 1);\n      for (float h = 0.0; h < 9.0; h+=1.0) {\n        for (float w = 0.0; w < 9.0; w+=1.0) {\n          vec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));\n          color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 9.0 + w)];\n        }\n      }\n      float alpha = texture2D(uTexture, vTexCoord).a;\n      gl_FragColor = color;\n      gl_FragColor.a = alpha;\n    }\n    "};class Qo extends Bo{getCacheKey(){return"".concat(this.type,"_").concat(Math.sqrt(this.matrix.length),"_").concat(this.opaque?1:0)}getFragmentSource(){return Zo[this.getCacheKey()]}applyTo2d(t){const e=t.imageData,r=e.data,n=this.matrix,i=Math.round(Math.sqrt(n.length)),o=Math.floor(i/2),s=e.width,a=e.height,c=t.ctx.createImageData(s,a),l=c.data,u=this.opaque?1:0;let h,f,d,p,g,v,_,y,m,b,x,w,S;for(x=0;x<a;x++)for(b=0;b<s;b++){for(g=4*(x*s+b),h=0,f=0,d=0,p=0,S=0;S<i;S++)for(w=0;w<i;w++)_=x+S-o,v=b+w-o,_<0||_>=a||v<0||v>=s||(y=4*(_*s+v),m=n[S*i+w],h+=r[y]*m,f+=r[y+1]*m,d+=r[y+2]*m,u||(p+=r[y+3]*m));l[g]=h,l[g+1]=f,l[g+2]=d,l[g+3]=u?r[g+3]:p}t.imageData=c}getUniformLocations(t,e){return{uMatrix:t.getUniformLocation(e,"uMatrix"),uOpaque:t.getUniformLocation(e,"uOpaque"),uHalfSize:t.getUniformLocation(e,"uHalfSize"),uSize:t.getUniformLocation(e,"uSize")}}sendUniformData(t,e){t.uniform1fv(e.uMatrix,this.matrix)}toObject(){return i(i({},super.toObject()),{},{opaque:this.opaque,matrix:[...this.matrix]})}}o(Qo,"type","Convolute"),o(Qo,"defaults",{opaque:!1,matrix:[0,0,0,0,1,0,0,0,0]}),N.setClass(Qo);const ts=["gamma"];class es extends Bo{getFragmentSource(){return"\n  precision highp float;\n  uniform sampler2D uTexture;\n  uniform vec3 uGamma;\n  varying vec2 vTexCoord;\n  void main() {\n    vec4 color = texture2D(uTexture, vTexCoord);\n    vec3 correction = (1.0 / uGamma);\n    color.r = pow(color.r, correction.r);\n    color.g = pow(color.g, correction.g);\n    color.b = pow(color.b, correction.b);\n    gl_FragColor = color;\n    gl_FragColor.rgb *= color.a;\n  }\n"}constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{gamma:e=[1,1,1]}=t;super(a(t,ts)),this.gamma=e}applyTo2d(t){let{imageData:{data:e}}=t;const r=this.gamma,n=1/r[0],i=1/r[1],o=1/r[2];this.rgbValues||(this.rgbValues={r:new Uint8Array(256),g:new Uint8Array(256),b:new Uint8Array(256)});const s=this.rgbValues;for(let t=0;t<256;t++)s.r[t]=255*Math.pow(t/255,n),s.g[t]=255*Math.pow(t/255,i),s.b[t]=255*Math.pow(t/255,o);for(let t=0;t<e.length;t+=4)e[t]=s.r[e[t]],e[t+1]=s.g[e[t+1]],e[t+2]=s.b[e[t+2]]}getUniformLocations(t,e){return{uGamma:t.getUniformLocation(e,"uGamma")}}sendUniformData(t,e){t.uniform3fv(e.uGamma,this.gamma)}}o(es,"type","Gamma"),o(es,"defaults",{mainParameter:"gamma",gamma:[1,1,1]}),N.setClass(es);const rs={average:"\n    precision highp float;\n    uniform sampler2D uTexture;\n    varying vec2 vTexCoord;\n    void main() {\n      vec4 color = texture2D(uTexture, vTexCoord);\n      float average = (color.r + color.b + color.g) / 3.0;\n      gl_FragColor = vec4(average, average, average, color.a);\n    }\n    ",lightness:"\n    precision highp float;\n    uniform sampler2D uTexture;\n    uniform int uMode;\n    varying vec2 vTexCoord;\n    void main() {\n      vec4 col = texture2D(uTexture, vTexCoord);\n      float average = (max(max(col.r, col.g),col.b) + min(min(col.r, col.g),col.b)) / 2.0;\n      gl_FragColor = vec4(average, average, average, col.a);\n    }\n    ",luminosity:"\n    precision highp float;\n    uniform sampler2D uTexture;\n    uniform int uMode;\n    varying vec2 vTexCoord;\n    void main() {\n      vec4 col = texture2D(uTexture, vTexCoord);\n      float average = 0.21 * col.r + 0.72 * col.g + 0.07 * col.b;\n      gl_FragColor = vec4(average, average, average, col.a);\n    }\n    "};class ns extends Bo{applyTo2d(t){let{imageData:{data:e}}=t;for(let t,r=0;r<e.length;r+=4){switch(this.mode){case"average":t=(e[r]+e[r+1]+e[r+2])/3;break;case"lightness":t=(Math.min(e[r],e[r+1],e[r+2])+Math.max(e[r],e[r+1],e[r+2]))/2;break;case"luminosity":t=.21*e[r]+.72*e[r+1]+.07*e[r+2]}e[r]=t,e[r+1]=t,e[r+2]=t}}getCacheKey(){return"".concat(this.type,"_").concat(this.mode)}getFragmentSource(){return rs[this.mode]}getUniformLocations(t,e){return{uMode:t.getUniformLocation(e,"uMode")}}sendUniformData(t,e){t.uniform1i(e.uMode,1)}isNeutralState(){return!1}}o(ns,"type","Grayscale"),o(ns,"defaults",{mode:"average",mainParameter:"mode"}),N.setClass(ns);class is extends Go{calculateMatrix(){const t=this.rotation*Math.PI,e=X(t),r=Y(t),n=1/3,i=Math.sqrt(n)*r,o=1-e;this.matrix=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],this.matrix[0]=e+o/3,this.matrix[1]=n*o-i,this.matrix[2]=n*o+i,this.matrix[5]=n*o+i,this.matrix[6]=e+n*o,this.matrix[7]=n*o-i,this.matrix[10]=n*o-i,this.matrix[11]=n*o+i,this.matrix[12]=e+n*o}isNeutralState(){return this.calculateMatrix(),super.isNeutralState()}applyTo(t){this.calculateMatrix(),super.applyTo(t)}}o(is,"type","HueRotation"),o(is,"defaults",{rotation:0,mainParameter:"rotation"}),N.setClass(is);class os extends Bo{applyTo2d(t){let{imageData:{data:e}}=t;for(let t=0;t<e.length;t+=4)e[t]=255-e[t],e[t+1]=255-e[t+1],e[t+2]=255-e[t+2],this.alpha&&(e[t+3]=255-e[t+3])}getFragmentSource(){return"\n  precision highp float;\n  uniform sampler2D uTexture;\n  uniform int uInvert;\n  uniform int uAlpha;\n  varying vec2 vTexCoord;\n  void main() {\n    vec4 color = texture2D(uTexture, vTexCoord);\n    if (uInvert == 1) {\n      if (uAlpha == 1) {\n        gl_FragColor = vec4(1.0 - color.r,1.0 -color.g,1.0 -color.b,1.0 -color.a);\n      } else {\n        gl_FragColor = vec4(1.0 - color.r,1.0 -color.g,1.0 -color.b,color.a);\n      }\n    } else {\n      gl_FragColor = color;\n    }\n  }\n"}isNeutralState(){return!this.invert}getUniformLocations(t,e){return{uInvert:t.getUniformLocation(e,"uInvert"),uAlpha:t.getUniformLocation(e,"uAlpha")}}sendUniformData(t,e){t.uniform1i(e.uInvert,Number(this.invert)),t.uniform1i(e.uAlpha,Number(this.alpha))}}o(os,"type","Invert"),o(os,"defaults",{alpha:!1,invert:!0,mainParameter:"invert"}),N.setClass(os);class ss extends Bo{getFragmentSource(){return"\n  precision highp float;\n  uniform sampler2D uTexture;\n  uniform float uStepH;\n  uniform float uNoise;\n  uniform float uSeed;\n  varying vec2 vTexCoord;\n  float rand(vec2 co, float seed, float vScale) {\n    return fract(sin(dot(co.xy * vScale ,vec2(12.9898 , 78.233))) * 43758.5453 * (seed + 0.01) / 2.0);\n  }\n  void main() {\n    vec4 color = texture2D(uTexture, vTexCoord);\n    color.rgb += (0.5 - rand(vTexCoord, uSeed, 0.1 / uStepH)) * uNoise;\n    gl_FragColor = color;\n  }\n"}applyTo2d(t){let{imageData:{data:e}}=t;if(0===this.noise)return;const r=this.noise;for(let t=0;t<e.length;t+=4){const n=(.5-Math.random())*r;e[t]+=n,e[t+1]+=n,e[t+2]+=n}}getUniformLocations(t,e){return{uNoise:t.getUniformLocation(e,"uNoise"),uSeed:t.getUniformLocation(e,"uSeed")}}sendUniformData(t,e){t.uniform1f(e.uNoise,this.noise/255),t.uniform1f(e.uSeed,Math.random())}toObject(){return i(i({},super.toObject()),{},{noise:this.noise})}}o(ss,"type","Noise"),o(ss,"defaults",{mainParameter:"noise",noise:0}),N.setClass(ss);class as extends Bo{applyTo2d(t){let{imageData:{data:e,width:r,height:n}}=t;for(let t=0;t<n;t+=this.blocksize)for(let i=0;i<r;i+=this.blocksize){const o=4*t*r+4*i,s=e[o],a=e[o+1],c=e[o+2],l=e[o+3];for(let o=t;o<Math.min(t+this.blocksize,n);o++)for(let t=i;t<Math.min(i+this.blocksize,r);t++){const n=4*o*r+4*t;e[n]=s,e[n+1]=a,e[n+2]=c,e[n+3]=l}}}isNeutralState(){return 1===this.blocksize}getFragmentSource(){return"\n  precision highp float;\n  uniform sampler2D uTexture;\n  uniform float uBlocksize;\n  uniform float uStepW;\n  uniform float uStepH;\n  varying vec2 vTexCoord;\n  void main() {\n    float blockW = uBlocksize * uStepW;\n    float blockH = uBlocksize * uStepW;\n    int posX = int(vTexCoord.x / blockW);\n    int posY = int(vTexCoord.y / blockH);\n    float fposX = float(posX);\n    float fposY = float(posY);\n    vec2 squareCoords = vec2(fposX * blockW, fposY * blockH);\n    vec4 color = texture2D(uTexture, squareCoords);\n    gl_FragColor = color;\n  }\n"}getUniformLocations(t,e){return{uBlocksize:t.getUniformLocation(e,"uBlocksize"),uStepW:t.getUniformLocation(e,"uStepW"),uStepH:t.getUniformLocation(e,"uStepH")}}sendUniformData(t,e){t.uniform1f(e.uBlocksize,this.blocksize)}}o(as,"type","Pixelate"),o(as,"defaults",{blocksize:4,mainParameter:"blocksize"}),N.setClass(as);class cs extends Bo{getFragmentShader(){return"\nprecision highp float;\nuniform sampler2D uTexture;\nuniform vec4 uLow;\nuniform vec4 uHigh;\nvarying vec2 vTexCoord;\nvoid main() {\n  gl_FragColor = texture2D(uTexture, vTexCoord);\n  if(all(greaterThan(gl_FragColor.rgb,uLow.rgb)) && all(greaterThan(uHigh.rgb,gl_FragColor.rgb))) {\n    gl_FragColor.a = 0.0;\n  }\n}\n"}applyTo2d(t){let{imageData:{data:e}}=t;const r=255*this.distance,n=new jt(this.color).getSource(),i=[n[0]-r,n[1]-r,n[2]-r],o=[n[0]+r,n[1]+r,n[2]+r];for(let t=0;t<e.length;t+=4){const r=e[t],n=e[t+1],s=e[t+2];r>i[0]&&n>i[1]&&s>i[2]&&r<o[0]&&n<o[1]&&s<o[2]&&(e[t+3]=0)}}getUniformLocations(t,e){return{uLow:t.getUniformLocation(e,"uLow"),uHigh:t.getUniformLocation(e,"uHigh")}}sendUniformData(t,e){const r=new jt(this.color).getSource(),n=this.distance,i=[0+r[0]/255-n,0+r[1]/255-n,0+r[2]/255-n,1],o=[r[0]/255+n,r[1]/255+n,r[2]/255+n,1];t.uniform4fv(e.uLow,i),t.uniform4fv(e.uHigh,o)}toObject(){return i(i({},super.toObject()),{},{color:this.color,distance:this.distance})}}o(cs,"type","RemoveColor"),o(cs,"defaults",{color:"#FFFFFF",distance:.02,useAlpha:!1}),N.setClass(cs);class ls extends Bo{getUniformLocations(t,e){return{uDelta:t.getUniformLocation(e,"uDelta"),uTaps:t.getUniformLocation(e,"uTaps")}}sendUniformData(t,e){t.uniform2fv(e.uDelta,this.horizontal?[1/this.width,0]:[0,1/this.height]),t.uniform1fv(e.uTaps,this.taps)}getFilterWindow(){const t=this.tempScale;return Math.ceil(this.lanczosLobes/t)}getCacheKey(){const t=this.getFilterWindow();return"".concat(this.type,"_").concat(t)}getFragmentSource(){const t=this.getFilterWindow();return this.generateShader(t)}getTaps(){const t=this.lanczosCreate(this.lanczosLobes),e=this.tempScale,r=this.getFilterWindow(),n=new Array(r);for(let i=1;i<=r;i++)n[i-1]=t(i*e);return n}generateShader(t){const e=new Array(t);for(let r=1;r<=t;r++)e[r-1]="".concat(r,".0 * uDelta");return"\n      ".concat(this.fragmentSourceTOP,"\n      uniform float uTaps[").concat(t,"];\n      void main() {\n        vec4 color = texture2D(uTexture, vTexCoord);\n        float sum = 1.0;\n        ").concat(e.map(((t,e)=>"\n              color += texture2D(uTexture, vTexCoord + ".concat(t,") * uTaps[").concat(e,"] + texture2D(uTexture, vTexCoord - ").concat(t,") * uTaps[").concat(e,"];\n              sum += 2.0 * uTaps[").concat(e,"];\n            "))).join("\n"),"\n        gl_FragColor = color / sum;\n      }\n    ")}applyTo(t){Do(t)?(t.passes++,this.width=t.sourceWidth,this.horizontal=!0,this.dW=Math.round(this.width*this.scaleX),this.dH=t.sourceHeight,this.tempScale=this.dW/this.width,this.taps=this.getTaps(),t.destinationWidth=this.dW,this._setupFrameBuffer(t),this.applyToWebGL(t),this._swapTextures(t),t.sourceWidth=t.destinationWidth,this.height=t.sourceHeight,this.horizontal=!1,this.dH=Math.round(this.height*this.scaleY),this.tempScale=this.dH/this.height,this.taps=this.getTaps(),t.destinationHeight=this.dH,this._setupFrameBuffer(t),this.applyToWebGL(t),this._swapTextures(t),t.sourceHeight=t.destinationHeight):this.applyTo2d(t)}isNeutralState(){return 1===this.scaleX&&1===this.scaleY}lanczosCreate(t){return e=>{if(e>=t||e<=-t)return 0;if(e<1.1920929e-7&&e>-1.1920929e-7)return 1;const r=(e*=Math.PI)/t;return Math.sin(e)/e*Math.sin(r)/r}}applyTo2d(t){const e=t.imageData,r=this.scaleX,n=this.scaleY;this.rcpScaleX=1/r,this.rcpScaleY=1/n;const i=e.width,o=e.height,s=Math.round(i*r),a=Math.round(o*n);let c;"sliceHack"===this.resizeType?c=this.sliceByTwo(t,i,o,s,a):"hermite"===this.resizeType?c=this.hermiteFastResize(t,i,o,s,a):"bilinear"===this.resizeType?c=this.bilinearFiltering(t,i,o,s,a):"lanczos"===this.resizeType&&(c=this.lanczosResize(t,i,o,s,a)),t.imageData=c}sliceByTwo(t,e,r,n,i){const o=t.imageData,s=.5;let a=!1,c=!1,l=e*s,u=r*s;const h=t.filterBackend.resources;let f=0,d=0;const p=e;let g=0;h.sliceByTwo||(h.sliceByTwo=Q());const v=h.sliceByTwo;(v.width<1.5*e||v.height<r)&&(v.width=1.5*e,v.height=r);const _=v.getContext("2d");for(_.clearRect(0,0,1.5*e,r),_.putImageData(o,0,0),n=Math.floor(n),i=Math.floor(i);!a||!c;)e=l,r=u,n<Math.floor(l*s)?l=Math.floor(l*s):(l=n,a=!0),i<Math.floor(u*s)?u=Math.floor(u*s):(u=i,c=!0),_.drawImage(v,f,d,e,r,p,g,l,u),f=p,d=g,g+=u;return _.getImageData(f,d,n,i)}lanczosResize(t,e,r,n,i){const o=t.imageData.data,s=t.ctx.createImageData(n,i),a=s.data,c=this.lanczosCreate(this.lanczosLobes),l=this.rcpScaleX,u=this.rcpScaleY,h=2/this.rcpScaleX,f=2/this.rcpScaleY,d=Math.ceil(l*this.lanczosLobes/2),p=Math.ceil(u*this.lanczosLobes/2),g={},v={},_={};return function t(y){let m,b,x,w,S,C,O,T,j,k,A;for(v.x=(y+.5)*l,_.x=Math.floor(v.x),m=0;m<i;m++){for(v.y=(m+.5)*u,_.y=Math.floor(v.y),S=0,C=0,O=0,T=0,j=0,b=_.x-d;b<=_.x+d;b++)if(!(b<0||b>=e)){k=Math.floor(1e3*Math.abs(b-v.x)),g[k]||(g[k]={});for(let t=_.y-p;t<=_.y+p;t++)t<0||t>=r||(A=Math.floor(1e3*Math.abs(t-v.y)),g[k][A]||(g[k][A]=c(Math.sqrt(Math.pow(k*h,2)+Math.pow(A*f,2))/1e3)),x=g[k][A],x>0&&(w=4*(t*e+b),S+=x,C+=x*o[w],O+=x*o[w+1],T+=x*o[w+2],j+=x*o[w+3]))}w=4*(m*n+y),a[w]=C/S,a[w+1]=O/S,a[w+2]=T/S,a[w+3]=j/S}return++y<n?t(y):s}(0)}bilinearFiltering(t,e,r,n,i){let o,s,a,c,l,u,h,f,d,p,g,v,_,y=0;const m=this.rcpScaleX,b=this.rcpScaleY,x=4*(e-1),w=t.imageData.data,S=t.ctx.createImageData(n,i),C=S.data;for(h=0;h<i;h++)for(f=0;f<n;f++)for(l=Math.floor(m*f),u=Math.floor(b*h),d=m*f-l,p=b*h-u,_=4*(u*e+l),g=0;g<4;g++)o=w[_+g],s=w[_+4+g],a=w[_+x+g],c=w[_+x+4+g],v=o*(1-d)*(1-p)+s*d*(1-p)+a*p*(1-d)+c*d*p,C[y++]=v;return S}hermiteFastResize(t,e,r,n,i){const o=this.rcpScaleX,s=this.rcpScaleY,a=Math.ceil(o/2),c=Math.ceil(s/2),l=t.imageData.data,u=t.ctx.createImageData(n,i),h=u.data;for(let t=0;t<i;t++)for(let r=0;r<n;r++){const i=4*(r+t*n);let u=0,f=0,d=0,p=0,g=0,v=0,_=0;const y=(t+.5)*s;for(let n=Math.floor(t*s);n<(t+1)*s;n++){const t=Math.abs(y-(n+.5))/c,i=(r+.5)*o,s=t*t;for(let t=Math.floor(r*o);t<(r+1)*o;t++){let r=Math.abs(i-(t+.5))/a;const o=Math.sqrt(s+r*r);o>1&&o<-1||(u=2*o*o*o-3*o*o+1,u>0&&(r=4*(t+n*e),_+=u*l[r+3],d+=u,l[r+3]<255&&(u=u*l[r+3]/250),p+=u*l[r],g+=u*l[r+1],v+=u*l[r+2],f+=u))}}h[i]=p/f,h[i+1]=g/f,h[i+2]=v/f,h[i+3]=_/d}return u}toObject(){return{type:this.type,scaleX:this.scaleX,scaleY:this.scaleY,resizeType:this.resizeType,lanczosLobes:this.lanczosLobes}}}o(ls,"type","Resize"),o(ls,"defaults",{resizeType:"hermite",scaleX:1,scaleY:1,lanczosLobes:3,fragmentSourceTOP:"\n    precision highp float;\n    uniform sampler2D uTexture;\n    uniform vec2 uDelta;\n    varying vec2 vTexCoord;\n  "}),N.setClass(ls);class us extends Bo{getFragmentSource(){return"\n  precision highp float;\n  uniform sampler2D uTexture;\n  uniform float uSaturation;\n  varying vec2 vTexCoord;\n  void main() {\n    vec4 color = texture2D(uTexture, vTexCoord);\n    float rgMax = max(color.r, color.g);\n    float rgbMax = max(rgMax, color.b);\n    color.r += rgbMax != color.r ? (rgbMax - color.r) * uSaturation : 0.00;\n    color.g += rgbMax != color.g ? (rgbMax - color.g) * uSaturation : 0.00;\n    color.b += rgbMax != color.b ? (rgbMax - color.b) * uSaturation : 0.00;\n    gl_FragColor = color;\n  }\n"}applyTo2d(t){let{imageData:{data:e}}=t;if(0===this.saturation)return;const r=-this.saturation;for(let t=0;t<e.length;t+=4){const n=Math.max(e[t],e[t+1],e[t+2]);e[t]+=n!==e[t]?(n-e[t])*r:0,e[t+1]+=n!==e[t+1]?(n-e[t+1])*r:0,e[t+2]+=n!==e[t+2]?(n-e[t+2])*r:0}}getUniformLocations(t,e){return{uSaturation:t.getUniformLocation(e,"uSaturation")}}sendUniformData(t,e){t.uniform1f(e.uSaturation,-this.saturation)}}o(us,"type","Saturation"),o(us,"defaults",{saturation:0,mainParameter:"saturation"}),N.setClass(us);class hs extends Bo{getFragmentSource(){return"\n  precision highp float;\n  uniform sampler2D uTexture;\n  uniform float uVibrance;\n  varying vec2 vTexCoord;\n  void main() {\n    vec4 color = texture2D(uTexture, vTexCoord);\n    float max = max(color.r, max(color.g, color.b));\n    float avg = (color.r + color.g + color.b) / 3.0;\n    float amt = (abs(max - avg) * 2.0) * uVibrance;\n    color.r += max != color.r ? (max - color.r) * amt : 0.00;\n    color.g += max != color.g ? (max - color.g) * amt : 0.00;\n    color.b += max != color.b ? (max - color.b) * amt : 0.00;\n    gl_FragColor = color;\n  }\n"}applyTo2d(t){let{imageData:{data:e}}=t;if(0===this.vibrance)return;const r=-this.vibrance;for(let t=0;t<e.length;t+=4){const n=Math.max(e[t],e[t+1],e[t+2]),i=(e[t]+e[t+1]+e[t+2])/3,o=2*Math.abs(n-i)/255*r;e[t]+=n!==e[t]?(n-e[t])*o:0,e[t+1]+=n!==e[t+1]?(n-e[t+1])*o:0,e[t+2]+=n!==e[t+2]?(n-e[t+2])*o:0}}getUniformLocations(t,e){return{uVibrance:t.getUniformLocation(e,"uVibrance")}}sendUniformData(t,e){t.uniform1f(e.uVibrance,-this.vibrance)}}o(hs,"type","Vibrance"),o(hs,"defaults",{vibrance:0,mainParameter:"vibrance"}),N.setClass(hs)}}]);