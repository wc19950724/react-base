"use strict";(self.webpackChunkreact_base=self.webpackChunkreact_base||[]).push([[763],{5763:(e,t,s)=>{s.r(t),s.d(t,{default:()=>h});var n=s(1527),r=s(2699),i=s(959),a=s(7327),o=s(9800);const c=s.p+"assets/行人.gltf";var d=s(3679);const l=new o.E,h=()=>{const e=(0,i.useRef)(null);let t;const s=(0,r.debounce)((()=>{if(e.current){const{offsetWidth:s,offsetHeight:n}=e.current;t.camera.aspect=s/n,t.camera.updateProjectionMatrix(),t.renderer.setSize(s,n)}}),200),o=new ResizeObserver(s);let h;(0,i.useEffect)((()=>{if(e.current)return t=new d.w(e.current),t.axisUpdate(),m(c),t.renderer.setAnimationLoop(p),o.observe(e.current),()=>{o.disconnect(),t.dispose()}}),[]);const m=e=>{l.load(e,(e=>{const s=e.scene;s.traverse((e=>{e instanceof a.Kj0&&(e.castShadow=!0,e.material=e.material.clone(),e.material.emissive=e.material.color)})),console.log(e),e.animations.length&&(h=new a.Xcj(s),e.animations.forEach((e=>{h.clipAction(e).play()}))),t.scene.add(s)}))};let f=0;const p=e=>{if(h){const t=(e-f)/1e3;f=e,h.update(t)}t.stats.update(),t.renderer.render(t.scene,t.camera),t.CSSRenderer.render(t.scene,t.camera)};return(0,n.jsx)("div",{ref:e,className:"all-full relative overflow-hidden"})}},3679:(e,t,s)=>{s.d(t,{w:()=>o});var n=s(7327),r=s(3418),i=s(8677),a=s(4720);class o{container;camera;scene;renderer;controls;stats;clock;axis;constructor(e){this.container=e,this.camera=new n.cPb(45,e.offsetWidth/e.offsetHeight,.25,20),this.camera.position.set(0,0,5),this.scene=new n.xsS,this.scene.background=new n.Ilk(10526880),this.renderer=new n.CP7({antialias:!0}),this.renderer.setPixelRatio(window.devicePixelRatio),this.renderer.setSize(e.offsetWidth,e.offsetHeight),this.renderer.toneMapping=n.LY2,this.renderer.toneMappingExposure=1,this.renderer.shadowMap.enabled=!0,this.controls=new r.z(this.camera,this.renderer.domElement),this.controls.minPolarAngle=0,this.controls.maxPolarAngle=Math.PI/2,this.container.appendChild(this.renderer.domElement),this.stats=new i.Z,this.stats.dom.style.position="absolute",this.container.appendChild(this.stats.dom),this.clock=new n.SUY,this.axis=new n.y8_(1),this.CSSRenderer=new a.M,this.CSSRenderer.setSize(100,100),this.CSSRenderer.domElement.style.position="absolute",this.CSSRenderer.domElement.style.bottom="0px",this.CSSRenderer.domElement.style.right="0px",this.container.appendChild(this.CSSRenderer.domElement)}CSSRenderer;axisUpdate(){const e=this.createLabel("X",1,0,0),t=this.createLabel("Y",0,1,0),s=this.createLabel("Z",0,0,1);this.axis.add(e,t,s),this.scene.add(this.axis)}createLabel(e,t,s,n){const r=document.createElement("div");r.textContent=e,r.style.color="#ffffff";const i=new a.j(r);return i.position.set(t,s,n),i.layers.enableAll(),i}dispose(){this.container.removeChild(this.stats.dom),this.container.removeChild(this.renderer.domElement)}}}}]);