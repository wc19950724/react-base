"use strict";(self.webpackChunkreact_base=self.webpackChunkreact_base||[]).push([[857],{1857:(e,t,s)=>{s.r(t),s.d(t,{default:()=>f});var o=s(1527),r=s(4727),i=s(959);const n=s.p+"assets/高精自车.gltf";var c=s(1073),h=s(7327),a=s(9800),l=s(2625),d=s(7217);new class{loader;models;constructor(){this.loader=new a.E,this.models={},(0,l.ky)(this)}updateModels(e,t){(0,l.t8)(this.models,{[e]:t})}removeModels(e){delete this.models[e]}clearModels(){this.models={}}load(e){if(e?.length)for(let t=0;t<e.length;t++){const s=e[t];if((0,d.tr)(s,"gltf")){const e=crypto.randomUUID(),t={userData:{uuid:e,file:s,progress:0}};this.updateModels(e,t),this.loader.load(URL.createObjectURL(s),(s=>{s.userData=t.userData,this.updateModels(e,s)}),(e=>{t.userData.progress=e.loaded/e.total}))}}}};var u=s(2699),m=s(3418);const p=new class{renderer;camera;scene;controls;container;resizeObserver;constructor(){this.renderer=new h.CP7({antialias:!0}),this.camera=new h.cPb,this.scene=new h.xsS,this.controls=new m.z(this.camera,this.renderer.domElement),this.resizeObserver=new ResizeObserver((0,u.debounce)(this.resize.bind(this)))}initialize(e){const t=(0,d.sb)(e);t&&(this.container=t,this.resize(),this.container.appendChild(this.renderer.domElement),this.scene.add(this.camera),this.renderer.setAnimationLoop(this.render.bind(this)),this.resizeObserver.observe(this.container))}resize(){if(!this.container)return;const{offsetWidth:e,offsetHeight:t}=this.container;this.renderer.setSize(e,t),this.renderer.setPixelRatio(window.devicePixelRatio),this.camera.aspect=e/t,this.camera.updateProjectionMatrix()}render(){this.controls.update(),this.renderer.render(this.scene,this.camera)}dispose(){this.renderer.setAnimationLoop(null),this.container&&this.container.removeChild(this.renderer.domElement),this.resizeObserver.disconnect()}},v=new class{render(e){p.camera.position.set(0,10,50),p.initialize(e),p.controls.enableDamping=!0;const t=new h.Mig(16777215,.5);p.scene.add(t);const s=new h.Ox3(16777215,.5);p.scene.add(s);const o=new h._12(100,100),r=new h.xoR,i=new h.Kj0(o,r);i.rotation.x=-Math.PI/2,p.scene.add(i)}},f=(0,r.Pi)((()=>{const e=(0,i.useRef)(null),t=(0,i.useRef)(null),s=new c.uv;return(0,i.useEffect)((()=>(e.current&&v.render(e.current),t.current&&s.add(t.current,"right"),(e=>{const t=new a.E,s=e.map((e=>t.loadAsync(e)));return Promise.race(s)})([n]).then((e=>{p.camera.up.set(0,0,1),p.camera.lookAt(10,10,2),p.scene.add(e.scene)})),()=>{p.dispose(),s.dispose()})),[]),(0,o.jsx)("div",{className:"all-full flex overflow-hidden",children:(0,o.jsx)("div",{ref:e,className:"flex-1",style:{width:0}})})}))},1073:(e,t,s)=>{s.d(t,{uv:()=>c});var o=s(2699),r=s(7217);class i{cursor;controlElements;constructor(){this.cursor=document.body.style.cursor,this.controlElements={}}render(e){if("all"===e){const e=["top","right","bottom","left","leftTop","rightTop","rightBottom","leftBottom"];for(const t of e)this.getController(t)}else Array.isArray(e)?e.forEach((e=>{this.getController(e)})):this.getController(e)}getController(e){const t=document.createElement("div");switch(t.classList.add("controller"),t.style.position="absolute",e){case"left":case"right":t.style[e]="-10px",t.style.top="0",t.style.height="100%",t.style.width="20px";break;case"top":case"bottom":t.style[e]="-10px",t.style.left="0",t.style.width="100%",t.style.height="20px";break;case"leftTop":case"rightTop":"leftTop"===e?t.style.left="-10px":t.style.right="-10px",t.style.top="-10px",t.style.width="20px",t.style.height="20px";break;case"leftBottom":case"rightBottom":"leftBottom"===e?t.style.left="-10px":t.style.right="-10px",t.style.bottom="-10px",t.style.width="20px",t.style.height="20px"}t.onmouseenter=()=>{document.body.style.cursor=this.getCursorForDirection(e)},t.onmouseleave=()=>{document.body.style.cursor=this.cursor},this.controlElements[e]=t}getCursorForDirection(e){switch(e){case"top":return"n-resize";case"bottom":return"s-resize";case"left":return"w-resize";case"right":return"e-resize";case"leftTop":return"nw-resize";case"rightTop":return"ne-resize";case"rightBottom":return"se-resize";case"leftBottom":return"sw-resize";default:return this.cursor}}dispose(){let e;for(e in document.body.style.cursor=this.cursor,this.controlElements)this.controlElements[e]?.remove();this.controlElements={}}}class n{el;startRect;direction;controlMap=new Map;userSelect=document.body.style.userSelect;currentDom;constructor(){this.el=null,this.startRect=null,this.start=this.start.bind(this),this.move=this.move.bind(this),this.end=this.end.bind(this)}add(e,t,s){this.el=e,this.controlMap.set(t,s);const o=e=>{this.currentDom=t,this.start(e)};t.onmousedown=o,t.ontouchstart=o}start(e){if(!this.currentDom||!this.el)return;e.preventDefault(),this.userSelect=document.body.style.userSelect,document.body.style.userSelect="none",this.direction=this.controlMap.get(this.currentDom);const{width:t,height:s,left:r,top:i}=this.el.getBoundingClientRect();this.startRect=(0,o.merge)({},this.startRect,{width:t,height:s,left:r,top:i}),e instanceof MouseEvent?((0,o.merge)(this.startRect,{x:e.pageX,y:e.pageY}),document.addEventListener("mousemove",this.move),document.addEventListener("mouseup",this.end)):((0,o.merge)(this.startRect,{x:e.touches[0].pageX,y:e.touches[0].pageY}),document.addEventListener("touchmove",this.move,{passive:!1}),document.addEventListener("touchend",this.end),document.addEventListener("touchcancel",this.end))}move(e){if(this.startRect)switch(e.preventDefault(),this.direction){case"left":this.moveLeft(e);break;case"right":this.moveRight(e);break;case"top":this.moveTop(e);break;case"bottom":this.moveBottom(e);break;case"leftTop":this.moveLeft(e),this.moveTop(e);break;case"rightTop":this.moveRight(e),this.moveTop(e);break;case"leftBottom":this.moveLeft(e),this.moveBottom(e);break;case"rightBottom":this.moveRight(e),this.moveBottom(e)}}moveLeft(e){if(!this.el||!this.startRect)return;const t=e instanceof MouseEvent?e.pageX:e.touches[0].pageX,s=this.startRect.x-t;this.el.style.width=this.startRect.width+s+"px"}moveRight(e){if(!this.el||!this.startRect)return;const t=(e instanceof MouseEvent?e.pageX:e.touches[0].pageX)-this.startRect.x;this.el.style.width=this.startRect.width+t+"px"}moveTop(e){if(!this.el||!this.startRect)return;const t=e instanceof MouseEvent?e.pageY:e.touches[0].pageY,s=this.startRect.y-t;this.el.style.height=this.startRect.height+s+"px"}moveBottom(e){if(!this.el||!this.startRect)return;const t=(e instanceof MouseEvent?e.pageY:e.touches[0].pageY)-this.startRect.y;this.el.style.height=this.startRect.height+t+"px"}end(){document.body.style.userSelect=this.userSelect,this.startRect=null,document.removeEventListener("mousemove",this.move),document.removeEventListener("mouseup",this.end),document.removeEventListener("touchmove",this.move),document.removeEventListener("touchend",this.end),document.removeEventListener("touchcancel",this.end)}dispose(){this.controlMap.clear(),this.end()}}class c{controlMap=new Map;controls;resizeEvents;constructor(){this.controls=new i,this.resizeEvents=new n}add(e,t="all"){const s=(0,r.sb)(e);if(!s)throw`${e}: the element is not found`;s.style.position="relative",this.controlMap.set(s,t),this.register()}register(){[...this.controlMap.entries()].forEach((([e,t])=>{this.controls.render(t);const{controlElements:s}=this.controls;let o;for(o in s){const t=o,r=s[t];r&&(this.resizeEvents.add(e,r,t),e.appendChild(r))}}))}dispose(){this.controlMap.clear(),this.controls.dispose(),this.resizeEvents.dispose()}}},7217:(e,t,s)=>{s.d(t,{XF:()=>o,sb:()=>r,tr:()=>i});const o=(e,t)=>Math.floor(Math.random()*(t-e))+e,r=e=>"string"==typeof e?document.querySelector(e):e,i=(e,t,s)=>new RegExp(`\\.${t}$`,s).test(e.name)}}]);